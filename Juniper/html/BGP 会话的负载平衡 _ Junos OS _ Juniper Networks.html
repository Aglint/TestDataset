<!DOCTYPE html>
<!-- saved from url=(0111)https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn"><head class="at-element-marker"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">.truste_caIcon_display {display: inline-block !important;}</style><style type="text/css">.truste_caIcon_display {display: inline-block !important;}</style><style type="text/css">@font-face {font-family: "Source Sans Pro";src: url(https://consent.trustarc.com/get?name=SourceSansPro-Regular.ttf) format("truetype"),url(https://consent.trustarc.com/get?name=SourceSansPro-Regular.woff) format("woff"),url(https://consent.trustarc.com/get?name=SourceSansPro-Regular.otf) format("opentype"),url(https://consent.trustarc.com/get?name=SourceSansPro-Regular.eot) format("embedded-opentype");}.truste_cursor_pointer {cursor: pointer;}.truste_border_none {border: none;}.truste_accessible_link {font-family: "Source Sans Pro", sans-serif;color: #1D4ED8;font-size: 14px;font-weight: 600;text-decoration: underline;}.truste_accessible_link:hover {color: #1D4ED8;text-decoration: none !important;}.truste_accessible_link:focus-visible {outline: none;border-radius: 4px;box-shadow: 0 0 0 1px #FFFFFF, 0 0 0 4px #3699F1;}</style>

<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">
<meta name="description" content="BGP 多路径允许您将多个内部 BGP 路径和多个外部 BGP 路径安装到转发表。选择多个路径使 BGP 能够跨多个链路对流量进行负载均衡。"><meta name="topicid" content="xi293833"><meta name="branchId" content="180"><meta name="jdoc-content-type" content="dita-topic"><meta name="parentFeature" content="[1209,1482]"><meta name="release" content="junos current"><script type="text/javascript" async="" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/be_ixf_js_sdk.js.下载"></script><script async="" id="demandbase_js_lib" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/wRPiG49f.min.js.下载"></script><script type="text/javascript" async="" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/elqCfg.min.js.下载"></script><script type="text/javascript" async="" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/be_ixf_js_sdk.js.下载"></script><script type="application/ld+json">{"@context": "http://schema.org","@type": "WebPage","name": "BGP 会话的负载平衡 | Junos OS | Juniper Networks","@id": "https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#WebPage","url": "https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html"}</script><title>BGP 会话的负载平衡 | Junos OS | Juniper Networks</title><link rel="preload" href="https://www.juniper.net/documentation/webstatic/fonts/swmaterialicon.woff" as="font" crossorigin="anonymous"><link href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/dita.4d211282515c1ac3df4849b0fc257c54.css" rel="stylesheet"><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/jquery.min.js.下载"></script><link href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/juniper-survey.css" rel="stylesheet" type="text/css"><!--IXF: JavaScript begin-->
<script class="trustecm" trackertype="functional">
    /*
    --LICENSE--
    Access to and use of BrightEdge Link Equity Manager is governed by the 
    Infrastructure Product Terms located at: www.brightedge.com/infrastructure-product-terms. 
    Customer acknowledges and agrees it has read, understands and agrees to be bound by the 
    Infrastructure Product Terms.
    */

    function startBESDK() {
        var be_sdk_options = {
            'api.endpoint': 'https://ixf2-api.bc0a.com',
            'sdk.account': 'f00000000063367',
            'requestparameters.caseinsensitive': true,
            'whitelist.parameter.list': 'ixf'
        };
        BEJSSDK.construct(be_sdk_options);
    }
    (function () {
        var sdkjs = document.createElement('script');
        sdkjs.type = 'text/javascript';
        sdkjs.async = true;
        sdkjs.src = document.location.protocol + '//cdn.bc0a.com/be_ixf_js_sdk.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(sdkjs, s);
        if (document.addEventListener) {
            sdkjs.addEventListener('load', startBESDK);
        } else {
            sdkjs.onreadystatechange = startBESDK;
        }
    })();
</script>
<!--IXF: JavaScript end-->
<script>
    function insertcanonical() {
        var canonicalexists = !!document.querySelector("link[rel='canonical']");
        if (!canonicalexists) {
            var tag = document.createElement("link");
            var pathname = location.pathname;
            var pattern = /\/$/;
            if(pattern.test(pathname)){
                pathname = pathname.replace(pattern,"/index.html");
            }
            // check if last character is slash else add / to be consistent
            var href = "https://www.juniper.net" + pathname;
            tag.setAttribute("rel", "canonical");
            tag.setAttribute("href", href);
            document.head.appendChild(tag);
        }
    }
    insertcanonical();
</script><link rel="canonical" href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html"><link rel="preload" as="script" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/manifest.a040d9173579fa4ebfed.js.下载"><link rel="preload" as="script" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/vendor.bb155d7fb4b6c28b5e8b.js.下载"><link rel="preload" as="script" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/dita.b2b38c730d788aeb9c91.js.下载"><link rel="preload" href="https://www.juniper.net/fonts/Lato-SemiboldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="https://www.juniper.net/fonts/Lato-Black.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-global-navigation.css" as="style"><link rel="preload" as="image" href="https://juniper-prod.scene7.com/is/image/junipernetworks/juniper_black-rgb-header"><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/satelliteLib-6d05b7c7a99e1cbbdcac4fcfe7005e6bee80a0e9.js.下载"></script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/EXfd2149c7fa254e26b06708c8243a8c57-libraryCode_source.min.js.下载" async=""></script><script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/__toc.js.下载" basepath="../../" id="tocscript"></script><style id="at-makers-style" class="at-flicker-control">
.mboxDefault {visibility: hidden;}
</style><style class="be:link_style">
.be-ix-link-block{background-color:#e7eaeb;position:relative}
.be-ix-link-block .be-related-link-container{padding:15px 33px;font-family:'lato',Arial,Helvetica,sans-serif}
.be-ix-link-block .be-related-link-container .be-label{margin:0;font-size:16px;font-weight:800;color:#666}
.be-ix-link-block .be-related-link-container .be-list{list-style:none;margin:0;padding:0;font-size:16px}
.be-ix-link-block .be-related-link-container .be-list .be-list-item{display:inline-block;margin-right:20px;font-size:16px}
.be-ix-link-block .be-related-link-container .be-list .be-list-item:last-child{margin-right:0}
.be-ix-link-block .be-related-link-container .be-list .be-list-item a{display:inline-block;color:#000;text-decoration:none;font-weight:700;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 200ms cubic-bezier(0.35,0,0.25,1),background-color 200ms cubic-bezier(0.35,0,0.25,1)}
.be-ix-link-block .be-related-link-container .be-list .be-list-item a:hover{color:#6b991a}
@media (max-width: 767px) {
.be-ix-link-block .be-related-link-container .be-label{width:100%;text-align:left}
.be-ix-link-block .be-related-link-container .be-list{display:block;width:100%}
.be-ix-link-block .be-related-link-container .be-list .be-list-item{display:block;text-align:left;width:100%;margin:16px 0}
.be-ix-link-block .be-related-link-container .be-list .be-list-item:last-child{margin:0}
}
@media (min-width: 768px) {
.be-ix-link-block .be-related-link-container{display:flex;max-width:1440px;margin:auto}
.be-ix-link-block .be-related-link-container .be-label{display:inline-block;margin-right:20px;white-space:nowrap;flex-basis:150px;flex-grow:0;flex-shrink:0}
.be-ix-link-block .be-related-link-container .be-list{width:auto}
}
</style><script type="be:comment" class="be:comment_script">
 /*
 be_ixf, sdk, gho
*/
</script>
<meta name="be:sdk" content="js_sdk_1.5.9">
<meta name="be:sdk_type" content="global">
<meta name="be:timer" content="188ms">
<meta name="be:orig_url" content="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html">
<meta name="be:norm_url" content="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html">
<meta name="be:capsule_url" content="https://ixf2-api.bc0a.com/api/ixf/1.0.0/get_capsule/f00000000063367/1281748279">
<meta name="be:api_dt" content="py_2025; pm_05; pd_12; ph_15; pmh_06; p_epoch:1747087602938">
<meta name="be:mod_dt" content="py_2025; pm_05; pd_12; ph_15; pmh_06; p_epoch:1747087602938">
<meta name="be:messages" content="true"><script type="be:comment" class="be:comment_script">
 /*
 be_sdkms_pub: pixel; pixel_1.0.0.0; headstr
be_sdkms_date_modified: p_tstr:Mon May 12 2025 15:06:42 GMT+0800 (中国标准时间); p_epoch:1747087602938

*/
</script><script type="text/javascript">
/*mboxHighlight+ (1of2) v1 ==> Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!='undefined')?window.ttMETA:[];window.ttMETA.push({'mbox':'target-global-mbox','campaign':'','experience':'','offer':''});window.ttMBX=function(x){var mbxList=[];for(i=0;i<ttMETA.length;i++){if(ttMETA[i].mbox==x.getName()){mbxList.push(ttMETA[i])}}return mbxList[x.getId()]}
</script><style type="text/css">.toasted{padding:0 20px}.toasted.rounded{border-radius:24px}.toasted .primary,.toasted.toasted-primary{border-radius:2px;min-height:38px;line-height:1.1em;background-color:#353535;padding:6px 20px;font-size:15px;font-weight:300;color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.toasted .primary.success,.toasted.toasted-primary.success{background:#4caf50}.toasted .primary.error,.toasted.toasted-primary.error{background:#f44336}.toasted .primary.info,.toasted.toasted-primary.info{background:#3f51b5}.toasted .primary .action,.toasted.toasted-primary .action{color:#a1c2fa}.toasted.bubble{border-radius:30px;min-height:38px;line-height:1.1em;background-color:#ff7043;padding:0 20px;font-size:15px;font-weight:300;color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.toasted.bubble.success{background:#4caf50}.toasted.bubble.error{background:#f44336}.toasted.bubble.info{background:#3f51b5}.toasted.bubble .action{color:#8e2b0c}.toasted.outline{border-radius:30px;min-height:38px;line-height:1.1em;background-color:#fff;border:1px solid #676767;padding:0 20px;font-size:15px;color:#676767;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);font-weight:700}.toasted.outline.success{color:#4caf50;border-color:#4caf50}.toasted.outline.error{color:#f44336;border-color:#f44336}.toasted.outline.info{color:#3f51b5;border-color:#3f51b5}.toasted.outline .action{color:#607d8b}.toasted-container{position:fixed;z-index:10000}.toasted-container,.toasted-container.full-width{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.toasted-container.full-width{max-width:86%;width:100%}.toasted-container.full-width.fit-to-screen{min-width:100%}.toasted-container.full-width.fit-to-screen .toasted:first-child{margin-top:0}.toasted-container.full-width.fit-to-screen.top-right{top:0;right:0}.toasted-container.full-width.fit-to-screen.top-left{top:0;left:0}.toasted-container.full-width.fit-to-screen.top-center{top:0;left:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.full-width.fit-to-screen.bottom-right{right:0;bottom:0}.toasted-container.full-width.fit-to-screen.bottom-left{left:0;bottom:0}.toasted-container.full-width.fit-to-screen.bottom-center{left:0;bottom:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.top-right{top:10%;right:7%}.toasted-container.top-left{top:10%;left:7%}.toasted-container.top-center{top:10%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.toasted-container.bottom-right{right:5%;bottom:7%}.toasted-container.bottom-left{left:5%;bottom:7%}.toasted-container.bottom-center{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:7%}.toasted-container.bottom-left .toasted,.toasted-container.top-left .toasted{float:left}.toasted-container.bottom-right .toasted,.toasted-container.top-right .toasted{float:right}.toasted-container .toasted{top:35px;width:auto;clear:both;margin-top:10px;position:relative;max-width:100%;height:auto;word-break:normal;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;box-sizing:inherit}.toasted-container .toasted .fa,.toasted-container .toasted .fab,.toasted-container .toasted .far,.toasted-container .toasted .fas,.toasted-container .toasted .material-icons,.toasted-container .toasted .mdi{margin-right:.5rem;margin-left:-.4rem}.toasted-container .toasted .fa.after,.toasted-container .toasted .fab.after,.toasted-container .toasted .far.after,.toasted-container .toasted .fas.after,.toasted-container .toasted .material-icons.after,.toasted-container .toasted .mdi.after{margin-left:.5rem;margin-right:-.4rem}.toasted-container .toasted .action{text-decoration:none;font-size:.8rem;padding:8px;margin:5px -7px 5px 7px;border-radius:3px;text-transform:uppercase;letter-spacing:.03em;font-weight:600;cursor:pointer}.toasted-container .toasted .action.icon{padding:4px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.toasted-container .toasted .action.icon .fa,.toasted-container .toasted .action.icon .material-icons,.toasted-container .toasted .action.icon .mdi{margin-right:0;margin-left:4px}.toasted-container .toasted .action.icon:hover{text-decoration:none}.toasted-container .toasted .action:hover{text-decoration:underline}@media only screen and (max-width:600px){.toasted-container{min-width:100%}.toasted-container .toasted:first-child{margin-top:0}.toasted-container.top-right{top:0;right:0}.toasted-container.top-left{top:0;left:0}.toasted-container.top-center{top:0;left:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.bottom-right{right:0;bottom:0}.toasted-container.bottom-left{left:0;bottom:0}.toasted-container.bottom-center{left:0;bottom:0;-webkit-transform:translateX(0);transform:translateX(0)}.toasted-container.bottom-center,.toasted-container.top-center{-ms-flex-align:stretch!important;align-items:stretch!important}.toasted-container.bottom-left .toasted,.toasted-container.bottom-right .toasted,.toasted-container.top-left .toasted,.toasted-container.top-right .toasted{float:none}.toasted-container .toasted{border-radius:0}}</style><style type="text/css">.hidden[data-v-d4e6e290] {
  visibility: hidden;
  display: none;
}

/*# sourceMappingURL=Teleport.vue.map */
/*# sourceURL=/Users/shodan/Projects/vue2-teleport/src/Teleport.vue */
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaG9kYW4vUHJvamVjdHMvdnVlMi10ZWxlcG9ydC9zcmMvVGVsZXBvcnQudnVlIiwiVGVsZXBvcnQudnVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXVKQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtBQ3RKQTs7QUFFQSx1Q0FBdUMiLCJmaWxlIjoiVGVsZXBvcnQudnVlIiwic291cmNlc0NvbnRlbnQiOlsiPHRlbXBsYXRlPlxuICA8ZGl2IDpjbGFzcz1cImNsYXNzZXNcIj5cbiAgICA8c2xvdC8+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3RlbGVwb3J0JyxcbiAgcHJvcHM6IHtcbiAgICB0bzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICB3aGVyZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2FmdGVyJyxcbiAgICB9LFxuICAgIGRpc2FibGVkOiBCb29sZWFuLFxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlczogW10sXG4gICAgICB3YWl0aW5nOiBmYWxzZSxcbiAgICAgIG9ic2VydmVyOiBudWxsLFxuICAgICAgcGFyZW50OiBudWxsLFxuICAgIH07XG4gIH0sXG4gIHdhdGNoOiB7XG4gICAgdG86ICdtYXliZU1vdmUnLFxuICAgIHdoZXJlOiAnbWF5YmVNb3ZlJyxcbiAgICBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICB0aGlzLnRlYXJkb3duT2JzZXJ2ZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYm9vdE9ic2VydmVyKCk7XG4gICAgICAgIHRoaXMubW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIG1vdW50ZWQoKSB7XG4gICAgLy8gU3RvcmUgYSByZWZlcmVuY2UgdG8gdGhlIG5vZGVzXG4gICAgdGhpcy5ub2RlcyA9IEFycmF5LmZyb20odGhpcy4kZWwuY2hpbGROb2Rlcyk7XG5cbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuYm9vdE9ic2VydmVyKCk7XG4gICAgfVxuXG4gICAgLy8gTW92ZSBzbG90IGNvbnRlbnQgdG8gdGFyZ2V0XG4gICAgdGhpcy5tYXliZU1vdmUoKTtcbiAgfSxcbiAgYmVmb3JlRGVzdHJveSgpIHtcbiAgICAvLyBNb3ZlIGJhY2tcbiAgICB0aGlzLmRpc2FibGUoKTtcblxuICAgIC8vIFN0b3Agb2JzZXJ2aW5nXG4gICAgdGhpcy50ZWFyZG93bk9ic2VydmVyKCk7XG4gIH0sXG4gIGNvbXB1dGVkOiB7XG4gICAgY2xhc3NlcygpIHtcbiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBbJ3RlbGVwb3J0ZXInXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFsndGVsZXBvcnRlcicsICdoaWRkZW4nXTtcbiAgICB9LFxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgbWF5YmVNb3ZlKCkge1xuICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMubW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbW92ZSgpIHtcbiAgICAgIHRoaXMud2FpdGluZyA9IGZhbHNlO1xuXG4gICAgICB0aGlzLnBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy50byk7XG5cbiAgICAgIGlmICghdGhpcy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG5cbiAgICAgICAgdGhpcy53YWl0aW5nID0gdHJ1ZTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLndoZXJlID09PSAnYmVmb3JlJykge1xuICAgICAgICB0aGlzLnBhcmVudC5wcmVwZW5kKHRoaXMuZ2V0RnJhZ21lbnQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmdldEZyYWdtZW50KCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZGlzYWJsZSgpIHtcbiAgICAgIHRoaXMuJGVsLmFwcGVuZENoaWxkKHRoaXMuZ2V0RnJhZ21lbnQoKSk7XG4gICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgfSxcbiAgICAvLyBVc2luZyBhIGZyYWdtZW50IGlzIGZhc3RlciBiZWNhdXNlIGl0J2xsIHRyaWdnZXIgb25seSBhIHNpbmdsZSByZWZsb3dcbiAgICAvLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50RnJhZ21lbnRcbiAgICBnZXRGcmFnbWVudCgpIHtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICB0aGlzLm5vZGVzLmZvckVhY2gobm9kZSA9PiBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKSk7XG5cbiAgICAgIHJldHVybiBmcmFnbWVudDtcbiAgICB9LFxuICAgIG9uTXV0YXRpb25zKG11dGF0aW9ucykge1xuICAgICAgLy8gTWFrZXMgc3VyZSB0aGUgbW92ZSBvcGVyYXRpb24gaXMgb25seSBkb25lIG9uY2VcbiAgICAgIGxldCBzaG91bGRNb3ZlID0gZmFsc2U7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG11dGF0aW9uID0gbXV0YXRpb25zW2ldO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZEFkZGVkTm9kZXMgPSBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpLmZpbHRlcihub2RlID0+ICF0aGlzLm5vZGVzLmluY2x1ZGVzKG5vZGUpKTtcblxuICAgICAgICBpZiAoQXJyYXkuZnJvbShtdXRhdGlvbi5yZW1vdmVkTm9kZXMpLmluY2x1ZGVzKHRoaXMucGFyZW50KSkge1xuICAgICAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgICAgICAgIHRoaXMud2FpdGluZyA9ICF0aGlzLmRpc2FibGVkO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMud2FpdGluZyAmJiBmaWx0ZXJlZEFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNob3VsZE1vdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzaG91bGRNb3ZlKSB7XG4gICAgICAgIHRoaXMubW92ZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYm9vdE9ic2VydmVyKCkge1xuICAgICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHRoaXMub25NdXRhdGlvbnMobXV0YXRpb25zKSk7XG5cbiAgICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgYXR0cmlidXRlczogZmFsc2UsXG4gICAgICAgIGNoYXJhY3RlckRhdGE6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB0ZWFyZG93bk9ic2VydmVyKCkge1xuICAgICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59O1xuPC9zY3JpcHQ+XG5cbjxzdHlsZSBzY29wZWQgbGFuZz1cInNjc3NcIj5cbi5oaWRkZW4ge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIGRpc3BsYXk6IG5vbmU7XG59XG48L3N0eWxlPlxuIiwiLmhpZGRlbiB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLyojIHNvdXJjZU1hcHBpbmdVUkw9VGVsZXBvcnQudnVlLm1hcCAqLyJdfQ== */</style><link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/feedback-widget.css"><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/feedback-widget.js.下载"></script><link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/doc-askai-bundle.css"><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/doc-askai-bundle.js.下载"></script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/responsive_image.js.下载"></script><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..24,400..600,0..1,0&amp;icon_names=arrow_drop_down,arrow_drop_up,chat_add_on,close,code_blocks,content_copy,data_info_alert,delete_history,feedback,filter_alt,flag,horizontal_rule,info,keyboard_backspace,link,lock,person,progress_activity,radio_button_unchecked,restart_alt,send,thumb_down,thumb_up,trending_flat"><script type="text/javascript" async="" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/f.txt"></script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/RC2950651f62ef416783ad5b44afec1390-source.min.js.下载" async=""></script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-global-navigation.js.下载"></script><script type="text/javascript" id="sjScript_-2065384650" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/juniper_black-rgb-header"></script><script type="text/javascript" id="sjScript_-1572593723" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/solution-campus-branch"></script><script type="text/javascript" id="sjScript_1762598972" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AdobeStock_321999244-nav"></script><script type="text/javascript" id="sjScript_919888482" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/cloud-metro-5"></script><script type="text/javascript" id="sjScript_-1160412454" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/hero-enterprise-ai-native-routing-2"></script><script type="text/javascript" id="sjScript_-1636708905" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AdobeStock_635499703-1280x710"></script><script type="text/javascript" id="sjScript_918728167" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/adobestock-629918871-edit"></script><script type="text/javascript" id="sjScript_-242984617" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AdobeStock_2796391551-1280x710"></script><script type="text/javascript" id="sjScript_-1764411940" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/acx7020-router"></script><script type="text/javascript" id="sjScript_-1541680261" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/EX4000-1280x800-product-navigation"></script><script type="text/javascript" id="sjScript_-929171166" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/The Q and AI"></script><script type="text/javascript" id="sjScript_223015566" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AICare 16x10 GettyImages-1128200464"></script><script type="text/javascript" id="sjScript_1208773758" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AIDC 16x10 GettyImages-1059910988"></script><script type="text/javascript" id="sjScript_2130098127" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AdobeStock_60596468"></script><script type="text/javascript" id="sjScript_-247327513" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/attend-our-customer-speaking-session"></script><script type="text/javascript" id="sjScript_892338441" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/ringing-of-the-bell-nav"></script><script type="text/javascript" id="sjScript_2054215712" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/AI-native-now-nav"></script><script type="text/javascript" id="sjScript_-1106359898" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/ainn-san-diego-event-nav-promo"></script><script type="text/javascript" id="sjScript_-624089050" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/glowing"></script><script type="text/javascript" id="sjScript_289747162" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/carousel-ai-native-now-event-foreground-nav"></script><script type="text/javascript" id="sjScript_-1510807543" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/past-summit-speaker-nav"></script><script type="text/javascript" id="sjScript_-138846059" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/Bob-Friday-speaking"></script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/api.js.下载"></script><link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/pf-nav.css"><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/pf-nav.js.下载"></script><script type="text/javascript" src="https://js.hcaptcha.com/1/api.js?render=explicit" defer=""></script></head>
<body id="load-balancing-for-a-bgp-session" style="" class="newheadtest">
<!--[if lte IE 9]>
	<div class="message-warning"> You are using unsupported version of Internet Explorer. Please upgrade your browser to latest version.</div>
<![endif]-->
<!-- Start survey script MaritzCX -->
<script type="text/javascript" class="trustecm" trackertype="functional" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/MCX_Juniper2.js.下载" async=""></script>
<script type="text/javascript" class="trustecm" trackertype="functional" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/mcxSiteIntercept-1.9.1.js.下载" async=""></script>
<div id="mcxInvitationModal">
	<div id="mcxFloating" style="font-family: &quot;Noto Sans&quot;, sans-serif;">
		<div id="mcxInfo2">
			<div id="mcxNoButton">
				<button id="mcxNo" onclick="McxSiteInterceptOnExit.declineSurvey();mcxDisplay();">X</button>
			</div>
			<div id="mcxLogos">
				<img src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/juniper_logo.jpg">
			</div>
			<div class="clearfix">
				<p id="mcxHeading" style="font-family: &quot;Noto Sans&quot;, sans-serif;">帮助我们改善您的体验。</p>
				<p id="mcxText1" style="font-family: &quot;Noto Sans&quot;, sans-serif;">让我们了解您的想法。</p>
				<p id="mcxText2" style="font-family: &quot;Noto Sans&quot;, sans-serif;">您是否能抽出两分钟的时间完成一份问卷调查？</p>
			</div>
			<div id="mcxYesButton" onclick="McxSiteInterceptOnExit.acceptSurvey();mcxDisplay();" class="clearfix">
				<button id="mcxYes" style="font-family: &quot;Noto Sans&quot;, sans-serif;">是</button>
			</div>
			<div>
				<button id="noLater" onclick="McxSiteInterceptOnExit.declineSurvey();mcxDisplay();" style="font-family: &quot;Noto Sans&quot;, sans-serif;">稍后</button>
			</div>
		</div>
	</div>
</div>
<script>
	window.addEventListener('message', function (e) {
		var key = e.message ? 'message' : 'data';
		var data = e[key];
		if (data === 'MaritzCX Survey Close') {
			McxSiteInterceptOnExit.closeSurveyModal(); //close iframe
		}
	}, false);
</script>
<!-- End survey script MaritzCX --><script type="application/ld+json">
  {
"@context": "http://schema.org",
"@type": "Organization",
"name": "Juniper Networks",
"url": "https://www.juniper.net/us/en/",
"logo": "https://www.juniper.net/assets/svg/jnpr-logo.svg",
"sameAs": ["https://en.wikipedia.org/wiki/Juniper_Networks",
  "https://www.facebook.com/JuniperNetworks/",
  "https://twitter.com/JuniperNetworks/",
  "https://www.linkedin.com/company/juniper-networks",
  "https://www.youtube.com/junipernetworks",
  "https://www.instagram.com/junipernetworks/"
  ]
}
</script>

<script type="application/ld+json">
{
"@context": "http://schema.org",
"@id": "https://www.juniper.net/us/en/#website",
"@type": "WebSite",
"url": "https://www.juniper.net/us/en/",
"name": "Juniper Networks",
"alternateName": "Juniper, Juniper Networks Inc.",
"publisher": {
  "@type": "Corporation",
  "name": "Juniper Networks"
  }
}
</script><div id="app"><div><div class="header-wrap os-junos-os"><section data-v-0fe86960="" class="tl-announcement"><div data-v-0fe86960="" class="tl-wrap"><p data-v-0fe86960=""><strong data-v-0fe86960="" style="font-weight: 700;">Announcement:</strong>
      Try the
      <a data-v-0fe86960="">Ask AI chatbot</a>
      for answers to your technical questions about Juniper products and
      solutions.
    </p> <!----></div> <i data-v-0fe86960="" class="swmaterialicon close">
    close
  </i></section> <div class="header-static">


    <!--****************************************************************************
  * ADOBE CONFIDENTIAL
  * __________________
  *
  * Copyright 2016 Adobe Systems Incorporated
  * All Rights Reserved.
  *
  * NOTICE:  All information contained herein is, and remains
  * the property of Adobe Systems Incorporated and its suppliers,
  * if any.  The intellectual and technical concepts contained
  * herein are proprietary to Adobe Systems Incorporated and its
  * suppliers and are protected by trade secret or copyright law.
  * Dissemination of this information or reproduction of this material
  * is strictly forbidden unless prior written permission is obtained
  * from Adobe Systems Incorporated.
  ***************************************************************************-->

<meta name="viewport" content="width=device-width, initial-scale=1">      
<title>header-navigation</title>


<script defer="defer" type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/rum-standalone.js.下载"></script>
<script>
    window.jnprData = window.jnprData || {};
</script>




    
    <!-- <script src="https://www.juniper.net/etc.clientlibs/clientlibs/granite/jquery.min.js"></script> -->
    <link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-font.css" type="text/css"> 
    <link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-global-navigation.css" type="text/css"> 







<!--<sly data-sly-call=""/>-->




<div class="breakpoint-check d-none">
    <span class="xs d-block d-sm-inline"></span>
    <span class="sm d-sm-block d-md-inline"></span>
    <span class="md d-md-block d-lg-inline"></span>
    <span class="lg d-lg-block d-xl-inline"></span>
    <span class="xl d-xl-block"></span>
</div>

    


<div class="analytics__container">

    
    
    
    <div id="container-c8df40c96b" class="cmp-container">
        
        <div class="header-navigation"><!-- SDI include (path: /content/experience-fragments/juniper-fragments/language-masters/en_us/navigation/us-new-navigation-design/header-navigation/master/_jcr_content/root/header_navigation.hide-utility-header-hide-news-banner.cacheit.html, resourceType: juniper/components/global-navigation/header-navigation) -->
<header data-mod="header-navigation">
  
  
    
    
  



  
  <!-- Primary Header wrapper -->
  <nav class="global-primary-header-wrapper" data-mod="primary-header">

    <!-- Primary Header Logo-->
    <div class="juniper-logo">
      <a href="https://www.juniper.net/us/en.html" target="_self">
        
        <img data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/juniper_black-rgb-header?network=on" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/juniper_black-rgb-header(1)" alt="Juniper Networks logo in black font" title="Juniper Networks logo in black font" class="js-navbar-logo preload-responsive-image" data-breakpoints="160,310,450,700" style="width: 100%;">
      </a>
    </div>

    <!-- Primary Header -->
    <ul class="primary-header-left">
      <li class="header-item" data-menu="menu0" tabindex="1">
        <a data-navid="Solutions" target="_self" role="button" tabindex="0">
        Solutions
        <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-down"></span>
          <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-up"></span>
        </a>
      </li>
    
      <li class="header-item" data-menu="menu1" tabindex="1">
        <a data-navid="Products" target="_self" role="button" tabindex="0">
        Products
        <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-down"></span>
          <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-up"></span>
        </a>
      </li>
    
      <li class="header-item" data-menu="menu2" tabindex="1">
        <a data-navid="Services" target="_self" role="button" tabindex="0">
        Services
        <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-down"></span>
          <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-up"></span>
        </a>
      </li>
    
      <li class="header-item" data-menu="menu3" tabindex="1">
        <a data-navid="Partners" target="_self" role="button" tabindex="0">
        Partners
        <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-down"></span>
          <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-up"></span>
        </a>
      </li>
    
      <li class="header-item" data-menu="menu4" tabindex="1">
        <a data-navid="Support and Documentation" target="_self" role="button" tabindex="0">
        Support and Documentation
        <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-down"></span>
          <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-up"></span>
        </a>
      </li>
    
      <li class="header-item" data-menu="menu5" tabindex="1">
        <a data-navid="Learn" target="_self" role="button" tabindex="0">
        Learn
        <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-down"></span>
          <span class="juniper-svgicon jn-chevron jn-chevron-sm jn-chevron-up"></span>
        </a>
      </li>
    </ul>

    <!-- Primary Header Search -->
    <ul class="primary-header-right" data-mod="navigation-search" data-search-results-path="/content/juniper/us/en/search.html" data-coveo-suggest-endpoint="https://junipernetworkswebsitecwcpnoiw.org.coveo.com/rest/search/v2/querySuggest" data-public-search-key="xxcafed5b7-93fa-4e54-be8b-83d23d390488">
      <div class="navigation__search js-search-nav">
        <div class="navigation__search__container js-megamenu" style="left: 0px;">
          <div class="close js-close">
            <span class="juniper-icon icon-close"></span>
          </div>
          <div class="navigation__search__form">
            <div class="navigation__search__form__select__container">
              <select class="navigation__search__form__select__container__section-filters custom-select" name="sectionFilters" id="sectionFilters">
                <option value="" selected="">All</option>
                
                  <option value="company">Company</option>
                
                  <option value="www_juniper,www_quick">Products And Solutions</option>
                
                  <option value="support1,kb_sfdc-kb,kb_sfdc-jsa,support,kb_sfdc-tsb">Support</option>
                
                  <option value="tech_docs,tl_web">Documentation</option>
                
                  <option value="learning_portal">Training</option>
                
                  <option value="blogs">Blogs</option>
                
              </select>
            <div class="select-selected-search"><span class="juniper-icon icon-chevron-down"></span><span class="text">All</span></div><div class="select-items select-hide"><div data-value="">All</div><div data-value="company">Company</div><div data-value="www_juniper,www_quick">Products And Solutions</div><div data-value="support1,kb_sfdc-kb,kb_sfdc-jsa,support,kb_sfdc-tsb">Support</div><div data-value="tech_docs,tl_web">Documentation</div><div data-value="learning_portal">Training</div><div data-value="blogs">Blogs</div></div></div>

            <div class="navigation__search__form__input__container">
              <input class="navigation__search__form__input js-search-input" type="text" placeholder="Search juniper.net" pattern=".{1,}" required="required">
              <div class="errorMessage" style="display: none;">*Search Entry is Required</div><div class="suggestions-wrapper"><ul class="suggestions" style="display: none;"></ul></div>
              <span class="navigation__search__form__search-icon juniper-icon icon-search js-search-icon">
                <span class="juniper-icon navigation__search__form_js-search-clear-icon icon-close"></span>
              </span>
            </div>
          </div>
        </div>
      </div>
      <li>
        <button class="navigation__search__desktop js-search-btn" aria-label="Search">
          <span class="juniper-icon icon-search"></span>
          <span class="juniper-icon icon-close js-icon-close"></span>
        </button>
      </li>
      <li class="mobile">
        <button class="navigation__search__mobile js-search-btn-mobile" aria-label="Search">
          <span class="juniper-icon icon-search js-icon-search-mobile"></span>
          <span class="juniper-icon icon-close js-icon-close"></span>
        </button>
      </li>
      
      
      <li class="desktop button"><a href="https://www.juniper.net/us/en/trials-demos.html" target="_self" class="juniper-btn-v2 juniper-btn--green" data-navid="Trials and Demos">Trials and Demos</a></li>
      <li class="mobile"><a class="mobile-header" href="javascript:void(0);"><span class="juniper-icon icon-menu-2"></span><span class="juniper-icon icon-close"></span></a></li>
    </ul>
  </nav>

  <!-- Mega Menus Desktop -->
    <div class="desktop-mega-menu is-visible">
      
        <div class="mmt-desktop" data-mod="menu-tab-layout">
          <div class="mega-menu mmt-desktop__container " id="menu0">
            <div class="mmt-desktop__tab-list">
              <p class="mmt-desktop__tab-list-heading">Solutions</p>
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item active" data-tab="tabs-layout-2757105271" data-navid="Solutions &gt; Featured solutions">Featured solutions</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-e64b5beb2d" data-navid="Solutions &gt; AI">AI</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-fb8899530a" data-navid="Solutions &gt; Campus and branch">Campus and branch</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-e8320e93a3" data-navid="Solutions &gt; Data center">Data center</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-064e0175bf" data-navid="Solutions &gt; WAN">WAN</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-114963002e" data-navid="Solutions &gt; Security">Security</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-5367090ea7" data-navid="Solutions &gt; Service provider">Service provider</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-9c876c8f52" data-navid="Solutions &gt; Cloud operator">Cloud operator</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-2d5ed7e068" data-navid="Solutions &gt; Industries">Industries</a>
            </div>
            
            <div class="overlay mmt-desktop__columns">
              <div class="xfpage page basicpage">


    
    
    
    <div id="container-b9ebd8d658" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-2757105271" data-tab-label="tabs-layout-2757105271">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/solution-campus-branch?fmt=png8-alpha&amp;network=on" title="Campus and Branch" alt="Campus and Branch" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Welcome to the NOW Way to Wi-Fi</p>
            <div>
                <small><p>Take your networking performance to new heights with a modern, cloud-native, AI-Native architecture. Only Juniper can help you unleash the full potential of Wi-Fi 7 with our AI-Native platform for innovation.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/dm/the-now-way-to-wifi.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Featured solutions &gt; Prepare for liftoff">
            Prepare for liftoff<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_321999244-nav?network=on" title="Business intelligence analyst dashboard on virtual screen. Big data Graphs Charts." alt="Business intelligence analyst dashboard on virtual screen. Big data Graphs Charts." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI Data Center Networking</p>
            <div>
                <small><p>Juniper’s AI data center solution is a quick way to deploy high performing AI training and inference networks that are the most flexible to design and easiest to manage with limited IT resources.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Featured solutions &gt; Find out more">
            Find out more<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/hero-enterprise-ai-native-routing-2?fmt=png8-alpha&amp;network=on" title="Enterprise AI-Native Networking" alt="Enterprise AI-Native Networking" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Enterprise AI‑Native Routing</p>
            <div>
                <small><p>Juniper's Ai-Native routing solution delivers robust 400GbE and 800GbE&nbsp;capabilities for unmatched performance, reliability, and sustainability at scale.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Featured solutions &gt; Explore enterprise routing">
            Explore enterprise routing<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-e64b5beb2d" data-tab-label="tabs-layout-e64b5beb2d">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; AI &gt; AI for networking">

      
        AI for networking
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/artificial-intelligence-for-it-operations-aiops.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; AIOps">
              AIOps
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wired-access.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Wired access">
              Wired access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wireless-access.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Wireless access">
              Wireless access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; SD-WAN">
              SD-WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Enterprise routing">
              Enterprise routing
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/data-center-assurance.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Secure automated data center">
              Secure automated data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/dm/explainable-ai.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Explainable AI">
              Explainable AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; AI &gt; Networking for AI">

      
        Networking for AI
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Networking for AI &gt; AI data center networking">
              AI data center networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure/ops4ai-lab.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Networking for AI &gt; Ops4AI">
              Ops4AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; AI &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/secure-ai-native-edge.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Security &gt; Secure AI-Native edge">
              Secure AI-Native edge
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Security &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/threat-detection-and-mitigation.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Security &gt; Security and threat services">
              Security and threat services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-fb8899530a" data-tab-label="tabs-layout-fb8899530a">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch">

      
        Campus and branch
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/artificial-intelligence-for-it-operations-aiops.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; AI for IT operations (AIOps)">
              AI for IT operations (AIOps)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wireless-access.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Wireless access">
              Wireless access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wired-access.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Wired access">
              Wired access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; SD-WAN">
              SD-WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/secure-ai-native-edge/sase.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Secure Access Service Edge (SASE)">
              Secure Access Service Edge (SASE)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/indoor-location.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Indoor location services">
              Indoor location services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/campus-and-branch.html" rel="noopener" data-navid="Solutions &gt; Campus and branch   &gt; Campus and branch overview">
              Campus and branch overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-e8320e93a3" data-tab-label="tabs-layout-e8320e93a3">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Data center &gt; AI data center">

      
        AI data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; AI data center networking">
              AI data center networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure/ops4ai-lab.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; Ops for AI">
              Ops for AI
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ip-networking-storage.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; IP storage networking">
              IP storage networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/data-center.html" rel="noopener" data-navid="Solutions &gt; Data center   &gt; Data center overview">
              Data center overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/documentation/validated-designs/us/en/data-center/" rel="noopener" data-navid="Solutions &gt; Data center   &gt; Juniper data center validated designs">
              Juniper data center validated designs
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/solutions/data-center.html" target="_self" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center" tabindex="-1">
        Automated secure data center
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/network-fabrics.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center &gt; Automated data center fabrics">
              Automated data center fabrics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/cloud-native.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center &gt; Cloud-native data center">
              Cloud-native data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Data center &gt; Zero Trust data center">

      
        Zero Trust data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/zero-trust-data-center.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Zero Trust data center &gt; Zero Trust data center">
              Zero Trust data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Data center &gt; Data center interconnect">

      
        Data center interconnect
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Data center interconnect &gt; Data center interconnect">
              Data center interconnect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/cloud-metro-5?network=on" title="Zero trust security" alt="Zero trust security" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Ops4AI Lab</p>
            <div>
                <small><p>Visit our lab in Sunnyvale, CA and see our AI data center solution for yourself. You can try out your own model’s functionality and performance, too.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure/ops4ai-lab.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Data center &gt; Visit the lab">
            Visit the lab<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container " id="accordion-tabs-layout-064e0175bf" data-tab-label="tabs-layout-064e0175bf">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; WAN &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan.html" rel="noopener" data-navid="Solutions &gt; WAN &gt; WAN &gt; SD-WAN">
              SD-WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" rel="noopener" data-navid="Solutions &gt; WAN &gt; WAN &gt; Enterprise routing">
              Enterprise routing
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; WAN &gt; WAN &gt; Data center interconnect">
              Data center interconnect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/wan.html" rel="noopener" data-navid="Solutions &gt; WAN   &gt; WAN overview">
              WAN overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/hero-enterprise-ai-native-routing-2?fmt=png8-alpha&amp;network=on" title="Enterprise AI-Native Networking" alt="Enterprise AI-Native Networking" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Enterprise AI‑Native Routing</p>
            <div>
                <small><p>Juniper's Ai-Native routing solution delivers robust 400GbE and 800GbE&nbsp;capabilities for unmatched performance, reliability, and sustainability at scale.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; WAN &gt; Explore enterprise routing">
            Explore enterprise routing<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container " id="accordion-tabs-layout-114963002e" data-tab-label="tabs-layout-114963002e">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Security &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/secure-ai-native-edge.html" rel="noopener" data-navid="Solutions &gt; Security &gt; Security &gt; Secure AI-Native edge">
              Secure AI-Native edge
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/zero-trust-data-center.html" rel="noopener" data-navid="Solutions &gt; Security &gt; Security &gt; Zero Trust data center">
              Zero Trust data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/security.html" rel="noopener" data-navid="Solutions &gt; Security   &gt; Security overview">
              Security overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-5367090ea7" data-tab-label="tabs-layout-5367090ea7">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Service provider &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/cloud-and-service-provider-wan.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Cloud and service provider WAN">
              Cloud and service provider WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/automation/paragon.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; WAN automation">
              WAN automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/ip-transport-solution/metro.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Metro access and aggregation">
              Metro access and aggregation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/ip-transport-solution.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Core">
              Core
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/ip-transport-solution.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Multi-service edge">
              Multi-service edge
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Data center interconnect ">
              Data center interconnect 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/converged-optical-routing-architecture-cora.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Converged optical routing architecture (CORA)">
              Converged optical routing architecture (CORA)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/pon.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Passive optical networking (PON)">
              Passive optical networking (PON)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/5g-networking.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; 5G networking">
              5G networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/5g-networking/open-ran.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Open RAN">
              Open RAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/service-provider-security.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Service provider security">
              Service provider security
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Service provider &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; Data center networks">
              Data center networks
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/telco-cloud.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; Telco and edge cloud">
              Telco and edge cloud
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; Data center interconnect">
              Data center interconnect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Service provider &gt; Managed services">

      
        Managed services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/managed-services.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Managed services &gt; Managed services">
              Managed services
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan/managed-sd-wan.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Managed services &gt; Managed SD-WAN">
              Managed SD-WAN
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/service-provider.html" rel="noopener" data-navid="Solutions &gt; Service provider   &gt; Service provider overview">
              Service provider overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-9c876c8f52" data-tab-label="tabs-layout-9c876c8f52">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Cloud operator &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; Data center networking">
              Data center networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; AI data center">
              AI data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/zero-trust-data-center.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; Zero Trust data center">
              Zero Trust data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ip-networking-storage.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; IP storage networking">
              IP storage networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/cloud-native.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; Cloud-native data center">
              Cloud-native data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Cloud operator &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; Data center interconnect ">
              Data center interconnect 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/automation/paragon.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; WAN automation">
              WAN automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/cloud-routing.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; Cloud routing">
              Cloud routing
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/converged-optical-routing-architecture-cora.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; Converged optical routing architecture (CORA)">
              Converged optical routing architecture (CORA)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/cloud-operator.html" rel="noopener" data-navid="Solutions &gt; Cloud operator   &gt; Cloud operator overview">
              Cloud operator overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/documentation/validated-designs/" rel="noopener" data-navid="Solutions &gt; Cloud operator   &gt; Cloud operator validated designs">
              Cloud operator validated designs
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-2d5ed7e068" data-tab-label="tabs-layout-2d5ed7e068">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/solutions/industries.html" target="_self" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries" tabindex="-1">
        Industries
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/government.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Government (federal, state and local)">
              Government (federal, state and local)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/education.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Education ">
              Education 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/healthcare-and-life-sciences.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Healthcare">
              Healthcare
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/retail.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Retail">
              Retail
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/energy-utilities.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Energy and utilities">
              Energy and utilities
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/media-and-entertainment.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Media and entertainment">
              Media and entertainment
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/financial-services.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Financial services">
              Financial services
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/hospitality.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Hospitality">
              Hospitality
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_635499703-1280x710?network=on" title="Higher Education" alt="Higher Education" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Shaping Student Experiences: The NOW Way to Build Higher Education Networks</p>
            <div>
                <small><p>Juniper Networks CIO Sharon Mandell and a virtual summit of C-level IT leaders from prestigious institutions discuss ongoing efforts to support digital transformation on campus.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/webinars/2025/shaping-student-experiences-the-now-way-to-build-higher-education-networks.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Industries &gt; Watch now">
            Watch now<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/adobestock-629918871-edit?network=on" title="adobestock-629918871-edit" alt="adobestock-629918871-edit" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI-Native Healthcare Networking</p>
            <div>
                <small><p>Join Sudheer Matta, SVP Product Management at Juniper Networks, Philip Bradley, Digital Health Strategist at HIMSS Analytics, and other healthcare IT leaders as they discuss the challenges to deliver quality patient care and the role of AI-native networking.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/webinars/2025/ai-native-healthcare-networking-strengthen-operations-scale-smarter.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Industries &gt; Register for the summit">
            Register for the summit<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_2796391551-1280x710?network=on" title="Retail" alt="Retail" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">The Future of In-Store Technologies</p>
            <div>
                <small><p>Retail experts Kevin McCartan, Senior IT Service Delivery Engineer at Musgrave; Jack Stratten of Insider Trends; and Christian Gilby, Senior Director of Product Marketing at Juniper Networks, discuss customer experiences.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/webinars/2025/the-future-of-in-store-technologies.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Industries &gt; See the future">
            See the future<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      
    </div>
  
  </div>

        
    </div>

</div>

            </div>

            <div class="utility-belt">
              <ul class="utility-belt__nav">
                <li>
                  <a href="https://www.juniper.net/us/en/mist-ai-native-networking-platform.html" class="utility-belt__nav-link" data-navid="Solutions &gt; Mist AI-Native Networking Platform" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-database"></span>
                      Mist AI-Native Networking Platform</span></a>
                </li>
              
                <li>
                  <a href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration/juniper-validated-designs.html" class="utility-belt__nav-link" data-navid="Solutions &gt; Juniper Validated Designs (JVD)" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-move"></span>
                      Juniper Validated Designs (JVD)</span></a>
                </li>
              
                <li>
                  <a href="https://www.juniper.net/us/en/solutions.html" class="utility-belt__nav-link" data-navid="Solutions &gt; See all solutions" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-award"></span>
                      See all solutions</span></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      
        <div class="mmt-desktop" data-mod="menu-tab-layout">
          <div class="mega-menu mmt-desktop__container " id="menu1">
            <div class="mmt-desktop__tab-list">
              <p class="mmt-desktop__tab-list-heading">Products</p>
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item active" data-tab="tabs-layout-9849eb43c7" data-navid="Products &gt; Wireless access">Wireless access</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-0a874c0916" data-navid="Products &gt; Wired access">Wired access</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-71e9367a88" data-navid="Products &gt; SD-WAN / SASE">SD-WAN / SASE</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-622bf6339d" data-navid="Products &gt; Routing and switching">Routing and switching</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-82998afcfe" data-navid="Products &gt; Security">Security</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-f64e7adf2d" data-navid="Products &gt; Marvis AI">Marvis AI</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-931be874cb" data-navid="Products &gt; Management software">Management software</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-18cfc30939" data-navid="Products &gt; Network operating system">Network operating system</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-0f528c2383" data-navid="Products &gt; Blueprint for AI-Native Acceleration">Blueprint for AI-Native Acceleration</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-b807f6e6bd" data-navid="Products &gt; Optics">Optics</a>
            </div>
            
            <div class="overlay mmt-desktop__columns">
              <div class="xfpage page basicpage">


    
    
    
    <div id="container-ca98828a8d" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-9849eb43c7" data-tab-label="tabs-layout-9849eb43c7">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/access-points.html" target="_self" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points" tabindex="-1">
        Wireless access points
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points.html?filters=wi-fi-standard:wi-fi-7-(802-11be)" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; Wi-Fi 7">
              Wi-Fi 7
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points.html?filters=wi-fi-standard:wi-fi-6-(-802-11ax)" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; Wi-Fi 6E and Wi-Fi 6">
              Wi-Fi 6E and Wi-Fi 6
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points/bt11-access-point.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; Bluetooth LE">
              Bluetooth LE
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points/edge.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; On-prem Edge">
              On-prem Edge
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Wireless access &gt; Services">

      
        Services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wi-fi-assurance.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Wireless Assurance (Wi-Fi)">
              Wireless Assurance (Wi-Fi)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/asset-visibility.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Asset Visibility (Indoor Location)">
              Asset Visibility (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/user-engagement.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; User Engagement (Indoor Location)">
              User Engagement (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-0a874c0916" data-tab-label="tabs-layout-0a874c0916">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Wired access &gt; Switches">

      
        Switches
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/switches/ex-series.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Switches &gt; EX enterprise">
              EX enterprise
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Wired access &gt; Services">

      
        Services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wired-assurance.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Wired Assurance">
              Wired Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-71e9367a88" data-tab-label="tabs-layout-71e9367a88">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; SD-WAN / SASE &gt; SD-WAN">

      
        SD-WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/session-smart-router.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; SD-WAN &gt; Session Smart Routers">
              Session Smart Routers
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/srx-series.html?filters=location:branch" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; SD-WAN &gt; Next-generation firewalls">
              Next-generation firewalls
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; SD-WAN / SASE &gt; Edge security">

      
        Edge security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/secure-edge.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Edge security &gt; Secure Services Edge (SSE)">
              Secure Services Edge (SSE)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/juniper-secure-connect.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Edge security &gt; Secure Connect">
              Secure Connect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; SD-WAN / SASE &gt; Services">

      
        Services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; WAN Assurance">
              WAN Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; Security Assurance">
              Security Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-622bf6339d" data-tab-label="tabs-layout-622bf6339d">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/routers.html" target="_self" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers" tabindex="-1">
        Routers
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/acx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers &gt; ACX access and aggregation">
              ACX access and aggregation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/mx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers &gt; MX multi-service">
              MX multi-service
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/ptx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers &gt; PTX packet transport">
              PTX packet transport
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/switches.html" target="_self" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Switches" tabindex="-1">
        Switches
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/switches/ex-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Switches &gt; EX enterprise">
              EX enterprise
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/switches/qfx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Switches &gt; QFX data center">
              QFX data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Routing and switching &gt; Operations">

      
        Operations
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Routing and switching &gt; Data center automation">

      
        Data center automation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Data center automation &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/data-center-assurance.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Data center automation &gt; Data Center Assurance">
              Data Center Assurance
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Routing and switching &gt; WAN automation">

      
        WAN automation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/routing-assurance.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Edge Routing Assurance">
              Edge Routing Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-automation.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Automation">
              Paragon Automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-active-assurance.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Active Assurance">
              Paragon Active Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-planner.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Planner">
              Paragon Planner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-insights.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Insights">
              Paragon Insights
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-pathfinder.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Pathfinder">
              Paragon Pathfinder
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/ran-intelligent-controller.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; RAN Intelligent Controller">
              RAN Intelligent Controller
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/acx7020-router?network=on" title="ACX7020 router" alt="ACX7020 router" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Juniper ACX7020 Cloud Metro Access Router</p>
            <div>
                <small><p>Legacy networks simply cannot meet the demands of today’s rapidly evolving metro landscape. Unlock a new generation of highly scalable architectures and automated operations with the Juniper ACX7020.&nbsp;</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/products/routers/acx-series/acx7000-family-cloud-metro-routers/acx7000-line/acx7020.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Products &gt; Routing and switching &gt; Learn more">
            Learn more<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/EX4000-1280x800-product-navigation?network=on" title="EX4000 Ethernet Switch" alt="EX4000 Ethernet Switch" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Next-gen AI-Native EX4000 line of switches</p>
            <div>
                <small><p>Lack of AI innovation from your current networking vendor slowing you down? Embrace Juniper’s cloud-native, AI-Native access switches that support every level and layer, across nearly every deployment.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/products/switches/ex-series/ex4000-ethernet-switch.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Products &gt; Routing and switching &gt; Discover how">
            Discover how<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-82998afcfe" data-tab-label="tabs-layout-82998afcfe">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Firewalls">

      
        Firewalls
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/srx-series.html" rel="noopener" data-navid="Products &gt; Security &gt; Firewalls &gt; SRX next-generation firewalls">
              SRX next-generation firewalls
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Edge security">

      
        Edge security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/secure-edge.html" rel="noopener" data-navid="Products &gt; Security &gt; Edge security &gt; Secure Services Edge (SSE)">
              Secure Services Edge (SSE)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/juniper-secure-connect.html" rel="noopener" data-navid="Products &gt; Security &gt; Edge security &gt; Secure Connect">
              Secure Connect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Network access control (NAC)">

      
        Network access control (NAC)
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Security &gt; Network access control (NAC) &gt; Access Assurance">
              Access Assurance
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Security management and services">

      
        Security management and services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/security-director-network-security-management.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; Security Director">
              Security Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; Security Assurance">
              Security Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/advanced-threat-prevention.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; Advanced Threat Protection">
              Advanced Threat Protection
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/secintel-threat-intelligence.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; SecIntel (ATP)">
              SecIntel (ATP)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/products/security.html" rel="noopener" data-navid="Products &gt; Security   &gt; See all security products">
              See all security products
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item accordion-item-button ">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--primary nav-button pill" href="https://www.juniper.net/documentation/validated-designs/us/en/security/" rel="noopener" data-navid="Products &gt; Security   &gt; See security validated designs">
              See security validated designs
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-f64e7adf2d" data-tab-label="tabs-layout-f64e7adf2d">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Marvis AI &gt; Marvis AI">

      
        Marvis AI
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; Cloud subscription services">
              Cloud subscription services
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant/marvis-ai-assistant-for-data-center.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; Marvis AI Assistant for Data Center">
              Marvis AI Assistant for Data Center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/us/en/products/marvis-ai.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; See all products powered by Marvis AI">
              See all products powered by Marvis AI
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Marvis AI &gt; Learn more">

      
        Learn more
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/dm/explainable-ai.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Learn more &gt; Explainable AI">
              Explainable AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/The Q and AI?network=on" title="The Q and AI" alt="The Q and AI text with an image of Bob Friday and Kedar Dhuru." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">The Q&amp;AI Podcast </p>
            <div>
                <small><p>Delivering practical solutions and enriching discussions, this podcast series is a vital resource for those seeking an in-depth exploration of AI's transformative potential.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/the-feed/series/q-and-ai.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Products &gt; Marvis AI &gt; Catch the latest episode ">
            Catch the latest episode <span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-931be874cb" data-tab-label="tabs-layout-931be874cb">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/campus-and-branch.html" target="_self" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch" tabindex="-1">
        Campus and branch
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wi-fi-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Wireless Assurance (Wi-Fi) ">
              Wireless Assurance (Wi-Fi) 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wired-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Wired Assurance">
              Wired Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; WAN Assurance">
              WAN Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/asset-visibility.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Asset Visibility (Indoor Location)">
              Asset Visibility (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/user-engagement.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; User Engagement (Indoor Location)">
              User Engagement (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Management software &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Products &gt; Management software &gt; Data center &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/data-center-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Data center &gt; Data Center Assurance">
              Data Center Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant/marvis-ai-assistant-for-data-center.html" rel="noopener" data-navid="Products &gt; Management software &gt; Data center &gt; Marvis AI Assistant for Data Center">
              Marvis AI Assistant for Data Center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Management software &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/routing-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Routing Assurance">
              Routing Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-automation.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Automation">
              Paragon Automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-active-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Active Assurance">
              Paragon Active Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-planner.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Planner">
              Paragon Planner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-insights.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Insights">
              Paragon Insights
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-pathfinder.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Pathfinder">
              Paragon Pathfinder
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/ran-intelligent-controller.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; RAN Intelligent Controller">
              RAN Intelligent Controller
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Marvis AI Assistant for Routing">
              Marvis AI Assistant for Routing
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Management software &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/security-director-network-security-management.html" rel="noopener" data-navid="Products &gt; Management software &gt; Security &gt; Security Director">
              Security Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Security &gt; Security Assurance">
              Security Assurance
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-18cfc30939" data-tab-label="tabs-layout-18cfc30939">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/network-operating-system.html" target="_self" rel="noopener" data-navid="Products &gt; Network operating system &gt; Network operating system" tabindex="-1">
        Network operating system
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-operating-system/junos-os.html" rel="noopener" data-navid="Products &gt; Network operating system &gt; Network operating system &gt; Junos OS">
              Junos OS
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-operating-system/junos-evolved.html" rel="noopener" data-navid="Products &gt; Network operating system &gt; Network operating system &gt; Junos OS Evolved">
              Junos OS Evolved
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-0f528c2383" data-tab-label="tabs-layout-0f528c2383">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Learn">

      
        Learn
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration/learning-and-certification.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Learn &gt; Free training">
              Free training
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Learn &gt; Training and certification">
              Training and certification
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try">

      
        Try
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/juniper-mist-ai-on-us.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; AI on us">
              AI on us
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/free-gear.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; Free AP">
              Free AP
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/2024/juniper-wan2x-incentive-program.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; WAN 2x">
              WAN 2x
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/2024/security-buy-1-get-2-years-free-subscription.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; Security buy 1 get 2">
              Security buy 1 get 2
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy">

      
        Buy
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/enterprise-agreements.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy &gt; Enterprise Agreements">
              Enterprise Agreements
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/naas-network-as-a-service.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy &gt; Networking as a Service (NaaS)">
              Networking as a Service (NaaS)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/public-cloud-partnership.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy &gt; Cloud marketplace">
              Cloud marketplace
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize">

      
        Deploy and optimize
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration/juniper-validated-designs.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize &gt; Juniper Validated Designs (JVD)">
              Juniper Validated Designs (JVD)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/support-services/support-insights.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize &gt; Support Insights">
              Support Insights
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/topics/operations/proactive-network-support-with-juniper-ai-care-services.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize &gt; AI Care Services">
              AI Care Services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration   &gt; Blueprint for AI-Native Acceleration ">
              Blueprint for AI-Native Acceleration 
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-b807f6e6bd" data-tab-label="tabs-layout-b807f6e6bd">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/pluggable-optics.html" target="_self" rel="noopener" data-navid="Products &gt; Optics &gt; Optics" tabindex="-1">
        Optics
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/jco-series.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Coherent optics">
              Coherent optics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/qualified-optics.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Qualified optics">
              Qualified optics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/application-specific-pluggables.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Application-specific pluggables">
              Application-specific pluggables
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/optical-and-electrical-cables.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Optical and electrical cables">
              Optical and electrical cables
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>

        
    </div>

</div>

            </div>

            <div class="utility-belt">
              <ul class="utility-belt__nav">
                <li>
                  <a href="https://www.juniper.net/us/en/mist-ai-native-networking-platform.html" class="utility-belt__nav-link" data-navid="Products &gt; Mist AI-Native Networking Platform" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-database"></span>
                      Mist AI-Native Networking Platform</span></a>
                </li>
              
                <li>
                  <a href="https://www.juniper.net/us/en/trials-demos.html" class="utility-belt__nav-link" data-navid="Products &gt; Trials and demos" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-award"></span>
                      Trials and demos</span></a>
                </li>
              
                <li>
                  <a href="https://www.juniper.net/us/en/products/products-a-to-z.html" class="utility-belt__nav-link" data-navid="Products &gt; All products A-Z" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-move"></span>
                      All products A-Z</span></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      
        <div class="mmt-desktop" data-mod="menu-tab-layout">
          <div class="mega-menu mmt-desktop__container mega-menu-five-column" id="menu2">
            <div class="mmt-desktop__tab-list">
              <p class="mmt-desktop__tab-list-heading">Services</p>
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item active" data-tab="tabs-layout-4f602fe6a1" data-navid="Services &gt; Services">Services</a>
            </div>
            
            <div class="overlay mmt-desktop__columns">
              <div class="xfpage page basicpage">


    
    
    
    <div id="container-2636e35f16" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-4f602fe6a1" data-tab-label="tabs-layout-4f602fe6a1">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services.html" rel="noopener" data-navid="Services &gt; Services   &gt; Services overview">
              Services overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-campus-and-branch.html" rel="noopener" data-navid="Services &gt; Services   &gt; Campus and branch">
              Campus and branch
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-data-center.html" rel="noopener" data-navid="Services &gt; Services   &gt; Data center">
              Data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-wan.html" rel="noopener" data-navid="Services &gt; Services   &gt; WAN">
              WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-security.html" rel="noopener" data-navid="Services &gt; Services   &gt; Security">
              Security
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/support-services.html" rel="noopener" data-navid="Services &gt; Services   &gt; Support services">
              Support services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Services &gt; Services &gt; Tools and resources">

      
        Tools and resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/support-services/support-insights.html" rel="noopener" data-navid="Services &gt; Services &gt; Tools and resources &gt; Juniper Support Insights (JSI)">
              Juniper Support Insights (JSI)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training.html" rel="noopener" data-navid="Services &gt; Services &gt; Tools and resources &gt; Training and certification">
              Training and certification
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AICare 16x10 GettyImages-1128200464?network=on" title="Services AI Care" alt="Services AI Care" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Juniper AI Care Services Revolutionize Your Service Experience</p>
            <div>
                <small><p>Our industry-first AI-Native services couple AIOps with our deep expertise across the full network life cycle. You can move from reactive response to proactive insight and action.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/services/services-for-campus-and-branch/ai-care-services.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Services &gt; Services &gt; Explore AI Care Services">
            Explore AI Care Services<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AIDC 16x10 GettyImages-1059910988?network=on" title="Services AI Data Center" alt="Services AI Data Center" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Juniper AI Data Center Deployment Services Optimize Your AI Model Runs</p>
            <div>
                <small><p>We use our expertise and validated designs to help design, deploy, validate and tune networks, including GPUs and storage, to get the most from your AI infrastructure operation.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/services/ai-data-center-deployment-services-datasheet.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Services &gt; Services &gt; Learn about AI Data Center Deployment Services">
            Learn about AI Data Center Deployment Services<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      
    </div>
  
  </div>

        
    </div>

</div>

            </div>

            <div class="utility-belt">
              <ul class="utility-belt__nav">
                <li>
                  <a href="https://support.juniper.net/support/guidelines/" class="utility-belt__nav-link" data-navid="Services &gt; Guidelines and policies" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-move"></span>
                      Guidelines and policies</span></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      
        <div class="mmt-desktop" data-mod="menu-tab-layout">
          <div class="mega-menu mmt-desktop__container mega-menu-five-column" id="menu3">
            <div class="mmt-desktop__tab-list">
              <p class="mmt-desktop__tab-list-heading">Partners</p>
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item active" data-tab="tabs-layout-a66d9dcbd5" data-navid="Partners &gt; Partners">Partners</a>
            </div>
            
            <div class="overlay mmt-desktop__columns">
              <div class="xfpage page basicpage">


    
    
    
    <div id="container-5bf504999b" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-a66d9dcbd5" data-tab-label="tabs-layout-a66d9dcbd5">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Partners &gt; Partners &gt; Our partners">

      
        Our partners
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://juniper.my.site.com/prm/s/partnerlocator" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Find a partner">
              Find a partner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://juniper.my.site.com/prm/s/distributorlocator" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Find a distributor">
              Find a distributor
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/content/dam/www/assets/additional-resources/us/en/worldwide-listing-jpa-services-partners.pdf.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Find a services partner">
              Find a services partner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/public-cloud-partnership.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Public cloud partnerships">
              Public cloud partnerships
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/partners/strategic-alliances.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Strategic alliances">
              Strategic alliances
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/partners/technology-alliances.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Technology alliances">
              Technology alliances
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Partners &gt; Partners &gt; Become a partner">

      
        Become a partner
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/partners.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Become a partner &gt; Partner program overview">
              Partner program overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://juniper.my.site.com/prm/s/onboarding" rel="noopener" data-navid="Partners &gt; Partners &gt; Become a partner &gt; Partner application">
              Partner application
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Partners &gt; Partners &gt; Enrolled partner">

      
        Enrolled partner
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://partners.juniper.net/partnercenter/index.page" rel="noopener" data-navid="Partners &gt; Partners &gt; Enrolled partner &gt; Partner log in">
              Partner log in
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://jpartnertraining.juniper.net/" rel="noopener" data-navid="Partners &gt; Partners &gt; Enrolled partner &gt; Learning Academy">
              Learning Academy
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://content.juniper.net/champions" rel="noopener" data-navid="Partners &gt; Partners &gt; Enrolled partner &gt; Juniper Champions">
              Juniper Champions
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>

        
    </div>

</div>

            </div>

            
          </div>
        </div>
      
        <div class="mmt-desktop" data-mod="menu-tab-layout">
          <div class="mega-menu mmt-desktop__container mega-menu-five-column" id="menu4">
            <div class="mmt-desktop__tab-list">
              <p class="mmt-desktop__tab-list-heading">Support and Documentation</p>
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item active" data-tab="tabs-layout-6e72b64098" data-navid="Support and Documentation &gt; Support and Documentation">Support and Documentation</a>
            </div>
            
            <div class="overlay mmt-desktop__columns">
              <div class="xfpage page basicpage">


    
    
    
    <div id="container-5c6409c825" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-6e72b64098" data-tab-label="tabs-layout-6e72b64098">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Documentation">

      
        Documentation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Product documentation">
              Product documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/product/us/en/mist/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Mist documentation">
              Mist documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/quickstart/us/en/quick-start/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Quick starts">
              Quick starts
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://apps.juniper.net/home/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Product and feature data (Pathfinder)">
              Product and feature data (Pathfinder)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://supportportal.juniper.net/s/knowledge?language=en_US" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Knowledge Base">
              Knowledge Base
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://prsearch.juniper.net/InfoCenter/index?page=prsearch" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Search for a Problem Report">
              Search for a Problem Report
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Downloads">

      
        Downloads
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=ex" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; EX Series">
              EX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=srx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; SRX Series">
              SRX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=mx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; MX Series">
              MX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=qfx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; QFX Series">
              QFX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=acx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; ACX Series">
              ACX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://support.juniper.net/support/downloads/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; See all software downloads">
              See all software downloads
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Tools and resources">

      
        Tools and resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Juniper support">
              Juniper support
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://community.juniper.net/home" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Elevate community">
              Elevate community
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://threatlabs.juniper.net/home/#/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Juniper Threat Labs">
              Juniper Threat Labs
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://threatlabs.juniper.net/home/search/#/list/ips?page_number=1&amp;page_size=20" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Security intelligence">
              Security intelligence
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://license.juniper.net/licensemanage/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Product license keys">
              Product license keys
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://supportportal.juniper.net/s/serial-number-entitlement" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Serial number entitlement search">
              Serial number entitlement search
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/report-a-security-vulnerability.html" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Report a vulnerability">
              Report a vulnerability
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/requesting-support/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Contact Support">
              Contact Support
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Juniper Support Portal">

      
        Juniper Support Portal
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_blank" class="nav-link-animation nav-button--black nav-button pill" href="https://supportportal.juniper.net/s/?language=en_US" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Juniper Support Portal &gt; Log in">
              Log in
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="optional-feature-promo section">

    




<div>
<div class="feature-optional-promo-cmp">
    <div class="img-wrapper">
      
        
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_60596468?network=on" title="Business professional holding a tablet with digital screen" alt="Business professional holding a tablet with digital screen" data-breakpoints="280,350,450,720" style="width: 100%;">
    
    </div>
    
    <div class="text-wrapper  green_gradient">
      <div class="text-section">
        <p class="title">The Juniper Support Portal (JSP) mobile app is now available!</p>
        <div><small><p>Get Juniper support anytime, anywhere with the JSP mobile application, now available for Android and iOS!</p>
</small></div>
      </div>
      <a href="https://supportportal.juniper.net/s/article/Juniper-Support-Portal-Mobile-Application-Release-Notes?language=en_US" rel="noopener" class="featured__anchor nav-link-animation" data-navid="Support &gt; Support and Documentation &gt; Download now" target="_blank">
        Download now
        <span class="juniper-icon icon-chevrons-right"></span>
      </a>
    </div>
  </div>
</div>

</div>

</div>
    </div>
  
  </div>

        
    </div>

</div>

            </div>

            <div class="utility-belt">
              <ul class="utility-belt__nav">
                <li>
                  <a href="https://support.juniper.net/support/eol/" class="utility-belt__nav-link" data-navid="Support and Documentation &gt; End of Life (EoL)" target="_self" rel="noopener"><span class="link-label"><span class="link-icon juniper-icon icon-database"></span>
                      End of Life (EoL)</span></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      
        <div class="mmt-desktop" data-mod="menu-tab-layout">
          <div class="mega-menu mmt-desktop__container " id="menu5">
            <div class="mmt-desktop__tab-list">
              <p class="mmt-desktop__tab-list-heading">Learn</p>
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item active" data-tab="tabs-layout-5a19c34d37" data-navid="Learn &gt; About Juniper">About Juniper</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-77a669d4ef" data-navid="Learn &gt; Training">Training</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-a1ee21513a" data-navid="Learn &gt; Events">Events</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-9c6b2e3ec2" data-navid="Learn &gt; The Feed">The Feed</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-e94a378bf4" data-navid="Learn &gt; Resources">Resources</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-431a407e31" data-navid="Learn &gt; Technology learning topics">Technology learning topics</a>
            
              
              <a href="javascript:void(0);" class="tab mmt-desktop__tab-list-item " data-tab="tabs-layout-a54f015717" data-navid="Learn &gt; Thought leadership and insights">Thought leadership and insights</a>
            </div>
            
            <div class="overlay mmt-desktop__columns">
              <div class="xfpage page basicpage">


    
    
    
    <div id="container-3a19e37d9e" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-5a19c34d37" data-tab-label="tabs-layout-5a19c34d37">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; About Juniper &gt; Company">

      
        Company
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; About us">
              About us
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/profile.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Company profile">
              Company profile
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/leadership.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Leadership">
              Leadership
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://newsroom.juniper.net/overview/default.aspx" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Newsroom">
              Newsroom
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/awards-and-industry-recognition.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Awards and recognition">
              Awards and recognition
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/climate-change-and-sustainability.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Our sustainable future">
              Our sustainable future
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/corporate-responsibility.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Corporate social responsibility">
              Corporate social responsibility
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/juniper-innovations.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Juniper innovations">
              Juniper innovations
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/executive-briefing.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Executive Briefing Program">
              Executive Briefing Program
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; About Juniper &gt; Careers">

      
        Careers
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://jobs.juniper.net/careers" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Careers &gt; Current job openings">
              Current job openings
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/culture-careers.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Careers &gt; Company culture and careers">
              Company culture and careers
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/culture-careers/values.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Careers &gt; Our values">
              Our values
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations">

      
        Media and analyst relations
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/contact-us/media.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations &gt; Global media contacts">
              Global media contacts
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/analyst-relations.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations &gt; Industry analyst and influencer relations">
              Industry analyst and influencer relations
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://investor.juniper.net/investor-relations/default.aspx" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations &gt; Investor relations">
              Investor relations
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-77a669d4ef" data-tab-label="tabs-layout-77a669d4ef">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Training &gt; Training">

      
        Training
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training.html" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Training overview">
              Training overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/schedule_classes.aspx?&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Schedule of live classes">
              Schedule of live classes
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_search.aspx?search=On-Demand&amp;taxonomyList=%23M02%2C%23T01&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; On-demand courses">
              On-demand courses
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_info.aspx?id=JUNIPER-OPEN-LEARNING&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Free training">
              Free training
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_search.aspx?search=course&amp;taxonomyList=%23M01%2C%23M02%2C%23T01&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; All courses">
              All courses
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/purchase-options.html" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Payment options">
              Payment options
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item accordion-item-button ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-button--black nav-button pill" href="https://learningportal.juniper.net/juniper/default.aspx?&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Learning Portal">
              Learning Portal
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Training &gt; Certification">

      
        Certification
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/certification.html" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Juniper certification">
              Juniper certification
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/certification.html" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Certification tracks">
              Certification tracks
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_info.aspx?id=JUNIPER-CERTIFICATION-PROGRAM-HOME&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Certification resources">
              Certification resources
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_info.aspx?id=JUNIPER-CERTIFICATION-PROGRAM-HOME&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Exam registration">
              Exam registration
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/certification/recertification.html" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Recertification">
              Recertification
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://cp.certmetrics.com/juniper/en/login" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Manage my certifications">
              Manage my certifications
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="optional-feature-promo section">

    




<div>
<div class="feature-optional-promo-cmp">
    <div class="img-wrapper">
      
        
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/attend-our-customer-speaking-session?network=on" title="Audience raising hands up while businessman is speaking in training at the office." alt="Audience raising hands up while businessman is speaking in training at the office." data-breakpoints="280,350,450,720" style="width: 100%;">
    
    </div>
    
    <div class="text-wrapper  green_gradient">
      <div class="text-section">
        <p class="title">Juniper certification and training news</p>
        
      </div>
      <a href="https://www.juniper.net/us/en/training/news.html" rel="noopener" class="featured__anchor nav-link-animation" data-navid="Learn &gt; Training &gt; See the latest" target="_self">
        See the latest
        <span class="juniper-icon icon-chevrons-right"></span>
      </a>
    </div>
  </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-a1ee21513a" data-tab-label="tabs-layout-a1ee21513a">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/ringing-of-the-bell-nav?network=on" title="Ringing of the bell" alt="Ringing of the bell" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">All global events</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Events &gt; See the latest">
            See the latest<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AI-native-now-nav?fmt=png8-alpha&amp;network=on" title="AI-native-now" alt="AI-native-now" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI-Native NOW event series</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/ai-native-now.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Events &gt; Explore events">
            Explore events<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/ainn-san-diego-event-nav-promo?fmt=png8-alpha&amp;network=on" title="AINN San Diego Event nav promo" alt="AINN San Diego Event nav promo" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI-Native NOW: San Diego</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/2025/ai-native-now-san-diego.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Events &gt; Register NOW">
            Register NOW<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-9c6b2e3ec2" data-tab-label="tabs-layout-9c6b2e3ec2">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; The Feed &gt; Videos">

      
        Videos
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; The Feed">
              The Feed
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/topics.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; Browse by topic">
              Browse by topic
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; Video series">
              Video series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/leadership-voices.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; Leadership voices">
              Leadership voices
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; The Feed &gt; Podcasts">

      
        Podcasts
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/channel-chats.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Podcasts &gt; Channel chats">
              Channel chats
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/be-bold.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Podcasts &gt; Be bold">
              Be bold
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/q-and-ai.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Podcasts &gt; The Q&amp;AI">
              The Q&amp;AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/glowing?fmt=png8-alpha&amp;network=on" title="Glowing" alt="Juniper&#39;s Christina Hendrix at the head of a conference table. With the text &quot;The NOW Way to Network&quot; overlayed, with &quot;NOW&quot; emphasizing the &quot;O&quot; in green color." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">The NOW Way to Network</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/the-feed/series/the-now-way-to-network.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; The Feed &gt; Watch the video series">
            Watch the video series<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-e94a378bf4" data-tab-label="tabs-layout-e94a378bf4">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Resources &gt; Customers">

      
        Customers
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/customers.html" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Customer success stories">
              Customer success stories
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/customers/welcome.html" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Getting started">
              Getting started
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://userregistration.juniper.net/" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Create a Juniper account">
              Create a Juniper account
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://license.juniper.net/licensemanage/" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Activate licenses">
              Activate licenses
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/participate-in-our-elevate-program.html" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Customer advocacy program">
              Customer advocacy program
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Resources &gt; Documentation">

      
        Documentation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Product documentation">
              Product documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/product/us/en/mist/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Mist documentation">
              Mist documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/quickstart/us/en/quick-start/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Quick starts">
              Quick starts
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/validated-designs/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Juniper Validated Designs (JVD)">
              Juniper Validated Designs (JVD)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://apps.juniper.net/home/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Product and feature data (Pathfinder)">
              Product and feature data (Pathfinder)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://supportportal.juniper.net/s/knowledge?language=en_US" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Knowledge Base">
              Knowledge Base
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://prsearch.juniper.net/InfoCenter/index?page=prsearch" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Search for a Problem Report">
              Search for a Problem Report
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Resources &gt; Popular resources">

      
        Popular resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Software downloads">
              Software downloads
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://blogs.juniper.net/" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Blogs">
              Blogs
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://community.juniper.net/home" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Elevate community">
              Elevate community
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://threatlabs.juniper.net/home/#/" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Juniper Threat Labs">
              Juniper Threat Labs
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-431a407e31" data-tab-label="tabs-layout-431a407e31">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; AI">

      
        AI
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-native-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AI-Native Networking?">
              What is AI-Native Networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-for-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AI for networking?">
              What is AI for networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-aiops.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AIOps?">
              What is AIOps?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-data-center-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AI data center networking?">
              What is AI data center networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-explainable-ai-xai.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is explainable AI (XAI)?">
              What is explainable AI (XAI)?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-data-center-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is AI data center networking?">
              What is AI data center networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-a-data-center-network.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is a data center network?">
              What is a data center network?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-data-center-fabric.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is data center fabric?">
              What is data center fabric?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-intent-based-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is intent-based networking?">
              What is intent-based networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-400g.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is 400G?">
              What is 400G?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching">

      
        Network routing and switching
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-a-router.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching &gt; What is a router?">
              What is a router?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-a-network-switch.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching &gt; What is a network switch?">
              What is a network switch?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-native-routing.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching &gt; What is AI-native routing?">
              What is AI-native routing?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE">

      
        SD-WAN / SASE
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-sd-wan.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE &gt; What is SD-WAN?">
              What is SD-WAN?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/sd-wan-explained.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE &gt; SD-WAN explained">
              SD-WAN explained
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-sase.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE &gt; What is SASE?">
              What is SASE?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-advanced-threat-prevention.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Security &gt; What is advanced threat prevention?">
              What is advanced threat prevention?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ids-ips.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Security &gt; What is IDS and IPS?">
              What is IDS and IPS?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Wireless">

      
        Wireless
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-an-access-point-in-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is an access point in networking?">
              What is an access point in networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/wifi-explained.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; Wi-Fi explained">
              Wi-Fi explained
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-wi-fi-7.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is Wi-Fi 7?">
              What is Wi-Fi 7?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-wi-fi-6e.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is Wi-Fi 6E?">
              What is Wi-Fi 6E?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-wi-fi-6.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is Wi-Fi 6?">
              What is Wi-Fi 6?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/us/en/research-topics.html" rel="noopener" data-navid="Learn &gt; Technology learning topics   &gt; See all learning topics">
              See all learning topics
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-a54f015717" data-tab-label="tabs-layout-a54f015717">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/carousel-ai-native-now-event-foreground-nav?network=on" title="AI Native Now" alt="AI Native Now" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Executive insights</p>
            <div>
                <small><p>Dive deep with leading experts and thought leaders on all the topics that matter most to your business, from AI to network security to driving rapid, relevant transformation for your business.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/executive-insights.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Thought leadership and insights &gt; Learn more">
            Learn more<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/past-summit-speaker-nav?network=on" title="A keynote speaker giving a presentation at a conference. There are dozens of people sitting around them. The presentation is displayed via projector on all the walls in the room." alt="A keynote speaker giving a presentation at a conference. There are dozens of people sitting around them. The presentation is displayed via projector on all the walls in the room." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Leadership voices</p>
            <div>
                <small><p>Juniper Networks’ leaders operate on the front lines of creating the network of the future. Take a look around to see what’s on their minds.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/the-feed/series/leadership-voices.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Thought leadership and insights &gt; Watch now">
            Watch now<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/Bob-Friday-speaking?fmt=png8-alpha&amp;network=on" title="Bob Friday and Jessica Garrison speaking" alt="Bob Friday and Jessica Garrison speaking" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Bob Friday Talks</p>
            <div>
                <small><p>Join Bob as he ventures into all the knowns -- and -- unknowns -- of AI.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/executive-insights/bob-friday.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Thought leadership and insights &gt; Catch the latest episode">
            Catch the latest episode<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>

        
    </div>

</div>

            </div>

            
          </div>
        </div>
      
    </div>

  <!-- Mega Menus Mobile -->
    <div class="mobile-mega-menu">
      <nav class="mega-menu-tabs" data-mod="menu-tab-layout">
      <ul class="mega-menu-tabs__nav-list active">
        <li class="mega-menu-tabs__nav-list-item">
          <button class="mega-menu-tabs__link active" data-menu="-a88f5484d5" data-navid="Solutions"><span>Solutions</span>
            <span class="juniper-svgicon jn-arrow jn-arrow-lg jn-arrow-right"></span></button>
            
        </li>
      
        <li class="mega-menu-tabs__nav-list-item">
          <button class="mega-menu-tabs__link active" data-menu="-d160ced1f0" data-navid="Products"><span>Products</span>
            <span class="juniper-svgicon jn-arrow jn-arrow-lg jn-arrow-right"></span></button>
            
        </li>
      
        <li class="mega-menu-tabs__nav-list-item">
          <button class="mega-menu-tabs__link active" data-menu="-d7fb054443" data-navid="Services"><span>Services</span>
            <span class="juniper-svgicon jn-arrow jn-arrow-lg jn-arrow-right"></span></button>
            
        </li>
      
        <li class="mega-menu-tabs__nav-list-item">
          <button class="mega-menu-tabs__link active" data-menu="-1d2fe41545" data-navid="Partners"><span>Partners</span>
            <span class="juniper-svgicon jn-arrow jn-arrow-lg jn-arrow-right"></span></button>
            
        </li>
      
        <li class="mega-menu-tabs__nav-list-item">
          <button class="mega-menu-tabs__link active" data-menu="-d3e606ea98" data-navid="Support and Documentation"><span>Support and Documentation</span>
            <span class="juniper-svgicon jn-arrow jn-arrow-lg jn-arrow-right"></span></button>
            
        </li>
      
        <li class="mega-menu-tabs__nav-list-item">
          <button class="mega-menu-tabs__link active" data-menu="-4386017253" data-navid="Learn"><span>Learn</span>
            <span class="juniper-svgicon jn-arrow jn-arrow-lg jn-arrow-right"></span></button>
            
        </li>
      </ul>
      
        <div class="mega-menu-tabs__nav-submenu" id="submenu--a88f5484d5" role="menu">
          <div class="mega-menu-tabs__nav-submenu-heading">
            <button class="btn-back">
              <span class="juniper-svgicon jn-arrow jn-arrow-left"></span>Back</button>
            <p>Solutions</p>
          </div>
          <div class="mega-menu-tabs__submenu-list ">
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Featured solutions" data-accordion="accordion-tabs-layout-2757105271" data-index="0" aria-controls="Featured solutions">Featured solutions
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; AI" data-accordion="accordion-tabs-layout-e64b5beb2d" data-index="1" aria-controls="AI">AI
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Campus and branch" data-accordion="accordion-tabs-layout-fb8899530a" data-index="2" aria-controls="Campus and branch">Campus and branch
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Data center" data-accordion="accordion-tabs-layout-e8320e93a3" data-index="3" aria-controls="Data center">Data center
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; WAN" data-accordion="accordion-tabs-layout-064e0175bf" data-index="4" aria-controls="WAN">WAN
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Security" data-accordion="accordion-tabs-layout-114963002e" data-index="5" aria-controls="Security">Security
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Service provider" data-accordion="accordion-tabs-layout-5367090ea7" data-index="6" aria-controls="Service provider">Service provider
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Cloud operator" data-accordion="accordion-tabs-layout-9c876c8f52" data-index="7" aria-controls="Cloud operator">Cloud operator
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Solutions &gt; Industries" data-accordion="accordion-tabs-layout-2d5ed7e068" data-index="8" aria-controls="Industries">Industries
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
            
            <div class="mega-menu-tabs__accordion" role="menu">
              <div class="overlay mega-menu-tabs__accordion-list">
                <div class="xfpage page basicpage">


    
    
    
    <div id="container-b9ebd8d658" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-2757105271" data-tab-label="tabs-layout-2757105271">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/solution-campus-branch?fmt=png8-alpha&amp;network=on" title="Campus and Branch" alt="Campus and Branch" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Welcome to the NOW Way to Wi-Fi</p>
            <div>
                <small><p>Take your networking performance to new heights with a modern, cloud-native, AI-Native architecture. Only Juniper can help you unleash the full potential of Wi-Fi 7 with our AI-Native platform for innovation.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/dm/the-now-way-to-wifi.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Featured solutions &gt; Prepare for liftoff">
            Prepare for liftoff<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_321999244-nav?network=on" title="Business intelligence analyst dashboard on virtual screen. Big data Graphs Charts." alt="Business intelligence analyst dashboard on virtual screen. Big data Graphs Charts." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI Data Center Networking</p>
            <div>
                <small><p>Juniper’s AI data center solution is a quick way to deploy high performing AI training and inference networks that are the most flexible to design and easiest to manage with limited IT resources.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Featured solutions &gt; Find out more">
            Find out more<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/hero-enterprise-ai-native-routing-2?fmt=png8-alpha&amp;network=on" title="Enterprise AI-Native Networking" alt="Enterprise AI-Native Networking" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Enterprise AI‑Native Routing</p>
            <div>
                <small><p>Juniper's Ai-Native routing solution delivers robust 400GbE and 800GbE&nbsp;capabilities for unmatched performance, reliability, and sustainability at scale.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Featured solutions &gt; Explore enterprise routing">
            Explore enterprise routing<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-e64b5beb2d" data-tab-label="tabs-layout-e64b5beb2d">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; AI &gt; AI for networking">

      
        AI for networking
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/artificial-intelligence-for-it-operations-aiops.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; AIOps">
              AIOps
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wired-access.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Wired access">
              Wired access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wireless-access.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Wireless access">
              Wireless access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; SD-WAN">
              SD-WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Enterprise routing">
              Enterprise routing
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/data-center-assurance.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Secure automated data center">
              Secure automated data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/dm/explainable-ai.html" rel="noopener" data-navid="Solutions &gt; AI &gt; AI for networking &gt; Explainable AI">
              Explainable AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; AI &gt; Networking for AI">

      
        Networking for AI
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Networking for AI &gt; AI data center networking">
              AI data center networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure/ops4ai-lab.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Networking for AI &gt; Ops4AI">
              Ops4AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; AI &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/secure-ai-native-edge.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Security &gt; Secure AI-Native edge">
              Secure AI-Native edge
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Security &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/threat-detection-and-mitigation.html" rel="noopener" data-navid="Solutions &gt; AI &gt; Security &gt; Security and threat services">
              Security and threat services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-fb8899530a" data-tab-label="tabs-layout-fb8899530a">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch">

      
        Campus and branch
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/artificial-intelligence-for-it-operations-aiops.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; AI for IT operations (AIOps)">
              AI for IT operations (AIOps)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wireless-access.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Wireless access">
              Wireless access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/wired-access.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Wired access">
              Wired access
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; SD-WAN">
              SD-WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/secure-ai-native-edge/sase.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Secure Access Service Edge (SASE)">
              Secure Access Service Edge (SASE)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/indoor-location.html" rel="noopener" data-navid="Solutions &gt; Campus and branch &gt; Campus and branch &gt; Indoor location services">
              Indoor location services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/campus-and-branch.html" rel="noopener" data-navid="Solutions &gt; Campus and branch   &gt; Campus and branch overview">
              Campus and branch overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-e8320e93a3" data-tab-label="tabs-layout-e8320e93a3">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Data center &gt; AI data center">

      
        AI data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; AI data center networking">
              AI data center networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure/ops4ai-lab.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; Ops for AI">
              Ops for AI
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ip-networking-storage.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; IP storage networking">
              IP storage networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; AI data center &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/data-center.html" rel="noopener" data-navid="Solutions &gt; Data center   &gt; Data center overview">
              Data center overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/documentation/validated-designs/us/en/data-center/" rel="noopener" data-navid="Solutions &gt; Data center   &gt; Juniper data center validated designs">
              Juniper data center validated designs
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/solutions/data-center.html" target="_self" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center" tabindex="-1">
        Automated secure data center
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/network-fabrics.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center &gt; Automated data center fabrics">
              Automated data center fabrics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/cloud-native.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Automated secure data center &gt; Cloud-native data center">
              Cloud-native data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Data center &gt; Zero Trust data center">

      
        Zero Trust data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/zero-trust-data-center.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Zero Trust data center &gt; Zero Trust data center">
              Zero Trust data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Data center &gt; Data center interconnect">

      
        Data center interconnect
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Data center &gt; Data center interconnect &gt; Data center interconnect">
              Data center interconnect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/cloud-metro-5?network=on" title="Zero trust security" alt="Zero trust security" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Ops4AI Lab</p>
            <div>
                <small><p>Visit our lab in Sunnyvale, CA and see our AI data center solution for yourself. You can try out your own model’s functionality and performance, too.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure/ops4ai-lab.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Data center &gt; Visit the lab">
            Visit the lab<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container " id="accordion-tabs-layout-064e0175bf" data-tab-label="tabs-layout-064e0175bf">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; WAN &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan.html" rel="noopener" data-navid="Solutions &gt; WAN &gt; WAN &gt; SD-WAN">
              SD-WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" rel="noopener" data-navid="Solutions &gt; WAN &gt; WAN &gt; Enterprise routing">
              Enterprise routing
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; WAN &gt; WAN &gt; Data center interconnect">
              Data center interconnect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/wan.html" rel="noopener" data-navid="Solutions &gt; WAN   &gt; WAN overview">
              WAN overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/hero-enterprise-ai-native-routing-2?fmt=png8-alpha&amp;network=on" title="Enterprise AI-Native Networking" alt="Enterprise AI-Native Networking" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Enterprise AI‑Native Routing</p>
            <div>
                <small><p>Juniper's Ai-Native routing solution delivers robust 400GbE and 800GbE&nbsp;capabilities for unmatched performance, reliability, and sustainability at scale.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/solutions/enterprise-routing.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; WAN &gt; Explore enterprise routing">
            Explore enterprise routing<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container " id="accordion-tabs-layout-114963002e" data-tab-label="tabs-layout-114963002e">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Security &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/secure-ai-native-edge.html" rel="noopener" data-navid="Solutions &gt; Security &gt; Security &gt; Secure AI-Native edge">
              Secure AI-Native edge
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/zero-trust-data-center.html" rel="noopener" data-navid="Solutions &gt; Security &gt; Security &gt; Zero Trust data center">
              Zero Trust data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/security.html" rel="noopener" data-navid="Solutions &gt; Security   &gt; Security overview">
              Security overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-5367090ea7" data-tab-label="tabs-layout-5367090ea7">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Service provider &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/cloud-and-service-provider-wan.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Cloud and service provider WAN">
              Cloud and service provider WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/automation/paragon.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; WAN automation">
              WAN automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/ip-transport-solution/metro.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Metro access and aggregation">
              Metro access and aggregation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/ip-transport-solution.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Core">
              Core
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/ip-transport-solution.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Multi-service edge">
              Multi-service edge
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Data center interconnect ">
              Data center interconnect 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/converged-optical-routing-architecture-cora.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Converged optical routing architecture (CORA)">
              Converged optical routing architecture (CORA)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/pon.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Passive optical networking (PON)">
              Passive optical networking (PON)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/5g-networking.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; 5G networking">
              5G networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/5g-networking/open-ran.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Open RAN">
              Open RAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/service-provider-security.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; WAN &gt; Service provider security">
              Service provider security
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Service provider &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; Data center networks">
              Data center networks
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/telco-cloud.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; Telco and edge cloud">
              Telco and edge cloud
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Data center &gt; Data center interconnect">
              Data center interconnect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Service provider &gt; Managed services">

      
        Managed services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/managed-services.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Managed services &gt; Managed services">
              Managed services
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/sd-wan/managed-sd-wan.html" rel="noopener" data-navid="Solutions &gt; Service provider &gt; Managed services &gt; Managed SD-WAN">
              Managed SD-WAN
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/service-provider.html" rel="noopener" data-navid="Solutions &gt; Service provider   &gt; Service provider overview">
              Service provider overview
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-9c876c8f52" data-tab-label="tabs-layout-9c876c8f52">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Cloud operator &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; Data center networking">
              Data center networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ai-infrastructure.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; AI data center">
              AI data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/zero-trust-data-center.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; Zero Trust data center">
              Zero Trust data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/ip-networking-storage.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; IP storage networking">
              IP storage networking
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/cloud-native.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; Data center &gt; Cloud-native data center">
              Cloud-native data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Solutions &gt; Cloud operator &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/data-center/data-center-interconnect.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; Data center interconnect ">
              Data center interconnect 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/automation/paragon.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; WAN automation">
              WAN automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/cloud-routing.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; Cloud routing">
              Cloud routing
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/400g-and-800g.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; 400G and 800G">
              400G and 800G
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/converged-optical-routing-architecture-cora.html" rel="noopener" data-navid="Solutions &gt; Cloud operator &gt; WAN &gt; Converged optical routing architecture (CORA)">
              Converged optical routing architecture (CORA)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/cloud-operator.html" rel="noopener" data-navid="Solutions &gt; Cloud operator   &gt; Cloud operator overview">
              Cloud operator overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/documentation/validated-designs/" rel="noopener" data-navid="Solutions &gt; Cloud operator   &gt; Cloud operator validated designs">
              Cloud operator validated designs
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-2d5ed7e068" data-tab-label="tabs-layout-2d5ed7e068">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/solutions/industries.html" target="_self" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries" tabindex="-1">
        Industries
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/government.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Government (federal, state and local)">
              Government (federal, state and local)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/education.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Education ">
              Education 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/healthcare-and-life-sciences.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Healthcare">
              Healthcare
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/retail.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Retail">
              Retail
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/energy-utilities.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Energy and utilities">
              Energy and utilities
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/media-and-entertainment.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Media and entertainment">
              Media and entertainment
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/financial-services.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Financial services">
              Financial services
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/industries/hospitality.html" rel="noopener" data-navid="Solutions &gt; Industries &gt; Industries &gt; Hospitality">
              Hospitality
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_635499703-1280x710?network=on" title="Higher Education" alt="Higher Education" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Shaping Student Experiences: The NOW Way to Build Higher Education Networks</p>
            <div>
                <small><p>Juniper Networks CIO Sharon Mandell and a virtual summit of C-level IT leaders from prestigious institutions discuss ongoing efforts to support digital transformation on campus.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/webinars/2025/shaping-student-experiences-the-now-way-to-build-higher-education-networks.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Industries &gt; Watch now">
            Watch now<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/adobestock-629918871-edit?network=on" title="adobestock-629918871-edit" alt="adobestock-629918871-edit" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI-Native Healthcare Networking</p>
            <div>
                <small><p>Join Sudheer Matta, SVP Product Management at Juniper Networks, Philip Bradley, Digital Health Strategist at HIMSS Analytics, and other healthcare IT leaders as they discuss the challenges to deliver quality patient care and the role of AI-native networking.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/webinars/2025/ai-native-healthcare-networking-strengthen-operations-scale-smarter.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Industries &gt; Register for the summit">
            Register for the summit<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_2796391551-1280x710?network=on" title="Retail" alt="Retail" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">The Future of In-Store Technologies</p>
            <div>
                <small><p>Retail experts Kevin McCartan, Senior IT Service Delivery Engineer at Musgrave; Jack Stratten of Insider Trends; and Christian Gilby, Senior Director of Product Marketing at Juniper Networks, discuss customer experiences.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/webinars/2025/the-future-of-in-store-technologies.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Solutions &gt; Industries &gt; See the future">
            See the future<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      
    </div>
  
  </div>

        
    </div>

</div>

              </div>
            </div>
          
          </div>
          <div class="utility-belt">
            <ul class="utility-belt__nav">
              <li>
                <a href="https://www.juniper.net/us/en/mist-ai-native-networking-platform.html" class="utility-belt__nav-link"><span class="link-label" data-navid="Solutions &gt; Mist AI-Native Networking Platform">
                  <span class="link-icon juniper-icon icon-database"></span>
                    Mist AI-Native Networking Platform</span>
                  </a>
              </li>
            
              <li>
                <a href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration/juniper-validated-designs.html" class="utility-belt__nav-link"><span class="link-label" data-navid="Solutions &gt; Juniper Validated Designs (JVD)">
                  <span class="link-icon juniper-icon icon-move"></span>
                    Juniper Validated Designs (JVD)</span>
                  </a>
              </li>
            
              <li>
                <a href="https://www.juniper.net/us/en/solutions.html" class="utility-belt__nav-link"><span class="link-label" data-navid="Solutions &gt; See all solutions">
                  <span class="link-icon juniper-icon icon-award"></span>
                    See all solutions</span>
                  </a>
              </li>
            </ul>
          </div>
        </div>
      
        <div class="mega-menu-tabs__nav-submenu" id="submenu--d160ced1f0" role="menu">
          <div class="mega-menu-tabs__nav-submenu-heading">
            <button class="btn-back">
              <span class="juniper-svgicon jn-arrow jn-arrow-left"></span>Back</button>
            <p>Products</p>
          </div>
          <div class="mega-menu-tabs__submenu-list ">
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Wireless access" data-accordion="accordion-tabs-layout-9849eb43c7" data-index="0" aria-controls="Wireless access">Wireless access
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Wired access" data-accordion="accordion-tabs-layout-0a874c0916" data-index="1" aria-controls="Wired access">Wired access
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; SD-WAN / SASE" data-accordion="accordion-tabs-layout-71e9367a88" data-index="2" aria-controls="SD-WAN / SASE">SD-WAN / SASE
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Routing and switching" data-accordion="accordion-tabs-layout-622bf6339d" data-index="3" aria-controls="Routing and switching">Routing and switching
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Security" data-accordion="accordion-tabs-layout-82998afcfe" data-index="4" aria-controls="Security">Security
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Marvis AI" data-accordion="accordion-tabs-layout-f64e7adf2d" data-index="5" aria-controls="Marvis AI">Marvis AI
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Management software" data-accordion="accordion-tabs-layout-931be874cb" data-index="6" aria-controls="Management software">Management software
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Network operating system" data-accordion="accordion-tabs-layout-18cfc30939" data-index="7" aria-controls="Network operating system">Network operating system
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Blueprint for AI-Native Acceleration" data-accordion="accordion-tabs-layout-0f528c2383" data-index="8" aria-controls="Blueprint for AI-Native Acceleration">Blueprint for AI-Native Acceleration
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Products &gt; Optics" data-accordion="accordion-tabs-layout-b807f6e6bd" data-index="9" aria-controls="Optics">Optics
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
            
            <div class="mega-menu-tabs__accordion" role="menu">
              <div class="overlay mega-menu-tabs__accordion-list">
                <div class="xfpage page basicpage">


    
    
    
    <div id="container-ca98828a8d" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-9849eb43c7" data-tab-label="tabs-layout-9849eb43c7">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/access-points.html" target="_self" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points" tabindex="-1">
        Wireless access points
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points.html?filters=wi-fi-standard:wi-fi-7-(802-11be)" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; Wi-Fi 7">
              Wi-Fi 7
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points.html?filters=wi-fi-standard:wi-fi-6-(-802-11ax)" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; Wi-Fi 6E and Wi-Fi 6">
              Wi-Fi 6E and Wi-Fi 6
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points/bt11-access-point.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; Bluetooth LE">
              Bluetooth LE
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/access-points/edge.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Wireless access points &gt; On-prem Edge">
              On-prem Edge
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Wireless access &gt; Services">

      
        Services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wi-fi-assurance.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Wireless Assurance (Wi-Fi)">
              Wireless Assurance (Wi-Fi)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/asset-visibility.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Asset Visibility (Indoor Location)">
              Asset Visibility (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/user-engagement.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; User Engagement (Indoor Location)">
              User Engagement (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Wireless access &gt; Services &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-0a874c0916" data-tab-label="tabs-layout-0a874c0916">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Wired access &gt; Switches">

      
        Switches
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/switches/ex-series.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Switches &gt; EX enterprise">
              EX enterprise
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Wired access &gt; Services">

      
        Services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wired-assurance.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Wired Assurance">
              Wired Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Wired access &gt; Services &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-71e9367a88" data-tab-label="tabs-layout-71e9367a88">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; SD-WAN / SASE &gt; SD-WAN">

      
        SD-WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/session-smart-router.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; SD-WAN &gt; Session Smart Routers">
              Session Smart Routers
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/srx-series.html?filters=location:branch" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; SD-WAN &gt; Next-generation firewalls">
              Next-generation firewalls
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; SD-WAN / SASE &gt; Edge security">

      
        Edge security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/secure-edge.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Edge security &gt; Secure Services Edge (SSE)">
              Secure Services Edge (SSE)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/juniper-secure-connect.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Edge security &gt; Secure Connect">
              Secure Connect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; SD-WAN / SASE &gt; Services">

      
        Services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; WAN Assurance">
              WAN Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; Security Assurance">
              Security Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; SD-WAN / SASE &gt; Services &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-622bf6339d" data-tab-label="tabs-layout-622bf6339d">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/routers.html" target="_self" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers" tabindex="-1">
        Routers
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/acx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers &gt; ACX access and aggregation">
              ACX access and aggregation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/mx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers &gt; MX multi-service">
              MX multi-service
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/routers/ptx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Routers &gt; PTX packet transport">
              PTX packet transport
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/switches.html" target="_self" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Switches" tabindex="-1">
        Switches
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/switches/ex-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Switches &gt; EX enterprise">
              EX enterprise
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/switches/qfx-series.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Switches &gt; QFX data center">
              QFX data center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Routing and switching &gt; Operations">

      
        Operations
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Routing and switching &gt; Data center automation">

      
        Data center automation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Data center automation &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/data-center-assurance.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; Data center automation &gt; Data Center Assurance">
              Data Center Assurance
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Routing and switching &gt; WAN automation">

      
        WAN automation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/routing-assurance.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Edge Routing Assurance">
              Edge Routing Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-automation.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Automation">
              Paragon Automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-active-assurance.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Active Assurance">
              Paragon Active Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-planner.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Planner">
              Paragon Planner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-insights.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Insights">
              Paragon Insights
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-pathfinder.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; Paragon Pathfinder">
              Paragon Pathfinder
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/ran-intelligent-controller.html" rel="noopener" data-navid="Products &gt; Routing and switching &gt; WAN automation &gt; RAN Intelligent Controller">
              RAN Intelligent Controller
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/acx7020-router?network=on" title="ACX7020 router" alt="ACX7020 router" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Juniper ACX7020 Cloud Metro Access Router</p>
            <div>
                <small><p>Legacy networks simply cannot meet the demands of today’s rapidly evolving metro landscape. Unlock a new generation of highly scalable architectures and automated operations with the Juniper ACX7020.&nbsp;</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/products/routers/acx-series/acx7000-family-cloud-metro-routers/acx7000-line/acx7020.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Products &gt; Routing and switching &gt; Learn more">
            Learn more<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/EX4000-1280x800-product-navigation?network=on" title="EX4000 Ethernet Switch" alt="EX4000 Ethernet Switch" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Next-gen AI-Native EX4000 line of switches</p>
            <div>
                <small><p>Lack of AI innovation from your current networking vendor slowing you down? Embrace Juniper’s cloud-native, AI-Native access switches that support every level and layer, across nearly every deployment.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/products/switches/ex-series/ex4000-ethernet-switch.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Products &gt; Routing and switching &gt; Discover how">
            Discover how<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-82998afcfe" data-tab-label="tabs-layout-82998afcfe">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Firewalls">

      
        Firewalls
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/srx-series.html" rel="noopener" data-navid="Products &gt; Security &gt; Firewalls &gt; SRX next-generation firewalls">
              SRX next-generation firewalls
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Edge security">

      
        Edge security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/secure-edge.html" rel="noopener" data-navid="Products &gt; Security &gt; Edge security &gt; Secure Services Edge (SSE)">
              Secure Services Edge (SSE)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/juniper-secure-connect.html" rel="noopener" data-navid="Products &gt; Security &gt; Edge security &gt; Secure Connect">
              Secure Connect
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Network access control (NAC)">

      
        Network access control (NAC)
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Security &gt; Network access control (NAC) &gt; Access Assurance">
              Access Assurance
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Security &gt; Security management and services">

      
        Security management and services
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/security-director-network-security-management.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; Security Director">
              Security Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; Security Assurance">
              Security Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/advanced-threat-prevention.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; Advanced Threat Protection">
              Advanced Threat Protection
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/secintel-threat-intelligence.html" rel="noopener" data-navid="Products &gt; Security &gt; Security management and services &gt; SecIntel (ATP)">
              SecIntel (ATP)
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/products/security.html" rel="noopener" data-navid="Products &gt; Security   &gt; See all security products">
              See all security products
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item accordion-item-button ">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--primary nav-button pill" href="https://www.juniper.net/documentation/validated-designs/us/en/security/" rel="noopener" data-navid="Products &gt; Security   &gt; See security validated designs">
              See security validated designs
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-f64e7adf2d" data-tab-label="tabs-layout-f64e7adf2d">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Marvis AI &gt; Marvis AI">

      
        Marvis AI
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; Cloud subscription services">
              Cloud subscription services
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant/marvis-ai-assistant-for-data-center.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; Marvis AI Assistant for Data Center">
              Marvis AI Assistant for Data Center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/us/en/products/marvis-ai.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Marvis AI &gt; See all products powered by Marvis AI">
              See all products powered by Marvis AI
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Marvis AI &gt; Learn more">

      
        Learn more
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/dm/explainable-ai.html" rel="noopener" data-navid="Products &gt; Marvis AI &gt; Learn more &gt; Explainable AI">
              Explainable AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/The Q and AI?network=on" title="The Q and AI" alt="The Q and AI text with an image of Bob Friday and Kedar Dhuru." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">The Q&amp;AI Podcast </p>
            <div>
                <small><p>Delivering practical solutions and enriching discussions, this podcast series is a vital resource for those seeking an in-depth exploration of AI's transformative potential.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/the-feed/series/q-and-ai.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Products &gt; Marvis AI &gt; Catch the latest episode ">
            Catch the latest episode <span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-931be874cb" data-tab-label="tabs-layout-931be874cb">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/campus-and-branch.html" target="_self" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch" tabindex="-1">
        Campus and branch
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wi-fi-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Wireless Assurance (Wi-Fi) ">
              Wireless Assurance (Wi-Fi) 
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wired-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Wired Assurance">
              Wired Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; WAN Assurance">
              WAN Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/access-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Access Assurance (NAC)">
              Access Assurance (NAC)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/premium-analytics.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Premium Analytics">
              Premium Analytics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/asset-visibility.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Asset Visibility (Indoor Location)">
              Asset Visibility (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/user-engagement.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; User Engagement (Indoor Location)">
              User Engagement (Indoor Location)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Management software &gt; Campus and branch &gt; Marvis AI Assistant">
              Marvis AI Assistant
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Management software &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/apstra-data-center-director.html" rel="noopener" data-navid="Products &gt; Management software &gt; Data center &gt; Apstra Data Center Director">
              Apstra Data Center Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/data-center-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Data center &gt; Data Center Assurance">
              Data Center Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant/marvis-ai-assistant-for-data-center.html" rel="noopener" data-navid="Products &gt; Management software &gt; Data center &gt; Marvis AI Assistant for Data Center">
              Marvis AI Assistant for Data Center
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Management software &gt; WAN">

      
        WAN
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/routing-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Routing Assurance">
              Routing Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-automation.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Automation">
              Paragon Automation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-active-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Active Assurance">
              Paragon Active Assurance
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-planner.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Planner">
              Paragon Planner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-insights.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Insights">
              Paragon Insights
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/paragon-pathfinder.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Paragon Pathfinder">
              Paragon Pathfinder
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-automation/ran-intelligent-controller.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; RAN Intelligent Controller">
              RAN Intelligent Controller
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/marvis-ai-assistant.html" rel="noopener" data-navid="Products &gt; Management software &gt; WAN &gt; Marvis AI Assistant for Routing">
              Marvis AI Assistant for Routing
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Management software &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/security/security-director-network-security-management.html" rel="noopener" data-navid="Products &gt; Management software &gt; Security &gt; Security Director">
              Security Director
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/cloud-services/wan-assurance.html" rel="noopener" data-navid="Products &gt; Management software &gt; Security &gt; Security Assurance">
              Security Assurance
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-18cfc30939" data-tab-label="tabs-layout-18cfc30939">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/network-operating-system.html" target="_self" rel="noopener" data-navid="Products &gt; Network operating system &gt; Network operating system" tabindex="-1">
        Network operating system
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-operating-system/junos-os.html" rel="noopener" data-navid="Products &gt; Network operating system &gt; Network operating system &gt; Junos OS">
              Junos OS
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/network-operating-system/junos-evolved.html" rel="noopener" data-navid="Products &gt; Network operating system &gt; Network operating system &gt; Junos OS Evolved">
              Junos OS Evolved
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-0f528c2383" data-tab-label="tabs-layout-0f528c2383">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Learn">

      
        Learn
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration/learning-and-certification.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Learn &gt; Free training">
              Free training
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Learn &gt; Training and certification">
              Training and certification
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try">

      
        Try
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/juniper-mist-ai-on-us.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; AI on us">
              AI on us
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/free-gear.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; Free AP">
              Free AP
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/2024/juniper-wan2x-incentive-program.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; WAN 2x">
              WAN 2x
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/2024/security-buy-1-get-2-years-free-subscription.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Try &gt; Security buy 1 get 2">
              Security buy 1 get 2
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy">

      
        Buy
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/enterprise-agreements.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy &gt; Enterprise Agreements">
              Enterprise Agreements
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/naas-network-as-a-service.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy &gt; Networking as a Service (NaaS)">
              Networking as a Service (NaaS)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/public-cloud-partnership.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Buy &gt; Cloud marketplace">
              Cloud marketplace
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize">

      
        Deploy and optimize
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration/juniper-validated-designs.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize &gt; Juniper Validated Designs (JVD)">
              Juniper Validated Designs (JVD)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/support-services/support-insights.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize &gt; Support Insights">
              Support Insights
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/topics/operations/proactive-network-support-with-juniper-ai-care-services.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration &gt; Deploy and optimize &gt; AI Care Services">
              AI Care Services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_self" class="nav-link-animation nav-button--black nav-button pill" href="https://www.juniper.net/us/en/solutions/blueprint-for-ai-native-acceleration.html" rel="noopener" data-navid="Products &gt; Blueprint for AI-Native Acceleration   &gt; Blueprint for AI-Native Acceleration ">
              Blueprint for AI-Native Acceleration 
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-b807f6e6bd" data-tab-label="tabs-layout-b807f6e6bd">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" tabindex="0">

      <a href="https://www.juniper.net/us/en/products/pluggable-optics.html" target="_self" rel="noopener" data-navid="Products &gt; Optics &gt; Optics" tabindex="-1">
        Optics
      </a>
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/jco-series.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Coherent optics">
              Coherent optics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/qualified-optics.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Qualified optics">
              Qualified optics
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/application-specific-pluggables.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Application-specific pluggables">
              Application-specific pluggables
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/products/pluggable-optics/optical-and-electrical-cables.html" rel="noopener" data-navid="Products &gt; Optics &gt; Optics &gt; Optical and electrical cables">
              Optical and electrical cables
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>

        
    </div>

</div>

              </div>
            </div>
          
          </div>
          <div class="utility-belt">
            <ul class="utility-belt__nav">
              <li>
                <a href="https://www.juniper.net/us/en/mist-ai-native-networking-platform.html" class="utility-belt__nav-link"><span class="link-label" data-navid="Products &gt; Mist AI-Native Networking Platform">
                  <span class="link-icon juniper-icon icon-database"></span>
                    Mist AI-Native Networking Platform</span>
                  </a>
              </li>
            
              <li>
                <a href="https://www.juniper.net/us/en/trials-demos.html" class="utility-belt__nav-link"><span class="link-label" data-navid="Products &gt; Trials and demos">
                  <span class="link-icon juniper-icon icon-award"></span>
                    Trials and demos</span>
                  </a>
              </li>
            
              <li>
                <a href="https://www.juniper.net/us/en/products/products-a-to-z.html" class="utility-belt__nav-link"><span class="link-label" data-navid="Products &gt; All products A-Z">
                  <span class="link-icon juniper-icon icon-move"></span>
                    All products A-Z</span>
                  </a>
              </li>
            </ul>
          </div>
        </div>
      
        <div class="mega-menu-tabs__nav-submenu" id="submenu--d7fb054443" role="menu">
          <div class="mega-menu-tabs__nav-submenu-heading">
            <button class="btn-back">
              <span class="juniper-svgicon jn-arrow jn-arrow-left"></span>Back</button>
            <p>Services</p>
          </div>
          <div class="mega-menu-tabs__submenu-list not-tab-list">
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Services &gt; Services" data-accordion="accordion-tabs-layout-4f602fe6a1" data-index="0" aria-controls="Services">Services
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
            
            <div class="mega-menu-tabs__accordion" role="menu">
              <div class="overlay mega-menu-tabs__accordion-list">
                <div class="xfpage page basicpage">


    
    
    
    <div id="container-2636e35f16" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-4f602fe6a1" data-tab-label="tabs-layout-4f602fe6a1">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services.html" rel="noopener" data-navid="Services &gt; Services   &gt; Services overview">
              Services overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-campus-and-branch.html" rel="noopener" data-navid="Services &gt; Services   &gt; Campus and branch">
              Campus and branch
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-data-center.html" rel="noopener" data-navid="Services &gt; Services   &gt; Data center">
              Data center
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-wan.html" rel="noopener" data-navid="Services &gt; Services   &gt; WAN">
              WAN
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/services-for-security.html" rel="noopener" data-navid="Services &gt; Services   &gt; Security">
              Security
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/support-services.html" rel="noopener" data-navid="Services &gt; Services   &gt; Support services">
              Support services
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Services &gt; Services &gt; Tools and resources">

      
        Tools and resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/services/support-services/support-insights.html" rel="noopener" data-navid="Services &gt; Services &gt; Tools and resources &gt; Juniper Support Insights (JSI)">
              Juniper Support Insights (JSI)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training.html" rel="noopener" data-navid="Services &gt; Services &gt; Tools and resources &gt; Training and certification">
              Training and certification
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AICare 16x10 GettyImages-1128200464?network=on" title="Services AI Care" alt="Services AI Care" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Juniper AI Care Services Revolutionize Your Service Experience</p>
            <div>
                <small><p>Our industry-first AI-Native services couple AIOps with our deep expertise across the full network life cycle. You can move from reactive response to proactive insight and action.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/services/services-for-campus-and-branch/ai-care-services.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Services &gt; Services &gt; Explore AI Care Services">
            Explore AI Care Services<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AIDC 16x10 GettyImages-1059910988?network=on" title="Services AI Data Center" alt="Services AI Data Center" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Juniper AI Data Center Deployment Services Optimize Your AI Model Runs</p>
            <div>
                <small><p>We use our expertise and validated designs to help design, deploy, validate and tune networks, including GPUs and storage, to get the most from your AI infrastructure operation.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/services/ai-data-center-deployment-services-datasheet.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Services &gt; Services &gt; Learn about AI Data Center Deployment Services">
            Learn about AI Data Center Deployment Services<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      
    </div>
  
  </div>

        
    </div>

</div>

              </div>
            </div>
          
          </div>
          <div class="utility-belt">
            <ul class="utility-belt__nav">
              <li>
                <a href="https://support.juniper.net/support/guidelines/" class="utility-belt__nav-link"><span class="link-label" data-navid="Services &gt; Guidelines and policies">
                  <span class="link-icon juniper-icon icon-move"></span>
                    Guidelines and policies</span>
                  </a>
              </li>
            </ul>
          </div>
        </div>
      
        <div class="mega-menu-tabs__nav-submenu" id="submenu--1d2fe41545" role="menu">
          <div class="mega-menu-tabs__nav-submenu-heading">
            <button class="btn-back">
              <span class="juniper-svgicon jn-arrow jn-arrow-left"></span>Back</button>
            <p>Partners</p>
          </div>
          <div class="mega-menu-tabs__submenu-list not-tab-list">
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Partners &gt; Partners" data-accordion="accordion-tabs-layout-a66d9dcbd5" data-index="0" aria-controls="Partners">Partners
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
            
            <div class="mega-menu-tabs__accordion" role="menu">
              <div class="overlay mega-menu-tabs__accordion-list">
                <div class="xfpage page basicpage">


    
    
    
    <div id="container-5bf504999b" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-a66d9dcbd5" data-tab-label="tabs-layout-a66d9dcbd5">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Partners &gt; Partners &gt; Our partners">

      
        Our partners
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://juniper.my.site.com/prm/s/partnerlocator" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Find a partner">
              Find a partner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://juniper.my.site.com/prm/s/distributorlocator" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Find a distributor">
              Find a distributor
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/content/dam/www/assets/additional-resources/us/en/worldwide-listing-jpa-services-partners.pdf.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Find a services partner">
              Find a services partner
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/solutions/public-cloud-partnership.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Public cloud partnerships">
              Public cloud partnerships
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/partners/strategic-alliances.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Strategic alliances">
              Strategic alliances
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/partners/technology-alliances.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Our partners &gt; Technology alliances">
              Technology alliances
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Partners &gt; Partners &gt; Become a partner">

      
        Become a partner
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/partners.html" rel="noopener" data-navid="Partners &gt; Partners &gt; Become a partner &gt; Partner program overview">
              Partner program overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://juniper.my.site.com/prm/s/onboarding" rel="noopener" data-navid="Partners &gt; Partners &gt; Become a partner &gt; Partner application">
              Partner application
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Partners &gt; Partners &gt; Enrolled partner">

      
        Enrolled partner
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://partners.juniper.net/partnercenter/index.page" rel="noopener" data-navid="Partners &gt; Partners &gt; Enrolled partner &gt; Partner log in">
              Partner log in
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://jpartnertraining.juniper.net/" rel="noopener" data-navid="Partners &gt; Partners &gt; Enrolled partner &gt; Learning Academy">
              Learning Academy
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://content.juniper.net/champions" rel="noopener" data-navid="Partners &gt; Partners &gt; Enrolled partner &gt; Juniper Champions">
              Juniper Champions
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>

        
    </div>

</div>

              </div>
            </div>
          
          </div>
          
        </div>
      
        <div class="mega-menu-tabs__nav-submenu" id="submenu--d3e606ea98" role="menu">
          <div class="mega-menu-tabs__nav-submenu-heading">
            <button class="btn-back">
              <span class="juniper-svgicon jn-arrow jn-arrow-left"></span>Back</button>
            <p>Support and Documentation</p>
          </div>
          <div class="mega-menu-tabs__submenu-list not-tab-list">
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Support and Documentation &gt; Support and Documentation" data-accordion="accordion-tabs-layout-6e72b64098" data-index="0" aria-controls="Support and Documentation">Support and Documentation
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
            
            <div class="mega-menu-tabs__accordion" role="menu">
              <div class="overlay mega-menu-tabs__accordion-list">
                <div class="xfpage page basicpage">


    
    
    
    <div id="container-5c6409c825" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container five-column-layout" id="accordion-tabs-layout-6e72b64098" data-tab-label="tabs-layout-6e72b64098">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Documentation">

      
        Documentation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Product documentation">
              Product documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/product/us/en/mist/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Mist documentation">
              Mist documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/quickstart/us/en/quick-start/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Quick starts">
              Quick starts
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://apps.juniper.net/home/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Product and feature data (Pathfinder)">
              Product and feature data (Pathfinder)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://supportportal.juniper.net/s/knowledge?language=en_US" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Knowledge Base">
              Knowledge Base
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://prsearch.juniper.net/InfoCenter/index?page=prsearch" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Documentation &gt; Search for a Problem Report">
              Search for a Problem Report
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Downloads">

      
        Downloads
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=ex" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; EX Series">
              EX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=srx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; SRX Series">
              SRX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=mx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; MX Series">
              MX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=qfx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; QFX Series">
              QFX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/?f=acx" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; ACX Series">
              ACX Series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://support.juniper.net/support/downloads/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Downloads &gt; See all software downloads">
              See all software downloads
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Tools and resources">

      
        Tools and resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Juniper support">
              Juniper support
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://community.juniper.net/home" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Elevate community">
              Elevate community
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://threatlabs.juniper.net/home/#/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Juniper Threat Labs">
              Juniper Threat Labs
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://threatlabs.juniper.net/home/search/#/list/ips?page_number=1&amp;page_size=20" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Security intelligence">
              Security intelligence
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://license.juniper.net/licensemanage/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Product license keys">
              Product license keys
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://supportportal.juniper.net/s/serial-number-entitlement" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Serial number entitlement search">
              Serial number entitlement search
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/report-a-security-vulnerability.html" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Report a vulnerability">
              Report a vulnerability
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/requesting-support/" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Tools and resources &gt; Contact Support">
              Contact Support
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Support &gt; Support and Documentation &gt; Juniper Support Portal">

      
        Juniper Support Portal
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item accordion-item-button accordion-item-button-first">

            
            

            
            <a target="_blank" class="nav-link-animation nav-button--black nav-button pill" href="https://supportportal.juniper.net/s/?language=en_US" rel="noopener" data-navid="Support &gt; Support and Documentation &gt; Juniper Support Portal &gt; Log in">
              Log in
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="optional-feature-promo section">

    




<div>
<div class="feature-optional-promo-cmp">
    <div class="img-wrapper">
      
        
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AdobeStock_60596468?network=on" title="Business professional holding a tablet with digital screen" alt="Business professional holding a tablet with digital screen" data-breakpoints="280,350,450,720" style="width: 100%;">
    
    </div>
    
    <div class="text-wrapper  green_gradient">
      <div class="text-section">
        <p class="title">The Juniper Support Portal (JSP) mobile app is now available!</p>
        <div><small><p>Get Juniper support anytime, anywhere with the JSP mobile application, now available for Android and iOS!</p>
</small></div>
      </div>
      <a href="https://supportportal.juniper.net/s/article/Juniper-Support-Portal-Mobile-Application-Release-Notes?language=en_US" rel="noopener" class="featured__anchor nav-link-animation" data-navid="Support &gt; Support and Documentation &gt; Download now" target="_blank">
        Download now
        <span class="juniper-icon icon-chevrons-right"></span>
      </a>
    </div>
  </div>
</div>

</div>

</div>
    </div>
  
  </div>

        
    </div>

</div>

              </div>
            </div>
          
          </div>
          <div class="utility-belt">
            <ul class="utility-belt__nav">
              <li>
                <a href="https://support.juniper.net/support/eol/" class="utility-belt__nav-link"><span class="link-label" data-navid="Support and Documentation &gt; End of Life (EoL)">
                  <span class="link-icon juniper-icon icon-database"></span>
                    End of Life (EoL)</span>
                  </a>
              </li>
            </ul>
          </div>
        </div>
      
        <div class="mega-menu-tabs__nav-submenu" id="submenu--4386017253" role="menu">
          <div class="mega-menu-tabs__nav-submenu-heading">
            <button class="btn-back">
              <span class="juniper-svgicon jn-arrow jn-arrow-left"></span>Back</button>
            <p>Learn</p>
          </div>
          <div class="mega-menu-tabs__submenu-list ">
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; About Juniper" data-accordion="accordion-tabs-layout-5a19c34d37" data-index="0" aria-controls="About Juniper">About Juniper
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; Training" data-accordion="accordion-tabs-layout-77a669d4ef" data-index="1" aria-controls="Training">Training
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; Events" data-accordion="accordion-tabs-layout-a1ee21513a" data-index="2" aria-controls="Events">Events
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; The Feed" data-accordion="accordion-tabs-layout-9c6b2e3ec2" data-index="3" aria-controls="The Feed">The Feed
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; Resources" data-accordion="accordion-tabs-layout-e94a378bf4" data-index="4" aria-controls="Resources">Resources
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; Technology learning topics" data-accordion="accordion-tabs-layout-431a407e31" data-index="5" aria-controls="Technology learning topics">Technology learning topics
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
              <div class="mega-menu-tabs__submenu-list-item">
                <button class="mega-menu-tabs__submenu-list-item-btn" aria-expanded="false" data-navid="Learn &gt; Thought leadership and insights" data-accordion="accordion-tabs-layout-a54f015717" data-index="6" aria-controls="Thought leadership and insights">Thought leadership and insights
                  <div class="accordion-chevron">
                    <span class="juniper-svgicon jn-chevron jn-chevron-down"></span>
                    <span class="juniper-svgicon jn-chevron jn-chevron-up"></span>
                  </div>
                </button>
              </div>
            
            
            <div class="mega-menu-tabs__accordion" role="menu">
              <div class="overlay mega-menu-tabs__accordion-list">
                <div class="xfpage page basicpage">


    
    
    
    <div id="container-3a19e37d9e" class="cmp-container">
        
        <div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-5a19c34d37" data-tab-label="tabs-layout-5a19c34d37">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; About Juniper &gt; Company">

      
        Company
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; About us">
              About us
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/profile.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Company profile">
              Company profile
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/leadership.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Leadership">
              Leadership
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://newsroom.juniper.net/overview/default.aspx" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Newsroom">
              Newsroom
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/awards-and-industry-recognition.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Awards and recognition">
              Awards and recognition
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/climate-change-and-sustainability.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Our sustainable future">
              Our sustainable future
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/corporate-responsibility.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Corporate social responsibility">
              Corporate social responsibility
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/juniper-innovations.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Juniper innovations">
              Juniper innovations
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/executive-briefing.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Company &gt; Executive Briefing Program">
              Executive Briefing Program
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; About Juniper &gt; Careers">

      
        Careers
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://jobs.juniper.net/careers" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Careers &gt; Current job openings">
              Current job openings
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/culture-careers.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Careers &gt; Company culture and careers">
              Company culture and careers
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/culture-careers/values.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Careers &gt; Our values">
              Our values
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations">

      
        Media and analyst relations
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/contact-us/media.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations &gt; Global media contacts">
              Global media contacts
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/company/analyst-relations.html" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations &gt; Industry analyst and influencer relations">
              Industry analyst and influencer relations
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://investor.juniper.net/investor-relations/default.aspx" rel="noopener" data-navid="Learn &gt; About Juniper &gt; Media and analyst relations &gt; Investor relations">
              Investor relations
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-77a669d4ef" data-tab-label="tabs-layout-77a669d4ef">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Training &gt; Training">

      
        Training
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training.html" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Training overview">
              Training overview
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/schedule_classes.aspx?&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Schedule of live classes">
              Schedule of live classes
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_search.aspx?search=On-Demand&amp;taxonomyList=%23M02%2C%23T01&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; On-demand courses">
              On-demand courses
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_info.aspx?id=JUNIPER-OPEN-LEARNING&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Free training">
              Free training
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_search.aspx?search=course&amp;taxonomyList=%23M01%2C%23M02%2C%23T01&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; All courses">
              All courses
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/purchase-options.html" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Payment options">
              Payment options
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item accordion-item-button ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-button--black nav-button pill" href="https://learningportal.juniper.net/juniper/default.aspx?&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Training &gt; Learning Portal">
              Learning Portal
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Training &gt; Certification">

      
        Certification
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/certification.html" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Juniper certification">
              Juniper certification
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/certification.html" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Certification tracks">
              Certification tracks
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_info.aspx?id=JUNIPER-CERTIFICATION-PROGRAM-HOME&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Certification resources">
              Certification resources
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://learningportal.juniper.net/juniper/user_activity_info.aspx?id=JUNIPER-CERTIFICATION-PROGRAM-HOME&amp;TrackId=jnet-nav" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Exam registration">
              Exam registration
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/training/certification/recertification.html" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Recertification">
              Recertification
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://cp.certmetrics.com/juniper/en/login" rel="noopener" data-navid="Learn &gt; Training &gt; Certification &gt; Manage my certifications">
              Manage my certifications
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="optional-feature-promo section">

    




<div>
<div class="feature-optional-promo-cmp">
    <div class="img-wrapper">
      
        
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/attend-our-customer-speaking-session?network=on" title="Audience raising hands up while businessman is speaking in training at the office." alt="Audience raising hands up while businessman is speaking in training at the office." data-breakpoints="280,350,450,720" style="width: 100%;">
    
    </div>
    
    <div class="text-wrapper  green_gradient">
      <div class="text-section">
        <p class="title">Juniper certification and training news</p>
        
      </div>
      <a href="https://www.juniper.net/us/en/training/news.html" rel="noopener" class="featured__anchor nav-link-animation" data-navid="Learn &gt; Training &gt; See the latest" target="_self">
        See the latest
        <span class="juniper-icon icon-chevrons-right"></span>
      </a>
    </div>
  </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-a1ee21513a" data-tab-label="tabs-layout-a1ee21513a">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/ringing-of-the-bell-nav?network=on" title="Ringing of the bell" alt="Ringing of the bell" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">All global events</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Events &gt; See the latest">
            See the latest<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/AI-native-now-nav?fmt=png8-alpha&amp;network=on" title="AI-native-now" alt="AI-native-now" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI-Native NOW event series</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/ai-native-now.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Events &gt; Explore events">
            Explore events<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/ainn-san-diego-event-nav-promo?fmt=png8-alpha&amp;network=on" title="AINN San Diego Event nav promo" alt="AINN San Diego Event nav promo" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">AI-Native NOW: San Diego</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/events/2025/ai-native-now-san-diego.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Events &gt; Register NOW">
            Register NOW<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-9c6b2e3ec2" data-tab-label="tabs-layout-9c6b2e3ec2">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; The Feed &gt; Videos">

      
        Videos
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; The Feed">
              The Feed
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/topics.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; Browse by topic">
              Browse by topic
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; Video series">
              Video series
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/leadership-voices.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Videos &gt; Leadership voices">
              Leadership voices
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; The Feed &gt; Podcasts">

      
        Podcasts
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/channel-chats.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Podcasts &gt; Channel chats">
              Channel chats
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/be-bold.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Podcasts &gt; Be bold">
              Be bold
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/the-feed/series/q-and-ai.html" rel="noopener" data-navid="Learn &gt; The Feed &gt; Podcasts &gt; The Q&amp;AI">
              The Q&amp;AI
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/glowing?fmt=png8-alpha&amp;network=on" title="Glowing" alt="Juniper&#39;s Christina Hendrix at the head of a conference table. With the text &quot;The NOW Way to Network&quot; overlayed, with &quot;NOW&quot; emphasizing the &quot;O&quot; in green color." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">The NOW Way to Network</p>
            
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/the-feed/series/the-now-way-to-network.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; The Feed &gt; Watch the video series">
            Watch the video series<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-e94a378bf4" data-tab-label="tabs-layout-e94a378bf4">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Resources &gt; Customers">

      
        Customers
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/customers.html" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Customer success stories">
              Customer success stories
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/customers/welcome.html" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Getting started">
              Getting started
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://userregistration.juniper.net/" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Create a Juniper account">
              Create a Juniper account
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://license.juniper.net/licensemanage/" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Activate licenses">
              Activate licenses
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/forms/participate-in-our-elevate-program.html" rel="noopener" data-navid="Learn &gt; Resources &gt; Customers &gt; Customer advocacy program">
              Customer advocacy program
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Resources &gt; Documentation">

      
        Documentation
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Product documentation">
              Product documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/product/us/en/mist/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Mist documentation">
              Mist documentation
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/quickstart/us/en/quick-start/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Quick starts">
              Quick starts
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/documentation/validated-designs/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Juniper Validated Designs (JVD)">
              Juniper Validated Designs (JVD)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://apps.juniper.net/home/" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Product and feature data (Pathfinder)">
              Product and feature data (Pathfinder)
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://supportportal.juniper.net/s/knowledge?language=en_US" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Knowledge Base">
              Knowledge Base
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://prsearch.juniper.net/InfoCenter/index?page=prsearch" rel="noopener" data-navid="Learn &gt; Resources &gt; Documentation &gt; Search for a Problem Report">
              Search for a Problem Report
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Resources &gt; Popular resources">

      
        Popular resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://support.juniper.net/support/downloads/" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Software downloads">
              Software downloads
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://blogs.juniper.net/" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Blogs">
              Blogs
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_blank" class="nav-link-animation nav-link--default nav-link" href="https://community.juniper.net/home" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Elevate community">
              Elevate community
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://threatlabs.juniper.net/home/#/" rel="noopener" data-navid="Learn &gt; Resources &gt; Popular resources &gt; Juniper Threat Labs">
              Juniper Threat Labs
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-431a407e31" data-tab-label="tabs-layout-431a407e31">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; AI">

      
        AI
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-native-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AI-Native Networking?">
              What is AI-Native Networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-for-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AI for networking?">
              What is AI for networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-aiops.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AIOps?">
              What is AIOps?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-data-center-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is AI data center networking?">
              What is AI data center networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-explainable-ai-xai.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; AI &gt; What is explainable AI (XAI)?">
              What is explainable AI (XAI)?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Data center">

      
        Data center
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-data-center-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is AI data center networking?">
              What is AI data center networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-a-data-center-network.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is a data center network?">
              What is a data center network?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-data-center-fabric.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is data center fabric?">
              What is data center fabric?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-intent-based-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is intent-based networking?">
              What is intent-based networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-400g.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Data center &gt; What is 400G?">
              What is 400G?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching">

      
        Network routing and switching
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-a-router.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching &gt; What is a router?">
              What is a router?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-a-network-switch.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching &gt; What is a network switch?">
              What is a network switch?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ai-native-routing.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Network routing and switching &gt; What is AI-native routing?">
              What is AI-native routing?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE">

      
        SD-WAN / SASE
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-sd-wan.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE &gt; What is SD-WAN?">
              What is SD-WAN?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/sd-wan-explained.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE &gt; SD-WAN explained">
              SD-WAN explained
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-sase.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; SD-WAN / SASE &gt; What is SASE?">
              What is SASE?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Security">

      
        Security
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-advanced-threat-prevention.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Security &gt; What is advanced threat prevention?">
              What is advanced threat prevention?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-ids-ips.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Security &gt; What is IDS and IPS?">
              What is IDS and IPS?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" data-navid="Learn &gt; Technology learning topics &gt; Wireless">

      
        Wireless
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up "></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down "></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-an-access-point-in-networking.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is an access point in networking?">
              What is an access point in networking?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/wifi-explained.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; Wi-Fi explained">
              Wi-Fi explained
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-wi-fi-7.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is Wi-Fi 7?">
              What is Wi-Fi 7?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-wi-fi-6e.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is Wi-Fi 6E?">
              What is Wi-Fi 6E?
              
            </a>

            
            

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--default nav-link" href="https://www.juniper.net/us/en/research-topics/what-is-wi-fi-6.html" rel="noopener" data-navid="Learn &gt; Technology learning topics &gt; Wireless &gt; What is Wi-Fi 6?">
              What is Wi-Fi 6?
              
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>
<div class="nav-links-column section">
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item  ">

            
            

            
            <a target="_self" class="nav-link-animation nav-link--showcase nav-link" href="https://www.juniper.net/us/en/research-topics.html" rel="noopener" data-navid="Learn &gt; Technology learning topics   &gt; See all learning topics">
              See all learning topics
              <span class="juniper-icon icon-chevrons-right"></span>
            </a>

            
            

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>
</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>
<div class="tabs-layout">





    <div class="mmt-desktop__columns-container four-column-layout" id="accordion-tabs-layout-a54f015717" data-tab-label="tabs-layout-a54f015717">
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/carousel-ai-native-now-event-foreground-nav?network=on" title="AI Native Now" alt="AI Native Now" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Executive insights</p>
            <div>
                <small><p>Dive deep with leading experts and thought leaders on all the topics that matter most to your business, from AI to network security to driving rapid, relevant transformation for your business.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/executive-insights.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Thought leadership and insights &gt; Learn more">
            Learn more<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/past-summit-speaker-nav?network=on" title="A keynote speaker giving a presentation at a conference. There are dozens of people sitting around them. The presentation is displayed via projector on all the walls in the room." alt="A keynote speaker giving a presentation at a conference. There are dozens of people sitting around them. The presentation is displayed via projector on all the walls in the room." data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Leadership voices</p>
            <div>
                <small><p>Juniper Networks’ leaders operate on the front lines of creating the network of the future. Take a look around to see what’s on their minds.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/the-feed/series/leadership-voices.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Thought leadership and insights &gt; Watch now">
            Watch now<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items"><div class="navigation-feature-component section">

    




<div class="navigation-feature-cmp">
    <div class="img-wrapper">
        
            
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="preload-responsive-image responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/Bob-Friday-speaking?fmt=png8-alpha&amp;network=on" title="Bob Friday and Jessica Garrison speaking" alt="Bob Friday and Jessica Garrison speaking" data-breakpoints="280,350,450,720" style="width: 100%;">
        
    </div>
    <div class="text-wrapper">
        <div class="text-section">
            <p class="title">Bob Friday Talks</p>
            <div>
                <small><p>Join Bob as he ventures into all the knowns -- and -- unknowns -- of AI.</p>
</small>
            </div>
        </div>
    </div>
    <div class="link-wrapper" tabindex="0">
        <a tabindex="-1" href="https://www.juniper.net/us/en/executive-insights/bob-friday.html" target="_self" rel="noopener" class="featured__anchor btn--link-green nav-link-animation" data-navid="Learn &gt; Thought leadership and insights &gt; Catch the latest episode">
            Catch the latest episode<span class="juniper-icon icon-chevrons-right"></span>
        </a>
    </div>
</div>

</div>

</div>
      <div class="mmt-desktop__column mega-menu-tabs__accordion-list-items">
</div>
      
    </div>
  
  </div>

        
    </div>

</div>

              </div>
            </div>
          
          </div>
          
        </div>
      
        </nav>
      </div>
      <div class="demo-button-container">
        <div id="demo-button" class="mobile button btn-demo-trials">
          <a href="https://www.juniper.net/us/en/trials-demos.html" target="_self" data-navid="Trials and Demos" class="juniper-btn-v2 juniper-btn--green">Trials and Demos</a>
        </div>
      </div>
  


</header>


</div>

        
    </div>

</div>









<script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/responsive_image.js.下载"></script>


    
    <script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-global-navigation.js.下载"></script>






</div> <div class="cww"><div class="change-widget-wrapper"><section class="change-widget"><div class="tlhome"><a href="https://www.juniper.net/documentation/" class="linkto-home">
          Documentation
        </a></div> <div class="search-login"><div class="srcwrap topnav"><div class="searchiconwrap visible"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#search-icon" xlink:href="/documentation/webstatic/icons.svg#search-icon"></use></svg></div> <div class="searchbox"><div data-v-4d4b9c46="" class="ac jnpr-search"><div data-v-4d4b9c46="" class="search-wrap search-icon"><svg data-v-4d4b9c46="" width="16" height="16" class="icon ac-icon" style="color: rgb(77, 82, 89);"><use href="/documentation/webstatic/icons.svg#search-icon" xlink:href="/documentation/webstatic/icons.svg#search-icon"></use></svg> <input data-v-4d4b9c46="" type="text" placeholder="Search Documentation" class="ac-input"> <!----></div> <!----> <!----></div></div></div> <div class="user-details-wrap"><a href="https://www.juniper.net/documentation/post/login"><svg width="20" height="20" class="icon account-icon"><use href="/documentation/webstatic/icons.svg#account" xlink:href="/documentation/webstatic/icons.svg#account"></use></svg></a> <!----> <!----></div></div> <div class="tl-menu"><div class="mobile-menu">
    Menu
    <svg width="9" height="7" class="icon menu-arrow-down tbm rotate180"><use href="/documentation/webstatic/icons.svg#arrow-down" xlink:href="/documentation/webstatic/icons.svg#arrow-down"></use></svg></div> <div class="flexbox f-mobile" style=""><div class="widget-item"><a href="https://www.juniper.net/documentation/us/en/software/license/juniper-licensing-user-guide/index.html" class="secondarylink">
        License Guide
      </a></div> <div class="widget-item"><a href="https://www.juniper.net/documentation/quickstart/us/en/quick-start/" class="secondarylink">
        Quick Starts
      </a></div> <div class="widget-item"><a href="https://www.juniper.net/documentation/validated-designs/" class="secondarylink">
        Validated Designs
      </a></div></div></div></section></div> <div style="height: 50px; background-color: rgb(77, 77, 77);"><pf-apps-nav initiator="tl"><pf-apps-wrap><div class="app-menu-label"><i class="fa fa-th" aria-hidden="true"></i>
    <span>Explore Pathfinder Apps<span></span></span></div><div class="app-def-menu">
                <div class="flexbox"><div class="app-item">
                        <a href="https://apps.juniper.net/cli-explorer/" class="app-link" target="_blank" title="Explore Juniper CLI commands in Junos OS.">CLI Explorer</a>
                    </div><div class="app-item">
                        <a href="https://apps.juniper.net/feature-explorer/" class="app-link" target="_blank" title="Explore Juniper product features for your network&#39;s software.">Feature Explorer</a>
                    </div><div class="app-item">
                        <a href="https://apps.juniper.net/hct/" class="app-link" target="_blank" title="Discover compatible hardware for Juniper products.">Hardware Compatibility Tool</a>
                    </div><div class="app-item">
                        <a href="https://apps.juniper.net/port-checker/" class="app-link" target="_blank" title="Visualize and validate port configurations for Juniper devices.">Port Checker</a>
                    </div></div></div><div class="app-browse-all-wrap">
                <span class="browse-all-label">Browse All</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
            </div><div class="nav-applist-reveal pfapps-nav-reveal-hide" style="top: 181.578125px">
            <div class="nav-applist-collapse">Collapse <i class="fa fa-chevron-up" aria-hidden="true"></i></div><div class="nav-applist-wrap"><div class="nav-app-category-wrap"><p class="nav-app-category-title"><i class="fa fa-th" aria-hidden="true"></i><span>Pathfinder Apps</span></p><div class="nav-app-category-cont"><p class="nav-app-category nav-app-sel" data-category="All"><i class="fa fa-angle-double-down" aria-hidden="true"></i>
            <span>All</span></p><p class="nav-app-category" data-category="By Software"><i class="fa fa-angle-double-down" aria-hidden="true"></i>
            <span>By Software</span></p><p class="nav-app-category" data-category="By Hardware"><i class="fa fa-angle-double-down" aria-hidden="true"></i>
            <span>By Hardware</span></p><div class="nav-app-close-mob"><i class="fa fa-times" aria-hidden="true"></i></div></div><a class="apps-learn-more" href="https://apps.juniper.net/home/pf-apps" target="_blank">Learn More</a></div><div class="nav-app-list-wrap"><div class="nav-app-list" data-category="All" style="display: block;"><div class="nav-app-list-cont"><span><a class="link-animate" data-abbr="Home" href="https://apps.juniper.net/home/" target="_blank">Pathfinder Home</a></span><span><a class="link-animate" data-abbr="CLI" href="https://apps.juniper.net/cli-explorer/" target="_blank">CLI Explorer</a></span><span><a class="link-animate" data-abbr="CA" href="https://apps.juniper.net/compliance/" target="_blank">Compliance Advisor</a></span><span><a class="link-animate" data-abbr="FE" href="https://apps.juniper.net/feature-explorer/" target="_blank">Feature Explorer</a></span><span><a class="link-animate" data-abbr="HCT" href="https://apps.juniper.net/hct/" target="_blank">Hardware Compatibility Tool</a></span><span><a class="link-animate" data-abbr="XML" href="https://apps.juniper.net/xmlapi/" target="_blank">Junos XML API Explorer</a></span><span><a class="link-animate" data-abbr="ydm" href="https://apps.juniper.net/ydm-explorer/" target="_blank">Junos YANG Data Model Explorer</a></span><span><a class="link-animate" data-abbr="PRTCHK" href="https://apps.juniper.net/port-checker/" target="_blank">Port Checker</a></span><span><a class="link-animate" data-abbr="PC" href="https://apps.juniper.net/power-calculator/" target="_blank">Power Calculator<i class="fa fa-lock" aria-hidden="true"></i></a></span><span><a class="link-animate" data-abbr="MIB" href="https://apps.juniper.net/mib-explorer/" target="_blank">SNMP MIB Explorer</a></span><span><a class="link-animate" data-abbr="SL" href="https://apps.juniper.net/syslog-explorer/" target="_blank">System Log Explorer</a></span></div></div><div class="nav-app-list" data-category="By Software"><div class="nav-app-list-cont"><span><a class="link-animate" data-abbr="CLI" href="https://apps.juniper.net/cli-explorer/" target="_blank">CLI Explorer</a></span><span><a class="link-animate" data-abbr="FE" href="https://apps.juniper.net/feature-explorer/" target="_blank">Feature Explorer</a></span><span><a class="link-animate" data-abbr="XML" href="https://apps.juniper.net/xmlapi/" target="_blank">Junos XML API Explorer</a></span><span><a class="link-animate" data-abbr="ydm" href="https://apps.juniper.net/ydm-explorer/" target="_blank">Junos YANG Data Model Explorer</a></span><span><a class="link-animate" data-abbr="MIB" href="https://apps.juniper.net/mib-explorer/" target="_blank">SNMP MIB Explorer</a></span><span><a class="link-animate" data-abbr="SL" href="https://apps.juniper.net/syslog-explorer/" target="_blank">System Log Explorer</a></span></div></div><div class="nav-app-list" data-category="By Hardware"><div class="nav-app-list-cont"><span><a class="link-animate" data-abbr="CA" href="https://apps.juniper.net/compliance/" target="_blank">Compliance Advisor</a></span><span><a class="link-animate" data-abbr="FE" href="https://apps.juniper.net/feature-explorer/" target="_blank">Feature Explorer</a></span><span><a class="link-animate" data-abbr="HCT" href="https://apps.juniper.net/hct/" target="_blank">Hardware Compatibility Tool</a></span><span><a class="link-animate" data-abbr="PRTCHK" href="https://apps.juniper.net/port-checker/" target="_blank">Port Checker</a></span><span><a class="link-animate" data-abbr="PC" href="https://apps.juniper.net/power-calculator/" target="_blank">Power Calculator<i class="fa fa-lock" aria-hidden="true"></i></a></span></div></div></div></div></div></pf-apps-wrap></pf-apps-nav></div> <!----></div> <div class="marquee-cover"><section class="marquee" style="background-image: url(&quot;/documentation/webstatic/images/junos-os.svg&quot;);"><section class="breadcrumb ignoreindex"><a href="https://www.juniper.net/" class="breadcrumb-item">
    Home
    <svg width="9" height="7" class="icon menu-arrow-down"><use href="/documentation/webstatic/icons.svg#arrow-down" xlink:href="/documentation/webstatic/icons.svg#arrow-down"></use></svg></a> <a href="https://www.juniper.net/documentation/" class="breadcrumb-item">
    Documentation
    <svg width="9" height="7" class="icon menu-arrow-down"><use href="/documentation/webstatic/icons.svg#arrow-down" xlink:href="/documentation/webstatic/icons.svg#arrow-down"></use></svg></a> <!----> <a href="https://www.juniper.net/documentation/product/us/en/junos-os/" class="breadcrumb-item"><!----> <span class="breadcrumb-pname">Junos OS</span> <!----> <svg width="9" height="7" class="icon menu-arrow-down"><use href="/documentation/webstatic/icons.svg#arrow-down" xlink:href="/documentation/webstatic/icons.svg#arrow-down"></use></svg></a> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/index.html" class="breadcrumb-item"><span>BGP 用户指南</span> <svg width="9" height="7" class="icon menu-arrow-down"><use href="/documentation/webstatic/icons.svg#arrow-down" xlink:href="/documentation/webstatic/icons.svg#arrow-down"></use></svg></a><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html" class="breadcrumb-item"><span>为 BGP 启用负载平衡</span> <svg width="9" height="7" class="icon menu-arrow-down"><use href="/documentation/webstatic/icons.svg#arrow-down" xlink:href="/documentation/webstatic/icons.svg#arrow-down"></use></svg></a></section> <div class="mtd"><h2 class="p-title">BGP 用户指南</h2></div> <!----></section></div> <div class="swmaterialicon mist-float-close">
    keyboard_arrow_up
  </div></div><div></div><div class="main wrapper"><section class="l-leftnav ignoreindex"><div class="leftwrap"><div class="mobile-only" style="text-align: right;"><i class="swmaterialicon mobile-close">
        close
      </i></div> <div><i class="drawer swmaterialicon -leftnav desktop-only">keyboard_arrow_left</i></div> <section class="l-leftwrap"><!----> <!----> <section><div data-url="../../index.html" class="bookname"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/index.html" style="display: none;"><span>BGP 用户指南</span></a> <div class="d-flex justify-content-between align-items-center"><span class="tocname">Table of Contents</span> <span class="expcolall expand-all">Expand all</span></div></div> <div class="l-leftnav-toc"><ul class="toc-topics"><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">概述</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-overview.html" class="">BGP 概述</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">基本 BGP 配置</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/task/routing-protocol-bgp-security-configuring.html" class="">BGP 配置概述</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-peering-sessions.html" class="">BGP 对等会话</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-route-prioritization.html" class="">BGP 路由优先级</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-auto-discovered-neighbors.html" class="">BGP 自动发现的邻居</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">配置 BGP 会话属性</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/autonomous-systems.html" class="">BGP 会话的自治系统</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/local-preference.html" class="">BGP 路由的本地首选项</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/4-byte-as-numbers.html" class="">BGP 4 字节 AS 编号</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/med-attribute.html" class="">BGP MED 属性</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/multihop-sessions.html" class="">BGP 多跳会话</a> <!----></li> <!----></ul></li><li class="toc-list-item toc-expand"><!----> <div class="toc-title"><span class="toc-arrow rotate90">
      play_arrow
    </span> <span class="toc-folder-text">配置 BGP 会话策略</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/basic-routing-policies.html" class="">基本 BGP 路由策略</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/routing-policies-communities.html" class="">BGP 社区的路由策略</a> <!----></li> <!----></ul></li><li class="toc-list-item toc-expand"><!----> <div class="toc-title"><span class="toc-arrow rotate90">
      play_arrow
    </span> <span class="toc-folder-text">为 BGP 启用负载平衡</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html" class="active">BGP 会话的负载平衡</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-egress-traffic-engineering.html" class="">BGP 出口流量工程</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/link-state-distribution-using-bgp.html" class="">使用 BGP 的链路状态分布</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">为 BGP 配置平滑重启</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-long-lived-graceful-restart.html" class="">了解 BGP 的平稳重启</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">为 BGP 会话配置多协议</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/multiprotocol-bgp.html" class="">多协议 BGP</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">配置 BGP CLNS</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/clns.html" class="">BGP 无连接网络服务 （CLNS）</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">对 BGP 网络使用路由反射器和联合</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-rr.html" class="">BGP 路由反射器</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-confederations-for-scaling.html" class="">用于 IBGP 扩展的 BGP 联合体</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">配置 BGP 安全性</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp_security.html" class="">BGP 路由身份验证</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/ip_security.html" class="">BGP 的 IP 安全</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/tcp_access_restriction.html" class="">BGP 的 TCP 访问限制</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp_origin_validation.html" class="">BGP 起源验证</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">配置 BGP 路由抖动抑制和错误处理</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-session-flaps.html" class="">BGP 会话和路由抖动</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-error-messages.html" class="">BGP 错误消息</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bfd-for-bgp-session.html" class="">BGP 会话的 BFD</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">配置基于 BGP 的 VPN</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-based-vpn.html" class="">基于 BGP 的 VPN</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-accept-own-map.html" class="">BGP 接受拥有的社区</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">Monitoring and Troubleshooting</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-monitoring-protocol.html" class="">BGP 监控协议</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/troubleshooting-network-issues.html" class="">排查网络问题</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/troubleshooting-bgp-sessions.html" class="">BGP 会话故障排除</a> <!----></li> <!----></ul></li><li class="toc-list-item"><!----> <div class="toc-title"><span class="toc-arrow">
      play_arrow
    </span> <span class="toc-folder-text">配置语句和操作命令</span></div> <!----> <ul><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/cli-reference/topics/ref/statement/peer-auto-discovery.html" class="">peer-auto-discovery</a> <!----></li><li class="toc-list-item toc-link"><!----> <!----> <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/shared-content/topics/concept/cli-reference-overview.html" class="">Junos CLI 参考概述</a> <!----></li> <!----></ul></li></ul> <div class="toc-loading" style="display: none;">
            Loading...
          </div></div></section></section></div> <div class="mobile-only tocbtn"><i class="swmaterialicon">list</i> <span class="sm-hide">Table of Contents</span></div></section><div class="l-rightnav ignoreindex"><div class="rightwrap"><div class="l-rightwrap"><div class="right-options"><span></span> <div class="lang-trans"><!----> <div data-v-d4e6e290="" class="teleporter hidden"></div> <div data-v-d4e6e290="" class="teleporter hidden"></div></div></div> <div class="right-slot"><div class="minitoc desktop-only"><h5>在本页</h5><ul><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-bgp-multipath" data-offset="554" class="active">了解 BGP 多路径</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-load-balancing-bgp-traffic" data-offset="1559">示例：均衡 BGP 流量负载</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent" data-offset="8892">了解多达 512 条等价路径的配置，并可选择一致负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-single-hop-ebgp-peers-to-accept-remote-next-hops" data-offset="11123">示例：配置单跃点 EBGP 对等方以接受远程下一跃点</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-load-balancing-for-bgp-traffic-with-unequal-bandwidth-allocated-to-the-paths" data-offset="25586">了解分配给路径的带宽不相等的 BGP 流量的负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-load-balancing-bgp-traffic-with-unequal-bandwidth-allocated-to-the-paths" data-offset="26439">示例：在分配给路径的带宽不相等的情况下，平衡 BGP 流量的负载</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-advertising-aggregate-bandwidth-across-external-bgp-links-for-load-balancing-overview" data-offset="35446">跨外部 BGP 链路播发聚合带宽以实现负载平衡概述</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-a-policy-to-advertise-aggregate-bandwidth-across-external-bgp" data-offset="36144">示例：配置策略以跨外部 BGP 链路通告聚合带宽以实现负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-the-advertisement-of-multiple-paths-to-a-single-destination-in-bgp" data-offset="45750">了解 BGP 中指向单个目标的多个路径的播发</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-advertising-multiple-paths-in-bgp" data-offset="47512">示例：在 BGP 中通告多条路径</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-selective-advertising-of-bgp-multiple-paths-for-load-balancing" data-offset="80237">示例：配置 BGP 多路径的选择性通告以实现负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-a-routing-policy-to-select-and-advertise-multipaths-based-on-bgp" data-offset="92401">示例：配置路由策略以根据 BGP 社区值选择和通告多路径</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-recursive-resolution-over-bgp-multipath" data-offset="103334">通过 BGP 多路径配置递归解析</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-ecmp-next-hops-for-rsvp-and-ldp-lsps-for-load-balancing" data-offset="104781">为 RSVP 和 LDP LSP 配置 ECMP 下一跃点以实现负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-consistent-load-balancing-for-ecmp-groups" data-offset="106066">为 ECMP 组配置一致的负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id_jtx_b1m_tdc" data-offset="109142">使用多个 ECMP BGP 对等方提高网络弹性</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp" data-offset="111372">了解 BGP 标记的单播 LSP 的熵标签</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp" data-offset="113817">为标记为单播 LSP 的 BGP 配置熵标签</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp" data-offset="115506">示例：为标记为单播 LSP 的 BGP 配置熵标签</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-use-case-for-bgp-prefix-independent-convergence-for-inet-inet6-or-labeled-unicast" data-offset="135622">适用于 inet、inet6 或带标签的单播的 BGP 前缀无关融合用例</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-bgp-prefix-independent-convergence-for-inet" data-offset="136488">为 Inet 配置 BGP 前缀独立收敛</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-bgp-prefix-independent-convergence-for-inet" data-offset="138596">示例：为 Inet 配置 BGP 前缀独立收敛</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-bgp-pic-edge-using-bgp-labeled-unicast-overview" data-offset="150317">使用 BGP 标记单播的 BGP PIC 边缘概述</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-bgp-pic-edge-using-bgp-labeled-unicast-for-layer-2-services" data-offset="151624">使用带有 BGP 标记的单播为第 2 层服务配置 BGP PIC Edge</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-protecting-ipv4-traffic-over-layer-3-vpn-running-bgp-labeled-unicast" data-offset="152664">示例：通过运行标记为单播的 BGP 的第 3 层 VPN 保护 IPv4 流量</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-fat-pseudowire-support-for-bgp-l2vpn-and-vpls-overview" data-offset="184726">面向 BGP L2VPN 和 VPLS 的 FAT 伪线支持概述</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" data-offset="185450">为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" data-offset="187329">示例：为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" data-offset="208897">为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" data-offset="210177">示例：为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></p></li><li><p><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#change-history-table" data-offset="226073">变更历史表</a></p></li></ul></div></div> <!----></div> <i class="drawer desktop-only swmaterialicon -rightnav">keyboard_arrow_right</i></div></div><div class="l-body"><div class="page-options clearfix"><div class="bte"><div class="transfeed desktop-only"><h3 class="tfhead">机器翻译对您有帮助吗?</h3> <div class="starsout"><span data-microtip-position="top" role="tooltip" class="star" aria-label="较差"><i class="swmaterialicon">star</i></span><span data-microtip-position="top" role="tooltip" class="star" aria-label="一般"><i class="swmaterialicon">star</i></span><span data-microtip-position="top" role="tooltip" class="star" aria-label="平均"><i class="swmaterialicon">star</i></span><span data-microtip-position="top" role="tooltip" class="star" aria-label="很好"><i class="swmaterialicon">star</i></span><span data-microtip-position="top" role="tooltip" class="star" aria-label="优秀"><i class="swmaterialicon">star</i></span></div> <!----></div> <div class="white-black-hover gte">
    Go to English page
  </div></div></div><div class="disclaimer-msg message-info"><h5>免责声明:</h5><p>我们将使用第三方机器翻译软件翻译本页面。瞻博网络虽已做出相当大的努力提供高质量译文，但无法保证其准确性。如果对译文信息的准确性有任何疑问，请参阅英文版本. 可下载的 PDF 仅提供英文版.</p></div><div class="topicBody"><div id="topic-content"><h1 id="ariaid-title1" class="title topictitle1">BGP 会话的负载平衡</h1> <div class="clearfix head-divider"><!----> <div class="list-inline"><div class="rel-selector" style="display: none;"><!----> <!----></div> <div publish-date="2025-01-18" class="pbdate inline-item"><i class="swmaterialicon">date_range</i> <span>
        18-Jan-25
      </span></div> <!----> <section class="pn-fixed ignoreindex pn-top"><section class="pn-wrap"><div class="pn-wrap-btn"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/routing-policies-communities.html" title="BGP 社区的路由策略" class="pn-prev"><span class="pn-text"><i class="swmaterialicon">arrow_backward</i> <!----></span> <!----></a></div> <div class="pn-wrap-btn"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-egress-traffic-engineering.html" title="BGP 出口流量工程" class="pn-next"><span class="pn-text"><!----> <i class="swmaterialicon">arrow_forward</i></span> <!----></a></div></section></section></div> <!----></div> <div class="body conbody tmbody"></div> <div aria-labelledby="ariaid-title2" xml:lang="zh-CN" lang="zh-CN" id="id-understanding-bgp-multipath" class="topic concept nested1"><h2 id="ariaid-title2" class="title topictitle2">了解 BGP 多路径<a class="bookmarktitle" aria-label="Copy link to this section: 了解 BGP 多路径" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">BGP 多路径允许您将多个内部 BGP 路径和多个外部 BGP 路径安装到转发表。选择多个路径使 BGP 能够跨多个链路对流量进行负载均衡。 </p> <p class="p">如果 BGP 路径选择过程在将 IGP 成本与下一跃点进行比较后执行平局中断，则路径被视为 BGP 等价路径（用于转发）。默认情况下，多路径选择过程中会考虑具有同一相邻 AS、由支持多路径的 BGP 邻接方获知的所有路径。</p> <p class="p">BGP 通常只为每个前缀选择一个最佳路径，并将该路由安装在转表中。启用 BGP 多路径后，设备选择多个等价 BGP 路径到达给定目标，所有这些路径都安装在转发表中。BGP 仅将活动路径播发至其邻居，除非正在使用添加路径。</p> <p class="p">Junos OS BGP 多路径功能支持以下应用程序：</p> <ul class="ul"><li class="li"><p class="p">跨属于不同自治系统 (AS) 的两台路由设备之间多个链路的负载平衡</p></li> <li class="li"><p class="p">将一个公共子网或多个子网的负载平衡到属于同一对等 AS 的不同路由设备</p></li> <li class="li"><p class="p">跨属于不同外部联合对等方的两个路由设备之间多个链路的负载平衡</p></li> <li class="li"><p class="p">将一个公共子网或多个子网的负载平衡到属于外部联合对等方的不同路由设备</p></li></ul> <p class="p">在负载平衡的常见方案中，客户在接入点 （POP） 中多宿主到多个路由器或交换机。默认行为是仅通过一个可用链接发送所有流量。负载平衡会导致流量使用两个或多个链路。</p> <p class="p">BGP 多路径不适用于共享相同 MED-plus-IGP 成本但 IGP 成本不同的路径。多路径路径选择基于 IGP 成本指标，即使两条路径具有相同的 MED-plus-IGP 成本也是如此。 </p> <p class="p">从 Junos OS 18.1R1 版开始，BGP 多路径在层次结构级别全局受支持 <code class="ph codeph">[edit protocols bgp]</code> 。您可以有选择地在某些 BGP 组和邻居上禁用多路径。在<code class="ph codeph">[edit protocols bgp group <var class="keyword varname">group-name</var> multipath]</code>层次结构级别包含<code class="ph codeph">disable</code>以禁用组或特定 BGP 邻接方的多路径选项。</p> <p class="p">从 Junos OS 18.1R1 版开始，您可以推迟多路径计算，直到收到所有 BGP 路由。启用多路径后，BGP 会在每次添加新路由或现有路由更改时将路由插入多路径队列。当通过 BGP 添加路径功能接收到多个路径时，BGP 可能会多次计算一个多路径路由。多路径计算会减慢 RIB（也称为路由表）学习速率。为了加快 RIB 学习速度，可以将多路径计算推迟到收到 BGP 路由，也可以根据需要降低多路径构建作业的优先级，直到解析 BGP 路由。若要推迟多路径计算，请在层次结构级别进行<code class="ph codeph">[edit protocols bgp]</code>配置<code class="ph codeph">defer-initial-multipath-build</code>。或者，您可以使用层次结构级别的配置语句<code class="ph codeph">[edit protocols bgp]</code>降低 <code class="ph codeph">multipath-build-priority</code> BGP 多路径构建作业优先级，以加快 RIB 学习。</p></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/en_US/junos/topics/topic-map/bgp-advertise-multiple-paths.html" target="_blank" class="link No-Link-62903">示例：播发到目标的多个 BGP 路径</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/sampling-forwarding-monitoring/topics/concept/policy-per-packet-load-balancing-overview.html" class="link">了解每个数据包的负载平衡</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title3" xml:lang="zh-CN" lang="zh-CN" id="id-example-load-balancing-bgp-traffic" class="topic concept nested1"><h2 id="ariaid-title3" class="title topictitle2">示例：均衡 BGP 流量负载<a class="bookmarktitle" aria-label="Copy link to this section: 示例：均衡 BGP 流量负载" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何配置 BGP 以选择多个等价外部 BGP （EBGP） 或内部 BGP （IBGP） 路径作为活动路径。 </p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e51" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e71" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e221" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title4" id="d25e51" class="topic concept nested2"><h3 id="ariaid-title4" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">准备工作：</p> <ul class="ul"><li class="li"><p class="p">配置设备接口。</p></li> <li class="li"><p class="p">配置内部网关协议 （IGP）。</p></li> <li class="li"><p class="p">配置 BGP。</p></li> <li class="li"><p class="p">配置路由策略，将路由（例如直接路由或 IGP 路由）从路由表导出到 BGP。</p></li></ul></div></div> <div aria-labelledby="ariaid-title5" id="d25e71" class="topic concept nested2"><h3 id="ariaid-title5" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">以下步骤说明如何配置每个数据包的负载平衡：</p> <ol class="ol"><li class="li"><p class="p">通过在层次结构级别包含一个或多个 <code class="ph codeph">policy-statement</code> 语句 <code class="ph codeph">[edit policy-options]</code> 来定义负载平衡路由策略，并定义以下 <code class="ph codeph">load-balance per-packet</code>操作： </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>policy-statement <var class="keyword varname">policy-name</var> {
    from {
        <var class="keyword varname">match-conditions</var>;
        route-filter <var class="keyword varname">destination-prefix match-type</var> &lt;<var class="keyword varname">actions</var>&gt;;
        prefix-list <var class="keyword varname">name</var>;
    }
    then {
        load-balance per-packet;
    }
}
</pre></div> <!----></div><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">要在多个 EBGP 路径和多个 IBGP 路径之间启用负载平衡，请在层次结构级别全局<code class="ph codeph">[edit protocols bgp]</code>包含<code class="ph codeph">multipath</code>语句。如果不全局包含 <code class="ph codeph">multipath</code> 语句，或者为层次结构级别的 BGP 组 <code class="ph codeph">[edit protocols bgp <a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/group-edit-protocols-bgp.html" class="xref">group</a> <var class="keyword varname">group-name</var></code> 或层次结构级别的特定 BGP 邻接方 <code class="ph codeph">[edit&nbsp;protocols&nbsp;bgp&nbsp;group&nbsp;<var class="keyword varname">group-name</var> <a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/neighbor-edit-protocols-bgp.html" class="xref">neighbor</a>&nbsp;<var class="keyword varname">address</var>]</code> 启用该语句，则无法启用 BGP 流量的负载平衡。</p></div></div></div></li> <li class="li"><p class="p">将策略应用于从路由表导出到转发表的路由。为此，请包含 <code class="ph codeph">forwarding-table</code> 和 <code class="ph codeph">export</code> 语句：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><a class="xref No-Link-32684" href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/forwarding-table-edit-routing-options.html" target="_blank">forwarding-table</a> {
    <a class="xref No-Link-32678" href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/export-edit-routing-options.html" target="_blank">export</a> <var class="keyword varname">policy-name</var>;
}
</pre></div> <!----></div><p class="p">您无法将导出策略应用于 VRF 路由实例。</p></li> <li class="li"><p class="p">在分配与正在播发的路由对应的标签时，指定该路由的所有下一跃点（如果存在多个跃点）。</p></li> <li class="li"><p class="p">配置 MPLS 的转发选项哈希密钥以包含 IP 有效负载。</p></li></ol> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">在某些平台上，您可以使用机箱 <a href="https://www.juniper.net/documentation/us/en/software/junos/bgp/topics/ref/statement/maximum-ecmp-edit-chassis.html" target="_blank" class="xref">maxum-ecmp</a> 语句增加负载平衡的路径数。 </p> <p class="p">使用此语句，您可以将等价负载平衡路径的最大数量更改为 32、64、128、256 或 512（最大数量因平台而异 — 请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/maximum-ecmp-edit-chassis-qfx.html" target="_blank" class="xref">最大 ecmp</a>）。 </p> <p class="p">支持 BGP 的所有平台都支持多路径功能。对 QFX 平台进行了一些增强：</p> <ul id="d25e71__d25e183" class="ul"><li class="li"><ul id="d25e71__d25e187" class="ul"><li class="li">从 Junos OS 19.1R1 版开始，您可以在 QFX10000 交换机上指定最多 128 条等价路径。 </li></ul></li> <li class="li"><p class="p"></p> <ul id="d25e71__d25e198" class="ul"><li class="li">从 Junos OS 19.2R1 版开始，您可以在QFX10000交换机上指定最多 512 条等价路径 — 请参阅 <a href="https://www.juniper.net/documentation/us/en/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent" target="_blank" class="xref">了解配置多达 512 条具有可选一致负载平衡的等价路径</a>。</li></ul></li></ul> <p class="p"></p></div></div></div><p class="p">在此示例中，设备 R1 位于 AS 64500 中，并连接到位于 AS 64501 中的设备 R2 和设备 R3。此示例显示了设备 R1 上的配置。</p> <div id="d25e71__d77004e352" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e71__d25e217" class="xref">图 1</a> 显示了此示例中使用的拓扑。 </p> <div id="d25e71__d25e217" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 1： </span>BGP 负载平衡</span><span><img data-width="476px" data-height="362px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g040875.gif" alt="BGP 负载平衡" class="image"></span></div></div></div></div> <div aria-labelledby="ariaid-title6" id="d25e221" class="topic concept nested2"><h3 id="ariaid-title6" class="title topictitle3">配置</h3> <div class="body conbody"><div id="d25e221__d77004e366" class="section"><h4 class="title sectiontitle">程序</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e221__d77004e369" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e221__d77004e406" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e221__d77004e478" class="xref">结果</a></li></ul> <div id="d25e221__d77004e369" class="subsection"><h5 class="sectiontitle">CLI 快速配置</h5><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，然后将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set protocols bgp group external type external </kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 64501</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath </kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.1.1 </kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.0.2 </kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal from route-filter 10.0.0.0/16 orlonger </kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal then load-balance per-packet </kbd>
<kbd class="ph userinput">set routing-options forwarding-table export loadbal</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64500</kbd>
</pre></div> <!----></div></div><div id="d25e221__d77004e406" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置 BGP 对等会话，请执行以下操作： </p> <ol class="ol"><li class="li"><p class="p">配置 BGP 组。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group external]
user@R1# <kbd class="ph userinput">set type external </kbd>
user@R1# <kbd class="ph userinput">set peer-as 64501 </kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.0.1.1 </kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.0.0.2 </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">使 BGP 组能够使用多个路径。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">要禁用要求 BGP 多路径接受的路径必须具有相同相邻自治系统 （AS） 的默认检查，请包含该 <code class="ph codeph">multiple-as</code> 选项。 </p></div></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group external]
user@R1# <kbd class="ph userinput">set multipath</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置负载均衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options policy-statement loadbal]
user@R1# <kbd class="ph userinput">set from route-filter 10.0.0.0/16 orlonger </kbd>
user@R1# <kbd class="ph userinput">set then load-balance per-packet </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用负载平衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set forwarding-table export loadbal</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置本地自治系统 (AS) 编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set autonomous-system 64500</kbd>
</pre></div> <!----></div></li></ol></div><div id="d25e221__d77004e478" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show protocols</code>、 <code class="ph codeph">show policy-options</code>和 <code class="ph codeph">show routing-options</code> 命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R1# <code class="ph codeph">show protocols</code>
bgp {
    group external {
        type external;
        peer-as 64501;
        multipath;
        neighbor 10.0.1.1;
        neighbor 10.0.0.2;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R1# <code class="ph codeph">show policy-options</code>
policy-statement loadbal {
    from {
        route-filter 10.0.0.0/16 orlonger;
    }
    then {
        load-balance per-packet;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R1# <code class="ph codeph">show routing-options</code>
autonomous-system 64500;
forwarding-table {
    export loadbal;
}
</pre></div> <!----></div><p class="p">如果完成设备配置，请从配置模式输入 <code class="ph codeph">commit</code>。</p></div></div></div></div> <div aria-labelledby="ariaid-title7" id="d25e371" class="topic concept nested2"><h3 id="ariaid-title7" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常：</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d25e377" class="xref">验证路由</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d25e426" class="xref">验证转发 </a></li></ul> <div id="d25e371__d25e377" class="section"><h4 class="title sectiontitle">验证路由</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d77004e521" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d77004e526" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d77004e544" class="xref">意义</a></li></ul> <div id="d25e371__d77004e521" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证是否从相邻 AS 中的两个路由器获知路由。 </p></div><div id="d25e371__d77004e526" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.0.2.0</kbd>
inet.0: 12 destinations, 15 routes (12 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

10.0.2.0/30        *[BGP/170] 03:12:32, localpref 100
                      AS path: 64501 I
                      to 10.0.1.1 via ge-1/2/0.0
                    &gt; to 10.0.0.2 via ge-1/2/1.0
                    [BGP/170] 03:12:32, localpref 100
                      AS path: 64501 I
                    &gt; to 10.0.1.1 via ge-1/2/0.0</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.0.2.0 detail</kbd>
inet.0: 12 destinations, 15 routes (12 active, 0 holddown, 0 hidden)
10.0.2.0/30 (2 entries, 1 announced)
        *BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 262142
                Next-hop reference count: 3
                Source: 10.0.0.2
                Next hop: 10.0.1.1 via ge-1/2/0.0
                Next hop: 10.0.0.2 via ge-1/2/1.0, selected
                State: &lt;Active Ext&gt;
                Local AS: 64500 Peer AS: 64501
                Age: 3:18:30 
                Task: BGP_64501.10.0.0.2+55402
                Announcement bits (1): 2-KRT 
                AS path: 64501 I
                Accepted Multipath
                Localpref: 100
                Router ID: 192.168.2.1
         BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 602
                Next-hop reference count: 5
                Source: 10.0.1.1
                Next hop: 10.0.1.1 via ge-1/2/0.0, selected
                State: &lt;NotBest Ext&gt;
                Inactive reason: Not Best in its group - Active preferred
                Local AS: 64500 Peer AS: 64501
                Age: 3:18:30 
                Task: BGP_64501.10.0.1.1+53135
                AS path: 64501 I
                Accepted
                Localpref: 100
                Router ID: 192.168.3.1</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d25e371__d77004e544" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">活动路径（用星号 （*） 表示）有两个下一跃点：10.0.1.1 和 10.0.0.2 到 10.0.2.0 目标。10.0.1.1 下一跃点将从非活动路径复制到活动路径。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">命令输出将 <code class="ph codeph">show route detail</code> 一个网关指定为 <code class="ph codeph">selected</code>. 在负载平衡的上下文中，此输出可能会造成混淆。当 Junos OS 未执行按数据包负载均衡时，除了决定将哪个网关安装到内核中之外，所选网关还用于多种用途。例如，命令 <code class="ph codeph">ping mpls</code> 在发送数据包时使用选定的网关。在某些情况下，组播协议使用所选网关来确定上游接口。因此，即使 Junos OS 通过转发表策略执行每个数据包的负载平衡，所选网关信息仍需要用于其他目的。显示选定的网关以进行故障排除非常有用。此外，可以使用转发表策略来覆盖内核中安装的内容（例如，通过使用 <code class="ph codeph">install-nexthop</code> 操作）。在这种情况下，转发表中安装的下一跃点网关可能是命令中显示的 <code class="ph codeph">show route</code> 网关总数的子集。</p></div></div></div></div></div> <div id="d25e371__d25e426" class="section"><h4 class="title sectiontitle">验证转发 </h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d77004e570" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d25e371__d77004e575" class="xref">操作</a></li></ul> <div id="d25e371__d77004e570" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证转发表中是否安装了两个下一跃点。</p></div><div id="d25e371__d77004e575" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route forwarding-table</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show route forwarding-table destination 10.0.2.0</kbd>
Routing table: default.inet
Internet:
Destination        Type RtRef Next hop           Type Index NhRef Netif
10.0.2.0/30        user     0                    ulst 262142     2
                              10.0.1.1           ucst   602     5 ge-1/2/0.0
                              10.0.0.2           ucst   522     6 ge-1/2/1.0</pre></div> <!----></div></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-bgp-multipath" class="link">了解 BGP 多路径</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-peering-sessions.html#id-understanding-external-bgp-peering-sessions" class="link">了解外部 BGP 对等会话</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title8" xml:lang="zh-CN" lang="zh-CN" id="id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent" class="topic concept nested1"><h2 id="ariaid-title8" class="title topictitle2">了解多达 512 条等价路径的配置，并可选择一致负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 了解多达 512 条等价路径的配置，并可选择一致负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">您可以为外部 BGP 对等方配置最多 512 条路径的等价多路径 （ECMP） 功能。由于能够配置多达 512 个 ECMP 下一跃点，因此您可以增加与指定路由设备的直接 BGP 对等连接数量，从而改善延迟并优化数据流。您可以选择在该 ECMP 配置中包含一致的负载平衡。一致的负载平衡可确保在 ECMP 成员（即路径）发生故障时，只有流经故障成员的流量才会重新分配给其他活动的 ECMP 成员。一致的负载平衡还可确保在添加 ECMP 成员时，从现有 EMCP 成员到新 ECMP 成员的流重新分配最少。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent__d77004e606" class="xref">配置 256 到 512 个等价路径的准则和限制，可以选择一致负载平衡 </a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent__d77004e691" class="xref">有关配置最多 512 个 ECMP 下一跃点以及选择性地配置一致负载平衡的说明</a></li></ul> <div id="id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent__d77004e606" class="section"><h3 class="title sectiontitle">配置 256 到 512 个等价路径的准则和限制，可以选择一致负载平衡 </h3><ul class="ul"><li class="li"><p class="p">该功能仅适用于单跳外部 BGP 对等方。（此功能不适用于 MPLS 路由。</p></li> <li class="li"><p class="p">设备的路由进程 （RPD） 必须支持 64 位模式;不支持 32 位 RPD。</p></li> <li class="li"><p class="p">该功能仅适用于单播流量。</p></li> <li class="li"><p class="p">流量分布可能不会在所有组成员之间均匀分布 — 这取决于流量模式和硬件中散列流集表的组织。在组中添加或删除成员时，一致的散列可 <em class="ph i">最大程度地减少</em> 流到目标链接的重新映射。</p></li> <li class="li"><p class="p">如果使用 、 <code class="ph codeph">inet</code><code class="ph codeph">inet6</code>或 <code class="ph codeph">layer2</code>选项<code class="ph codeph">hash-mode</code>之一进行配置<code class="ph codeph">set forwarding-options enhanced-hash-key</code>，某些流可能会更改目标链接，因为新的哈希参数可能会为流生成新的哈希索引，从而生成新的目标链接。</p></li> <li class="li"><p class="p">为了获得最佳哈希准确性，此功能使用 <em class="ph i">级联</em> 拓扑为超过 128 个下一跃点的配置实现下一跃点结构。因此，散列精度略低于小于 128 的 ECMP 下一跃点配置，后者不需要级联拓扑。</p></li> <li class="li"><p class="p">受影响 ECMP 路径上的现有流量和流经这些受影响 ECMP 路径的新流量可能会在本地路由修复期间切换路径，并且流量倾斜可能很明显。但是，在随后的全球路由修复期间，任何此类倾斜都会得到纠正。</p></li> <li class="li"><p class="p">增加该 <code class="ph codeph">maximum-ecmp</code> 值时，在路由前缀的 <em class="ph i">下一个</em> 跃点更改事件期间，一致性哈希将丢失。 </p></li> <li class="li"><p class="p">如果将新路径添加到现有 ECMP 组，则未受影响路径上的某些流量可能会移动到新添加的路径。</p></li> <li class="li"><p class="p">快速重新路由 （FRR） 可能无法使用一致散列。</p></li> <li class="li"><p class="p">无法实现完美的类似 ECMP 的流量分配。具有比其他路径更多的“存储桶”的路径比具有较少存储桶的路径具有更多的流量（ <em class="ph i">存储桶</em> 是负载平衡表的通讯组列表中映射到 ECMP 成员索引的条目）。</p></li> <li class="li"><p class="p"> 在网络拓扑更改事件期间，在某些情况下，网络前缀会丢失一致的哈希，因为这些前缀指向新的 ECMP 下一跃点，该跃点不具有前缀先前 ECMP 下一跃点的所有属性。</p></li> <li class="li"><p class="p">如果多个网络前缀指向同一个 ECMP 下一跃点，并且该语句启用了 <code class="ph codeph">consistent-hash</code> 其中一个或多个前缀，则指向同一 ECMP 下一跃点 <em class="ph i">的所有</em> 网络前缀将显示一致的散列行为。</p></li> <li class="li"><p class="p">仅在基于等价 BGP 路由的 ECMP 组上支持一致散列。如果配置了优先于 BGP 路由的其他协议或静态路由，则不支持一致哈希。</p></li> <li class="li"><p class="p">当配置与以下功能的配置结合使用时，一致性哈希可能会受到限制，因为这些功能具有不使用哈希来选择路径的隧道终止或流量工程 - GRE 隧道;流浪汉流量;EVPN-VXLAN;和 MPLS TE，自动带宽。</p></li></ul></div> <div id="id-understanding-configuration-of-up-to-512-equal-cost-paths-with-optional-consistent__d77004e691" class="section"><h3 class="title sectiontitle">有关配置最多 512 个 ECMP 下一跃点以及选择性地配置一致负载平衡的说明</h3><p class="p">当您准备好配置最多 512 个下一跃点时，请使用以下配置说明：</p> <ol class="ol"><li class="li"><p class="p">配置 ECMP 下一跃点的最大数量，例如，配置 512 个 ECMP 下一跃点：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@host# <kbd class="ph userinput">set chassis maximum-ecmp 512</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">创建路由策略并启用每个数据包的负载平衡，从而在系统上全局启用 ECMP：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@host# <kbd class="ph userinput">set routing-options forwarding-table export load-balancing-policy</kbd>
user@host# <kbd class="ph userinput">set policy-options policy-statement load-balancing-policy then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">通过创建单独的路由策略将传入路由与一个或多个目标前缀匹配，在所选前缀上启用弹性，例如：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@host# <kbd class="ph userinput">set policy-options policy-statement c-hash from route-filter 20.0.0.0/24 orlonger</kbd>
 user@host# <kbd class="ph userinput">set policy-options policy-statement c-hash then load-balance consistent-hash</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将 eBGP 导入策略（例如，“c 哈希”）应用于外部对等方的 BGP 组：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@host#<kbd class="ph userinput"> set protocols bgp import c-hash </kbd>
</pre></div> <!----></div></li></ol> <p class="p">有关配置等价路径的更多详细信息，请参阅 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-load-balancing-bgp-traffic" class="xref">示例：负载平衡 BGP 流量</a>，出现在本文档前面部分。</p> <p class="p">（可选）有关配置一致负载平衡（也称为一致性哈希）的更多详细信息，请参阅 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-consistent-load-balancing-for-ecmp-groups" class="xref">为 ECMP 组配置一致负载平衡</a></p></div></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-bgp-multipath" class="link">了解 BGP 多路径</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title9" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-single-hop-ebgp-peers-to-accept-remote-next-hops" class="topic concept nested1"><h2 id="ariaid-title9" class="title topictitle2">示例：配置单跃点 EBGP 对等方以接受远程下一跃点<a class="bookmarktitle" aria-label="Copy link to this section: 示例：配置单跃点 EBGP 对等方以接受远程下一跃点" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何将单跃点外部 BGP （EBGP） 对等方配置为接受不共享公共子网的远程下一跃点。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e40" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e46" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title10" id="d27e40" class="topic concept nested2"><h3 id="ariaid-title10" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">在配置此示例之前，不需要除设备初始化之外的特殊配置。</p></div></div> <div aria-labelledby="ariaid-title11" id="d27e46" class="topic concept nested2"><h3 id="ariaid-title11" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">在某些情况下，有必要将单跃点 EBGP 对等方配置为接受不共享公共子网的远程下一跃点。默认行为是丢弃从未识别为共享公共子网的单跃点 EBGP 对等方接收的任何下一跃点地址。如果能够让单跃点 EBGP 对等方接受它未直接连接到的远程下一跃点，还可以防止将单跃点 EBGP 邻接方配置为多跃点会话。在这种情况下配置多跃点会话时，通过此 EBGP 对等方获知的所有下一跃点路由都将标记为间接路由，即使它们共享一个公共子网也是如此。这种情况会破坏通过包含这些下一跃点地址的路由递归解析的路由的多路径功能。配置语句 <code class="ph codeph"><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/accept-remote-nexthop-edit-protocols-bgp.html" class="xref">accept-remote-nexthop</a></code> 允许单跃点 EBGP 对等方接受远程下一跃点，从而恢复通过这些下一跃点地址解析的路由的多路径功能。您可以在 BGP 的全局、组和邻居层次结构级别配置此语句。逻辑系统和 VPN 路由和转发 （VRF） 路由实例类型也支持该语句。远程下一跃点和 EBGP 对等方都必须支持 RFC 2918“ <cite class="cite">BGP-4 中的路由刷新功能</cite>”中定义的 BGP 路由刷新。如果远程对等方不支持 BGP 路由刷新，则会重置会话。 </p> <p class="p">默认情况下，单跃点 EBGP 对等方将其自己的地址播发为下一跃点。如果要播发不同的下一跃点，则必须在 EBGP 对等方上定义导入路由策略。启用单跃点 EBGP 对等方接受远程下一跃点时， 还可以 在 EBGP 对等方上配置导入路由策略。 但是，如果已配置远程下一跃点，则不需要路由策略。                 </p> <p class="p">此示例包含一个导入路由策略 ， <code class="ph codeph">agg_route</code>该策略使单跳外部 BGP 对等方（设备 R1）能够接受远程下一跃点 10.1.10.10 作为到 10.1.230.0/23 网络的路由。在 <code class="ph codeph">[edit protocols bgp]</code> 层次结构级别，该示例包含 <code class="ph codeph">import agg_route</code> 将策略应用于外部 BGP 对等方的语句，并包含 <code class="ph codeph">accept-remote-nexthop</code> 使单跃点 EBGP 对等方能够接受远程下一跃点的语句。</p> <p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e46__d27e105" class="xref">图 2</a> 显示了示例拓扑。</p> <div id="d27e46__d27e105" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 2： </span>用于接受远程下一跃点的拓扑</span><span><div class="imgwrap"><img data-width="2101px" data-height="933px" id="d27e46__d27e109" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g041972.png" alt="用于接受远程下一跃点的拓扑" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div> <div aria-labelledby="ariaid-title12" id="d27e112" class="topic concept nested2"><h3 id="ariaid-title12" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e857" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1142" class="xref">设备 R0</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1427" class="xref">配置设备 R1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1747" class="xref">配置设备 R2</a></li></ul> <div id="d27e112__d77004e857" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4> <p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，然后将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中。</p> <p class="p"><strong class="ph b">设备 R0</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 0 family inet address 10.1.0.1/30</kbd>
<kbd class="ph userinput">set interfaces fe-1/2/1 unit 0 family inet address 10.1.1.1/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.14.179/32</kbd>
<kbd class="ph userinput">set protocols bgp group ext type external</kbd>
<kbd class="ph userinput">set protocols bgp group ext export test_route</kbd>
<kbd class="ph userinput">set protocols bgp group ext export agg_route</kbd>
<kbd class="ph userinput">set protocols bgp group ext peer-as 65000</kbd>
<kbd class="ph userinput">set protocols bgp group ext multipath</kbd>
<kbd class="ph userinput">set protocols bgp group ext neighbor 10.1.0.2</kbd>
<kbd class="ph userinput">set protocols bgp group ext neighbor 10.1.1.2</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 from route-filter 10.1.230.0/23 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement test_route term 1 from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement test_route term 1 from route-filter 10.1.10.10/32 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement test_route term 1 then accept</kbd>
<kbd class="ph userinput">set routing-options static route 10.1.10.10/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 10.1.230.0/23 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65500</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 R1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 0 family inet address 10.1.0.2/30</kbd>
<kbd class="ph userinput">set interfaces fe-1/2/1 unit 0 family inet address 10.1.1.2/30</kbd>
<kbd class="ph userinput">set interfaces fe-1/2/2 unit 0 family inet address 10.12.0.1/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 2 family inet address 10.255.71.24/32</kbd>
<kbd class="ph userinput">set protocols bgp accept-remote-nexthop</kbd>
<kbd class="ph userinput">set protocols bgp group ext type external</kbd>
<kbd class="ph userinput">set protocols bgp group ext import agg_route</kbd>
<kbd class="ph userinput">set protocols bgp group ext peer-as 65500</kbd>
<kbd class="ph userinput">set protocols bgp group ext multipath</kbd>
<kbd class="ph userinput">set protocols bgp group ext neighbor 10.1.0.1</kbd>
<kbd class="ph userinput">set protocols bgp group ext neighbor 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols bgp group int type internal</kbd>
<kbd class="ph userinput">set protocols bgp group int local-address 10.255.71.24</kbd>
<kbd class="ph userinput">set protocols bgp group int neighbor 10.255.14.177</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/1.4</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface 10.255.71.24</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 from route-filter 10.1.230.0/23 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 then next-hop 10.1.10.10</kbd>
<kbd class="ph userinput">set policy-options policy-statement agg_route term 1 then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65000</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 R2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 0 family inet address 10.12.0.2/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.14.177/32</kbd>
<kbd class="ph userinput">set protocols bgp group int type internal</kbd>
<kbd class="ph userinput">set protocols bgp group int local-address 10.255.14.177</kbd>
<kbd class="ph userinput">set protocols bgp group int neighbor 10.255.71.24</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/0.6</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface 10.255.14.177</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65000</kbd>
</pre></div> <!----></div></div> <div id="d27e112__d77004e1142" class="section"><h4 class="title sectiontitle">设备 R0</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1147" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1332" class="xref">结果</a></li></ul> <div id="d27e112__d77004e1147" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 R0： </p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces fe-1/2/0 unit 0]
user@R0# <kbd class="ph userinput">set family inet address 10.1.0.1/30</kbd>
[edit interfaces fe-1/2/1 unit 0]
user@R0# <kbd class="ph userinput">set family inet address 10.1.1.1/30</kbd>
[edit interfaces lo0 unit 0]
user@R0# <kbd class="ph userinput">set family inet address 10.255.14.179/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 EBGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group ext]
user@R0# <kbd class="ph userinput">set type external</kbd>
user@R0# <kbd class="ph userinput">set peer-as 65000</kbd>
user@R0# <kbd class="ph userinput">set neighbor 10.1.0.2</kbd>
user@R0# <kbd class="ph userinput">set neighbor 10.1.1.2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在设备 R0 和设备 R1 之间启用多路径 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group ext]
user@R0# <kbd class="ph userinput">set multipath</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置到远程网络的静态路由。 <span class="emptyline"></span>这些路由不是拓扑的一部分。这些路由的目的是演示此示例中的功能。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R0# <kbd class="ph userinput">set static route 10.1.10.10/32 reject</kbd>
user@R0# <kbd class="ph userinput">set static route 10.1.230.0/23 reject</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置接受静态路由的路由策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options policy-statement agg_route term 1]
user@R0# <kbd class="ph userinput">set from protocol static</kbd>
user@R0# <kbd class="ph userinput">set from route-filter 10.1.230.0/23 exact</kbd>
user@R0# <kbd class="ph userinput">set then accept</kbd>
[edit policy-options policy-statement test_route term 1]
user@R0# <kbd class="ph userinput">set from protocol static</kbd>
user@R0# <kbd class="ph userinput">set from route-filter 10.1.10.10/32 exact</kbd>
user@R0# <kbd class="ph userinput">set then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将 <code class="ph codeph">agg_route</code> 路由表中的和 <code class="ph codeph">test_route</code> 策略导出到 BGP 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group ext]
user@R0# <kbd class="ph userinput">set export test_route</kbd>
user@R0# <kbd class="ph userinput">set export agg_route</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R0# <kbd class="ph userinput">set autonomous-system 65500</kbd>
</pre></div> <!----></div></li></ol></div> <div id="d27e112__d77004e1332" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show policy-options</code>、<code class="ph codeph">show protocols</code> 和 <code class="ph codeph">show                             routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R0# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 0 {
        family inet {
            address 10.1.0.1/30;
        }
    }
}
fe-1/2/1 {
    unit 0 {
        family inet {
            address 10.1.1.1/30;
        }
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.14.179/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R0# <kbd class="ph userinput">show policy-options</kbd>
policy-statement agg_route {
    term 0 {
        from {
            protocol static;
            route-filter 10.1.230.0/23 exact;
        }
        then accept;
    }
}
policy-statement test_route {
    term 1 {
        from {
            protocol static;
            route-filter 10.1.10.10/32 exact;
        }
        then accept;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R0# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group ext {
        type external;
        export [ test_route agg_route ];
        peer-as 65000;
        multipath;
        neighbor 10.1.0.2;
        neighbor 10.1.1.2;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R0# <kbd class="ph userinput">show routing-options</kbd>
static {
    route 10.1.10.10/32 reject;
    route 10.1.230.0/23 reject;
}
autonomous-system 65500;
</pre></div> <!----></div><p class="p">如果完成设备配置，请从配置模式输入 <code class="ph codeph">commit</code>。</p></div></div> <div id="d27e112__d77004e1427" class="section"><h4 class="title sectiontitle">配置设备 R1</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1432" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1651" class="xref">结果</a></li></ul> <div id="d27e112__d77004e1432" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 R1： </p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces fe-1/2/0 unit 0]
user@R1# <kbd class="ph userinput">set family inet address 10.1.0.2/30</kbd>
[edit interfaces fe-1/2/1 unit 0]
user@R1# <kbd class="ph userinput">set family inet address 10.1.1.2/30</kbd>
[edit interfaces fe-1/2/2 unit 0]
user@R1# <kbd class="ph userinput">set family inet address 10.12.0.1/30</kbd>
[edit interfaces lo0 unit 0]
user@R1# <kbd class="ph userinput">set family inet address 10.255.71.24/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf area 0.0.0.0]
user@R1# <kbd class="ph userinput">set interface fe-1/2/1.0</kbd>
user@R1# <kbd class="ph userinput">set interface 10.255.71.24</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">启用设备 R1 以接受远程下一跃点。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@R1# <kbd class="ph userinput">set accept-remote-nexthop</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 IBGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group int]
user@R1# <kbd class="ph userinput">set type internal</kbd>
user@R1# <kbd class="ph userinput">set local-address 10.255.71.24</kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.255.14.177</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 EBGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group ext]
user@R1# <kbd class="ph userinput">set type external</kbd>
user@R1# <kbd class="ph userinput">set peer-as 65500</kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.1.0.1</kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.1.1.1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在设备 R0 和设备 R1 之间启用多路径 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group ext]
user@R1# <kbd class="ph userinput">set multipath</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由策略，使单跳外部 BGP 对等方（设备 R1）能够接受远程下一跃点 10.1.10.10 以路由到 10.1.230.0/23 网络。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options policy-statement agg_route term 1]
user@R1# <kbd class="ph userinput">set from protocol bgp</kbd>
user@R1# <kbd class="ph userinput">set from route-filter 10.1.230.0/23 exact</kbd>
user@R1# <kbd class="ph userinput">set then next-hop 10.1.10.10</kbd>
user@R1# <kbd class="ph userinput">set then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将 <code class="ph codeph">agg_route</code> 策略导入设备 R1 上的路由表中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group ext]
user@R1# <kbd class="ph userinput">set import agg_route</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set autonomous-system 65000</kbd>
</pre></div> <!----></div></li></ol></div> <div id="d27e112__d77004e1651" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show policy-options</code>、<code class="ph codeph">show protocols</code> 和 <code class="ph codeph">show                             routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 0 {
        family inet {
            address 10.1.0.2/30;
        }
    }
}
fe-1/2/1 {
    unit 0 {
        family inet {
            address 10.1.1.2/30;
        }
    }
}
fe-1/2/2 {
    unit 0 {
        family inet {
            address 10.12.0.1/30;
        }
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.71.24/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">show policy-options</kbd>
policy-statement agg_route {
    term 1 {
        from {
            protocol bgp;
            route-filter 10.1.230.0/23 exact;
        }
        then {
            next-hop 10.1.10.10;
            accept;
        }
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1# <kbd class="ph userinput">show protocols</kbd>
bgp {
    accept-remote-nexthop;
    group ext {
        type external;
        import agg_route;
        peer-as 65500;
        multipath;
        neighbor 10.1.0.1;
        neighbor 10.1.1.1;
    }
    group int {
        type internal;
        local-address 10.255.71.24;
        neighbor 10.255.14.177;
    }
}
ospf {
    area 0.0.0.0 {
        interface fe-1/2/1.0;
        interface 10.255.71.24;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">show routing-options</kbd>
autonomous-system 65000;
</pre></div> <!----></div><p class="p">如果完成设备配置，请从配置模式输入 <code class="ph codeph">commit</code>。</p></div></div> <div id="d27e112__d77004e1747" class="section"><h4 class="title sectiontitle">配置设备 R2</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1752" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e112__d77004e1842" class="xref">结果</a></li></ul> <div id="d27e112__d77004e1752" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 R2： </p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces fe-1/2/0 unit 0]
user@R2# <kbd class="ph userinput">set family inet address 10.12.0.2/30</kbd>
[edit  interfaces lo0 unit 0]
user@R2# <kbd class="ph userinput">set family inet address 10.255.14.177/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf area 0.0.0.0]
user@R2# <kbd class="ph userinput">set interface fe-1/2/0.0</kbd>
user@R2# <kbd class="ph userinput">set interface 10.255.14.177</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 IBGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group int]
user@R2# <kbd class="ph userinput">set type internal</kbd>
user@R2# <kbd class="ph userinput">set local-address 10.255.14.177</kbd>
user@R2# <kbd class="ph userinput">set neighbor 10.255.71.24</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set autonomous-system 65000</kbd>
</pre></div> <!----></div></li></ol></div> <div id="d27e112__d77004e1842" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show protocols</code>和 <code class="ph codeph">show routing-options</code> 命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R2# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 0 {
        family inet {
            address 10.12.0.2/30;
        }
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.14.177/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R2# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group int {
        type internal;
        local-address 10.255.14.177;
        neighbor 10.255.71.24;
    }
}
ospf {
    area 0.0.0.0 {
        interface fe-1/2/0.0;
        interface 10.255.14.177;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R2# <kbd class="ph userinput">show routing-options</kbd>
autonomous-system 65000;
</pre></div> <!----></div><p class="p">如果完成设备配置，请从配置模式输入 <code class="ph codeph">commit</code>。</p></div></div></div></div> <div aria-labelledby="ariaid-title13" id="d27e1155" class="topic concept nested2"><h3 id="ariaid-title13" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d27e1161" class="xref">验证具有间接下一跃点的多路径路由是否在路由表中</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d27e1382" class="xref">停用和重新激活接受-远程-下一跃点语句</a></li></ul> <div id="d27e1155__d27e1161" class="section"><h4 class="title sectiontitle">验证具有间接下一跃点的多路径路由是否在路由表中</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d77004e1907" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d77004e1917" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d77004e2106" class="xref">意义</a></li></ul> <div id="d27e1155__d77004e1907" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证设备 R1 是否有到 10.1.230.0/23 网络的路由。</p></div> <div id="d27e1155__d77004e1917" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，输入 <code class="ph codeph">show route                             10.1.230.0                             extensive</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.1.230.0 extensive</kbd>
inet.0: 11 destinations, 13 routes (11 active, 0 holddown, 0 hidden)
Restart Complete
10.1.230.0/23 (2 entries, 1 announced)
TSI:
KRT in-kernel 10.1.230.0/23 -&gt; {indirect(262142)}
Page 0 idx 1 Type 1 val 9168f6c
    Nexthop: 10.1.10.10
    Localpref: 100
    AS path: [65000] 65500 I
    Communities:
Path 10.1.230.0 from 10.1.0.1 Vector len 4.  Val: 1
        *BGP    Preference: 170/-101
                Next hop type: Indirect
                Address: 0x90c44d8
                Next-hop reference count: 4
                Source: 10.1.0.1
                Next hop type: Router, Next hop index: 262143
                Next hop: 10.1.0.1 via fe-1/2/0.0, selected
                Next hop: 10.1.1.1 via fe-1/2/2.0
                Protocol next hop: 10.1.10.10
                Indirect next hop: 91c0000 262142
                State: &lt;Active Ext&gt;
                Local AS: 65000 Peer AS: 65500
                Age: 2:55:31    Metric2: 0 
                Task: BGP_65500.10.1.0.1+64631
                Announcement bits (3): 2-KRT 3-BGP_RT_Background 4-Resolve tree 1 
                AS path: 65500 I
                Accepted Multipath
                Localpref: 100
                Router ID: 10.255.14.179
                Indirect next hops: 1
                        Protocol next hop: 10.1.10.10
                        Indirect next hop: 91c0000 262142
                        Indirect path forwarding next hops: 2
                                Next hop type: Router
                                Next hop: 10.1.0.1 via fe-1/2/0.0
                                Next hop: 10.1.1.1 via fe-1/2/2.0
                        10.1.10.10/32 Originating RIB: inet.0
                          Node path count: 1
                          Forwarding nexthops: 2
                                Nexthop: 10.1.0.1 via fe-1/2/0.0
                                Nexthop: 10.1.1.1 via fe-1/2/2.0
         BGP    Preference: 170/-101
                Next hop type: Indirect
                Address: 0x90c44d8
                Next-hop reference count: 4
                Source: 10.1.1.1
                Next hop type: Router, Next hop index: 262143
                Next hop: 10.1.0.1 via fe-1/2/0.0, selected
                Next hop: 10.1.1.1 via fe-1/2/2.0
                Protocol next hop: 10.1.10.10
                Indirect next hop: 91c0000 262142
                State: &lt;NotBest Ext&gt;
                Inactive reason: Not Best in its group - Update source
                Local AS: 65000 Peer AS: 65500
                Age: 2:55:27    Metric2: 0 
                Task: BGP_65500.10.1.1.1+53260
                AS path: 65500 I
                Accepted
                Localpref: 100
                Router ID: 10.255.14.179
                Indirect next hops: 1
                        Protocol next hop: 10.1.10.10
                        Indirect next hop: 91c0000 262142
                        Indirect path forwarding next hops: 2
                                Next hop type: Router
                                Next hop: 10.1.0.1 via fe-1/2/0.0
                                Next hop: 10.1.1.1 via fe-1/2/2.0
                        10.1.10.10/32 Originating RIB: inet.0
                          Node path count: 1
                          Forwarding nexthops: 2
                                Nexthop: 10.1.0.1 via fe-1/2/0.0
                                Nexthop: 10.1.1.1 via fe-1/2/2.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d27e1155__d77004e2106" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示设备 R1 具有到 10.1.230.0 网络的路由，并启用了多路径功能 （<code class="ph codeph">Accepted                             Multipath</code>）。输出还显示路由的间接下一跃点为 10.1.10.10。</p></div></div> <div id="d27e1155__d27e1382" class="section"><h4 class="title sectiontitle">停用和重新激活接受-远程-下一跃点语句</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d77004e2128" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d77004e2137" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d27e1155__d77004e2260" class="xref">意义</a></li></ul> <div id="d27e1155__d77004e2128" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">停用语句时， <code class="ph codeph">accept-remote-nexthop</code> 请确保从路由表中删除具有间接下一跃点的多路径路由。</p></div> <div id="d27e1155__d77004e2137" class="subsection"><h5 class="sectiontitle">操作</h5><ol class="ol"><li class="li"><p class="p">从配置模式，输入 <code class="ph codeph">deactivate protocols bgp                                     accept-remote-nexthop</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">deactivate protocols bgp accept-remote-nexthop</kbd>
user@R1# <kbd class="ph userinput">commit</kbd></pre></div> <!----></div></li> <li class="li"><p class="p">在操作模式下，输入 <code class="ph codeph">show route                                     10.1.230.0</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.1.230.0 </kbd></pre></div> <!----></div></li> <li class="li"><p class="p">在配置模式下，输入 <code class="ph codeph">activate protocols bgp accept-remote-nexthop</code> 命令重新激活语句。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">activate protocols bgp accept-remote-nexthop</kbd>
user@R1# <kbd class="ph userinput">commit</kbd></pre></div> <!----></div></li> <li class="li"><p class="p">在操作模式下，重新输入 <code class="ph codeph">show route                                     10.1.230.0                                 </code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.1.230.0 </kbd>

inet.0: 11 destinations, 13 routes (11 active, 0 holddown, 0 hidden)
Restart Complete
+ = Active Route, - = Last Active, * = Both

10.1.230.0/23       *[BGP/170] 03:13:19, localpref 100
                      AS path: 65500 I
                    &gt; to 10.1.0.1 via fe-1/2/0.0
                      to 10.1.1.1 via fe-1/2/2.0
                    [BGP/170] 03:13:15, localpref 100, from 10.1.1.1
                      AS path: 65500 I
                    &gt; to 10.1.0.1 via fe-1/2/0.0
                      to 10.1.1.1 via fe-1/2/2.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li></ol></div> <div id="d27e1155__d77004e2260" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p"><code class="ph codeph">accept-remote-nexthop</code>当语句停用时，多路径路由到 10。1.230.0 网络已从路由表中删除。</p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-overview.html#id-10119586" class="link">了解 BGP 路径选择</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-peering-sessions.html#id-understanding-external-bgp-peering-sessions" class="link">了解外部 BGP 对等会话</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/task/routing-protocol-bgp-security-configuring.html" class="link">BGP 配置概述</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title14" xml:lang="zh-CN" lang="zh-CN" id="id-understanding-load-balancing-for-bgp-traffic-with-unequal-bandwidth-allocated-to-the-paths" class="topic concept nested1"><h2 id="ariaid-title14" class="title topictitle2">了解分配给路径的带宽不相等的 BGP 流量的负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 了解分配给路径的带宽不相等的 BGP 流量的负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><div class="abstract"><p class="p">多路径选项从活动路由决策流程中删除了仲裁程序，从而允许将从多个源获知的等价 BGP 路由安装到转发表中。但是，当可用路径的成本不相等时，您可能希望以非对称方式对流量进行负载均衡。</p></div> <p class="p">在转发表中安装多个下一跃点后，Junos OS 按前缀负载平衡算法选择特定的转发下一跃点。此过程根据数据包的源地址和目标地址进行哈希处理，以明确地将前缀对映射到可用的下一跃点之一。当哈希函数具有大量前缀时（例如可能发生在 Internet 对等交换上），并且用于防止通信节点对之间的数据包重新排序，因此按前缀映射效果最佳。 </p> <p class="p">企业网络通常希望更改默认行为以唤起 <em class="ph i">按数据包负载</em> 均衡算法。这里强调按数据包，因为它的使用用词不当，源于原始互联网处理器 ASIC 的历史行为。实际上，当前的瞻博网络路由器支持按前缀（默认）和按流负载均衡。后者涉及针对各种第 3 层和第 4 层标头进行哈希处理，包括源地址、目标地址、传输协议、传入接口和应用程序端口的部分内容。其效果是，现在各个流被哈希到特定的下一跃点，从而在可用的下一跃点之间更均匀地分布，尤其是在源和目标对之间进行路由时。 </p> <p class="p">使用按数据包负载均衡时，包含两个端点之间的通信流的数据包可能会重新排序，但各个流中的数据包会保持正确的顺序。无论您选择按前缀还是按数据包负载平衡，接入链路的不对称都会带来技术挑战。无论采用哪种方式，与映射到快速以太网接入链路等的流相比，映射到 T1 链路等的前缀或流的性能都会下降。更糟糕的是，对于繁重的流量负载，任何同等负载均衡的尝试都可能导致 T1 链路完全饱和，以及数据包丢失导致的会话中断。 </p> <p class="p">幸运的是，瞻博网络 BGP 实施支持带宽社区的概念。此扩展社区对给定下一跃点的带宽进行编码，当与多路径结合使用时，负载平衡算法会在与流量相对带宽成比例的下一跃点集之间分配流量。换句话说，如果您有 10 Mbps 和 1 Mbps 的下一跃点，则对于每个使用低速的流量，平均有 9 个流将映射到高速下一跃点。 </p> <p class="p">只有按数据包的负载均衡才支持 BGP 带宽社区的使用。 </p> <p class="p">配置任务包含两部分： </p> <ul class="ul"><li class="li"><p class="p">配置外部 BGP （EBGP） 对等会话，启用多路径，并定义导入策略，以使用反映链路速度的带宽社区标记路由。 </p></li> <li class="li"><p class="p">启用按数据包（实际上是按流）负载平衡，以实现最佳流量分配。</p></li></ul></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/sampling-forwarding-monitoring/topics/concept/policy-per-packet-load-balancing-overview.html" class="link">了解每个数据包的负载平衡</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title15" xml:lang="zh-CN" lang="zh-CN" id="id-example-load-balancing-bgp-traffic-with-unequal-bandwidth-allocated-to-the-paths" class="topic concept nested1"><h2 id="ariaid-title15" class="title topictitle2">示例：在分配给路径的带宽不相等的情况下，平衡 BGP 流量的负载<a class="bookmarktitle" aria-label="Copy link to this section: 示例：在分配给路径的带宽不相等的情况下，平衡 BGP 流量的负载" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何将 BGP 配置为选择多个不等价路径作为活动路径。 </p> <p class="p">BGP 社区可以帮助您控制路由策略。BGP 社区良好用法的一个示例是不等负载均衡。当自治系统边界路由器 （ASBR） 接收来自直接连接的外部 BGP （EBGP） 邻接方的路由时，ASBR 会使用 IBGP 通告将这些路由通告给内部邻接方。在 IBGP 广告中，您可以附加链路带宽社区来传达播发的外部链路的带宽。当有多个外部链接可用，并且您希望对这些链接执行不相等的负载平衡时，这很有用。您可以在 AS 的所有入口链路上配置链路带宽扩展社区。链路带宽扩展社区中的带宽信息基于 EBGP 链路的配置带宽。它不基于链路上的流量。Junos OS 支持 BGP 链路带宽和多路径负载平衡，如互联网草案 draft-ietf-idr-link-bandwidth-06，BGP <cite class="cite">链路带宽扩展社区</cite>中所述。请注意，即使 <span class="ph filepath">draft-ietf-idr-link-bandwidth-06</span> 指定了非传递社区，Junos OS 实施也仅限于传递社区。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e39" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e59" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e116" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e553" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title16" id="d29e39" class="topic concept nested2"><h3 id="ariaid-title16" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">准备工作：</p> <ul class="ul"><li class="li"><p class="p">配置设备接口。</p></li> <li class="li"><p class="p">配置内部网关协议 （IGP）。</p></li> <li class="li"><p class="p">配置 BGP。</p></li> <li class="li"><p class="p">配置路由策略，将路由（例如直接路由或 IGP 路由）从路由表导出到 BGP。</p></li></ul></div></div> <div aria-labelledby="ariaid-title17" id="d29e59" class="topic concept nested2"><h3 id="ariaid-title17" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">在此示例中，设备 R1 位于 AS 64500 中，并连接到位于 AS 64501 中的设备 R2 和设备 R3。 </p> <p class="p">此示例使用带宽扩展社区。</p> <p class="p">默认情况下，使用 BGP 多路径时，流量在计算的多个路径之间平均分配。带宽扩展社区允许向 BGP 路径添加附加属性，从而允许流量分布不均。主要应用是具有非对称带宽功能的给定网络存在多个外部路径的方案。在这种情况下，您可以标记使用带宽扩展社区接收的路由。当 BGP 多路径（内部或外部）在包含带宽属性的路由之间运行时，转发引擎可能会根据每个路径对应的带宽不均地分配流量。 </p> <p class="p">当 BGP 有多个候选路径可用于多路径时，BGP 不会根据带宽社区执行不等价负载平衡，除非所有候选路径都具有此属性。</p> <p class="p">带宽扩展社区的适用性受到 BGP 多路径接受多个路径以供考虑的限制。明确而言，就 BGP 而言，执行负载平衡的路由器与多个出口点之间的 IGP 距离需要相同。这可以通过使用不跟踪相应 IGP 指标的标签交换路径 （LSP） 的完整网格来实现。但是，在电路传播延迟很大的网络中（例如，如果存在长距离电路），考虑不同路径的延迟特性通常是有价值的。</p> <p class="p">按如下方式配置带宽社区：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options] 
user@host# <kbd class="ph userinput">set community members bandwidth</kbd>:[1-65535]:[0-4294967295]
</pre></div> <!----></div><p class="p">第一个 16 位数字表示本地自治系统。第二个 32 位数字表示链路带宽（以字节/秒为单位）。 </p> <p class="p">例如： </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options] 
user@host# <kbd class="ph userinput">show</kbd>
community bw-t1 members bandwidth:10458:193000;     
community bw-t3 members bandwidth:10458:5592000;     
community bw-oc3 members bandwidth:10458:19440000;
</pre></div> <!----></div><p class="p">其中 10458 是本地 AS 编号。这些值对应于 T1、T3 和 OC-3 路径的带宽（以字节/秒为单位）。指定为带宽值的值不需要与特定接口的实际带宽相对应。使用的平衡因子计算为指定总带宽的函数。要使用此扩展社区标记路由，请定义策略语句，如下所示：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options] 
user@host# <kbd class="ph userinput">show</kbd>
policy-statement link-bw-t1 {
    then {
        community set bw-t1;
    }
    accept;
}
</pre></div> <!----></div><p class="p">将此作为导入策略应用于面向非对称带宽链路的 BGP 对等会话。尽管理论上可以在网络中的任何点添加或删除社区属性，但在上述场景中，在面向外部链接的 EBGP 对等会话中将社区作为导入策略应用允许该属性影响本地多路径决策，并且可能更易于管理。</p> <div id="d29e59__d77004e2413" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e59__d29e105" class="xref">图 3</a> 显示了此示例中使用的拓扑。 </p> <div id="d29e59__d29e105" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 3： </span>BGP 负载平衡</span><span><img data-width="476px" data-height="362px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g040875.gif" alt="BGP 负载平衡" class="image"></span></div> <p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e116__d29e123" class="xref">CLI 快速配置</a> 显示了 中 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e59__d29e105" class="xref">图 3</a>所有设备的配置。<a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e116__d29e379" class="xref">#d29e116__d29e379</a>本节介绍设备 R1 上的步骤。</p></div></div></div> <div aria-labelledby="ariaid-title18" id="d29e116" class="topic concept nested2"><h3 id="ariaid-title18" class="title topictitle3">配置</h3> <div class="body conbody"><div id="d29e116__d77004e2434" class="section"><h4 class="title sectiontitle">程序</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e116__d29e123" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e116__d77004e2680" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e116__d77004e2821" class="xref">结果</a></li></ul> <div id="d29e116__d29e123" class="subsection"><h5 class="sectiontitle">CLI 快速配置</h5><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，然后将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中。</p> <p class="p"><strong class="ph b">设备 R1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 description R1-&gt;R3</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 family inet address 10.0.0.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 description R1-&gt;R2</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 family inet address 10.0.1.2/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.1/32</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external import bw-dis</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 64501</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.1.1</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.0.2</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a from neighbor 10.0.1.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a then community add bw-high</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b from neighbor 10.0.0.2</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b then community add bw-low</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal from route-filter 10.0.0.0/16 orlonger</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options community bw-high members bandwidth:65000:60000000</kbd>
<kbd class="ph userinput">set policy-options community bw-low members bandwidth:65000:40000000</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64500</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export loadbal</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">设备 R2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 description R2-&gt;R1</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 family inet address 10.0.1.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 description R2-&gt;R3</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 family inet address 10.0.2.2/30</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.2/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0001.1921.6800.0002.00</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external export bgp-default</kbd>
<kbd class="ph userinput">set protocols bgp group external export send-direct</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 64500</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.1.2</kbd>
<kbd class="ph userinput">set protocols isis interface ge-1/2/1.0</kbd>
<kbd class="ph userinput">set protocols isis interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from route-filter 172.16.0.0/16 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 then accept</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 discard</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 no-install</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">设备 R3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 description R3-&gt;R2</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 family inet address 10.0.2.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/0 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 description R3-&gt;R1</kbd>
<kbd class="ph userinput">set interfaces ge-1/2/1 unit 0 family inet address 10.0.0.2/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.3/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0001.1921.6800.0003.00</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external export send-direct</kbd>
<kbd class="ph userinput">set protocols bgp group external export bgp-default</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 64500</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.0.1</kbd>
<kbd class="ph userinput">set protocols isis interface ge-1/2/0.0</kbd>
<kbd class="ph userinput">set protocols isis interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from route-filter 172.16.0.0/16 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 then accept</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 discard</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 no-install</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d29e116__d77004e2680" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置 BGP 对等会话，请执行以下操作： </p> <ol id="d29e116__d29e379" class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">set ge-1/2/0 unit 0 description R1-&gt;R3</kbd>
user@R1# <kbd class="ph userinput">set ge-1/2/0 unit 0 family inet address 10.0.0.1/30</kbd>
user@R1# <kbd class="ph userinput">set ge-1/2/1 unit 0 description R1-&gt;R2</kbd>
user@R1# <kbd class="ph userinput">set ge-1/2/1 unit 0 family inet address 10.0.1.2/30</kbd>
user@R1# <kbd class="ph userinput">set lo0 unit 0 family inet address 192.168.0.1/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 组。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group external]
user@R1# <kbd class="ph userinput">set type external</kbd>
user@R1# <kbd class="ph userinput">set import bw-dis</kbd>
user@R1# <kbd class="ph userinput">set peer-as 64501</kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.0.1.1</kbd>
user@R1# <kbd class="ph userinput">set neighbor 10.0.0.2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">使 BGP 组能够使用多个路径。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">要禁用要求 BGP 多路径接受的路径必须具有相同相邻自治系统 （AS） 的默认检查，请包含该 <code class="ph codeph">multiple-as</code> 选项。如果邻接方位于不同的 AS 中，请使用此选项 <code class="ph codeph">multiple-as</code> 。</p></div></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group external]
user@R1# <kbd class="ph userinput">set multipath</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置负载均衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options policy-statement loadbal]
user@R1# <kbd class="ph userinput">set from route-filter 10.0.0.0/16 orlonger </kbd>
user@R1# <kbd class="ph userinput">set then load-balance per-packet </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用负载平衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set forwarding-table export loadbal</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 社区成员。</p> <p class="p">此示例假定带宽为 1 Gbps，并将 60% 分配给 bw 高，40% 分配给低带宽。参考带宽不必与链路带宽相同。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@R1# <kbd class="ph userinput">set community bw-high members bandwidth:65000:60000000</kbd>
user@R1# <kbd class="ph userinput">set community bw-low members bandwidth:65000:40000000</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置带宽分配策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options bw-dis]
user@R1# <kbd class="ph userinput">set term a from protocol bgp</kbd>
user@R1# <kbd class="ph userinput">set term a from neighbor 10.0.1.1</kbd>
user@R1# <kbd class="ph userinput">set term a then community add bw-high</kbd>
user@R1# <kbd class="ph userinput">set term a then accept</kbd>
user@R1# <kbd class="ph userinput">set term b from protocol bgp</kbd>
user@R1# <kbd class="ph userinput">set term b from neighbor 10.0.0.2</kbd>
user@R1# <kbd class="ph userinput">set term b then community add bw-low</kbd>
user@R1# <kbd class="ph userinput">set term b then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置本地自治系统 (AS) 编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set autonomous-system 64500</kbd>
</pre></div> <!----></div></li></ol></div><div id="d29e116__d77004e2821" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1# <code class="ph codeph"><kbd class="ph userinput">show interfaces</kbd></code>
ge-1/2/0 {
    unit 0 {
        description R1-&gt;R3;
        family inet {
            address 10.0.0.1/30;
        }
    }
}
ge-1/2/1 {
    unit 0 {
        description R1-&gt;R2;
        family inet {
            address 10.0.1.2/30;
        }
    }
}
lo0 {
    unit 0 {
        family inet {
            address 192.168.0.1/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <code class="ph codeph"><kbd class="ph userinput">show protocols</kbd></code>
bgp {
    group external {
        type external;
        import bw-dis;
        peer-as 64501;
        multipath;
        neighbor 10.0.1.1;
        neighbor 10.0.0.2;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1# <code class="ph codeph"><kbd class="ph userinput">show policy-options</kbd></code>
policy-statement bw-dis {
    term a {
        from {
            protocol bgp;
            neighbor 10.0.1.1;
        }
        then {
            community add bw-high;
            accept;
        }
    }
    term b {
        from {
            protocol bgp;
            neighbor 10.0.0.2;
        }
        then {
            community add bw-low;
            accept;
        }
    }
}
policy-statement loadbal {
    from {
        route-filter 10.0.0.0/16 orlonger;
    }
    then {
        load-balance per-packet;
    }
}
community bw-high members bandwidth:65000:60000000;
community bw-low members bandwidth:65000:40000000;
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <code class="ph codeph"><kbd class="ph userinput">show routing-options</kbd></code>
autonomous-system 64500;
forwarding-table {
    export loadbal;
}
</pre></div> <!----></div><p class="p">如果完成设备配置，请从配置模式输入 <code class="ph codeph">commit</code>。</p></div></div></div></div> <div aria-labelledby="ariaid-title19" id="d29e553" class="topic concept nested2"><h3 id="ariaid-title19" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常：</p> <div id="d29e553__d29e559" class="section"><h4 class="title sectiontitle">验证路由</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e553__d77004e2876" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e553__d77004e2881" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d29e553__d77004e2930" class="xref">意义</a></li></ul> <div id="d29e553__d77004e2876" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证是否选择了两个路由，以及路由上的下一跃点是否显示 60%/40% 的余额。 </p></div><div id="d29e553__d77004e2881" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route protocol bgp detail </code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1&gt; <kbd class="ph userinput">show route 172.16/16 protocol bgp detail</kbd>
inet.0: 9 destinations, 13 routes (9 active, 0 holddown, 0 hidden)
172.16.0.0/16 (2 entries, 1 announced)
        <strong class="ph b">*</strong>BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 262143
                Address: 0x93fc078
                Next-hop reference count: 3
                Source: 10.0.0.2
<strong class="ph b">                Next hop: 10.0.0.2 via ge-1/2/0.0 balance 40%
                Next hop: 10.0.1.1 via ge-1/2/1.0 balance 60%, selected
</strong>                State: **Active Ext&gt;
                Local AS: 64500 Peer AS: 64501
                Age: 3:22:55 
                Task: BGP_64501.10.0.0.2+55344
                Announcement bits (1): 0-KRT 
                AS path: 64501 I
                <strong class="ph b">Communities: bandwidth:65000:40000000</strong>
                <strong class="ph b">Accepted Multipath</strong>
                Localpref: 100
                Router ID: 192.168.0.3
         BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 658
                Address: 0x9260520
                Next-hop reference count: 4
                Source: 10.0.1.1
                Next hop: 10.0.1.1 via ge-1/2/1.0, selected
                State: &lt;NotBest Ext&gt;
                Inactive reason: Not Best in its group - Active preferred
                Local AS: 64500 Peer AS: 64501
                Age: 3:22:55 
                Task: BGP_65001.10.0.1.1+62586
                AS path: 64501 I
                <strong class="ph b">Communities: bandwidth:65000:60000000</strong>
                <strong class="ph b">Accepted MultipathContrib</strong>
                Localpref: 100
                Router ID: 192.168.0.2</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.0.2.0 protocol bgp detail</kbd>
inet.0: 9 destinations, 13 routes (9 active, 0 holddown, 0 hidden)
10.0.2.0/30 (2 entries, 1 announced)
        <strong class="ph b">*</strong>BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 262143
                Address: 0x93fc078
                Next-hop reference count: 3
                Source: 10.0.1.1
                <strong class="ph b">Next hop: 10.0.0.2 via ge-1/2/0.0 balance 40%
                Next hop: 10.0.1.1 via ge-1/2/1.0 balance 60%, selected</strong>
                State: &lt;Active Ext&gt;
                Local AS: 64500 Peer AS: 64501
                Age: 3:36:37 
                Task: BGP_65001.10.0.1.1+62586
                Announcement bits (1): 0-KRT 
                AS path: 64501 I
                <strong class="ph b">Communities: bandwidth:65000:60000000
                Accepted Multipath</strong>
                Localpref: 100
                Router ID: 192.168.0.2
         BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 657
                Address: 0x92604d8
                Next-hop reference count: 4
                Source: 10.0.0.2
                Next hop: 10.0.0.2 via ge-1/2/0.0, selected
                State: &lt;NotBest Ext&gt;
                Inactive reason: Not Best in its group - Active preferred
                Local AS: 64500 Peer AS: 65001
                Age: 3:36:36 
                Task: BGP_65001.10.0.0.2+55344
                AS path: 64501 I
                <strong class="ph b">Communities: bandwidth:65000:40000000
                Accepted MultipathContrib</strong>
                Localpref: 100
                Router ID: 192.168.0.3</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d29e553__d77004e2930" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">活动路径（用星号 （*） 表示）有两个下一跃点：10.0.1.1 和 10.0.0.2 到 172.16/16 目标。 </p> <p class="p">同样，用星号 （*） 表示的活动路径有两个下一跃点：10.0.1.1 和 10.0.0.2 到 10.0.2.0 目标。 </p> <p class="p">在这两种情况下，10.0.1.1 下一跃点都会从非活动路径复制到活动路径。 </p> <p class="p">输出中显示了 <code class="ph codeph">show route</code> 40% 和 60% 的余额。这表明流量在两个下一跃点之间分配，60% 的流量遵循第一个路径，而 40% 的流量遵循第二个路径。 </p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-bgp-multipath" class="link">了解 BGP 多路径</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title20" xml:lang="zh-CN" lang="zh-CN" id="id-advertising-aggregate-bandwidth-across-external-bgp-links-for-load-balancing-overview" class="topic concept nested1"><h2 id="ariaid-title20" class="title topictitle2">跨外部 BGP 链路播发聚合带宽以实现负载平衡概述<a class="bookmarktitle" aria-label="Copy link to this section: 跨外部 BGP 链路播发聚合带宽以实现负载平衡概述" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><div class="abstract"><p class="p">从其内部对等方接收多条路径的 BGP 对等方会在这些路径之间对流量进行负载平衡。在早期的 Junos OS 版本中，从内部对等方接收多条路径的 BGP 发送方仅播发与活动路由关联的链路带宽。BGP 使用链路带宽扩展社区，跨外部链路通告多个路由的聚合带宽。BGP 计算具有不相等带宽分配的多路径的总带宽，并将聚合带宽播发至外部 BGP 对等方。可以配置聚合带宽的阈值来限制 BGP 组的带宽使用。IPv4 和 IPv6 路由（包括任播地址）都支持聚合带宽。 </p> <p class="p">要通告多路径路由的聚合带宽并设置最大阈值，请在 [然后编辑策略选项策略语句<var class="keyword varname">name</var>] 层次结构级别配置策略<code class="ph codeph">aggregate-bandwidth</code><code class="ph codeph">limit-bandwidth</code>和操作。</p></div> <div id="id-advertising-aggregate-bandwidth-across-external-bgp-links-for-load-balancing-overview__d30e34" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 4： </span>跨外部 BGP 链路通告聚合带宽以实现负载平衡</span><span><div class="imgwrap"><img data-width="2100px" data-height="938px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043647.png" alt="跨外部 BGP 链路通告聚合带宽以实现负载平衡" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div> <p class="p">在 中 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-advertising-aggregate-bandwidth-across-external-bgp-links-for-load-balancing-overview__d30e34" class="xref">图 4</a>，自治系统 1 （AS1） 将其 3 条多路径路由的带宽聚合到远程前缀，并使用链路带宽扩展社区将其通告给带宽为 30 的自治系统 4 （AS4）。如果 AS3 和 AS4 之间出现链路故障，AS4 会从其播发至 AS6 的带宽中减去 60，并将播发的带宽从 130 修改为 70。</p> <p class="p">当 BGP 对等方传播配置了聚合带宽社区的多路径路由时，将添加一个新的链路带宽社区，其中包含来自传入带宽社区或该前缀的带宽总和。可用链路带宽动态派生自接口速度。链路带宽作为可传递扩展社区发送。但是，如果设备以非可传递链路带宽扩展社区的形式接收链路带宽，Junos OS 将忽略此社区，而是将其与可传递链路带宽扩展社区一起传播。如果未收到每个传入多路径路由的链路带宽社区，则不会向其外部对等方通告链路带宽社区。 </p> <p class="p">当其中一个多路径链路发生故障时，BGP 会重新播发路由，并从传出链路带宽社区中减去故障链路的带宽。如果发现聚合链路带宽超过配置的限制，则播发的聚合带宽将被截断为两个对等方之间配置的链路带宽限制。</p></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html" class="link">策略声明</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title21" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-a-policy-to-advertise-aggregate-bandwidth-across-external-bgp" class="topic concept nested1"><h2 id="ariaid-title21" class="title topictitle2">示例：配置策略以跨外部 BGP 链路通告聚合带宽以实现负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 示例：配置策略以跨外部 BGP 链路通告聚合带宽以实现负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何配置策略以跨外部 BGP 链路通告聚合带宽以实现负载平衡，以及如何为配置的聚合带宽指定阈值。BGP 将多路径的可用链路带宽相加并计算聚合带宽。如果发生链路故障，将调整聚合带宽以反映可用带宽的当前状态。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e28" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e42" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e72" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title22" id="d31e28" class="topic concept nested2"><h3 id="ariaid-title22" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">四个具有负载平衡功能的路由器</p></li> <li class="li"><p class="p">在所有设备上运行的 Junos OS 17.4 或更高版本</p></li></ul></div></div> <div aria-labelledby="ariaid-title23" id="d31e42" class="topic concept nested2"><h3 id="ariaid-title23" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">从 Junos OS 17.4R1 版开始，从内部对等方接收多条路径的 BGP 发送方会在这些路径之间实现流量负载均衡。在早期的 Junos OS 版本中，从内部对等方接收多条路径的 BGP 发送方仅播发与活动路由关联的链路带宽。BGP 使用具有聚合带宽的新链路带宽扩展社区来标记多路径，并在其 DMZ 链路上通告这些多路由的聚合带宽。要通告聚合的多个路由，请在 [然后编辑策略选项策略语句<var class="keyword varname">name</var>] 层次结构级别配置策略<code class="ph codeph">aggregate-bandwidth</code>和<code class="ph codeph">limit bandwidth</code>操作。</p> <div id="d31e42__d77004e3039" class="section"><h4 class="title sectiontitle">拓扑学</h4><div class="p"><div id="d31e42__d31e61" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 5： </span>配置策略以跨外部 BGP 链路通告聚合带宽以实现负载平衡</span><span><div class="imgwrap"><img data-width="2100px" data-height="948px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043646.png" alt="配置策略以跨外部 BGP 链路通告聚合带宽以实现负载平衡" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div> <p class="p">在 中 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e42__d31e61" class="xref">图 5</a>，路由器 R1 通过路由器 R2 中的下一跃点 10.0.1.1 以每秒 60,000,000 字节的速度负载均衡到远程目标的流量，并以每秒 40,000,000 字节的速度通过路由器 R3 中的 10.0.0.2 将流量负载均衡到远程目标。路由器 R1 将目标 10.0.2.0 播发至路由器 R4。路由器 R1 计算可用带宽的聚合，即每秒 10000000 字节。但是，路由器 R1 上配置的策略将聚合带宽的阈值设置为每秒 80,000,000 字节。因此，R1 播发每秒 80,000,000 字节，而不是每秒 10,000,000 字节。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">如果其中一个多路径链路出现故障，则故障链路的带宽不会添加到向 BGP 邻接方播发的聚合带宽中。</p></div></div></div></div></div></div> <div aria-labelledby="ariaid-title24" id="d31e72" class="topic concept nested2"><h3 id="ariaid-title24" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e72__d77004e3058" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e72__d77004e3355" class="xref">配置路由器，从 R1 开始</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e72__d77004e3542" class="xref">结果</a></li></ul> <div id="d31e72__d77004e3058" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改详细信息，以便与网络配置匹配，将命令复制并粘贴到 <kbd class="ph userinput">[edit]</kbd> 层级的 CLI 中，然后从配置模式进入 <code class="ph codeph">commit</code> 。</p> <p class="p"><strong class="ph b">路由器 R1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description R1-&gt;R3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.0.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description R1-&gt;R2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 10.0.1.2/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 description R1-&gt;R4</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 10.0.4.1/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.1/32</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65000</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external import bw-dis</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 65001</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.1.1</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.0.2</kbd>
<kbd class="ph userinput">set protocols bgp group external2 type external</kbd>
<kbd class="ph userinput">set protocols bgp group external2 peer-as 65002</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a from neighbor 10.0.1.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a then community add bw-high</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term a then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b from neighbor 10.0.0.2</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b then community add bw-low</kbd>
<kbd class="ph userinput">set policy-options policy-statement bw-dis term b then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement aggregate_bw_and_limit_capacity then aggregate-bandwidth</kbd>
<kbd class="ph userinput">set policy-options policy-statement aggregate_bw_and_limit_capacity then limit-bandwidth 80000000</kbd>
<kbd class="ph userinput">set policy-options policy-statement aggregate_bw_and_limit_capacity then accept</kbd>
<kbd class="ph userinput">set protocols bgp group external2 neighbor 10.0.4.2 export aggregate_bw_and_limit_capacity</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal from route-filter 10.0.0.0/16 orlonger</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export loadbal</kbd>
<kbd class="ph userinput">set policy-options community bw-high members bandwidth:65000:60000000</kbd>
<kbd class="ph userinput">set policy-options community bw-low members bandwidth:65000:40000000</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description R2-&gt;R3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.2.2/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description R2-&gt;R1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 10.0.1.1/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.2/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0001.1921.6800.0002.00</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 discard</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 no-install</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65001</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external export bgp-default</kbd>
<kbd class="ph userinput">set protocols bgp group external export send-direct</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 65000</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.1.2</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols isis interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from route-filter 172.16.0.0/16 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 then accept</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 description R3-&gt;R2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.2.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description R3-&gt;R1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 10.0.0.2/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.3/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0001.1921.6800.0003.00</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 discard</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.0.0/16 no-install</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65001</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external export bgp-default</kbd>
<kbd class="ph userinput">set protocols bgp group external export send-direct</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 65000</kbd>
<kbd class="ph userinput">set protocols bgp group external multipath</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.0.1</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols isis interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default from route-filter 172.16.0.0/16 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement bgp-default then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement send-direct term 1 then accept</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R4</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description R4-&gt;R1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.4.2/30</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.4/32</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65002</kbd>
<kbd class="ph userinput">set protocols bgp group external type external</kbd>
<kbd class="ph userinput">set protocols bgp group external peer-as 65000</kbd>
<kbd class="ph userinput">set protocols bgp group external neighbor 10.0.4.1</kbd>
</pre></div> <!----></div></div> <div id="d31e72__d77004e3355" class="section"><h4 class="title sectiontitle">配置路由器，从 R1 开始</h4><div id="d31e72__d77004e3358" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置策略以将聚合带宽播发至 BGP 对等方（从路由器 R1 开始），请执行以下操作：</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">修改相应的接口名称、地址和其他参数后，在路由器 R2、R3 和 R4 上重复此过程。</p></div></div></div><ol class="ol"><li class="li"><p class="p">使用 IPv4 地址配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R1# <kbd class="ph userinput">set ge-0/0/0 unit 0 description R1-&gt;R3</kbd>
user@R1# <kbd class="ph userinput">set ge-0/0/0 unit 0 family inet address 10.0.0.1/30</kbd>
user@R1# <kbd class="ph userinput">set ge-0/0/1 unit 0 description R1-&gt;R2</kbd>
user@R1# <kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 10.0.1.2/30</kbd>
user@R1# <kbd class="ph userinput">set ge-0/0/2 unit 0 description R1-&gt;R4</kbd>
user@R1# <kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 10.0.4.1/30</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R1# <kbd class="ph userinput">set lo0 unit 0 family inet address 192.168.0.1/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 BGP 主机配置自治系统。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set autonomous-system 65000</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在外部边缘路由器上配置 EBGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R1# <kbd class="ph userinput">set bgp group external type external</kbd>
user@R1# <kbd class="ph userinput">set bgp group external import bw-dis</kbd>
user@R1# <kbd class="ph userinput">set bgp group external peer-as 65001</kbd>
user@R1# <kbd class="ph userinput">set bgp group external multipath</kbd>
user@R1# <kbd class="ph userinput">set bgp group external neighbor 10.0.1.1</kbd>
user@R1# <kbd class="ph userinput">set bgp group external neighbor 10.0.0.2</kbd>
user@R1# <kbd class="ph userinput">set bgp group external2 type external</kbd>
user@R1# <kbd class="ph userinput">set bgp group external2 peer-as 65002</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义带宽分配策略，为发往路由器 R3 的流量分配高带宽社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term a from protocol bgp</kbd>
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term a from neighbor 10.0.1.1</kbd>
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term a then community add bw-high</kbd>
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term a then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义带宽分配策略，为发往路由器 R2 的流量分配低带宽社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term b from protocol bgp</kbd>
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term b from neighbor 10.0.0.2</kbd>
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term b then community add bw-low</kbd>
user@R1# <kbd class="ph userinput">set policy-statement bw-dis term b then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">启用该功能可通过 BGP 会话将 80,000,000 字节的聚合带宽播发至 EBGP 对等路由器 R4。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@R1# <kbd class="ph userinput">set policy-statement aggregate_bw_and_limit_capacity then aggregate-bandwidth</kbd>
user@R1# <kbd class="ph userinput">set policy-statement aggregate_bw_and_limit_capacity then limit-bandwidth 80000000</kbd>
user@R1# <kbd class="ph userinput">set policy-statement aggregate_bw_and_limit_capacity then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将aggregate_bw_and limit_capacity策略应用于 EBGP 组 <code class="ph codeph">external2</code>。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R1# <kbd class="ph userinput">set bgp group external2 neighbor 10.0.4.2 export aggregate_bw_and_limit_capacity</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义负载均衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@R1# <kbd class="ph userinput">set policy-statement loadbal from route-filter 10.0.0.0/16 orlonger</kbd>
user@R1# <kbd class="ph userinput">set policy-statement loadbal then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用负载平衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set forwarding-table export loadbal</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 社区成员。第一个 16 位数字表示本地自治系统。第二个 32 位数字表示链路带宽（以字节/秒为单位）。配置一个 <code class="ph codeph">bw-high</code> 社区，使用 60% 的 1-Gbps 链路，配置另一个社区 <code class="ph codeph">bw-low</code> ，配置 40% 的 1-Gbps 链路。</p> <p class="p">将 60% 的 1-Gbps 链路配置为高带宽社区，40% 配置为低带宽社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@R1# <kbd class="ph userinput">set community bw-high members bandwidth:65000:60000000</kbd>
user@R1# <kbd class="ph userinput">set community bw-low members bandwidth:65000:40000000</kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d31e72__d77004e3542" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd> 、<kbd class="ph userinput">show protocols</kbd>、<kbd class="ph userinput">show routing-options</kbd> 和 <kbd class="ph userinput">show policy-options</kbd> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@R1# <kbd class="ph userinput">show interfaces</kbd>
interfaces {
    ge-0/0/0 {
        unit 0 {
            description R1-&gt;R3;
            family inet {
                address 10.0.0.1/30;
            }
        }
    }
    ge-0/0/1 {
        unit 0 {
            description R1-&gt;R2;
            family inet {
                address 10.0.1.2/30;
            }
        }
    }
    ge-0/0/2 {
        unit 0 {
            description R1-&gt;R4;
            family inet {
                address 10.0.4.1/30;
            }
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 192.168.0.1/32;
            }
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@R1# <kbd class="ph userinput">show protocols</kbd>
protocols {
    bgp {
        group external {
            type external;
            import bw-dis;
            peer-as 65001;
            multipath;
            neighbor 10.0.1.1;
            neighbor 10.0.0.2;
        }
        group external2 {
            type external;
            peer-as 65002;
            neighbor 10.0.4.2 {
                export aggregate_bw_and_limit_capacity;
            }
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit] 
user@R1# <kbd class="ph userinput">show routing-options</kbd>
routing-options {
    autonomous-system 65000;
    forwarding-table {
        export loadbal;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@R1# <kbd class="ph userinput">show policy-options</kbd>
policy-options {
    policy-statement bw-dis {
        term a {
            from {
                protocol bgp;
                neighbor 10.0.1.1;
            }
            then {
                community add bw-high;
                accept;
            }
        }
        term b {
            from {
                protocol bgp;
                neighbor 10.0.0.2;
            }
            then {
                community add bw-low;
                accept;
            }
        }
    }
    policy-statement aggregate_bw_and_limit_capacity {
        then {
            aggregate-bandwidth;
            limit-bandwidth 80000000;
            accept;
        }
    }
    policy-statement loadbal {
        from {
            route-filter 10.0.0.0/16 orlonger;
        }
        then {
            load-balance per-packet;
        }
    }
    community bw-high members bandwidth:65000:60000000;
    community bw-low members bandwidth:65000:40000000;
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div></div> <div aria-labelledby="ariaid-title25" id="d31e597" class="topic concept nested2"><h3 id="ariaid-title25" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p"></p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d31e602" class="xref">验证是否已建立 BGP 会话</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d31e623" class="xref">验证每个路径中是否存在聚合带宽</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d31e650" class="xref">验证路由器 R1 是否正在向其邻居路由器 R4 播发聚合带宽</a></li></ul> <div id="d31e597__d31e602" class="section"><h4 class="title sectiontitle">验证是否已建立 BGP 会话</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3587" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3592" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3600" class="xref">意义</a></li></ul> <div id="d31e597__d77004e3587" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">要验证 BGP 对等互连是否完成并在路由器之间建立了 BGP 会话，</p></div><div id="d31e597__d77004e3592" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show bgp summary</kbd>
Groups: 2 Peers: 3 Down peers: 0
Table          Tot Paths  Act Paths Suppressed    History Damp State    Pending
inet.0
                      12          8          0          0          0          0
Peer                     AS      InPkt     OutPkt    OutQ   Flaps Last Up/Dwn State|#Active/Received/Accepted/Damped...
10.0.0.2              65001        153        149       0       0     1:07:23 4/6/6/0            0/0/0/0
10.0.1.1              65001        229        226       0       0     1:41:44 4/6/6/0            0/0/0/0
10.0.4.2              65002       1227       1227       0       0     9:10:27 0/0/0/0            0/0/0/0
</pre></div> <!----></div></div><div id="d31e597__d77004e3600" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 R1 已完成与路由器 R2、R3 和 R4 的对等互连。</p></div></div> <div id="d31e597__d31e623" class="section"><h4 class="title sectiontitle">验证每个路径中是否存在聚合带宽</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3608" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3613" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3629" class="xref">意义</a></li></ul> <div id="d31e597__d77004e3608" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证每个路由路径是否存在扩展社区。</p></div><div id="d31e597__d77004e3613" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route protocol bgp                             detail</code> 命令。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1&gt; <kbd class="ph userinput">show route 10.0.2.0 protocol bgp detail</kbd>
inet.0: 20 destinations, 26 routes (20 active, 0 holddown, 0 hidden)
10.0.2.0/30 (2 entries, 1 announced)
        *BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 0
                Address: 0xb618990
                Next-hop reference count: 3
                Source: 10.0.1.1
                Next hop: 10.0.0.2 via ge-0/0/0.0 balance 40%
                Session Id: 0x0
                Next hop: 10.0.1.1 via ge-0/0/1.0 balance 60%, selected
                Session Id: 0x0
                State: &lt;Active Ext&gt; 
                Local AS: 65000 Peer AS: 65001 
                Age: 20:33 
                Validation State: unverified 
                Task: BGP_65001.10.0.1.1 
                Announcement bits (3): 0-KRT 2-BGP_Listen.0.0.0.0+179 3-BGP_RT_Background 
                AS path: 65001 I 
                Communities: bandwidth:65000:60000000 
                Accepted Multipath 
                Localpref: 100 
                Router ID: 128.49.121.137 
         BGP    Preference: 170/-101 
                Next hop type: Router, Next hop index: 595 
                Address: 0xb7a1330 
                Next-hop reference count: 9 
                Source: 10.0.0.2 
                Next hop: 10.0.0.2 via ge-0/0/0.0, selected 
                Session Id: 0x141
                State: &lt;NotBest Ext&gt; 
                Inactive reason: Not Best in its group - Active preferred 
                Local AS: 65000 Peer AS: 65001 
                Age: 20:33 
                Validation State: unverified 
                Task: BGP_65001.10.0.0.2 
                AS path: 65001 I 
                Communities: <kbd class="ph userinput">bandwidth:65000:40000000</kbd> 
                Accepted MultipathContrib 
                Localpref: 100 
                Router ID: 128.49.121.132 </pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d31e597__d77004e3629" class="subsection"><h5 class="sectiontitle">意义</h5></div></div> <div id="d31e597__d31e650" class="section"><h4 class="title sectiontitle">验证路由器 R1 是否正在向其邻居路由器 R4 播发聚合带宽</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3635" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3640" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d31e597__d77004e3651" class="xref">意义</a></li></ul> <div id="d31e597__d77004e3635" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证路由器 R1 是否正在向其外部邻居播发聚合带宽。</p></div><div id="d31e597__d77004e3640" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show route advertising-protocol bgp 10.0.4.2 10.0.2.0/30 detail </kbd>
inet.0: 20 destinations, 26 routes (20 active, 0 holddown, 0 hidden)
* 10.0.2.0/30 (2 entries, 1 announced)
 BGP group external2 type External
     Nexthop: Self
     AS path: [65000] 65001 I
     Communities: <kbd class="ph userinput">bandwidth:65000:80000000</kbd>
</pre></div> <!----></div></div><div id="d31e597__d77004e3651" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 R1 正在向其邻居播发 80,000,000 字节的总带宽。 </p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-advertising-aggregate-bandwidth-across-external-bgp-links-for-load-balancing-overview" class="link">跨外部 BGP 链路播发聚合带宽以实现负载平衡概述</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html" class="link">策略声明</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title26" xml:lang="zh-CN" lang="zh-CN" id="id-understanding-the-advertisement-of-multiple-paths-to-a-single-destination-in-bgp" class="topic concept nested1"><h2 id="ariaid-title26" class="title topictitle2">了解 BGP 中指向单个目标的多个路径的播发<a class="bookmarktitle" aria-label="Copy link to this section: 了解 BGP 中指向单个目标的多个路径的播发" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">BGP 对等方在更新消息中相互播发路由。BGP 将其路由存储在 Junos OS 路由表 （<code class="ph codeph">inet.0</code>） 中。对于路由表中的每个前缀，路由协议进程会选择一个最佳路径，称为活动路径。除非将 BGP 配置为将多个路径播发到同一目标，否则 BGP 只会播发活动路径。</p> <p class="p">您可以将 BGP 配置为播发到目标的多个路径，而不是只播发目标的活动路径。在自治系统 （AS） 中，多个出口点到达目的地的可用性具有以下优势：</p> <ul class="ul"><li class="li"><p class="p">容错 — 路径分集可缩短故障后的恢复时间。例如，在接收到同一目标的多个路径后的边界可以预先计算备份路径并准备就绪，以便在主路径无效时，边界路由设备可以使用备份快速恢复连接。如果没有备份路径，恢复时间取决于 BGP 重新融合，其中包括网络中的撤回和播发消息，然后才能获知新的最佳路径。 </p></li> <li class="li"><p class="p">负载平衡 — 如果 AS 中的路由满足某些限制，则可利用多条路径到达同一目标，从而实现流量负载平衡。</p></li> <li class="li"><p class="p">维护 — 备用出口点的可用性允许路由器的正常维护操作。</p></li></ul> <p class="p">以下限制适用于在 BGP 中播发多个路由：</p> <ul class="ul"><li class="li"><p class="p">支持的地址族：</p> <ul class="ul"><li class="li"><p class="p">IPv4 单播 （<code class="ph codeph">family inet unicast</code>）</p></li> <li class="li"><p class="p">IPv6 单播 （<code class="ph codeph">family inet6 unicast</code>）</p></li> <li class="li"><p class="p">标记为单播 （<code class="ph codeph">family inet labeled-unicast</code>） 的 IPv4</p></li> <li class="li"><p class="p">标记为单播 （<code class="ph codeph">family inet6 labeled-unicast</code>） 的 IPv6</p></li> <li class="li"><p class="p">IPv4 VPN 单播 （<code class="ph codeph">family inet-vpn unicast</code>）</p></li> <li class="li"><p class="p">IPv6 VPN 单播 （<code class="ph codeph">family inet6-vpn unicast</code>）</p></li></ul> <p class="p">以下示例显示了 IPv4 VPN 单播和 IPv6 VPN 单播系列的配置：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>bgp {
    group <var class="keyword varname">&lt;group-name&gt;</var> {
        family inet-vpn unicast {
            add-path {
                send {
                    include-backup-path <var class="keyword varname">include-backup-path</var>;
                    multipath;
                    path-count <var class="keyword varname">path-count</var>;             
                    path-selection-mode {
                        (all-paths | equal-cost-paths);
                    }
                    prefix-policy [ <var class="keyword varname">policy-names</var> ... ];
                }
            receive;
        }
        family inet6-vpn unicast {
            add-path {
                send {
                    include-backup-path <var class="keyword varname">include-backup-path</var>;
                    multipath;
                    path-count <var class="keyword varname">path-count</var>;             
                    path-selection-mode {
                        (all-paths | equal-cost-paths);
                    }
                    prefix-policy [ <var class="keyword varname">policy-names</var> ... ];
                }
            receive;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">我们支持 <code class="ph codeph">add-path</code> 内部 BGP （IBGP） 和外部 BGP （EBGP） 对等方。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <ul class="ul"><li class="li"><p class="p">我们支持 IBGP 和 EBGP 对等方的添加路径 <strong class="ph b">接收</strong> 。 </p></li> <li class="li"><p class="p">我们仅支持<strong class="ph b">对</strong> IBGP 对等方的添加路径<strong class="ph b">发送</strong>。</p></li> <li class="li"><p class="p">我们不支持 EBGP 对等方的添加路径 <strong class="ph b">发送</strong> 。当您尝试为 EBGP 对等方提交添加路径 <strong class="ph b">发送</strong> 的配置时，CLI 会引发提交错误。</p></li></ul></div></div></div></li> <li class="li"><p class="p">仅限主实例。不支持路由实例。</p></li> <li class="li"><p class="p">支持平稳重启和不间断活动路由 （NSR）。 </p></li> <li class="li"><p class="p">不支持 BGP 监控协议 （BMP）。</p></li> <li class="li"><p class="p">前缀策略允许您过滤配置为向目标播发多个路径的路由器上的路由。前缀策略只能匹配前缀。它们无法匹配路由属性，也无法更改路由的属性。 </p></li></ul> <p class="p">从 Junos OS 18.4R1 版开始，除了多个 ECMP 路径外，BGP 最多可以通告 2 个添加路径路由 。 </p> <p class="p">若要播发所有添加路径（最多 64 个添加路径）或仅播发等价路径，请在层次结构级别包含<code class="ph codeph">path-selection-mode</code><code class="ph codeph">[edit protocols bgp group                     <var class="keyword varname">group-name</var> family <var class="keyword varname">name</var> addpath                 send]</code>。您不能同时启用两者<code class="ph codeph">multipath</code><code class="ph codeph">path-selection-mode</code>。</p></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-overview.html#id-10119586" class="link">了解 BGP 路径选择</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title27" xml:lang="zh-CN" lang="zh-CN" id="id-example-advertising-multiple-paths-in-bgp" class="topic concept nested1"><h2 id="ariaid-title27" class="title topictitle2">示例：在 BGP 中通告多条路径<a class="bookmarktitle" aria-label="Copy link to this section: 示例：在 BGP 中通告多条路径" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">在此示例中，BGP 路由器配置为播发多个路径，而不是仅播发活动路径。RFC 7911， <cite class="cite">BGP 中的多路径播发</cite>中指定了 BGP 中的多条路径播发。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e37" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e57" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title28" id="d33e37" class="topic concept nested2"><h3 id="ariaid-title28" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">八个支持 BGP 的设备。</p></li> <li class="li"><p class="p">启用 BGP 的设备中有五台不一定需要是路由器。例如，它们可以是 EX 系列以太网交换机。</p></li> <li class="li"><p class="p">其中三个支持 BGP 的设备配置为发送多个路径或接收多个路径（或同时发送和接收多个路径）。这三台支持 BGP 的设备必须是 M 系列多服务边缘路由器、MX 系列 5G 通用路由平台或 T 系列核心路由器。</p></li> <li class="li"><p class="p">这三台路由器必须运行 Junos OS 11.4 或更高版本。</p></li></ul></div></div> <div aria-labelledby="ariaid-title29" id="d33e57" class="topic concept nested2"><h3 id="ariaid-title29" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">以下语句用于配置到目标的多个路径：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group <var class="keyword varname">group-name</var> family <var class="keyword varname">family</var>]
<a class="xref No-Link-55390" href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/add-path-edit-protocols-bgp.html" target="_blank">add-path</a> {
    receive;
    <a class="xref No-Link-55389" href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/send-edit-protocols-bgp.html" target="_blank">send</a> {
        include-backup-path <var class="keyword varname">include-backup-path</var>;
        multipath;
        path-count <var class="keyword varname">path-count</var>;             
        path-selection-mode {
            (all-paths | equal-cost-paths);
        }
        prefix-policy [ <var class="keyword varname">policy-names</var> ... ];
    }
}
</pre></div> <!----></div><p class="p">在此示例中，路由器 R5、路由器 R6 和路由器 R7 将静态路由重新分发到 BGP 中。路由器 R1 和路由器 R4 是路由反射器。路由器 R2 和路由器 R3 是路由反射器 R1 的客户端。路由器 R8 是路由反射器 R4 的客户端。 </p> <p class="p">在 BGP 中启用多路径通告时，路由反射是可选的。</p> <p class="p">通过此 <code class="ph codeph">add-path send path-count 6</code> 配置，路由器 R1 配置为向路由器 R4 发送最多 6 条路径（每个目标）。 </p> <p class="p">通过此 <code class="ph codeph">add-path receive</code> 配置，路由器 R4 配置为从路由器 R1 接收多条路径。 </p> <p class="p">通过此 <code class="ph codeph">add-path send path-count 6</code> 配置，路由器 R4 配置为向路由器 R8 发送最多 6 条路径。 </p> <p class="p">通过此 <code class="ph codeph">add-path receive</code> 配置，路由器 R8 配置为从路由器 R4 接收多条路径。</p> <p class="p">策略配置（以及相应的路由过滤器）将 <code class="ph codeph">add-path send prefix-policy allow_199</code> 路由器 R4 限制为仅发送 172.16.199.1/32 路由的多个路径。</p> <div id="d33e57__d77004e3992" class="section"><h4 class="title sectiontitle">拓扑图</h4><p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e57__d33e122" class="xref">图 6</a> 显示了此示例中使用的拓扑。</p> <div id="d33e57__d33e122" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 6： </span>BGP 中多路径通告</span><span><div class="imgwrap"><img data-width="2100px" data-height="1085px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g040706.png" alt="BGP 中多路径通告" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div></div> <div aria-labelledby="ariaid-title30" id="d33e126" class="topic concept nested2"><h3 id="ariaid-title30" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4006" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4391" class="xref">配置路由器 R1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4545" class="xref">配置路由器 R2</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4659" class="xref">配置路由器 R3</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4771" class="xref">配置路由器 R4</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4940" class="xref">配置路由器 R5</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5055" class="xref">配置路由器 R6</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5167" class="xref">配置路由器 R7</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5276" class="xref">配置路由器 R8</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5339" class="xref">结果</a></li></ul> <div id="d33e126__d77004e4006" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，然后将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中。</p> <p class="p"><strong class="ph b">路由器 R1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces fe-0/0/0 unit 12 family inet address 10.0.12.1/24</kbd>
<kbd class="ph userinput">set interfaces fe-0/0/1 unit 13 family inet address 10.0.13.1/24</kbd>
<kbd class="ph userinput">set interfaces fe-1/0/0 unit 14 family inet address 10.0.14.1/24</kbd>
<kbd class="ph userinput">set interfaces fe-1/2/0 unit 15 family inet address 10.0.15.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 10 family inet address 10.0.0.10/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr cluster 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.20</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.30</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.2 local-address 10.0.15.1</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.2 peer-as 2</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr local-address 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr neighbor 10.0.0.40 family inet unicast add-path send path-count 6</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.10 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-0/0/0.12</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-0/0/1.13</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/0/0.14</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/0.15</kbd>
<kbd class="ph userinput">set routing-options router-id 10.0.0.10</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 21 family inet address 10.0.12.2/24</kbd>
<kbd class="ph userinput">set interfaces fe-1/2/1 unit 26 family inet address 10.0.26.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 20 family inet address 10.0.0.20/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.20</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.2 peer-as 2</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.20 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/0.21</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/1.28</kbd>
<kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/0/1 unit 31 family inet address 10.0.13.2/24</kbd>
<kbd class="ph userinput">set interfaces fe-1/0/2 unit 37 family inet address 10.0.37.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 30 family inet address 10.0.0.30/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.30</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.2 peer-as 2</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.30 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/0/1.31</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/0/2.37</kbd>
<kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R4</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 41 family inet address 10.0.14.2/24</kbd>
<kbd class="ph userinput">set interfaces fe-1/2/1 unit 48 family inet address 10.0.48.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 40 family inet address 10.0.0.40/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr family inet unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client local-address 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client cluster 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send path-count 6</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send prefix-policy allow_199 </kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/0.41</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.40 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/1.48</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow_199 from route-filter 172.16.199.1/32 exact </kbd>
<kbd class="ph userinput">set policy-options policy-statement allow_199 term match_199 from prefix-list match_199</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow_199 then add-path send-count 20</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow_199 then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R5</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 51 family inet address 10.0.15.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 50 family inet address 10.0.0.50/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.1 peer-as 1</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then as-path-expand 2</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 2</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.199.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.198.1/32 reject</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R6</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 62 family inet address 10.0.26.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 60 family inet address 10.0.0.60/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.1 peer-as 1</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 2</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.199.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.198.1/32 reject</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R7</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 73 family inet address 10.0.37.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 70 family inet address 10.0.0.70/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.1 peer-as 1</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 2</kbd>
<kbd class="ph userinput">set routing-options static route 172.16.199.1/32 reject</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R8</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces fe-1/2/0 unit 84 family inet address 10.0.48.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 80 family inet address 10.0.0.80/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.80</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.40 family inet unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.80 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fe-1/2/0.84</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <!----></div></div> <div id="d33e126__d77004e4391" class="section"><h4 class="title sectiontitle">配置路由器 R1</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4394" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4513" class="xref">结果</a></li></ul> <div id="d33e126__d77004e4394" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 R1：</p> <ol class="ol"><li class="li"><p class="p">配置路由器 R2、路由器 R3、路由器 R4 和路由器 R5 的接口，并配置环路 （lo0） 接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R1# <kbd class="ph userinput">set fe-0/0/0 unit 12 family inet address 10.0.12.1/24</kbd>
user@R1# <kbd class="ph userinput">set fe-0/0/1 unit 13 family inet address 10.0.13.1/24</kbd>
user@R1# <kbd class="ph userinput">set fe-1/0/0 unit 14 family inet address 10.0.14.1/24</kbd>
user@R1# <kbd class="ph userinput">set fe-1/2/0 unit 15 family inet address 10.0.15.1/24</kbd>
user@R1#<kbd class="ph userinput">set lo0 unit 10 family inet address 10.0.0.10/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 BGP，并配置 IBGP 路由反射。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@R1# <kbd class="ph userinput">set group rr type internal</kbd>
user@R1# <kbd class="ph userinput">set group rr local-address 10.0.0.10</kbd>
user@R1# <kbd class="ph userinput">set group rr cluster 10.0.0.10</kbd>
user@R1# <kbd class="ph userinput">set group rr neighbor 10.0.0.20</kbd>
user@R1# <kbd class="ph userinput">set group rr neighbor 10.0.0.30</kbd>
user@R1# <kbd class="ph userinput">set group rr_rr type internal</kbd>
user@R1# <kbd class="ph userinput">set group rr_rr local-address 10.0.0.10</kbd>
user@R1# <kbd class="ph userinput">set group e1 type external</kbd>
user@R1# <kbd class="ph userinput">set group e1 neighbor 10.0.15.2 local-address 10.0.15.1</kbd>
user@R1# <kbd class="ph userinput">set group e1 neighbor 10.0.15.2 peer-as 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将路由器 R1 配置为向其邻居路由器 R4 发送最多六条路径。 </p> <p class="p">路径的目标可以是路由器 R1 可以通过多个路径到达的任何目标。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@R1# <kbd class="ph userinput">set group rr_rr neighbor 10.0.0.40 family inet unicast add-path send path-count 6</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf]
user@R1# <kbd class="ph userinput">set area 0.0.0.0 interface lo0.10 passive</kbd>
user@R1# <kbd class="ph userinput">set area 0.0.0.0 interface fe-0/0/0.12</kbd>
user@R1# <kbd class="ph userinput">set area 0.0.0.0 interface fe-0/0/1.13</kbd>
user@R1# <kbd class="ph userinput">set area 0.0.0.0 interface fe-1/0/0.14</kbd>
user@R1# <kbd class="ph userinput">set area 0.0.0.0 interface fe-1/2/0.15</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由器 ID 和自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R1# <kbd class="ph userinput">set router-id 10.0.0.10</kbd>
user@R1# <kbd class="ph userinput">set autonomous-system 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e4513" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1# <kbd class="ph userinput">show interfaces</kbd>
fe-0/0/0 {
    unit 12 {
        family inet {
            address 10.0.12.1/24;
        }
    }
}
fe-0/0/1 {
    unit 13 {
        family inet {
            address 10.0.13.1/24;
        }
    }
}
fe-1/0/0 {
    unit 14 {
        family inet {
            address 10.0.14.1/24;
        }
    }
}
fe-1/2/0 {
    unit 15 {
        family inet {
            address 10.0.15.1/24;
        }
    }
}
lo0 {
    unit 10 {
        family inet {
            address 10.0.0.10/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R1# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.10;
        cluster 10.0.0.10;
        neighbor 10.0.0.20;
        neighbor 10.0.0.30;
    }
    group e1 {
        type external;
        neighbor 10.0.15.2 {
            local-address 10.0.15.1;
            peer-as 2;
        }
    }
    group rr_rr {
        type internal;
        local-address 10.0.0.10;
        neighbor 10.0.0.40 {
            family inet {
                unicast {
                    add-path {
                        send {
                            path-count 6;
                        }
                    }
                }
            }
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface lo0.10 {
            passive;
        }
        interface fe-0/0/0.12;
        interface fe-0/0/1.13;
        interface fe-1/0/0.14;
        interface fe-1/2/0.15;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1# <kbd class="ph userinput">show routing-options</kbd>
router-id 10.0.0.10;
 autonomous-system 1;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e4545" class="section"><h4 class="title sectiontitle">配置路由器 R2</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4548" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4622" class="xref">结果</a></li></ul> <div id="d33e126__d77004e4548" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R2：</p> <ol class="ol"><li class="li"><p class="p">配置环路 （lo0） 接口以及路由器 R6 和路由器 R1 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R2# <kbd class="ph userinput">set fe-1/2/0 unit 21 family inet address 10.0.12.2/24</kbd>
user@R2# <kbd class="ph userinput">set fe-1/2/1 unit 26 family inet address 10.0.26.1/24</kbd>
user@R2# <kbd class="ph userinput">set lo0 unit 20 family inet address 10.0.0.20/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在路由器 R2 的接口上配置 BGP 和 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R2# <kbd class="ph userinput">set bgp group rr type internal</kbd>
user@R2# <kbd class="ph userinput">set bgp group rr local-address 10.0.0.20</kbd>
user@R2# <kbd class="ph userinput">set bgp group e1 type external</kbd>
user@R2# <kbd class="ph userinput">set bgp group e1 neighbor 10.0.26.2 peer-as 2</kbd>
user@R2# <kbd class="ph userinput">set ospf area 0.0.0.0 interface lo0.20 passive</kbd>
user@R2# <kbd class="ph userinput">set ospf area 0.0.0.0 interface fe-1/2/0.21</kbd>
user@R2# <kbd class="ph userinput">set ospf area 0.0.0.0 interface fe-1/2/1.28</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">对于从路由器 R2 发送到路由器 R1 的路由，请将路由器 R2 播发为下一跃点，因为路由器 R1 在 10.0.26.0/24 网络上没有到路由器 R6 地址的路由。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R2# <kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
user@R2# <kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R2# <kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R2# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e4622" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show protocols</code>、 <code class="ph codeph">show policy-options</code>和 <code class="ph codeph">show routing-options</code> 命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R2# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 21 {
        family inet {
            address 10.0.12.2/24;
        }
    }
}
fe-1/2/1 {
    unit 26 {
        family inet {
            address 10.0.26.1/24;
        }
    }
}
lo0 {
    unit 20 {
        family inet {
            address 10.0.0.20/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R2# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.20;
        neighbor 10.0.0.10 {
            export set_nh_self;
        }
    }
    group e1 {
        type external;
        neighbor 10.0.26.2 {
            peer-as 2;
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface lo0.20 {
            passive;
        }
        interface fe-1/2/0.21;
        interface fe-1/2/1.28;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R2# <kbd class="ph userinput">show policy-options</kbd>
policy-statement set_nh_self {
    then {
        next-hop self;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R2# <kbd class="ph userinput">show routing-options</kbd>
 autonomous-system 1;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e4659" class="section"><h4 class="title sectiontitle">配置路由器 R3</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4662" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4736" class="xref">结果</a></li></ul> <div id="d33e126__d77004e4662" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R3：</p> <ol class="ol"><li class="li"><p class="p">配置环路 （lo0） 接口以及路由器 R7 和路由器 R1 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R3# <kbd class="ph userinput">set fe-1/0/1 unit 31 family inet address 10.0.13.2/24</kbd>
user@R3# <kbd class="ph userinput">set fe-1/0/2 unit 37 family inet address 10.0.37.1/24</kbd>
user@R3# <kbd class="ph userinput">set lo0 unit 30 family inet address 10.0.0.30/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在路由器 R3 的接口上配置 BGP 和 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R3# <kbd class="ph userinput">set bgp group rr type internal</kbd>
user@R3# <kbd class="ph userinput">set bgp group rr local-address 10.0.0.30</kbd>
user@R3# <kbd class="ph userinput">set bgp group e1 type external</kbd>
user@R3# <kbd class="ph userinput">set bgp group e1 neighbor 10.0.37.2 peer-as 2</kbd>
user@R3# <kbd class="ph userinput">set ospf area 0.0.0.0 interface lo0.30 passive</kbd>
user@R3# <kbd class="ph userinput">set ospf area 0.0.0.0 interface fe-1/0/1.31</kbd>
user@R3# <kbd class="ph userinput">set ospf area 0.0.0.0 interface fe-1/0/2.37</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">对于从路由器 R3 发送到路由器 R1 的路由，请将路由器 R3 播发为下一跃点，因为路由器 R1 在 10.0.37.0/24 网络上没有到路由器 R7 地址的路由。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R3# <kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
user@R3# <kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R3# <kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R3# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e4736" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R3# <kbd class="ph userinput">show interfaces</kbd>
fe-1/0/1 {
    unit 31 {
        family inet {
            address 10.0.13.2/24;
        }
    }
}
fe-1/0/2 {
    unit 37 {
        family inet {
            address 10.0.37.1/24;
        }
    }
}
lo0 {
    unit 30 {
        family inet {
            address 10.0.0.30/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R3# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.30;
        neighbor 10.0.0.10 {
            export set_nh_self;
        }
    }
    group e1 {
        type external;
        neighbor 10.0.37.2 {
            peer-as 2;
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface lo0.30 {
            passive;
        }
        interface fe-1/0/1.31;
        interface fe-1/0/2.37;
    }
}
user@R3# <kbd class="ph userinput">show policy-options</kbd>
policy-statement set_nh_self {
    then {
        next-hop self;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R3# <kbd class="ph userinput">show routing-options</kbd>
 autonomous-system 1;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e4771" class="section"><h4 class="title sectiontitle">配置路由器 R4</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4774" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4903" class="xref">结果</a></li></ul> <div id="d33e126__d77004e4774" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R4：</p> <ol class="ol"><li class="li"><p class="p">配置路由器 R1 和路由器 R8 的接口，并配置环路 （lo0） 接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R4# <kbd class="ph userinput">set fe-1/2/0 unit 41 family inet address 10.0.14.2/24</kbd>
user@R4# <kbd class="ph userinput">set fe-1/2/1 unit 48 family inet address 10.0.48.1/24</kbd>
user@R4# <kbd class="ph userinput">set lo0 unit 40 family inet address 10.0.0.40/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 BGP，并配置 IBGP 路由反射。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@R4# <kbd class="ph userinput">set group rr type internal</kbd>
user@R4# <kbd class="ph userinput">set group rr local-address 10.0.0.40</kbd>
user@R4# <kbd class="ph userinput">set group rr neighbor 10.0.0.10</kbd>
user@R4# <kbd class="ph userinput">set group rr_client type internal</kbd>
user@R4# <kbd class="ph userinput">set group rr_client local-address 10.0.0.40</kbd>
user@R4# <kbd class="ph userinput">set group rr_client cluster 10.0.0.40</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将路由器 R4 配置为向其邻居路由器 R8 发送最多 6 条路径。 </p> <p class="p">路径的目的地可以是路由器 R4 可以通过多个路径到达的任何目标。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@R4# <kbd class="ph userinput">set group rr_client neighbor 10.0.0.80 family inet unicast add-path send path-count 6</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将路由器 R4 配置为从其邻居路由器 R1 接收多条路径。 </p> <p class="p">路径的目标可以是路由器 R1 可以通过多个路径到达的任何目标。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group rr family inet unicast]
user@R4# <kbd class="ph userinput">set add-path receive</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf area 0.0.0.0]
user@R4# <kbd class="ph userinput">set interface fe-1/2/0.41</kbd>
user@R4# <kbd class="ph userinput">set interface lo0.40 passive</kbd>
user@R4# <kbd class="ph userinput">set interface fe-1/2/1.48</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置允许路由器 R4 将路由器 R8 多个路径发送到 172.16.199.1/32 路由的策略。</p> <ul class="ul"><li class="li"><p class="p">路由器 R4 接收 172.16.198.1/32 路由和 172.16.199.1/32 路由的多条路径。但是，由于此策略，路由器 R4 仅发送 172.16.199.1/32 路由的多个路径。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast]
user@R4# <kbd class="ph userinput">set add-path send prefix-policy allow_199 </kbd>
[edit policy-options policy-statement allow_199]
user@R4# <kbd class="ph userinput">set from route-filter 172.16.199.1/32 exact </kbd>
user@R4# <kbd class="ph userinput">set then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">路由器 R4 还可以配置为为<em class="ph i">添加路径播发前缀</em>的子集发送多达 20 个 BGP <code class="ph codeph">add-path</code> 路由。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options policy-statement allow_199]
user@R4# <kbd class="ph userinput">set term match_199 from prefix-list match_199</kbd>
user@R4# <kbd class="ph userinput">set then add-path send-count 20</kbd>
</pre></div> <!----></div></li></ul></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R4# <kbd class="ph userinput">set autonomous-system 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e4903" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R4# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 41 {
        family inet {
            address 10.0.14.2/24;
        }
    }
}
fe-1/2/1 {
    unit 48 {
        family inet {
            address 10.0.48.1/24;
        }
    }
}
lo0 {
    unit 40 {
        family inet {
            address 10.0.0.40/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R4# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.40;
        family inet {
            unicast {
                add-path {
                    receive;
                }
            }
        }
        neighbor 10.0.0.10;
    }
    group rr_client {
        type internal;
        local-address 10.0.0.40;
        cluster 10.0.0.40;
        neighbor 10.0.0.80 {
            family inet {
                unicast {
                    add-path {
                        send {
                            path-count 6;
                            prefix-policy allow_199;
                        }
                    }
                }
            }
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface lo0.40 {
            passive;
        }
        interface fe-1/2/0.41;
        interface fe-1/2/1.48;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4# <kbd class="ph userinput">show policy-options</kbd>
policy-statement allow_199 {
    from {
        route-filter 172.16.199.1/32 exact;
    }
    from term match_199 {
        prefix-list match_199;
    }
        then add-path send-count 20;
    then accept;
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4# <kbd class="ph userinput">show routing-options</kbd>
 autonomous-system 1;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e4940" class="section"><h4 class="title sectiontitle">配置路由器 R5</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e4943" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5018" class="xref">结果</a></li></ul> <div id="d33e126__d77004e4943" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R5：</p> <ol class="ol"><li class="li"><p class="p">配置环路 （lo0） 接口和路由器 R1 接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R5# <kbd class="ph userinput">set fe-1/2/0 unit 51 family inet address 10.0.15.2/24</kbd>
user@R5# <kbd class="ph userinput">set lo0 unit 50 family inet address 10.0.0.50/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在路由器 R5 的接口上配置 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group e1]
user@R5# <kbd class="ph userinput">set type external</kbd>
user@R5# <kbd class="ph userinput">set neighbor 10.0.15.1 peer-as 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">创建静态路由以重新分发到 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R5# <kbd class="ph userinput">set static route 172.16.199.1/32 reject</kbd>
user@R5# <kbd class="ph userinput">set static route 172.16.198.1/32 reject</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将静态和直接路由重新分发到 BGP 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group e1 neighbor 10.0.15.1]
user@R5# <kbd class="ph userinput">set export s2b</kbd>
[edit policy-options policy-statement s2b]
user@R5# <kbd class="ph userinput">set from protocol static</kbd>
user@R5# <kbd class="ph userinput">set from protocol direct</kbd>
user@R5# <kbd class="ph userinput">set then as-path-expand 2</kbd>
user@R5# <kbd class="ph userinput">set then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R5# <kbd class="ph userinput">set autonomous-system 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R5# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e5018" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R5# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 51 {
        
        family inet {
            address 10.0.15.2/24;
        }
    }
}
lo0 {
    unit 50 {
        family inet {
            address 10.0.0.50/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R5# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group e1 {
        type external;
        neighbor 10.0.15.1 {
            export s2b;
            peer-as 1;
        }
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R5# <kbd class="ph userinput">show policy-options</kbd>
policy-statement s2b {
    from protocol [ static direct ];
    then {
        as-path-expand 2;
        accept;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R5# <kbd class="ph userinput">show routing-options</kbd>
static {
    route 172.16.198.1/32 reject;
    route 172.16.199.1/32 reject;
}
 autonomous-system 2;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e5055" class="section"><h4 class="title sectiontitle">配置路由器 R6</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5058" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5130" class="xref">结果</a></li></ul> <div id="d33e126__d77004e5058" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R6：</p> <ol class="ol"><li class="li"><p class="p">配置环路 （lo0） 接口和路由器 R2 接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R6# <kbd class="ph userinput">set fe-1/2/0 unit 62 family inet address 10.0.26.2/24</kbd>
user@R6# <kbd class="ph userinput">set lo0 unit 60 family inet address 10.0.0.60/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在路由器 R6 的接口上配置 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R6# <kbd class="ph userinput">set bgp group e1 type external</kbd>
user@R6# <kbd class="ph userinput">set bgp group e1 neighbor 10.0.26.1 peer-as 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">创建静态路由以重新分发到 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R6# <kbd class="ph userinput">set routing-options static route 172.16.199.1/32 reject</kbd>
user@R6# <kbd class="ph userinput">set routing-options static route 172.16.198.1/32 reject</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将来自路由器 R6 路由表的静态和直接路由重新分配到 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group e1 neighbor 10.0.26.1]
user@R6# <kbd class="ph userinput">set export s2b</kbd>
[edit policy-options policy-statement s2b]
user@R6# <kbd class="ph userinput">set from protocol static</kbd>
user@R6# <kbd class="ph userinput">set from protocol direct</kbd>
user@R6# <kbd class="ph userinput">set then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R6# <kbd class="ph userinput">set autonomous-system 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R6# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e5130" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R6# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 62 {
        
        family inet {
            address 10.0.26.2/24;
        }
    }
}
lo0 {
    unit 60 {
        family inet {
            address 10.0.0.60/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R6# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group e1 {
        type external;
        neighbor 10.0.26.1 {
            export s2b;
            peer-as 1;
        }
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R6# <kbd class="ph userinput">show policy-options</kbd>
policy-statement s2b {
    from protocol [ static direct ];
    then accept;
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R6# <kbd class="ph userinput">show routing-options</kbd>
static {
    route 172.16.198.1/32 reject;
    route 172.16.199.1/32 reject;
}
 autonomous-system 2;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e5167" class="section"><h4 class="title sectiontitle">配置路由器 R7</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5170" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e126__d77004e5239" class="xref">结果</a></li></ul> <div id="d33e126__d77004e5170" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R7：</p> <ol class="ol"><li class="li"><p class="p">配置环路 （lo0） 接口和路由器 R3 接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R7# <kbd class="ph userinput">set fe-1/2/0 unit 73 family inet address 10.0.37.2/24</kbd>
user@R7# <kbd class="ph userinput">set lo0 unit 70 family inet address 10.0.0.70/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在路由器 R7 的接口上配置 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group e1]
user@R7# <kbd class="ph userinput">set type external</kbd>
user@R7# <kbd class="ph userinput">set neighbor 10.0.37.1 peer-as 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">创建静态路由以重新分发到 BGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R7# <kbd class="ph userinput">set routing-options static route 172.16.199.1/32 reject</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将来自路由器 R7 路由表的静态和直接路由重新分发到 BGP 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group e1 neighbor 10.0.37.1]
user@R7# <kbd class="ph userinput">set export s2b</kbd>
[edit policy-options policy-statement s2b]
user@R7# <kbd class="ph userinput">set from protocol static</kbd>
user@R7# <kbd class="ph userinput">set from protocol direct</kbd>
user@R7# <kbd class="ph userinput">set then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@R7# <kbd class="ph userinput">set autonomous-system 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R7# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d33e126__d77004e5239" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R7# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    unit 73 {
        
        family inet {
            address 10.0.37.2/24;
        }
    }
}
lo0 {
    unit 70 {
        family inet {
            address 10.0.0.70/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R7# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group e1 {
        type external;
        neighbor 10.0.37.1 {
            export s2b;
            peer-as 1;
        }
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R7# <kbd class="ph userinput">show policy-options</kbd>
policy-statement s2b {
    from protocol [ static direct ];
    then accept;
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R7# <kbd class="ph userinput">show routing-options</kbd>
static {
    route 172.16.199.1/32 reject;
}
 autonomous-system 2;
</pre></div> <!----></div></div></div> <div id="d33e126__d77004e5276" class="section"><h4 class="title sectiontitle">配置路由器 R8</h4><div id="d33e126__d77004e5279" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">要配置路由器 R8：</p> <ol class="ol"><li class="li"><p class="p">配置环路 （lo0） 接口和路由器 R4 接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@R8# <kbd class="ph userinput">set fe-1/2/0 unit 84 family inet address 10.0.48.2/24</kbd>
user@R8# <kbd class="ph userinput">set lo0 unit 80 family inet address 10.0.0.80/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在路由器 R8 的接口上配置 BGP 和 OSPF。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R8# <kbd class="ph userinput">set bgp group rr type internal</kbd>
user@R8# <kbd class="ph userinput">set bgp group rr local-address 10.0.0.80</kbd>
user@R8# <kbd class="ph userinput">set ospf area 0.0.0.0 interface lo0.80 passive</kbd>
user@R8# <kbd class="ph userinput">set ospf area 0.0.0.0 interface fe-1/2/0.84</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将路由器 R8 配置为从其邻居路由器 R4 接收多条路径。 </p> <p class="p">路径的目的地可以是路由器 R4 可以通过多个路径到达的任何目标。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@R8# <kbd class="ph userinput">set bgp group rr neighbor 10.0.0.40 family inet unicast add-path receive</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@R8# <kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R8# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d33e126__d77004e5339" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show protocols</code>、<code class="ph codeph">show policy-options</code> 和 <code class="ph codeph">show routing-options</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R8# <kbd class="ph userinput">show interfaces</kbd>
fe-1/2/0 {
    
    unit 84 {
        
        family inet {
            address 10.0.48.2/24;
        }
    }
}
lo0 {
    unit 80 {
        family inet {
            address 10.0.0.80/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R8# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.80;
        neighbor 10.0.0.40 {
            family inet {
                unicast {
                    add-path {
                        receive;
                    }
                }
            }
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface lo0.80 {
            passive;
        }
        interface fe-1/2/0.84;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R8# <kbd class="ph userinput">show routing-options</kbd>
 autonomous-system 1;
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title31" id="d33e1495" class="topic concept nested2"><h3 id="ariaid-title31" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d33e1501" class="xref">验证 BGP 对等方是否能够发送和接收多条路径</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d33e1544" class="xref">验证路由器 R1 是否正在播发多条路径</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d33e1565" class="xref">验证路由器 R4 是否正在接收并播发多条路径</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d33e1599" class="xref">验证路由器 R8 是否正在接收多个路径</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d33e1615" class="xref">检查路径 ID</a></li></ul> <div id="d33e1495__d33e1501" class="section"><h4 class="title sectiontitle">验证 BGP 对等方是否能够发送和接收多条路径</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5380" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5397" class="xref">操作</a></li></ul> <div id="d33e1495__d77004e5380" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">确保命令输出 <code class="ph codeph">show bgp neighbor</code> 中出现以下一个或两个字符串：</p> <ul class="ul"><li class="li"><p class="p"><code class="ph codeph">NLRI's for which peer can receive multiple paths: inet-unicast</code></p></li> <li class="li"><p class="p"><code class="ph codeph">NLRI's for which peer can send multiple paths: inet-unicast</code></p></li></ul></div><div id="d33e1495__d77004e5397" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show bgp neighbor 10.0.0.40</kbd>
Peer: 10.0.0.40+179 AS 1       Local: 10.0.0.10+64227 AS 1    
  Type: Internal    State: Established    Flags: &lt;Sync&gt;
...  NLRI's for which peer can receive multiple paths: inet-unicast
...</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4&gt; <kbd class="ph userinput">show bgp neighbor 10.0.0.10</kbd>
Peer: 10.0.0.10+64227 AS 1     Local: 10.0.0.40+179 AS 1    
  Type: Internal    State: Established    Flags: &lt;Sync&gt;
...
  NLRI's for which peer can send multiple paths: inet-unicast
...</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4&gt; <kbd class="ph userinput">show bgp neighbor 10.0.0.80</kbd>
Peer: 10.0.0.80+55416 AS 1     Local: 10.0.0.40+179 AS 1    
  Type: Internal    State: Established  (route reflector client)Flags: &lt;Sync&gt;
  ,,,
  NLRI's for which peer can receive multiple paths: inet-unicast
  ...
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R8&gt; <kbd class="ph userinput">show bgp neighbor 10.0.0.40</kbd>
Peer: 10.0.0.40+179 AS 1       Local: 10.0.0.80+55416 AS 1    
  Type: Internal    State: Established    Flags: &lt;Sync&gt;
  ...
  NLRI's for which peer can send multiple paths: inet-unicast
  ...</pre></div> <!----></div></div></div> <div id="d33e1495__d33e1544" class="section"><h4 class="title sectiontitle">验证路由器 R1 是否正在播发多条路径</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5423" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5428" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5436" class="xref">意义</a></li></ul> <div id="d33e1495__d77004e5423" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">确保将到 172.16.198.1/32 目标的多条路径和到 172.16.199.1/32 目标的多条路径播发到路由器 R4。 </p></div><div id="d33e1495__d77004e5428" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R1&gt; <kbd class="ph userinput">show route advertising-protocol bgp 10.0.0.40</kbd>
inet.0: 21 destinations, 25 routes (21 active, 0 holddown, 0 hidden)
  Prefix                  Nexthop              MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 172.16.198.1/32            10.0.0.20                    100        2 I
                          10.0.15.2                    100        2 2 I
* 172.16.199.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
                          10.0.15.2                    100        2 2 I
* 172.16.200.0/30            10.0.0.20                    100        2 I

</pre></div> <!----></div></div><div id="d33e1495__d77004e5436" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">当您看到一个前缀和多个下一跃点时，表示有多个路径播发到路由器 R4。</p></div></div> <div id="d33e1495__d33e1565" class="section"><h4 class="title sectiontitle">验证路由器 R4 是否正在接收并播发多条路径</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5444" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5449" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5462" class="xref">意义</a></li></ul> <div id="d33e1495__d77004e5444" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">确保从路由器 R1 接收到 172.16.199.1/32 目标的多条路径，并将其播发到路由器 R8。确保从路由器 R1 接收到 172.16.198.1/32 目标的多条路径，但只有一条指向此目标的路径播发到路由器 R8。</p></div><div id="d33e1495__d77004e5449" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4&gt; <kbd class="ph userinput">show route receive-protocol bgp 10.0.0.10</kbd>
inet.0: 19 destinations, 22 routes (19 active, 0 holddown, 0 hidden)
  Prefix                  Nexthop              MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 172.16.198.1/32            10.0.0.20                    100        2 I
                          10.0.15.2                    100        2 2 I
* 172.16.199.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
                          10.0.15.2                    100        2 2 I
* 172.16.200.0/30            10.0.0.20                    100        2 I

</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R4&gt; <kbd class="ph userinput">show route advertising-protocol bgp 10.0.0.80</kbd>
inet.0: 19 destinations, 22 routes (19 active, 0 holddown, 0 hidden)
  Prefix                  Nexthop              MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 172.16.198.1/32            10.0.0.20                    100        2 I
* 172.16.199.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
                          10.0.15.2                    100        2 2 I
* 172.16.200.0/30            10.0.0.20                    100        2 I

</pre></div> <!----></div></div><div id="d33e1495__d77004e5462" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">该 <code class="ph codeph">show route receive-protocol</code> 命令显示路由器 R4 接收到 172.16.198.1/32 目标的两条路径和到 172.16.199.1/32 目标的三条路径。该 <code class="ph codeph">show route advertising-protocol</code> 命令显示路由器 R4 仅播发一条路径到 172.16.198.1/32 目标，并将所有三条路径播发到 172.16.199.1/32 目标。</p> <p class="p">由于应用于路由器 R4 的前缀策略，路由器 R4 不会播发到 172.16.198.1/32 目标的多个路径。路由器 R4 仅播发到 172.16.198.1/32 目标的一条路径，即使它收到到此目标的多条路径也是如此。</p></div></div> <div id="d33e1495__d33e1599" class="section"><h4 class="title sectiontitle">验证路由器 R8 是否正在接收多个路径</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5478" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5483" class="xref">操作</a></li></ul> <div id="d33e1495__d77004e5478" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">确保路由器 R8 通过路由器 R4 接收到 172.16.199.1/32 目标的多条路径。确保路由器 R8 仅通过路由器 R4 接收到 172.16.198.1/32 目标的一条路径。</p></div><div id="d33e1495__d77004e5483" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R8&gt; <kbd class="ph userinput">show route receive-protocol bgp 10.0.0.40</kbd>
inet.0: 18 destinations, 20 routes (18 active, 0 holddown, 0 hidden)
  Prefix                  Nexthop              MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 172.16.198.1/32            10.0.0.20                    100        2 I
* 172.16.199.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
                          10.0.15.2                    100        2 2 I
* 200.1.1.0/30            10.0.0.20                    100        2 I
</pre></div> <!----></div></div></div> <div id="d33e1495__d33e1615" class="section"><h4 class="title sectiontitle">检查路径 ID</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5494" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d33e1495__d77004e5502" class="xref">操作</a></li></ul> <div id="d33e1495__d77004e5494" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">在下游设备路由器 R4 和路由器 R8 上，验证路径 ID 是否唯一标识路径。查找 <code class="ph codeph">Addpath Path ID:</code> 字符串。</p></div><div id="d33e1495__d77004e5502" class="subsection"><h5 class="sectiontitle">操作</h5><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R4&gt; <kbd class="ph userinput">show route 172.16.199.1/32 detail</kbd>

inet.0: 18 destinations, 20 routes (18 active, 0 holddown, 0 hidden)
172.16.199.1/32 (3 entries, 3 announced)
        *BGP    Preference: 170/-101
                Next hop type: Indirect
                Next-hop reference count: 9
                Source: 10.0.0.10
                Next hop type: Router, Next hop index: 676
                Next hop: 10.0.14.1 via lt-1/2/0.41, selected
                Protocol next hop: 10.0.0.20
                Indirect next hop: 92041c8 262146
                State: &lt;Active Int Ext&gt;
                Local AS:     1 Peer AS:     1
                Age: 1:44:37    Metric2: 2 
                Task: BGP_1.10.0.0.10+64227
                Announcement bits (3): 2-KRT 3-BGP RT Background 4-Resolve tree 1 
                AS path: 2 I (Originator) Cluster list:  10.0.0.10
                AS path:  Originator ID: 10.0.0.20
                Accepted
                Localpref: 100
                Router ID: 10.0.0.10
                Addpath Path ID: 1
         BGP    Preference: 170/-101
                Next hop type: Indirect
                Next-hop reference count: 4
                Source: 10.0.0.10
                Next hop type: Router, Next hop index: 676
                Next hop: 10.0.14.1 via lt-1/2/0.41, selected
                Protocol next hop: 10.0.0.30
                Indirect next hop: 92042ac 262151
                State: &lt;NotBest Int Ext&gt;
                Inactive reason: Not Best in its group - Router ID
                Local AS:     1 Peer AS:     1
                Age: 1:44:37    Metric2: 2 
                Task: BGP_1.10.0.0.10+64227
                Announcement bits (1): 3-BGP RT Background 
                AS path: 2 I (Originator) Cluster list:  10.0.0.10
                AS path:  Originator ID: 10.0.0.30
                Accepted
                Localpref: 100
                Router ID: 10.0.0.10
                Addpath Path ID: 2
         BGP    Preference: 170/-101
                Next hop type: Indirect
                Next-hop reference count: 4
                Source: 10.0.0.10
                Next hop type: Router, Next hop index: 676
                Next hop: 10.0.14.1 via lt-1/2/0.41, selected
                Protocol next hop: 10.0.15.2
                Indirect next hop: 92040e4 262150
                State: &lt;Int Ext&gt;
                Inactive reason: AS path
                Local AS:     1 Peer AS:     1
                Age: 1:44:37    Metric2: 2 
                Task: BGP_1.10.0.0.10+64227
                Announcement bits (1): 3-BGP RT Background 
                AS path: 2 2 I
                Accepted
                Localpref: 100
                Router ID: 10.0.0.10
                Addpath Path ID: 3</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@R8&gt; <kbd class="ph userinput">show route 172.16.199.1/32 detail</kbd>

inet.0: 17 destinations, 19 routes (17 active, 0 holddown, 0 hidden)
172.16.199.1/32 (3 entries, 1 announced)
        *BGP    Preference: 170/-101
                Next hop type: Indirect
                Next-hop reference count: 9
                Source: 10.0.0.40
                Next hop type: Router, Next hop index: 1045
                Next hop: 10.0.48.1 via lt-1/2/0.84, selected
                Protocol next hop: 10.0.0.20
                Indirect next hop: 91fc0e4 262148
                State: &lt;Active Int Ext&gt;
                Local AS:     1 Peer AS:     1
                Age: 1:56:51    Metric2: 3 
                Task: BGP_1.10.0.0.40+179
                Announcement bits (2): 2-KRT 4-Resolve tree 1 
                AS path: 2 I (Originator) Cluster list:  10.0.0.40 10.0.0.10
                AS path:  Originator ID: 10.0.0.20
                Accepted
                Localpref: 100
                Router ID: 10.0.0.40
                Addpath Path ID: 1
         BGP    Preference: 170/-101
                Next hop type: Indirect
                Next-hop reference count: 4
                Source: 10.0.0.40
                Next hop type: Router, Next hop index: 1045
                Next hop: 10.0.48.1 via lt-1/2/0.84, selected
                Protocol next hop: 10.0.0.30
                Indirect next hop: 91fc1c8 262152
                State: &lt;NotBest Int Ext&gt;
                Inactive reason: Not Best in its group - Router ID
                Local AS:     1 Peer AS:     1
                Age: 1:56:51    Metric2: 3 
                Task: BGP_1.10.0.0.40+179
                AS path: 2 I (Originator) Cluster list:  10.0.0.40 10.0.0.10
                AS path:  Originator ID: 10.0.0.30
                Accepted
                Localpref: 100
                Router ID: 10.0.0.40
                Addpath Path ID: 2
         BGP    Preference: 170/-101
                Next hop type: Indirect
                Next-hop reference count: 4
                Source: 10.0.0.40
                Next hop type: Router, Next hop index: 1045
                Next hop: 10.0.48.1 via lt-1/2/0.84, selected
                Protocol next hop: 10.0.15.2
                Indirect next hop: 91fc2ac 262153
                State: &lt;Int Ext&gt;
                Inactive reason: AS path
                Local AS:     1 Peer AS:     1
                Age: 1:56:51    Metric2: 3 
                Task: BGP_1.10.0.0.40+179
                AS path: 2 2 I (Originator) Cluster list:  10.0.0.40
                AS path:  Originator ID: 10.0.0.10
                Accepted
                Localpref: 100
                Router ID: 10.0.0.40
                Addpath Path ID: 3</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/en_US/junos/topics/topic-map/load-balancing-bgp-session.html" target="_blank" class="link No-Link-143109">了解 BGP 中指向单个目标的多个路径的播发</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/routing-policy/topics/concept/policy-adding-as-numbers-to-bgp-as-paths.html" class="link">了解如何将 AS 编号添加到 BGP AS 路径</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title32" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-selective-advertising-of-bgp-multiple-paths-for-load-balancing" class="topic concept nested1"><h2 id="ariaid-title32" class="title topictitle2">示例：配置 BGP 多路径的选择性通告以实现负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 示例：配置 BGP 多路径的选择性通告以实现负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何配置 BGP 多路径的选择性播发。播发所有可用的多路径可能会导致设备内存上的大量处理开销，这也是一个扩展注意事项。可以将 BGP 路由反射器配置为仅播发参与者多路径以实现负载平衡。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e27" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e43" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e68" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title33" id="d34e27" class="topic concept nested2"><h3 id="ariaid-title33" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">配置此示例之前，不需要除设备初始化之外的特殊配置。</p> <p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">八款路由器，可组合使用 M 系列、MX 系列或 T 系列路由器</p></li> <li class="li"><p class="p">设备上的 Junos OS 16.1R2 或更高版本</p></li></ul></div></div> <div aria-labelledby="ariaid-title34" id="d34e43" class="topic concept nested2"><h3 id="ariaid-title34" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">从 Junos OS 16.1R2 版开始，您可以将 BGP 限制为 <code class="ph codeph">add-path</code> 仅向参与者通告多个路径。您最多可以限制和配置 BGP <code class="ph codeph">multipath</code> 算法选择的六个前缀。多路径的选择性广告有利于互联网服务提供商和数据中心使用路由反射器在 IBGP 中构建路径内多样性。您可以启用 BGP 路由反射器来通告作为负载均衡参与者路径的多路径。</p> <div id="d34e43__d77004e5567" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p">在 中 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e43__d34e64" class="xref">图 7</a>，RR1 和 RR4 是路由反射器。路由器 R2 和 R3 是路由反射器 RR1 的客户端。路由器 R8 是路由反射器 RR4 的客户端。具有邻居 R2 和 R3 的 RR1 组配置为多路径。路由器 R5、R6 和路由器 R7 将静态路由 199.1.1.1/32 和 198.1.1.1/32 重新分发到 BGP 中。</p> <p class="p"> 在路由器 RR1 上配置负载均衡策略，以便计算 199.1.1.1/32 路由的多路径。多路径功能在邻居 RR4 的添加路径下配置。但是，路由器 RR4 未配置负载平衡多路径。路由器 RR1 配置为向路由器 RR4 发送最多 6 个从多路径候选路由中选择的 199.1.1.1/32 添加路径路由。</p> <div id="d34e43__d34e64" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 7： </span>示例：配置 BGP 多路径的选择性通告以实现负载平衡</span><span><div class="imgwrap"><img data-width="2100px" data-height="1272px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043560.png" alt="示例：配置 BGP 多路径的选择性通告以实现负载平衡" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div></div> <div aria-labelledby="ariaid-title35" id="d34e68" class="topic concept nested2"><h3 id="ariaid-title35" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e68__d77004e5584" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e68__d77004e6049" class="xref">配置路由器 RR1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e68__d77004e6227" class="xref">结果</a></li></ul> <div id="d34e68__d77004e5584" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中，然后从配置模式进入提交。</p> <p class="p"><strong class="ph b">路由器 RR1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description RR1-&gt;R2 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.12.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description RR1-&gt;RR4 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.14.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/12 unit 0 description RR1-&gt;R5 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/12 unit 0 family inet address 10.0.15.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/13 unit 0 description RR1-&gt;R3 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/13 unit 0 family inet address 10.0.13.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.10/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr cluster 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr multipath</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.20</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.30</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.2 local-address 10.0.15.1</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.2 peer-as 64502</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr local-address 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr neighbor 10.0.0.40 family inet unicast add-path send path-count 6</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr neighbor 10.0.0.40 family inet unicast add-path send multipath</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.10 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/13</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/11</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/12</kbd>
<kbd class="ph userinput">set policy-options prefix-list match_199 199.1.1.1/32</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal_199 term match_100 from prefix-list match_199</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal_199 from route-filter 199.1.1.1/32 exact</kbd>
<kbd class="ph userinput">set policy-options policy-statement loadbal_199 then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options router-id 10.0.0.10</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export loadbal_199</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R2-&gt;RR1  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.12.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description R2-&gt;R6  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.26.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.20/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.20</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.2 peer-as 64502</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.20 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/11</kbd>
<kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R3-&gt;RR1   </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.13.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description R3-&gt;R7  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.37.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.30/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.30</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.2 peer-as 64502</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.30 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/13</kbd>
<kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 RR4</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description RR4-&gt;RR1  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.14.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description RR4-&gt;R8  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.48.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.40/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr family inet unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client local-address 10.0.0.40 </kbd>
<kbd class="ph userinput">set protocols bgp group rr_client cluster 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send prefix-policy addpath-communities-send-4713-100</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send path-count 2</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send multipath</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.40 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/11</kbd>
<kbd class="ph userinput">set policy-options prefix-list match_199 199.1.1.1/32</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R5</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R5-&gt;RR1   </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.15.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.50/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.1 peer-as 64501</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then community add addpath-community</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then as-path-expand 2</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set policy-options community addpath-community members 4713:100</kbd>
<kbd class="ph userinput">set routing-options static route 199.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 198.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64502</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R6</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R6-&gt;R2  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.26.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.60/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.1 peer-as 64501</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct </kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then community add addpath-community</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set policy-options community addpath-community members 4713:100</kbd>
<kbd class="ph userinput">set routing-options static route 199.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 198.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64502</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R7</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R7-&gt;R3  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.37.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.70/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.1 peer-as 64501</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then community add addpath-community</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set policy-options community addpath-community members 4713:100</kbd>
<kbd class="ph userinput">set routing-options static route 199.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64502</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R8</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R8-&gt;RR4 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.48.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.80/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.80</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.40 family inet unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10.8</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
<kbd class="ph userinput">set chassis fpc 1 pic 0 tunnel-services bandwidth 1g</kbd>
</pre></div> <!----></div></div> <div id="d34e68__d77004e6049" class="section"><h4 class="title sectiontitle">配置路由器 RR1</h4><div id="d34e68__d77004e6052" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 RR1：</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">修改相应的接口名称、地址和其他参数后，对其他路由器重复此过程。</p></div></div></div><ol class="ol"><li class="li"><p class="p">使用 IPv4 地址配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR1# <kbd class="ph userinput">set ge-1/0/10 unit 0 description RR1-&gt;R2 </kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/10 unit 0 family inet address 10.0.12.1/24</kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/11 unit 0 description RR1-&gt;RR4 </kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/11 unit 0 family inet address 10.0.14.1/24</kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/12 unit 0 description RR1-&gt;R5 </kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/12 unit 0 family inet address 10.0.15.1/24</kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/13 unit 0 description RR1-&gt;R3 </kbd>
user@RR1# <kbd class="ph userinput">set ge-1/0/13 unit 0 family inet address 10.0.13.1/24</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR1# <kbd class="ph userinput">set lo0 unit 0 family inet address 10.0.0.10/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置内部网关协议 （IGP），例如 OSPF 或 IS-IS。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1# <kbd class="ph userinput">set ospf area 0.0.0.0 interface lo0.10 passive</kbd>
user@RR1# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-1/0/10</kbd>
user@RR1# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-1/0/13</kbd>
user@RR1# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-1/0/11</kbd>
user@RR1# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-1/0/12</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为连接到内部路由器 R2 和 R3 的接口配置内部组 rr。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1# <kbd class="ph userinput">set bgp group rr type internal</kbd>
user@RR1# <kbd class="ph userinput">set bgp group rr local-address 10.0.0.10</kbd>
user@RR1# <kbd class="ph userinput">set bgp group rr cluster 10.0.0.10</kbd>
user@RR1# <kbd class="ph userinput">set bgp group rr neighbor 10.0.0.20</kbd>
user@RR1# <kbd class="ph userinput">set bgp group rr neighbor 10.0.0.30</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为内部 BGP 组 rr 配置负载平衡。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1# <kbd class="ph userinput">set bgp group rr multipath</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由反射器配置内部组rr_rr。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1# <kbd class="ph userinput">set bgp group rr_rr type internal</kbd>
user@RR1# <kbd class="ph userinput">set bgp group rr_rr local-address 10.0.0.10</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将添加路径多路径功能配置为仅播发参与者多个路径，并将播发的多路径数限制为 6。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1# <kbd class="ph userinput">set bgp group rr_rr neighbor 10.0.0.40 family inet unicast add-path send multipath</kbd>
user@RR1# <kbd class="ph userinput">set bgp group rr_rr neighbor 10.0.0.40 family inet unicast add-path send path-count 6</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在连接到外部边缘路由器的接口上配置 EBGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1# <kbd class="ph userinput">set bgp group e1 type external</kbd>
user@RR1# <kbd class="ph userinput">set bgp group e1 neighbor 10.0.15.2 local-address 10.0.15.1</kbd>
user@RR1# <kbd class="ph userinput">set bgp group e1 neighbor 10.0.15.2 peer-as 64502</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为每个数据包负载平衡定义策略loadbal_199。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@RR1# <kbd class="ph userinput">set prefix-list match_199 199.1.1.1/32</kbd>
user@RR1# <kbd class="ph userinput">set policy-statement loadbal_199 term match_100 from prefix-list match_199</kbd>
user@RR1# <kbd class="ph userinput">set policy-statement loadbal_199 from route-filter 199.1.1.1/32 exact</kbd>
user@RR1# <kbd class="ph userinput">set policy-statement loadbal_199 then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">loadbal_199应用定义的导出策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@RR1# <kbd class="ph userinput">set forwarding-table export loadbal_199</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 BGP 主机配置路由器 ID 和自治系统。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@RR1# <kbd class="ph userinput">set router-id 10.0.0.10</kbd>
user@RR1# <kbd class="ph userinput">set autonomous-system 64501</kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d34e68__d77004e6227" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd> 、<kbd class="ph userinput">show protocols</kbd>、<kbd class="ph userinput">show routing-options</kbd> 和 <kbd class="ph userinput">show policy-options</kbd> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@RR1# <kbd class="ph userinput">show interfaces</kbd>
ge-1/0/10 {
    unit 0 {
        description RR1-&gt;R2;
        family inet {
            address 10.0.12.1/24;
        }
    }
}
ge-1/0/11 {
    unit 0 {
        description RR1-&gt;RR4;
        family inet {
            address 10.0.14.1/24;
        }
    }
}
ge-1/0/12 {
    unit 0 {
        description RR1-&gt;R5;
        family inet {
            address 10.0.15.1/24;
        }
    }
}
ge-1/0/13 {
    unit 0 {
        description RR1-&gt;R3;
        family inet {
            address 10.0.13.1/24;
        }
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.0.0.10/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@RR1# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.10;
        cluster 10.0.0.10;
        multipath;
        neighbor 10.0.0.20;
        neighbor 10.0.0.30;
    }
    group e1 {
        type external;
        neighbor 10.0.15.2 {
            local-address 10.0.15.1;
            peer-as 64502;
        }
    }
    group rr_rr {
        type internal;
        local-address 10.0.0.10;
        neighbor 10.0.0.40 {
            family inet {
                unicast {
                    add-path {
                        send {
                            path-count 6;
                            multipath;
                        }
                    }
                }
            }
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface all;
        interface fxp0.0 {
            disable;
        }
        interface lo0.10 {
            passive;
        }
        interface ge-1/0/10;
        interface ge-1/0/13;
        interface ge-1/0/11;
        interface ge-1/0/12;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit] 
user@RR1# <kbd class="ph userinput">show routing-options</kbd>
router-id 10.0.0.10;
autonomous-system 64501;
forwarding-table {
    export load-bal_199;
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@RR1# <kbd class="ph userinput">show policy-options</kbd>
prefix-list match_199 {
    199.1.1.1/32;
}
policy-statement loadbal_199 {
    term match_100 {
        from {
            prefix-list match_199;
        }
    }
    from {
        route-filter 199.1.1.1/32 exact;
    }
    then {
        load-balance per-packet;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@RR1# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title36" id="d34e759" class="topic concept nested2"><h3 id="ariaid-title36" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d34e765" class="xref">验证静态路由 199.1.1.1/32 的多路径路由</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d34e800" class="xref">验证多路径路由是否已从路由器 RR1 播发到路由器 RR4</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d34e828" class="xref">验证路由器 RR4 是否将 199.1.1.1/32 的一个路由播发至路由器 R8</a></li></ul> <div id="d34e759__d34e765" class="section"><h4 class="title sectiontitle">验证静态路由 199.1.1.1/32 的多路径路由</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6280" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6285" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6307" class="xref">意义</a></li></ul> <div id="d34e759__d77004e6280" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证目标 199.1.1.1/32 的可用多路径路由。</p></div><div id="d34e759__d77004e6285" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，在路由器 RR1 上运行 <kbd class="ph userinput">show route 199.1.1.1/32 detail</kbd> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@RR1&gt; show route 199.1.1.1/32 detail
inet.0: 22 destinations, 26 routes (22 active, 0 holddown, 0 hidden)
199.1.1.1/32 (3 entries, 2 announced)
        *BGP    Preference: 170/-101
                Next hop type: Indirect, Next hop index: 0
                Address: 0xae5cc90
                Next-hop reference count: 1
                Source: 10.0.0.20
                Next hop type: Router, Next hop index: 1118
                Next hop: 10.0.12.2 via lt-1/0/10.1, selected
                Session Id: 0x0
                Next hop type: Router, Next hop index: 1115
                Next hop: 10.0.13.2 via lt-1/0/10.9
                Session Id: 0x0
                <kbd class="ph userinput">Protocol next hop: 10.0.0.20</kbd>
                Indirect next hop: 0xc409410 1048574 INH Session ID: 0x0
                Protocol next hop: 10.0.0.30
                Indirect next hop: 0xc409520 1048575 INH Session ID: 0x0
                State:  &lt;Active Int Ext&gt;
                Local AS:     1 Peer AS:     1
                Age: 4:03:29 	Metric2: 1
                Validation State: unverified
                Task: BGP_1.10.0.0.20
                Announcement bits (3): 2-KRT 3-BGP_RT_Background 4-Resolve tree 2
                AS path: 2 I
                Communities: 4713:100
                <kbd class="ph userinput">Accepted Multipath</kbd>
                Localpref: 100
                Router ID: 10.0.0.20
         BGP    Preference: 170/-101
                Next hop type: Indirect, Next hop index: 0
                Address: 0xae0ec10
                Next-hop reference count: 4
                Source: 10.0.0.30
                Next hop type: Router, Next hop index: 1115
                Next hop: 10.0.13.2 via lt-1/0/10.9, selected
                Session Id: 0x0
                <kbd class="ph userinput">Protocol next hop: 10.0.0.30</kbd>
                Indirect next hop: 0xc409520 1048575 INH Session ID: 0x0
                State: &lt;NotBest Int Ext&gt;
                Inactive reason: Not Best in its group - Router ID
                Local AS:  64501 Peer AS: 64501
                Age: 4:03:29 	Metric2: 1
                Validation State: unverified
                Task: BGP_1.10.0.0.30
                Announcement bits (1): 3-BGP_RT_Background
                AS path: 2 I
                Communities: 4713:100
                <kbd class="ph userinput">Accepted MultipathContrib</kbd>
                Localpref: 100
                Router ID: 10.0.0.30
         BGP    Preference: 170/-101
                Next hop type: Router, Next hop index: 1105
                Address: 0xae0e970
                Next-hop reference count: 5
                Source: 10.0.15.2
                Next hop: 10.0.15.2 via lt-1/0/10.6, selected
                Session Id: 0x0
                State: &lt;Ext&gt;
                Inactive reason: AS path
                Local AS:     1 Peer AS:     2
                Age: 4:05:01
                Validation State: unverified
                Task: BGP_2.10.0.15.2
                AS path: 2 2 I
                Communities: 4713:100
                Accepted
                Localpref: 100
                Router ID: 10.0.0.50 </pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d34e759__d77004e6307" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 RR1 上启用了选择性播发多路径功能，并且路由 199.1.1.1/32 有多个下一跃点可用。路由 199.1.1.1/32 的两个可用下一跃点是 10.0.0.20 和 10.0.0.30。</p></div></div> <div id="d34e759__d34e800" class="section"><h4 class="title sectiontitle">验证多路径路由是否已从路由器 RR1 播发到路由器 RR4</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6315" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6320" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6335" class="xref">意义</a></li></ul> <div id="d34e759__d77004e6315" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证路由器 RR1 是否正在播发多路径路由。</p></div><div id="d34e759__d77004e6320" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，在路由器 RR1 上运行 <kbd class="ph userinput">show route advertising-protocol bgp 10.0.0.40</kbd> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@RR1&gt; show route advertising-protocol bgp 10.0.0.40
inet.0: 22 destinations, 26 routes (22 active, 0 holddown, 0 hidden)
  Prefix		  Nexthop	      MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 198.1.1.1/32            10.0.0.20                    100        2 I
<kbd class="ph userinput">* 199.1.1.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
</kbd>
 </pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@RR1&gt; show route advertising-protocol bgp 10.0.0.40 detail  
inet.0: 22 destinations, 26 routes (22 active, 0 holddown, 0 hidden)
* 10.0.0.50/32 (1 entry, 1 announced)
 BGP group rr_rr type Internal
     Nexthop: 10.0.15.2
     Localpref: 100
     AS path: [1] 2 2 I
     Communities: 4713:100
     Addpath Path ID: 1
….* 199.1.1.1/32 (3 entries, 2 announced)
 BGP group rr_rr type Internal
     Nexthop: 10.0.0.20
     Localpref: 100
     AS path: [1] 2 I
     Communities: 4713:100
     Cluster ID: 10.0.0.10
     Originator ID: 10.0.0.20
     Addpath Path ID: 1
 BGP group rr_rr type Internal
     Nexthop: 10.0.0.30                 
     Localpref: 100                     
     AS path: [1] 2 I                   
     Communities: 4713:100              
     Cluster ID: 10.0.0.10              
     Originator ID: 10.0.0.30
     Addpath Path ID: 2
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d34e759__d77004e6335" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 RR1 正在将路由 199.1.1.1/32 的两个下一跃点 10.0.0.20 和 10.0.0.30 播发到路由器 RR4。</p></div></div> <div id="d34e759__d34e828" class="section"><h4 class="title sectiontitle">验证路由器 RR4 是否将 199.1.1.1/32 的一个路由播发至路由器 R8</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6343" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6348" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d34e759__d77004e6364" class="xref">意义</a></li></ul> <div id="d34e759__d77004e6343" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">路由器 RR4 上未配置多路径，因此路由 199.1.1.1/32 不符合添加路径的条件。验证路由器 RR4 是否仅向路由器 R8 播发 199.1.1.1/32 的一个路由。</p></div><div id="d34e759__d77004e6348" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下， <kbd class="ph userinput">show route advertising-protocol bgp 10.0.0.80</kbd> 在路由器 RR4 上运行命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@RR4&gt; show route advertising-protocol bgp 10.0.0.80 detail 
inet.0: 20 destinations, 21 routes (20 active, 0 holddown, 0 hidden)
* 10.0.0.50/32 (1 entry, 1 announced)
 BGP group rr_client type Internal
     Nexthop: 10.0.15.2
     Localpref: 100
     AS path: [1] 2 2 I
     Communities: 4713:100
     Cluster ID: 10.0.0.40
     Originator ID: 10.0.0.10

     Addpath Path ID: 1
…
* 198.1.1.1/32 (1 entry, 1 announced)
 BGP group rr_client type Internal
     Nexthop: 10.0.0.20
     Localpref: 100
     AS path: [1] 2 I (Originator)
     Cluster list:  10.0.0.10
     Originator ID: 10.0.0.20
     Communities: 4713:100
     Cluster ID: 10.0.0.40
     Addpath Path ID: 1

<kbd class="ph userinput">* 199.1.1.1/32 (2 entries, 1 announced)</kbd>
 BGP group rr_client type Internal
     <kbd class="ph userinput">Nexthop: 10.0.0.20
</kbd>     Localpref: 100
     AS path: [1] 2 I (Originator)      
     Cluster list:  10.0.0.10
     Originator ID: 10.0.0.20
     Communities: 4713:100
     Cluster ID: 10.0.0.40
     Addpath Path ID: 1

</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d34e759__d77004e6364" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">由于路由器 RR4 上未启用多路径，因此只有一个路径 10.0.0.20 播发至路由器 R8。</p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/send-edit-protocols-bgp.html" class="link">发送</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title37" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-a-routing-policy-to-select-and-advertise-multipaths-based-on-bgp" class="topic concept nested1"><h2 id="ariaid-title37" class="title topictitle2">示例：配置路由策略以根据 BGP 社区值选择和通告多路径<a class="bookmarktitle" aria-label="Copy link to this section: 示例：配置路由策略以根据 BGP 社区值选择和通告多路径" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">播发所有可用的多个路径可能会导致设备内存上的大量处理开销。如果要在事先实际不知道前缀的情况下播发有限的前缀子集，则可以使用 BGP 公共组值来确定需要向 BGP 邻接方播发的前缀路由。此示例说明如何定义路由策略，以根据已知的 BGP 社区值过滤和播发多个路径。 </p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e33" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e49" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e68" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title38" id="d35e33" class="topic concept nested2"><h3 id="ariaid-title38" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">配置此示例之前，不需要除设备初始化之外的特殊配置。</p> <p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">八款路由器，可组合使用 M 系列、MX 系列或 T 系列路由器</p></li> <li class="li"><p class="p">设备上的 Junos OS 16.1R2 或更高版本</p></li></ul></div></div> <div aria-labelledby="ariaid-title39" id="d35e49" class="topic concept nested2"><h3 id="ariaid-title39" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">从 Junos OS 16.1R2 开始，您可以定义一个策略，以根据社区值识别符合条件的多路径前缀。除了指向给定目标的活动路径之外，BGP 还会通告这些带有社区标记的路由。如果路由的社区值与策略中定义的社区值不匹配，则 BGP 不会播发该路由。此功能允许 BGP 播发到给定目标的不超过 20 条路径。您可以限制和配置 BGP 为多个路径考虑的前缀数，而无需事先实际知道前缀。相反，已知的 BGP 社区值确定是否播发前缀。</p> <div id="d35e49__d77004e6418" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p">在 中 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e49__d35e64" class="xref">图 8</a>，RR1 和 RR4 是路由反射器。路由器 R2 和 R3 是路由反射器 RR1 的客户端。路由器 R8 是路由反射器 RR4 的客户端。路由器 R5、R6 和路由器 R7 将静态路由重新分发到 BGP 中。路由器 R5 通告静态路由 199.1.1.1/32 和 198.1.1.1/32，社区值为 4713：100。</p> <p class="p">路由器 RR1 配置为向路由器 RR4 发送最多 6 条路径（每个目标）。路由器 RR4 配置为向路由器 R8 发送最多 6 条路径。路由器 R8 配置为从路由器 RR4 接收多条路径。添加路径社区配置限制路由器 RR4 为仅包含 4713：100 社区值的路由发送多个路径。路由器 RR4 过滤并通告仅包含 4714：100 社区值的多路径。 </p> <div id="d35e49__d35e64" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 8： </span>示例：配置 BGP 以根据社区值通告多路径</span><span><div class="imgwrap"><img data-width="2100px" data-height="1272px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043560.png" alt="示例：配置 BGP 以根据社区值通告多路径" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div></div> <div aria-labelledby="ariaid-title40" id="d35e68" class="topic concept nested2"><h3 id="ariaid-title40" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e68__d77004e6435" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e68__d77004e6909" class="xref">配置路由器 RR4</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e68__d77004e7055" class="xref">结果</a></li></ul> <div id="d35e68__d77004e6435" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中，然后从配置模式进入提交。</p> <p class="p"><strong class="ph b">路由器 RR1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description RR1-&gt;R2 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.12.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description RR1-&gt;RR4 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.14.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/12 unit 0 description RR1-&gt;R5 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/12 unit 0 family inet address 10.0.15.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/13 unit 0 description RR1-&gt;R3 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/13 unit 0 family inet address 10.0.13.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.10/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr cluster 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr multipath</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.20</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.30</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.2 local-address 10.0.15.1</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.2 peer-as 64502</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr local-address 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr_rr neighbor 10.0.0.40 family inet unicast add-path send path-count 6</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.10 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/13</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/11</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/12</kbd>
<kbd class="ph userinput">set routing-options router-id 10.0.0.10</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R2-&gt;RR1  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.12.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description R2-&gt;R6  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.26.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.20/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.20</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.2 peer-as 64502</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.20 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/11</kbd>
<kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R3-&gt;RR1   </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.13.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description R3-&gt;R7  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.37.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.30/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.30</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10 export set_nh_self</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.2 peer-as 64502</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.30 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/13</kbd>
<kbd class="ph userinput">set policy-options policy-statement set_nh_self then next-hop self</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 RR4</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description RR4-&gt;RR1  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.14.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 description RR4-&gt;R8  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/11 unit 0 family inet address 10.0.48.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.40/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr family inet unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.10</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client local-address 10.0.0.40 </kbd>
<kbd class="ph userinput">set protocols bgp group rr_client cluster 10.0.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send prefix-policy addpath-communities-send-4713-100</kbd>
<kbd class="ph userinput">set protocols bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send path-count 6</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.40 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/11</kbd>
<kbd class="ph userinput">set policy-options community addpath-communities-send members 4713:100</kbd>
<kbd class="ph userinput">set policy-options policy-statement addpath-communities-send-4713-100 term term1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement addpath-communities-send-4713-100 term term1 from community addpath-communities-send</kbd>
<kbd class="ph userinput">set policy-options policy-statement addpath-communities-send-4713-100 term term1 then add-path send-count 16</kbd>
<kbd class="ph userinput">set policy-options policy-statement addpath-communities-send-4713-100 term term1 then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R5</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R5-&gt;RR1   </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.15.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.50/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.15.1 peer-as 64501</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then community add addpath-community</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then as-path-expand 2</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set policy-options community addpath-community members 4713:100</kbd>
<kbd class="ph userinput">set routing-options static route 199.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 198.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64502</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R6</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R6-&gt;R2  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.26.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.60/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.26.1 peer-as 64501</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct </kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then community add addpath-community</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set policy-options community addpath-community members 4713:100</kbd>
<kbd class="ph userinput">set routing-options static route 199.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options static route 198.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64502</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 R7</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R7-&gt;R3  </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.37.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.70/32</kbd>
<kbd class="ph userinput">set protocols bgp group e1 type external</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.1 export s2b</kbd>
<kbd class="ph userinput">set protocols bgp group e1 neighbor 10.0.37.1 peer-as 64501</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol static</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b from protocol direct</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then community add addpath-community</kbd>
<kbd class="ph userinput">set policy-options policy-statement s2b then accept</kbd>
<kbd class="ph userinput">set policy-options community addpath-community members 4713:100</kbd>
<kbd class="ph userinput">set routing-options static route 199.1.1.1/32 reject</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64502</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">路由器 R8</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 description R8-&gt;RR4 </kbd>
<kbd class="ph userinput">set interfaces ge-1/0/10 unit 0 family inet address 10.0.48.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.0.0.80/32</kbd>
<kbd class="ph userinput">set protocols bgp group rr type internal</kbd>
<kbd class="ph userinput">set protocols bgp group rr local-address 10.0.0.80</kbd>
<kbd class="ph userinput">set protocols bgp group rr neighbor 10.0.0.40 family inet unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-1/0/10.8</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64501</kbd>
<kbd class="ph userinput">set chassis fpc 1 pic 0 tunnel-services bandwidth 1g</kbd>
</pre></div> <!----></div></div> <div id="d35e68__d77004e6909" class="section"><h4 class="title sectiontitle">配置路由器 RR4</h4><div id="d35e68__d77004e6912" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 RR4：</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">修改相应的接口名称、地址和其他参数后，对其他路由器重复此过程。</p></div></div></div><ol class="ol"><li class="li"><p class="p">使用 IPv4 地址配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR4# <kbd class="ph userinput">set ge-1/0/10 unit 0 description RR4-&gt;RR1 </kbd>
user@RR4# <kbd class="ph userinput">set ge-1/0/10 unit 0 family inet address 10.0.14.2/24</kbd>
user@RR4# <kbd class="ph userinput">set ge-1/0/11 unit 0 description RR4-&gt;R8 </kbd>
user@RR4# <kbd class="ph userinput">set ge-1/0/11 unit 0 family inet address 10.0.48.1/24</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR4# <kbd class="ph userinput">set lo0 unit 0 family inet address 10.0.0.40/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 OSPF 或任何其他内部网关协议 （IGP）。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR4# <kbd class="ph userinput">set ospf area 0.0.0.0 interface lo0.40 passive</kbd>
user@RR4# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-1/0/10</kbd>
user@RR4# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-1/0/11</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由反射器配置两个 IBGP 组 rr，为路由反射器的客户端配置两个 rr_client。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR4# <kbd class="ph userinput">set bgp group rr type internal</kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr local-address 10.0.0.40</kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr family inet unicast add-path receive</kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr neighbor 10.0.0.10</kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr_client type internal</kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr_client local-address 10.0.0.40 </kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr_client cluster 10.0.0.40</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将该功能配置为发送仅包含 4713：100 社区值的多个路径，并将播发的多路径数限制为 6。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR4# <kbd class="ph userinput">set bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send prefix-policy addpath-communities-send-4713-100</kbd>
user@RR4# <kbd class="ph userinput">set bgp group rr_client neighbor 10.0.0.80 family inet unicast add-path send path-count 6</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义一个策略 <code class="ph codeph">addpath-community-members 4713:100</code> 来过滤具有社区值 4713：100 的前缀，并将设备限制为向路由器 R8 发送最多 16 条路径。此限制将覆盖之前在 BGP 组层次结构级别配置的添加路径发送路径计数 6。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@RR4# <kbd class="ph userinput">set community addpath-communities-send members 4713:100</kbd>
user@RR4# <kbd class="ph userinput">set policy-statement addpath-communities-send-4713-100 term term1 from protocol bgp</kbd>
user@RR4# <kbd class="ph userinput">set policy-statement addpath-communities-send-4713-100 term term1 from community addpath-communities-send</kbd>
user@RR4# <kbd class="ph userinput">set policy-statement addpath-communities-send-4713-100 term term1 then add-path send-count 16</kbd>
user@RR4# <kbd class="ph userinput">set policy-statement addpath-communities-send-4713-100 term term1 then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 BGP 主机配置路由器 ID 和自治系统。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@RR4# <kbd class="ph userinput">set router-id 10.0.0.40</kbd>
user@RR4# <kbd class="ph userinput">set autonomous-system 64501</kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d35e68__d77004e7055" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd> 、<kbd class="ph userinput">show protocols</kbd>、<kbd class="ph userinput">show routing-options</kbd> 和 <kbd class="ph userinput">show policy-options</kbd> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@RR4# <kbd class="ph userinput">show interfaces</kbd>
ge-1/0/10 {
    unit 0 {
        description RR4-&gt;RR1;
        family inet {
            address 10.0.14.2/24;
        }
    }
}
ge-1/0/11 {
    unit 0 {
        description RR4-&gt;R8;
        family inet {
            address 10.0.48.1/24;
        }
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.0.0.10/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@RR4# <kbd class="ph userinput">show protocols</kbd>
bgp {
    group rr {
        type internal;
        local-address 10.0.0.40;
        family inet {
            unicast {
                add-path {
                    receive;
                }
            }
        }
        neighbor 10.0.0.10;
    }
    group rr_client {
        type internal;
        local-address 10.0.0.40;
        cluster 10.0.0.40;
        neighbor 10.0.0.80 {
            family inet {
                unicast {
                    add-path {
                        send {
                            prefix-policy addpath-communities-send-4713-100;
                            path-count 6;
                        }
                    }
                }
            }
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface ge-1/0/10.0;
        interface lo0.40 {
            passive;
        }
        interface ge-1/0/11.0;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit] 
user@RR4# <kbd class="ph userinput">show policy-options</kbd>
policy-statement addpath-communities-send-4713-100 {
    term term1 {
        from {
            protocol bgp;
            community addpath-communities-send;
        }
        then {
            add-path send-count 16;
            accept;
        }
    }
}
community addpath-communities-send members 4713:100;</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit] 
user@RR4# <kbd class="ph userinput">show routing-options</kbd>
router-id 10.0.0.40;
autonomous-system 64501;
</pre></div> <!----></div><p class="p">如果完成设备配置，请提交配置。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@RR4# <kbd class="ph userinput">commit</kbd>
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title41" id="d35e740" class="topic concept nested2"><h3 id="ariaid-title41" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d35e746" class="xref">验证多路径路由是否已从路由器 RR4 播发到路由器 R8</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d35e774" class="xref">验证路由器 R8 是否接收路由器 RR4 通告的多路径路由</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d35e803" class="xref">验证路由器 RR4 是否仅播发具有社区值 4713：100 的多路径路由到路由器 R8</a></li></ul> <div id="d35e740__d35e746" class="section"><h4 class="title sectiontitle">验证多路径路由是否已从路由器 RR4 播发到路由器 R8</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7112" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7117" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7132" class="xref">意义</a></li></ul> <div id="d35e740__d77004e7112" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证路由器 RR4 是否可以向路由器 R8 发送多条路径。</p></div><div id="d35e740__d77004e7117" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下， <kbd class="ph userinput">show route advertising-protocol bgp <var class="keyword varname">neighbor-address</var></kbd> 在路由器 RR4 上运行命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@RR4&gt; show route advertising-protocol bgp 10.0.0.80 
inet.0: 20 destinations, 23 routes (20 active, 0 holddown, 0 hidden)
  Prefix                  Nexthop              MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 198.1.1.1/32            10.0.0.20                    100        2 I
                          10.0.15.2                    100        2 2 I
* <kbd class="ph userinput">199.1.1.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
                          10.0.15.2                    100        2 2 I
</kbd></pre></div> <!----></div></div><div id="d35e740__d77004e7132" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 RR4 正在向路由器 R8 播发多个路径 10.0.0.20、10.0.0.30 和 10.0.15.2。</p></div></div> <div id="d35e740__d35e774" class="section"><h4 class="title sectiontitle">验证路由器 R8 是否接收路由器 RR4 通告的多路径路由</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7140" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7145" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7161" class="xref">意义</a></li></ul> <div id="d35e740__d77004e7140" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证路由器 R8 是否正在从路由器 RR4 接收多路径路由。</p></div><div id="d35e740__d77004e7145" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下， <kbd class="ph userinput">show route receive-protocol bgp <var class="keyword varname">neighbor-address</var></kbd> 在路由器 R8 上运行命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@R8&gt; show route receive-protocol bgp 10.0.0.40 

inet.0: 19 destinations, 22 routes (19 active, 0 holddown, 0 hidden)
  Prefix                  Nexthop              MED     Lclpref    AS path
* 10.0.0.50/32            10.0.15.2                    100        2 2 I
* 10.0.0.60/32            10.0.0.20                    100        2 I
* 10.0.0.70/32            10.0.0.30                    100        2 I
* 198.1.1.1/32            10.0.0.20                    100        2 I
                          10.0.15.2                    100        2 2 I
* <kbd class="ph userinput">199.1.1.1/32            10.0.0.20                    100        2 I
                          10.0.0.30                    100        2 I
                          10.0.15.2                    100        2 2 I
</kbd> </pre></div> <!----></div></div><div id="d35e740__d77004e7161" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 R8 正在从路由器 RR4 接收路由 199.1.1.1/32 的多个下一跃点 10.0.0.20、10.0.0.30 和 10.0.15.2。</p></div></div> <div id="d35e740__d35e803" class="section"><h4 class="title sectiontitle">验证路由器 RR4 是否仅播发具有社区值 4713：100 的多路径路由到路由器 R8</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7169" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7174" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d35e740__d77004e7203" class="xref">意义</a></li></ul> <div id="d35e740__d77004e7169" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">路由器 RR4 必须仅向路由器 R8 播发社区值为 4713：100 的多路径路由。</p></div><div id="d35e740__d77004e7174" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下， <kbd class="ph userinput">show route 199.1.1.1/32 detail</kbd> 在路由器 RR4 上运行命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@RR4&gt; show route 199.1.1.1/32 detail
inet.0: 20 destinations, 23 routes (20 active, 0 holddown, 0 hidden)
199.1.1.1/32 (3 entries, 3 announced)
        *BGP    Preference: 170/-101
                Next hop type: Indirect, Next hop index: 0
                Address: 0xae0ea90
                Next-hop reference count: 6
                Source: 10.0.0.10
                Next hop type: Router, Next hop index: 1115
                Next hop: 10.0.14.1 via ge-1/0/10.4, selected
                Session Id: 0x0
                Protocol next hop: 10.0.0.20
                Indirect next hop: 0xc4091f0 1048581 INH Session ID: 0x0
                State: &lt;Active Int Ext&gt;
                Local AS:     1 Peer AS:     1
                Age: 4d 20:56:53        Metric2: 2 
                Validation State: unverified 
                Task: BGP_1.10.0.0.10 
                Announcement bits (3): 2-KRT 3-BGP_RT_Background 4-Resolve tree 2 
                AS path: 2 I (Originator) 
                Cluster list:  10.0.0.10 
                Originator ID: 10.0.0.20 
                <kbd class="ph userinput">Communities: 4713:100</kbd> 
                Accepted 
                Localpref: 100 
                Router ID: 10.0.0.10 
                <kbd class="ph userinput">Addpath Path ID: 1 </kbd>
         BGP    Preference: 170/-101 
                Next hop type: Indirect, Next hop index: 0 
                Address: 0xae0eb50 
                Next-hop reference count: 3 
                Source: 10.0.0.10 
                Next hop type: Router, Next hop index: 1115 
                Next hop: 10.0.14.1 via lt-1/0/10.4, selected 
                Session Id: 0x0 
                Protocol next hop: 10.0.0.30 
                Indirect next hop: 0xc409300 1048582 INH Session ID: 0x0 
                State:  &lt;NotBest Int Ext&gt; 
                Inactive reason: Not Best in its group - Router ID 
                Local AS:     1 Peer AS:     1 
                Age: 4d 20:56:53        Metric2: 2 
                Validation State: unverified 
                Task: BGP_1.10.0.0.10 
                Announcement bits (1): 3-BGP_RT_Background 
                AS path: 2 I (Originator) 
                Cluster list:  10.0.0.10 
                Originator ID: 10.0.0.30 
                <kbd class="ph userinput">Communities: 4713:100</kbd> 
                Accepted 
                Localpref: 100 
                Router ID: 10.0.0.10 
                <kbd class="ph userinput">Addpath Path ID: 2</kbd> 
         BGP    Preference: 170/-101 
                Next hop type: Indirect, Next hop index: 0 
                Address: 0xae0e9d0 
                Next-hop reference count: 4 
                Source: 10.0.0.10 
                Next hop type: Router, Next hop index: 1115 
                Next hop: 10.0.14.1 via lt-1/0/10.4, selected 
                Session Id: 0x0 
                Protocol next hop: 10.0.15.2 
                Indirect next hop: 0xc4090e0 1048580 INH Session ID: 0x0 
                State:  &lt;Int Ext&gt; 
                Inactive reason: AS path 
                Local AS:     1 Peer AS:     1 
                Age: 4d 20:56:53        Metric2: 2 
                Validation State: unverified 
                Task: BGP_1.10.0.0.10 
                Announcement bits (1): 3-BGP_RT_Background 
                AS path: 2 2 I 
                <kbd class="ph userinput">Communities: 4713:100</kbd> 
                Accepted 
                Localpref: 100 
                Router ID: 10.0.0.10 
                <kbd class="ph userinput">Addpath Path ID: 3</kbd>  
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d35e740__d77004e7203" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 RR4 正在向路由器 R8 播发社区值为 4713：100 的三条路径。</p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/send-edit-protocols-bgp.html" class="link">发送</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-selective-advertising-of-bgp-multiple-paths-for-load-balancing" class="link">示例：配置 BGP 多路径的选择性通告以实现负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-bgp-multipath" class="link">了解 BGP 多路径</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title42" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-recursive-resolution-over-bgp-multipath" class="topic task nested1"><h2 id="ariaid-title42" class="title topictitle2">通过 BGP 多路径配置递归解析<a class="bookmarktitle" aria-label="Copy link to this section: 通过 BGP 多路径配置递归解析" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">从 Junos OS 版本 17.3R1 开始，当具有单个协议下一跃点的 BGP 前缀通过具有多个解析路径的另一个 BGP 前缀解析 （unilist） 时，将选择所有路径进行协议下一跃点解析。在早期的 Junos OS 版本中，只有一条路径被选用于协议下一跃点解析，因为解析程序不支持跨 IBGP 多路径路由的所有路径进行负载平衡。路由协议进程 （rpd） 中的解析程序将协议下一跃点地址 （PNH） 解析为立即转发下一跃点。BGP 递归解析功能增强了解析器，使其能够通过 IBGP 多路径路由解析路由，并将所有可行路径用作下一跃点。此功能有利于密集连接网络，在这些网络中，BGP 用于建立基础架构连接，例如具有高等价多路径和无缝 MPLS 拓扑的 WAN 网络。 </p> <p class="p"></p></div> <div id="id-configuring-recursive-resolution-over-bgp-multipath__d77004e7226" class="section prereq p"><p class="p">在开始配置 BGP 多路径的递归解析之前，必须执行以下操作：</p> <ol class="ol"><li class="li"><p class="p">配置设备接口。</p></li> <li class="li"><p class="p">配置 OSPF 或任何其他 IGP 协议。</p></li> <li class="li"><p class="p">配置 MPLS 和 LDP。</p></li> <li class="li"><p class="p">配置 BGP。</p></li></ol></div> <div id="id-configuring-recursive-resolution-over-bgp-multipath__d77004e7242" class="section context"><p class="p">要配置多路径上的递归解析，</p></div> <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">定义包含 <code class="ph codeph">multipath-resolve</code> 操作 的策略。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options policy-statement <var class="keyword varname">policy-name</var> then]
user@host# set multipath-resolve
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">导入策略以解析 IBGP 多路径路由的所有可用路径。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options resolution rib <var class="keyword varname">rib-name</var>]
user@host# set import <var class="keyword varname">policy-name</var>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">验证 BGP 是否以递归方式解析多路径，以及多个下一跃点可用于对流量进行负载均衡。</span><div class="itemgroup info"><p class="p">在操作模式下，输入 <code class="ph codeph">show route resolution detail</code> 命令：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@host&gt; <kbd class="ph userinput">show route resolution detail 10.1.1.2</kbd>
Tree Index: 1, Nodes 36, Reference Count 3
Contributing routing tables: inet.0 inet.3
Policy: [ abc ]
10.1.1.2/32 Originating RIB: inet.0
  Node path count: 1
  Next hop subtype: INDIRECT
  Indirect next hops: 2
        Protocol next hop: 10.1.1.1
        Inode flags: 0x206 path flags: 0x08
        Path fnh link: 0xc9321c0 path inh link: 0x0
        Indirect next hop: 0xb2b20f0 1048574 INH Session ID: 0x143
        Indirect path forwarding next hops: 1
                Next hop type: Router
                Next hop: 12.1.1.2 via ge-2/0/1.0
                Session Id: 0x144
                Next hop: 13.1.1.2 via ge-2/0/2.0
                Session Id: 0x145

	10.1.1.1/32 Originating RIB: inet.0
	  Node path count: 1
  Node flags: 1
	  Forwarding nexthops: 1 (Merged)
		Nexthop: 12.1.1.2 via ge-2/0/1.0

		Nexthop: 13.1.1.2 via ge-2/0/2.0


user@host&gt; <kbd class="ph userinput">show route 10.1.1.2 extensive</kbd>
inet.0: 37 destinations, 37 routes (36 active, 0 holddown, 1 hidden)
10.1.1.2/32 (1 entry, 1 announced)
TSI:
KRT in-kernel 10.1.1.2/32 -&gt; {indirect(1048574)}
        *Static Preference: 5
                Next hop type: Indirect, Next hop index: 0
                Address: 0xb39d1b0
                Next-hop reference count: 2
                Next hop type: Router, Next hop index: 581
                Next hop: 12.1.1.2 via ge-2/0/1.0, selected
                Session Id: 0x144
                Next hop: 13.1.1.2 via ge-2/0/2.0, selected
                Session Id: 0x145
                Protocol next hop: 10.1.1.1
                Indirect next hop: 0xb2b20f0 1048574 INH Session ID: 0x143
                State: &lt;Active Int Ext&gt;
                Age: 2:53 	Metric2: 0
                Validation State: unverified
                Task: RT
                Announcement bits (2): 0-KRT 2-Resolve tree 1
                AS path: I
                Indirect next hops: 1
                        Protocol next hop: 10.1.1.1
                        Indirect next hop: 0xb2b20f0 1048574 INH Session ID: 0x143
                        Indirect path forwarding next hops: 2
                                Next hop type: Router
                                Next hop: 12.1.1.2 via ge-2/0/1.0
                                Session Id: 0x144
                                Next hop: 13.1.1.2 via ge-2/0/2.0
                                Session Id: 0x145
			               			10.1.1.1/32 Originating RIB: inet.0
                   			  Node path count: 1
                          Node flags: 1
 			                    Forwarding nexthops: 2 (Merged)
 			                    Nexthop: 12.1.1.2 via ge-2/0/1.0	
	 			                    Nexthop: 13.1.1.2 via ge-2/0/2.0		</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></li></ol></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html" class="link">策略声明</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/command/show-route-resolution.html" class="link">显示路由解析</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title43" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-ecmp-next-hops-for-rsvp-and-ldp-lsps-for-load-balancing" class="topic task nested1"><h2 id="ariaid-title43" class="title topictitle2">为 RSVP 和 LDP LSP 配置 ECMP 下一跃点以实现负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 为 RSVP 和 LDP LSP 配置 ECMP 下一跃点以实现负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div id="id-configuring-ecmp-next-hops-for-rsvp-and-ldp-lsps-for-load-balancing__d77004e7314" class="section context"><p class="p">Junos OS 支持 RSVP 和 LDP LSP 的 16、32、64 或 128 等价多路径 （ECMP） 下一跃点配置。s. 对于具有高流量的网络，这提供了更大的灵活性，可以在多达 128 个 LSP 上对流量进行负载均衡。</p> <p class="p">要配置 ECMP 下一跃点的最大限制，请在层次结构级别包含 <code class="ph codeph">maximum-ecmp                         <var class="keyword varname">next-hops</var></code> 语句 <code class="ph codeph">[edit                     chassis]</code> ： </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit chassis]
maximum-ecmp <var class="keyword varname">next-hops</var>;
</pre></div> <!----></div> <p class="p">您可以使用此语句将最大 ECMP 下一跃点限制配置为 16、32、 64 或 128 。默认限制为 16. </p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">MX 系列路由器带有一个或多个模块化端口集中器 （MPC） 卡并安装了 Junos OS 11.4 或更低版本，支持仅具有 16 个下一跃点的语句配置 <code class="ph codeph">maximum-ecmp</code> 。<em class="ph i">不应</em>为<code class="ph codeph">maximum-ecmp</code>语句配置 32 或 64 个下一跃点。提交具有 32 或 64 个下一跃点的配置时，将显示以下警告消息： </p> <p class="p"><code class="ph codeph">Error: Number of members in Unilist NH exceeds the maximum supported 16                         on Trio.</code></p></div></div></div> <p class="p">以下类型的路由支持 ECMP 最大下一跃点配置，支持多达 128 个 ECMP 网关：</p> <ul class="ul"><li class="li"><p class="p">具有直接和间接下一跃点 ECMP 的静态 IPv4 和 IPv6 路由</p></li> <li class="li"><p class="p">通过关联的 IGP 路由获知的 LDP 入口和中转路由</p></li> <li class="li"><p class="p">为 LSP 创建的 RSVP ECMP 下一跃点</p></li> <li class="li"><p class="p">OSPF IPv4 和 IPv6 路由 ECMP</p></li> <li class="li"><p class="p">IS-IS IPv4 和 IPv6 路由 ECMP</p></li> <li class="li"><p class="p">EBGP IPv4 和 IPv6 路由 ECMP</p></li> <li class="li"><p class="p">IBGP（通过 IGP 路由解析）IPv4 和 IPv6 路由 ECMP</p></li></ul> <p class="p">增强型 ECMP 限制（最多 128 个 ECMP 下一跃点）也适用于通过 MPLS 路由解析的第 3 层 VPN、第 2 层 VPN、第 2 层电路和 VPLS 服务，因为此类流量也可以使用 MPLS 路由中的可用 ECMP 路径。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">如果 RSVP LSP 配置了带宽分配，则对于具有超过 16 个 LSP 的 ECMP 下一跃点，流量不会根据配置的带宽进行最佳分配。某些分配带宽较小的 LSP 接收的流量比配置较高带宽的 LSP 更多。流量分配不严格遵循配置的带宽分配。此注意事项适用于以下路由器：</p> <ul class="ul"><li class="li"><p class="p">MX 系列路由器，配备所有类型的 FPC 和 DPC，不包括 MPC。此警告 <em class="ph i">不适用于</em> 具有基于 Junos Trio 芯片组的线卡的 MX 系列路由器。</p></li></ul></div></div></div> <p class="p">要查看 ECMP 下一跃点的详细信息，请发出 <code class="ph codeph">show route</code> 命令。还 <code class="ph codeph">show route summary command</code> 显示了最大 ECMP 限制的当前配置。要查看 ECMP LDP 路径的详细信息，请发出 <code class="ph codeph">traceroute mpls ldp</code> 命令。</p></div></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/maximum-ecmp-edit-chassis.html" class="link">最大-ECMP</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title44" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-consistent-load-balancing-for-ecmp-groups" class="topic task nested1"><h2 id="ariaid-title44" class="title topictitle2">为 ECMP 组配置一致的负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 为 ECMP 组配置一致的负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">通过按数据包负载均衡，您可以在多个等价路径上分配流量。默认情况下，当一个或多个路径发生故障时，哈希算法会重新计算所有路径的下一跃点，这通常会导致重新分配所有流。<em class="ph i">一致的负载平衡</em> 使您能够覆盖此行为，以便仅重定向非活动链接的流。所有现有的活动流量都可以在不中断的情况下得到维护。在数据中心环境中，当链路出现故障时重新分配所有流量可能会导致流量严重丢失，或者链路仍处于活动状态的服务器失去服务。一致的负载平衡会保留所有活动链路，而只会重新映射受一个或多个链路故障影响的流。此功能可确保连接到保持活动状态的链路的流不会中断。</p> <p class="p">此功能适用于等价多路径 （ECMP） 组的成员是单跳 BGP 会话中的外部 BGP 邻接方的拓扑。添加新的 ECMP 路径或以任何方式修改现有路径时，一致的负载平衡不适用。要在中断最少的情况下添加新路径，请在不修改现有路径的情况下定义新的 ECMP 组。这样，客户端可以逐渐移动到新组，而无需终止现有连接。</p></div> <div id="id-configuring-consistent-load-balancing-for-ecmp-groups__d77004e7529" class="section context"><ul class="ul"><li class="li"><p class="p">（在 MX 系列上）仅支持模块化端口集中器 （MPC）。</p></li> <li class="li"><p class="p">支持 IPv4 和 IPv6 路径。</p></li> <li class="li"><p class="p">还支持属于虚拟路由和转发 （VRF） 实例或其他路由实例的 ECMP 组。</p></li> <li class="li"><p class="p">不支持组播流量。</p></li> <li class="li"><p class="p">支持聚合接口，但链路聚合 （LAG） 捆绑包的成员之间不支持一致的负载平衡。当一个或多个成员链路发生故障时，来自 LAG 捆绑包的活动成员的流量可能会移动到另一个活动成员。当一个或多个 LAG 成员链路出现故障时，将重新对流进行哈希处理。</p></li> <li class="li"><p class="p">强烈建议您将一致的负载平衡应用于每个路由器或交换机最多不超过 1,000 个 IP 前缀。</p></li> <li class="li"><p class="p">支持集成路由和桥接 （IRB） 接口上的第 3 层邻接。</p></li></ul> <p class="p">您可以配置 BGP <a href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/add-path-edit-protocols-bgp.html" target="_blank" class="xref No-Link-55390">添加路径</a> 功能，以便在 ECMP 组中的一个或多个路径发生故障时，将故障路径替换为新的活动路径。配置故障路径的替换可确保仅重定向故障路径上的流量。活动路径上的流量将保持不变。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <ul class="ul"><li class="li"><p class="p">在通用路由封装 （GRE） 隧道接口上配置一致的负载平衡时，必须指定远端 GRE 接口的 inet 地址，以便在转发表中正确安装 GRE 隧道接口上的第 3 层邻接。但是，在一致负载平衡期间，不支持通过 GRE 隧道接口的 ECMP 快速重新路由 （FRR）。您可以在路由器上指定目标地址，在层次结构级别配置 <code class="ph codeph">[edit interfaces <var class="keyword varname">interface name</var> unit <var class="keyword varname">unit name</var> family inet address <var class="keyword varname">address</var>]</code> 了一致的负载平衡。例如：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@host# <kbd class="ph userinput">set interfaces gr-4/0/0 unit 21 family inet address 10.10.31.2/32 destination 10.10.31.1</kbd>
</pre></div> <!----></div><p class="p">有关通用路由封装的更多信息，请参阅 <a href="https://www.juniper.net/documentation/us/en/software/junos/interfaces-ethernet-switches/topics/topic-map/switches-interface-gre.html" class="xref">配置通用路由封装隧道</a>。</p></li> <li class="li"><p class="p">一致负载平衡不支持 EBGP 邻接方的 BGP 多跳。因此，请勿在配置了一致负载平衡的设备上启用该 <code class="ph codeph">multihop</code> 选项。</p></li></ul></div></div></div><p class="p">要为 ECMP 组配置一致的负载平衡，请执行以下操作：</p></div> <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">配置 BGP 并使外部对等方的 BGP 组能够使用多个路径。</span></li> <li class="li step stepexpand"><span class="ph cmd">创建路由策略以将传入路由与一个或多个目标前缀匹配。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@host# set <kbd class="ph userinput">policy-statement <var class="keyword varname">policy-statement-name</var> from route-filter <var class="keyword varname">destination-prefix </var> orlonger</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">对路由策略应用一致的负载平衡，以便仅流向一个或多个遇到链路故障的目标前缀的流量重定向到活动链路。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@host# <kbd class="ph userinput">set policy-statement <var class="keyword varname">policy-statement-name</var> then load-balance consistent-hash</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">创建单独的路由策略并启用按数据包负载均衡。</span><div class="itemgroup info"><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">您必须配置并应用按数据包负载均衡策略才能在转发表中安装所有路由。</p></div></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@host# <kbd class="ph userinput">set policy-statement <var class="keyword varname">policy-statement-name</var> then load-balance per-packet</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">将路由策略用于将一致的负载平衡应用到外部对等方的 BGP 组。</span><div class="itemgroup info"><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">一致的负载平衡只能应用于 BGP 外部对等方。此策略不能在全球范围内应用。</p></div></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@host# <kbd class="ph userinput">set group <var class="keyword varname">group-name </var> import <var class="keyword varname">policy-statement-name</var></kbd>
#This policy-statement-name refers to the policy created in Step 2.
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">（可选）为每个外部 BGP 邻接方启用双向转发检测 （BFD）。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@host# <kbd class="ph userinput">set group <var class="keyword varname">group-name</var> neighbor <var class="keyword varname">ip-address</var> bfd-liveness-detection <var class="keyword varname">milliseconds</var></kbd>
</pre></div> <!----></div><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">此步骤显示所需的最低 BFD 配置。您可以为 BFD 配置其他选项。</p></div></div></div></div></li> <li class="li step stepexpand"><span class="ph cmd">全局应用每前缀负载均衡策略，以在转发表中安装所有下一跃点路由。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@host# <kbd class="ph userinput">set forwarding table export <var class="keyword varname">policy-statement-name</var></kbd>
#This policy-statement-name refers to the policy created in Step 4.
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">（可选）为 ECMP 路由启用快速重新路由。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@host# <kbd class="ph userinput">set forwarding-table ecmp-fast-reroute</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">验证您为其启用了一致负载平衡的一个或多个 ECMP 路由的状态。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@host&gt; <kbd class="ph userinput">show route <var class="keyword varname">destination-prefix</var> extensive</kbd>
</pre></div> <!----></div><p class="p">启用一致负载平衡时，命令的输出将显示以下标志：<span class="emptyline"></span><code class="ph codeph">State: &lt;Active Ext LoadBalConsistentHash&gt;</code></p></div></li></ol></div></div> <div aria-labelledby="ariaid-title45" xml:lang="zh-CN" lang="zh-CN" id="id_jtx_b1m_tdc" class="topic concept topic-map nested1"><h2 id="ariaid-title45" class="title topictitle2">使用多个 ECMP BGP 对等方提高网络弹性<a class="bookmarktitle" aria-label="Copy link to this section: 使用多个 ECMP BGP 对等方提高网络弹性" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody tmbody"></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d39e44" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d39e89" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d39e269" class="xref">平台支持</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d39e284" class="xref">相关主题</a></li></ul> <div aria-labelledby="ariaid-title46" id="d39e44" class="topic concept nested2"><h3 id="ariaid-title46" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">等价多路径 （ECMP） 是一种网络路由策略，允许在多条等价路径上传输同一会话或流量的流量。流是具有相同源和目标的流量。ECMP 进程可识别作为通向流目标的合法等价下一跃点的路由器。然后，设备使用负载平衡在这些多个等价下一跃点上均匀分配流量。ECMP 是一种机制，使您（网络管理员）能够通过充分利用到同一目标的链路上未使用的带宽来均衡流量负载并增加带宽。 </p> <p class="p">您经常将 ECMP 与 BGP 配合使用。每个 BGP 路由可以有多个 ECMP 下一跃点。BGP 导出策略确定是否将 BGP 路由播发到这些下一跃点。作为网络管理员，您可以控制 BGP 前缀在这些 ECMP 对等方之间的播发和撤销。BGP 导出策略根据策略接收前缀的 ECMP BGP 对等方数确定是否播发 BGP 前缀。 </p> <p class="p">您可以将 BGP 导出策略配置为撤销 BGP 路由，除非该路由从最少数量的 ECMP BGP 对等方接收 BGP 路由前缀。要求 BGP 路由具有多个 ECMP BGP 对等方，以便在发生链路故障时提供更好的弹性配置。 </p> <div id="d39e44__d39e60" class="section"><h4 class="title sectiontitle">优势</h4> <ul id="d39e44__d39e65" class="ul"><li class="li"><p class="p">提高网络的弹性</p></li> <li class="li"><p class="p">防止链路意外过载</p></li> <li class="li"><p class="p">协助负载平衡</p></li></ul></div></div></div> <div aria-labelledby="ariaid-title47" id="d39e89" class="topic task nested2"><h3 id="ariaid-title47" class="title topictitle3">配置</h3> <div class="body taskbody"><div id="d39e89__d39e96" class="section context"><p class="p">BGP 导出策略会将 BGP 路由的 ECMP 下一跃点数与您在以下任一层次结构中使用语 <code class="ph codeph">from nexthop-ecmp</code> 句配置的值进行比较：<code class="ph codeph">[edit policy-options                         policy-statement <var class="keyword varname">policy-name</var>]</code> 或 <code class="ph codeph"> [edit                         policy-options policy-statement <var class="keyword varname">policy-name</var> term                             <var class="keyword varname">term-name</var>]</code>。 </p> <p class="p">此语句的选项包括：</p> <ul id="d39e89__d39e122" class="ul"><li class="li"><p class="p"><code class="ph codeph"><var class="keyword varname">value</var></code>：满足条件所需的 ECMP 网关的确切数量（1 到 512）。</p></li> <li class="li"><p class="p"><code class="ph codeph">equal</code>：网关数量必须等于配置的值。</p></li> <li class="li"><p class="p"><code class="ph codeph">greater-than</code>：网关数量必须大于配置的值。</p></li> <li class="li"><p class="p"><code class="ph codeph">greater-than-equal</code>：网关数量必须大于或等于配置的值。</p></li> <li class="li"><p class="p"><code class="ph codeph">less-than</code>：网关数量必须小于配置的值。</p></li> <li class="li"><p class="p"><code class="ph codeph">less-than-equal</code>：网关数量必须小于或等于配置的值。</p></li></ul></div> <ol id="d39e89__d39e176" class="ol steps"><li class="li step stepexpand"><span class="ph cmd">配置 BGP 导出策略，将 BGP 路由的 ECMP 下一跃点数与您使用 <code class="ph codeph">from                             nexthop-ecmp</code> 语句配置的值进行比较。</span> <div class="itemgroup info">在此示例中，当路由的 ECMP BGP 对等方少于两个时，策略术语 <code class="ph codeph">min-ecmp</code> 将查找匹配项。 </div> <div class="itemgroup stepxmp"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre id="d39e89__d39e194">set policy-options policy-statement <var class="keyword varname">policy-name</var> term min-ecmp from nexthop-ecmp less-than 2</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">将 BGP 导出策略配置为在 ECMP 下一跃点数与您配置的条件不匹配时停止播发 BGP 路由前缀。 </span> <div class="itemgroup stepxmp"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre id="d39e89__d39e209">set policy-options policy-statement <var class="keyword varname">policy-name</var> term min-ecmp then reject
set policy-options policy-statement <var class="keyword varname">policy-name</var> term default then accept</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">将策略应用于从路由表导出到 BGP 的路由。</span> <div class="itemgroup stepxmp"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre id="d39e89__d39e227">set protocols bgp group <var class="keyword varname">group-name</var> export <var class="keyword varname">policy-name</var></pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">确认您已验证该值是否与策略中配置的 BGP ECMP 对等方一致。</span> <div class="itemgroup stepxmp"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre id="d39e89__d39e244">show policy <var class="keyword varname">policy-name</var></pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">检查 BGP 路由是否已播发至所需的上游BGP 对等体或已从所需的上游退出。</span> <div class="itemgroup stepxmp"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre id="d39e89__d39e258">show route advertising-protocol bgp <var class="keyword varname">peer-advertised</var> [detail]</pre></div> <!----></div></div></li></ol></div></div> <div aria-labelledby="ariaid-title48" id="d39e269" class="topic concept nested2"><h3 id="ariaid-title48" class="title topictitle3">平台支持</h3> <div class="body conbody"><p class="p">请参阅 <a href="https://apps.juniper.net/feature-explorer/feature/80?fn=BGP" target="_blank" class="xref">功能浏览器</a> ，了解平台和版本支持。                 </p></div></div> <div aria-labelledby="ariaid-title49" id="d39e284" class="topic concept nested2"><h3 id="ariaid-title49" class="title topictitle3">相关主题</h3> <div class="body conbody"><ul id="d39e284__d39e291" class="ul"><li class="li"><p class="p"><a href="https://www.juniper.net/documentation/us/en/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-consistent-load-balancing-for-ecmp-groups" target="_blank" class="xref">为 ECMP 组配置一致的负载平衡</a></p></li></ul></div></div></div> <div aria-labelledby="ariaid-title50" xml:lang="zh-CN" lang="zh-CN" id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp" class="topic concept nested1"><h2 id="ariaid-title50" class="title topictitle2">了解 BGP 标记的单播 LSP 的熵标签<a class="bookmarktitle" aria-label="Copy link to this section: 了解 BGP 标记的单播 LSP 的熵标签" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><div class="abstract"><p class="p"></p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d77004e8033" class="xref">什么是熵标签？</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d77004e8049" class="xref">BGP 标记单播的熵标签</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d77004e8140" class="xref">支持和不支持的功能</a></li></ul> <div id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d77004e8033" class="section"><h3 class="title sectiontitle">什么是熵标签？</h3><p class="p">熵标签是一种特殊的负载平衡标签，可增强路由器跨等价多路径 （ECMP） 路径或链路聚合组 （LAG） 对流量进行负载均衡的能力。熵标签允许路由器仅使用标签堆栈而不是深度数据包检测 （DPI） 来有效地对流量进行负载均衡。DPI 需要更多路由器的处理能力，并不是所有路由器共享的功能。 </p> <p class="p">当 IP 数据包有多条路径到达其目的地时，Junos OS 使用数据包标头的某些字段将数据包散列为确定性路径。数据包的源地址或目标地址和端口号用于散列，以避免对给定流进行数据包重新排序。如果核心标签交换路由器 （LSR） 无法执行 DPI 来识别流量，或者无法以线速识别流量，则标签堆栈单独用于 ECMP 散列。这需要一个熵标签，一个可以携带流信息的特殊负载平衡标签。与中转 LSR 相比，入口 LSR 具有更多有关传入数据包的上下文和信息。因此，入口标签边缘路由器 （LER） 可以检查数据包的流信息，将其映射到熵标签，然后将其插入标签堆栈中。核心中的 LSR 仅使用熵标签作为密钥，将数据包散列到正确的路径。</p> <p class="p"> 熵标签可以是 16 到 1048575 之间的任何标签值（常规 20 位标签范围）。由于此范围与现有的常规标签范围重叠，因此在熵标签之前插入一个称为熵标签指示器 （ELI） 的特殊标签。ELI 是 IANA 分配的特殊标签，值为 7。 </p> <p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d40e35" class="xref">图 9</a> 说明了 RSVP 标签交换路径 （LSP） 数据包标签堆栈中的熵标签。标签堆栈由熵标签指示器 （ELI）、熵标签和 IP 数据包组成。</p> <div id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d40e35" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 9： </span>RSVP LSP 的熵标签</span><span><img data-width="681px" data-height="249px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043131.gif" alt="RSVP LSP 的熵标签" class="image"></span></div></div> <div id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d77004e8049" class="section"><h3 class="title sectiontitle">BGP 标记单播的熵标签</h3> <p class="p">BGP 标记的单播跨多个内部网关协议 (IGP) 区域或多个自治系统（内部 AS LSP）连接 RSVP 或 LDP LSP。当入口 PE 和出口 PE 位于不同的 IGP 区域时，区域间 BGP 标记的单播 LSP 通常携带 VPN 和 IP 流量。当 BGP 标记的单播连接 RSVP 或 LDP LSP 时，Junos OS 会在 BGP 标记的单播 LSP 入口处插入熵标签，以实现端到端熵标签负载平衡。这是因为 RSVP 或 LDP 熵标签通常与 RSVP 或 LDP 标签一起在倒数第二个跳节点弹出，并且在拼接点（即两个区域或两个 AS 之间的路由器）处没有熵标签。因此，在没有熵标签的情况下，拼接点的路由器使用 BGP 标签转发数据包。 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d40e49" class="xref">图 10</a> 说明了 BGP 标记的单播数据包标签堆栈以及 RSVP 标签堆栈中的熵标签。RSVP 标签堆栈由熵标签指示器 （ELI）、熵标签、BGP 标签和 IP 数据包组成。RSVP 熵标签在倒数第二个跃点节点弹出。</p> <div id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d40e49" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 10： </span>带 RSVP 熵标签的区域间 BGP 标记单播</span><span><img data-width="782px" data-height="298px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043132.gif" alt="带 RSVP 熵标签的区域间 BGP 标记单播" class="image"></span></div> <p class="p">BGP 标记的单播拼接节点不能使用熵标签进行负载平衡，除非拼接节点在 BGP 出口处发出熵标签功能的信号。如果 BGP 标记的单播拼接节点向提供商边缘路由器发出 BGP 熵标签功能 （ELC） 信号，则标记为单播 LSP 入口的 BGP 知道 BGP 标记的单播 LSP 出口可以处理熵标签，并在 BGP 标签下方插入熵标签指示器和熵标签。所有 LSR 都能够使用熵标签进行负载平衡。虽然 BGP 标记的单播 LSP 可能会跨越不同区域和 AS 中的许多路由器，但某些分段可能支持熵标签，而其他分段可能不支持。 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d40e59" class="xref">图 11</a> 说明了 BGP 标签堆栈中的熵标签。拼接节点上的标签堆栈由 ELI、熵标签和 IP 数据包组成。</p> <div id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d40e59" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 11： </span>区域间BGP标记的单播，拼接点处有BGP熵标签</span><span><img data-width="782px" data-height="298px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043133.gif" alt="区域间BGP标记的单播，拼接点处有BGP熵标签" class="image"></span></div> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">要在出口节点上禁用 BGP 标记的单播的熵标签功能，请在层次结构级别使用该<code class="ph codeph">[edit policy-options <a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html" class="xref">policy-statement</a> <var class="keyword varname">policy-name</var> then]</code>选项<code class="ph codeph">no-entropy-label-capability</code>定义策略。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><code class="ph codeph">[edit policy-options <a class="xref" href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html">policy-statement</a> <var class="keyword varname">policy-name</var> then]</code>
user@PE# <code class="ph codeph">no-entropy-label-capability</code>
</pre></div> <!----></div> <p class="p">默认情况下，支持熵标签的路由器在层次结构级别配置<code class="ph codeph">[edit                         forwarding-options]</code>了<a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/load-balance-label-capability-edit-forwarding-options.html" class="xref">负载-平衡-标签-功能</a>语句，以基于每个 LSP 向标签发出信号。如果对等路由器未配备处理负载平衡标签的设备，则可以通过在层次结构级别配置 <code class="ph codeph">no-load-balance-label-capability</code> 语句 <code class="ph codeph">[edit forwarding-options]</code> 来阻止熵标签功能的信令发送。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><code class="ph codeph">[edit forwarding-options]</code>
user@PE# <code class="ph codeph">no-load-balance-label-capability</code>
</pre></div> <!----></div></div></div></div> <p class="p">默认情况下，BGP 说话人使用 IETF BGP 路由器功能属性 （RCA） 中定义的熵标签功能 （ELCv3） 属性进行负载平衡。它仅发送和接收 ELCv3 属性。如果需要使用可与 RCA 草稿互操作的 ELCv2 属性，请在标记单播熵标签层次结构中显式配置 <code class="ph codeph">elc-v2-compatible</code> 旋钮。在这种情况下，将发送和接收 ELCv3 和 ELCv2。</p></div> <div id="id-understanding-entropy-label-for-bgp-labeled-unicast-lsp__d77004e8140" class="section"><h3 class="title sectiontitle">支持和不支持的功能</h3><p class="p">在以下情况下，Junos OS 支持 BGP 标记单播的熵标签：</p> <ul class="ul"><li class="li"><p class="p">LSP的所有节点都具有熵标签功能。</p></li> <li class="li"><p class="p">LSP 的某些节点具有熵标记功能。</p></li> <li class="li"><p class="p">LSP 通过其他运营商的 VPN 建立隧道。</p></li> <li class="li"><p class="p">定义入口策略以选择 BGP 标记的单播 LSP 子集，以便在入口处插入熵标签。</p></li> <li class="li"><p class="p">定义出口策略以禁用熵标签功能通告。</p></li></ul> <p class="p">Junos OS 不支持 BGP 标记为单播的熵标签的以下功能：</p> <ul class="ul"><li class="li"><p class="p">当 BGP 标记的单播 LSP 通过其他运营商的 VPN 建立隧道时，不存在真正的端到端熵标签，因为 Junos OS 不会在载波至载波网络的 VPN 标签下方插入熵标签指示器或熵标签。</p></li> <li class="li"><p class="p">目前，Junos OS 不支持带有自有熵标签的 IPv6 BGP 标记的单播 LSP。但是，IPv6 BGP 标记的单播 LSP 可能会使用底层 RSVP、LDP 或 BGP LSP 中的熵标签。</p></li></ul></div></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/entropy-label-edit-protocols-bgp-family-inet-labeled-unicast.html" class="link">熵标签</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp" class="link">示例：为标记为单播 LSP 的 BGP 配置熵标签</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title51" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp" class="topic task nested1"><h2 id="ariaid-title51" class="title topictitle2">为标记为单播 LSP 的 BGP 配置熵标签<a class="bookmarktitle" aria-label="Copy link to this section: 为标记为单播 LSP 的 BGP 配置熵标签" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">为 BGP 标记的单播 LSP 配置熵标签，以实现端到端熵标签负载平衡。熵标签是一种特殊的负载均衡标签，可以携带数据包的流信息。BGP 标记的单播通常跨多个 IGP 区域或多个自治系统 (AS) 连接 RSVP 或 LDP LSP。RSVP 或 LDP 熵标签与 RSVP 或 LDP 标签一起在倒数第二个跃点节点弹出。此功能允许在拼接点（即两个区域或 AS 之间的路由器）使用平均信息量标签，以实现 BGP 流量的端到端平均信息量标签负载平衡。此功能允许在 BGP 标记的单播 LSP 入口处插入熵标签。 </p> <p class="p">熵标签可以是 16 到 1048575 之间的任何标签值（常规 20 位标签范围）。由于此范围与现有的常规标签范围重叠，因此在熵标签之前插入一个称为熵标签指示器 （ELI） 的特殊标签。ELI 是 IANA 分配的特殊标签，值为 7。</p></div> <div id="id-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp__d77004e8200" class="section prereq p"><p class="p">在为 BGP 标记的单播配置熵标签之前，请确保：</p> <ol class="ol"><li class="li"><p class="p">配置设备接口。</p></li> <li class="li"><p class="p">配置 OSPF 或任何其他 IGP 协议。</p></li> <li class="li"><p class="p">配置 BGP。</p></li> <li class="li"><p class="p">配置 LDP。</p></li> <li class="li"><p class="p">配置 RSVP。</p></li> <li class="li"><p class="p">配置 MPLS。</p></li></ol></div> <div id="id-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp__d77004e8222" class="section context"><p class="p">要为 BGP 标记的单播 LSP 配置熵标签，请执行以下操作：</p></div> <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">在入口路由器上，在层次结构级别包含 <code class="ph codeph">entropy-label</code> 语句 <code class="ph codeph">[edit protocols bgp family inet labeled-unicast]</code> ，以便在全局级别为 BGP 标记的单播启用熵标签功能。 </span><div class="itemgroup info"><p class="p">您还可以通过在 或 <code class="ph codeph">[edit protocols bgp group <var class="keyword varname">group name</var> neighbor <var class="keyword varname">address</var> labeled-unicast]</code> 层次结构级别包含<code class="ph codeph">entropy-label</code><code class="ph codeph">[edit protocols bgp group <var class="keyword varname">group name</var> family inet labeled-unicast]</code>语句，在 BGP 组或特定 BGP 邻居级别启用熵标签的使用。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp family inet labeled-unicast]
user@host# <a class="xref" href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/entropy-label-edit-protocols-bgp-family-inet-labeled-unicast.html">entropy-label</a>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">（可选）指定附加策略以定义具有熵标签功能的路由。 </span><div class="itemgroup info"><p class="p">在入口路由器上应用策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp family inet labeled-unicast <a class="xref" href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/entropy-label-edit-protocols-bgp-family-inet-labeled-unicast.html">entropy-label</a>]
user@host# import <var class="keyword varname">policy-name</var>;
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">（可选）如果不希望 Junos OS 根据路由下一跃点验证熵标签功能属性中的下一跃点字段，请包含该选项 <code class="ph codeph">no-next-hop-validation</code> 。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp family inet labeled-unicast <a class="xref" href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/entropy-label-edit-protocols-bgp-family-inet-labeled-unicast.html">entropy-label</a>]
user@host# no-next-hop-validation
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">（可选）要在出口路由器上显式禁用播发熵标签功能，请使用策略中指定的路由选项定义 <code class="ph codeph">no-entropy-label-capability</code> 策略，并将该 <code class="ph codeph">no-entropy-label-capability</code> 选项包含在层次结构级别的指定策略 <code class="ph codeph">[edit policy-options policy statement <var class="keyword varname">policy-name</var> then]</code> 中。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options <a class="xref" href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html">policy-statement</a> <var class="keyword varname">policy-name</var> then]
user @ host# <code class="ph codeph">no-entropy-label-capability</code>
</pre></div> <!----></div></div></li></ol></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/entropy-label-edit-protocols-bgp-family-inet-labeled-unicast.html" class="link">熵标签</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-understanding-entropy-label-for-bgp-labeled-unicast-lsp" class="link">了解 BGP 标记的单播 LSP 的熵标签</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title52" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-an-entropy-label-for-a-bgp-labeled-unicast-lsp" class="topic concept nested1"><h2 id="ariaid-title52" class="title topictitle2">示例：为标记为单播 LSP 的 BGP 配置熵标签<a class="bookmarktitle" aria-label="Copy link to this section: 示例：为标记为单播 LSP 的 BGP 配置熵标签" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何为标记为单播的 BGP 配置熵标签，以使用熵标签实现端到端负载均衡。当 IP 数据包有多条路径到达其目的地时，Junos OS 使用数据包标头的某些字段将数据包散列为确定性路径。这需要一个熵标签，一个可以携带流信息的特殊负载平衡标签。核心中的 LSR 只需使用熵标签作为密钥，将数据包散列到正确的路径。熵标签可以是 16 到 1048575 之间的任何标签值（常规 20 位标签范围）。由于此范围与现有的常规标签范围重叠，因此在熵标签之前插入一个称为熵标签指示器 （ELI） 的特殊标签。ELI 是 IANA 分配的特殊标签，值为 7。</p> <p class="p">BGP 标记的单播通常跨多个 IGP 区域或多个自治系统连接 RSVP 或 LDP LSP。RSVP 或 LDP 熵标签与 RSVP 或 LDP 标签一起在倒数第二个跃点节点弹出。此功能允许在拼接点使用熵标签来弥合倒数第二个跃点和拼接点之间的间隙，以实现 BGP 流量的端到端熵标签负载平衡。 </p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e28" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e84" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e179" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title53" id="d42e28" class="topic concept nested2"><h3 id="ariaid-title53" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">7 个带 MPC 的 MX 系列路由器</p></li> <li class="li"><p class="p">在所有设备上运行的 Junos OS 15.1 或更高版本</p> <ul id="d42e28__d42e47" class="ul"><li class="li"><p class="p">使用 Junos OS Relese 22.4 重新验证</p></li></ul></li></ul> <p class="p">在为 BGP 标记的单播配置熵标签之前，请确保：</p> <ol class="ol"><li class="li"><p class="p">配置设备接口。</p></li> <li class="li"><p class="p">配置 OSPF 或任何其他 IGP 协议。</p></li> <li class="li"><p class="p">配置 BGP。</p></li> <li class="li"><p class="p">配置 RSVP。</p></li> <li class="li"><p class="p">配置 MPLS。</p></li></ol></div></div> <div aria-labelledby="ariaid-title54" id="d42e84" class="topic concept nested2"><h3 id="ariaid-title54" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">当 BGP 标记的单播跨多个 IGP 区域或多个自治系统连接 RSVP 或 LDP LSP 时，RSVP 或 LDP 熵标签将与 RSVP 或 LDP 标签一起在倒数第二个跃点节点弹出。但是，在拼接点（即两个区域之间的路由器）处没有熵标签。因此，拼接点处的路由器使用 BGP 标签转发数据包。 </p> <p class="p">从 Junos OS 15.1 版开始，您可以为 BGP 标记的单播配置熵标签，以实现端到端熵标签负载平衡。此功能允许在拼接点使用熵标签，以实现 BGP 流量的端到端熵标签负载平衡。Junos OS 允许在 BGP 标记的单播 LSP 入口处插入熵标签。 </p> <p class="p">默认情况下，支持熵标签的路由器在层次结构级别配置<code class="ph codeph">load-balance-label-capability</code><code class="ph codeph">[edit                     forwarding-options]</code>语句，以基于每个 LSP 发出标签信号。如果对等路由器未配备处理负载平衡标签的设备，则可以通过在层次结构级别配置 来<code class="ph codeph">no-load-balance-label-capability</code><code class="ph codeph">[edit                     forwarding-options]</code>阻止熵标签功能的信令发送。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><code class="ph codeph">[edit forwarding-options]</code>
user@PE# <code class="ph codeph">no-load-balance-label-capability</code>
</pre></div> <!----></div><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">您可以使用层次结构级别的选项<code class="ph codeph">[edit                         policy-options <a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/policy-statement-edit-policy-options.html" class="xref">policy-statement</a> <var class="keyword varname">policy name</var> then]</code>，在<code class="ph codeph">no-entropy-label-capability</code>出口处为策略中指定的路由显式禁用播发熵标签功能。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><code class="ph codeph">[edit policy-options <a class="xref No-Link-28278" href="https://www.juniper.net/documentation/en_US/junos/topics/reference/configuration-statement/policy-statement-edit-policy-options.html" target="_blank">policy-statement</a> <var class="keyword varname">policy-name</var> then]</code>
user@PE# <code class="ph codeph">no-entropy-label-capability</code>
</pre></div> <!----></div></div></div></div><div id="d42e84__d77004e8457" class="section"><h4 class="title sectiontitle">拓扑学</h4> <p class="p">在 中 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e84__d42e171" class="xref">图 12</a> ，路由器 PE1 是入口路由器，路由器 PE2 是出口路由器。路由器 P1 和 P2 是传输路由器。路由器 ABR 是区域 0 和区域 1 之间的区域网桥路由器。在ABR 到 PE2 中配置了两个 LSP ，用于对流量进行负载平衡。入口路由器 PE1 上启用了 BGP 标记单播的熵标签功能。 主机 1 连接到 P1 以进行数据包捕获，以便我们可以显示熵标签。</p> <div id="d42e84__d42e171" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 12： </span>为 BGP 标记的单播配置熵标签</span><span><div class="imgwrap"><img data-width="2250px" data-height="1174px" id="d42e84__d42e176" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/jn-000582.png" alt="为 BGP 标记的单播配置熵标签" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div></div> <div aria-labelledby="ariaid-title55" id="d42e179" class="topic concept nested2"><h3 id="ariaid-title55" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e179__d77004e8498" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e179__d77004e8587" class="xref">配置路由器 PE1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e179__d77004e8931" class="xref">配置路由器 P1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e179__d77004e9064" class="xref">配置路由器 ABR</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e179__d42e956" class="xref">（可选）端口镜像配置</a></li></ul> <div id="d42e179__d77004e8498" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4> <p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改详细信息，以便与网络配置匹配，将命令复制并粘贴到 <kbd class="ph userinput">[edit]</kbd> 层级的 CLI 中，然后从配置模式进入 <code class="ph codeph">commit</code> 。</p> <p class="p"><strong class="ph b">路由器 CE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>set interfaces ge-0/0/0 unit 0 family inet address 172.16.12.1/30
set interfaces lo0 unit 0 family inet address 172.16.255.1/32 primary
set interfaces lo0 unit 0 family inet address 192.168.255.1/32
set routing-options router-id 172.16.255.1
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set protocols ospf area 0.0.0.0 interface lo0.0 passive</pre></div> <!----></div> <p class="p"><strong class="ph b">路由器 PE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>set interfaces ge-0/0/0 unit 0 family inet address 172.16.12.2/30
set interfaces ge-0/0/2 unit 0 family inet address 10.1.23.1/30
set interfaces ge-0/0/2 unit 0 family mpls
set interfaces lo0 unit 0 family inet address 10.1.255.2/32 primary
set interfaces lo0 unit 1 family inet address 10.1.255.22/32
set policy-options policy-statement bgp-to-ospf from protocol bgp
set policy-options policy-statement bgp-to-ospf then accept
set policy-options policy-statement pplb then load-balance per-packet
set routing-instances VPN-l3vpn instance-type vrf
set routing-instances VPN-l3vpn protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set routing-instances VPN-l3vpn protocols ospf area 0.0.0.0 interface lo0.1 passive
set routing-instances VPN-l3vpn protocols ospf export bgp-to-ospf
set routing-instances VPN-l3vpn interface ge-0/0/0.0
set routing-instances VPN-l3vpn interface lo0.1
set routing-instances VPN-l3vpn route-distinguisher 10.1.255.2:1
set routing-instances VPN-l3vpn vrf-target target:65000:1
set routing-options router-id 10.1.255.2
set routing-options autonomous-system 65000
set routing-options forwarding-table export pplb
set protocols bgp group ibgp type internal
set protocols bgp group ibgp local-address 10.1.255.2
set protocols bgp group ibgp family inet labeled-unicast entropy-label
set protocols bgp group ibgp neighbor 10.1.255.4 family inet labeled-unicast rib inet.3
set protocols bgp group ibgp neighbor 10.1.255.6 family inet-vpn unicast
set protocols mpls icmp-tunneling
set protocols mpls label-switched-path pe1-abr to 10.1.255.4
set protocols mpls label-switched-path pe1-abr entropy-label
set protocols mpls interface ge-0/0/2.0
set protocols mpls interface lo0.0
set protocols ospf traffic-engineering
set protocols ospf area 0.0.0.0 interface ge-0/0/2.0
set protocols ospf area 0.0.0.0 interface lo0.0 passive
set protocols rsvp interface ge-0/0/2.0
set protocols rsvp interface lo0.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">路由器 P1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>set interfaces ge-0/0/0 unit 0 family inet address 10.1.23.2/30
set interfaces ge-0/0/0 unit 0 family mpls
set interfaces ge-0/0/2 unit 0 family inet address 10.1.34.1/30
set interfaces ge-0/0/2 unit 0 family mpls
set interfaces lo0 unit 0 family inet address 10.1.255.3/32 primary
set routing-options router-id 10.1.255.3
set protocols mpls icmp-tunneling
set protocols mpls interface ge-0/0/0.0
set protocols mpls interface lo0.0
set protocols mpls interface ge-0/0/2.0
set protocols ospf traffic-engineering
set protocols ospf area 0.0.0.0 interface lo0.0 passive
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set protocols ospf area 0.0.0.0 interface ge-0/0/2.0
set protocols rsvp interface ge-0/0/0.0
set protocols rsvp interface lo0.0
set protocols rsvp interface ge-0/0/2.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">路由器 ABR</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>set interfaces ge-0/0/0 unit 0 family inet address 10.1.34.2/30
set interfaces ge-0/0/0 unit 0 family mpls
set interfaces ge-0/0/2 unit 0 family inet address 10.1.45.1/30
set interfaces ge-0/0/2 unit 0 family mpls
set interfaces ge-0/0/3 unit 0 family inet address 10.1.45.5/30
set interfaces ge-0/0/3 unit 0 family mpls
set interfaces lo0 unit 0 family inet address 10.1.255.4/32 primary
set forwarding-options hash-key family mpls label-1
set forwarding-options hash-key family mpls label-2
set forwarding-options hash-key family mpls label-3
set forwarding-options enhanced-hash-key family mpls no-payload
set policy-options policy-statement pplb then load-balance per-packet
set policy-options policy-statement send-inet3-pe1 from route-filter 10.1.255.2/32 exact
set policy-options policy-statement send-inet3-pe1 then accept
set policy-options policy-statement send-inet3-pe2 from route-filter 10.1.255.6/32 exact
set policy-options policy-statement send-inet3-pe2 then accept
set routing-options router-id 10.1.255.4
set routing-options autonomous-system 65000
set routing-options forwarding-table export pplb
set protocols bgp group ibgp type internal
set protocols bgp group ibgp local-address 10.1.255.4
set protocols bgp group ibgp family inet labeled-unicast rib inet.3
set protocols bgp group ibgp neighbor 10.1.255.2 export send-inet3-pe2
set protocols bgp group ibgp neighbor 10.1.255.6 export send-inet3-pe1
set protocols mpls icmp-tunneling
set protocols mpls label-switched-path abr-pe1 to 10.1.255.2
set protocols mpls label-switched-path abr-pe1 entropy-label
set protocols mpls label-switched-path abr-pe2 to 10.1.255.6
set protocols mpls label-switched-path abr-pe2 entropy-label
set protocols mpls label-switched-path abr-pe2 primary to-r6-1
set protocols mpls label-switched-path abr-pe2-2 to 10.1.255.6
set protocols mpls label-switched-path abr-pe2-2 entropy-label
set protocols mpls label-switched-path abr-pe2-2 primary to-r6-2
set protocols mpls path to-r6-1 10.1.45.2 strict
set protocols mpls path to-r6-1 10.1.56.2 strict
set protocols mpls path to-r6-2 10.1.45.6 strict
set protocols mpls path to-r6-2 10.1.56.6 strict
set protocols mpls interface lo0.0
set protocols mpls interface ge-0/0/0.0
set protocols mpls interface ge-0/0/2.0
set protocols mpls interface ge-0/0/3.0
set protocols ospf traffic-engineering
set protocols ospf area 0.0.0.0 interface lo0.0 passive
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set protocols ospf area 0.0.0.1 interface ge-0/0/2.0
set protocols ospf area 0.0.0.1 interface ge-0/0/3.0
set protocols rsvp interface lo0.0
set protocols rsvp interface ge-0/0/0.0
set protocols rsvp interface ge-0/0/2.0
set protocols rsvp interface ge-0/0/3.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">路由器 P2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>set interfaces ge-0/0/0 unit 0 family inet address 10.1.45.2/30
set interfaces ge-0/0/0 unit 0 family mpls
set interfaces ge-0/0/1 unit 0 family inet address 10.1.45.6/30
set interfaces ge-0/0/1 unit 0 family mpls
set interfaces ge-0/0/2 unit 0 family inet address 10.1.56.1/30
set interfaces ge-0/0/2 unit 0 family mpls
set interfaces ge-0/0/3 unit 0 family inet address 10.1.56.5/30
set interfaces ge-0/0/3 unit 0 family mpls
set interfaces lo0 unit 0 family inet address 10.1.255.5/32 primary
set forwarding-options hash-key family mpls label-1
set forwarding-options hash-key family mpls label-2
set forwarding-options hash-key family mpls label-3
set forwarding-options enhanced-hash-key family mpls no-payload
set policy-options policy-statement pplb then load-balance per-packet
set routing-options router-id 10.1.255.5
set routing-options forwarding-table export pplb
set protocols mpls icmp-tunneling
set protocols mpls interface ge-0/0/2.0
set protocols mpls interface lo0.0
set protocols mpls interface ge-0/0/0.0
set protocols mpls interface ge-0/0/1.0
set protocols mpls interface ge-0/0/3.0
set protocols ospf traffic-engineering
set protocols ospf area 0.0.0.1 interface lo0.0 passive
set protocols ospf area 0.0.0.1 interface ge-0/0/2.0
set protocols ospf area 0.0.0.1 interface ge-0/0/0.0
set protocols ospf area 0.0.0.1 interface ge-0/0/1.0
set protocols ospf area 0.0.0.1 interface ge-0/0/3.0
set protocols rsvp interface ge-0/0/2.0
set protocols rsvp interface lo0.0
set protocols rsvp interface ge-0/0/0.0
set protocols rsvp interface ge-0/0/1.0
set protocols rsvp interface ge-0/0/3.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">路由器 PE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>set interfaces ge-0/0/0 unit 0 family inet address 10.1.56.2/30
set interfaces ge-0/0/0 unit 0 family mpls
set interfaces ge-0/0/1 unit 0 family inet address 10.1.56.6/30
set interfaces ge-0/0/1 unit 0 family mpls
set interfaces ge-0/0/2 unit 0 family inet address 172.16.67.2/30
set interfaces lo0 unit 0 family inet address 10.1.255.6/32 primary
set interfaces lo0 unit 1 family inet address 10.1.255.66/32
set forwarding-options hash-key family mpls label-1
set forwarding-options hash-key family mpls label-2
set forwarding-options hash-key family mpls label-3
set forwarding-options enhanced-hash-key family mpls no-payload
set policy-options policy-statement bgp-to-ospf from protocol bgp
set policy-options policy-statement bgp-to-ospf then accept
set policy-options policy-statement pplb then load-balance per-packet
set routing-instances VPN-l3vpn instance-type vrf
set routing-instances VPN-l3vpn protocols ospf area 0.0.0.0 interface ge-0/0/2.0
set routing-instances VPN-l3vpn protocols ospf area 0.0.0.0 interface lo0.1 passive
set routing-instances VPN-l3vpn protocols ospf export bgp-to-ospf
set routing-instances VPN-l3vpn interface ge-0/0/2.0
set routing-instances VPN-l3vpn interface lo0.1
set routing-instances VPN-l3vpn route-distinguisher 10.1.255.6:1
set routing-instances VPN-l3vpn vrf-target target:65000:1
set routing-options router-id 10.1.255.6
set routing-options autonomous-system 65000
set routing-options forwarding-table export pplb
set protocols bgp group ibgp type internal
set protocols bgp group ibgp local-address 10.1.255.6
set protocols bgp group ibgp family inet labeled-unicast entropy-label
set protocols bgp group ibgp neighbor 10.1.255.4 family inet labeled-unicast rib inet.3
set protocols bgp group ibgp neighbor 10.1.255.2 family inet-vpn unicast
set protocols mpls icmp-tunneling
set protocols mpls label-switched-path pe2-abr to 10.1.255.4
set protocols mpls label-switched-path pe2-abr entropy-label
set protocols mpls interface ge-0/0/0.0
set protocols mpls interface lo0.0
set protocols mpls interface ge-0/0/1.0
set protocols ospf traffic-engineering
set protocols ospf area 0.0.0.1 interface ge-0/0/0.0
set protocols ospf area 0.0.0.1 interface lo0.0 passive
set protocols ospf area 0.0.0.1 interface ge-0/0/1.0
set protocols rsvp interface ge-0/0/0.0
set protocols rsvp interface lo0.0
set protocols rsvp interface ge-0/0/1.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">路由器 CE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>set interfaces ge-0/0/0 unit 0 family inet address 172.16.67.1/30
set interfaces lo0 unit 0 family inet address 172.16.255.7/32 primary
set interfaces lo0 unit 0 family inet address 192.168.255.7/32
set routing-options router-id 172.16.255.7
set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
set protocols ospf area 0.0.0.0 interface lo0.0 passive</pre></div> <!----></div></div> <div id="d42e179__d77004e8587" class="section"><h4 class="title sectiontitle">配置路由器 PE1</h4> <div id="d42e179__d77004e8592" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 PE1：</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">修改相应的接口名称、地址和其他参数后，对路由器 PE2 重复此过程。</p></div></div></div><ol class="ol"><li class="li"><p class="p">配置物理接口。 确保在面向核心的接口上进行配置 <code class="ph codeph">family mpls</code> 。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set interfaces ge-0/0/0 unit 0 family inet address 172.16.12.2/30
user@PE1# set interfaces ge-0/0/2 unit 0 family inet address 10.1.23.1/30
user@PE1# set interfaces ge-0/0/2 unit 0 family mpls</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路接口。 辅助环回是可选的，将在后面的步骤中在路由实例下应用。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set interfaces lo0 unit 0 family inet address 10.1.255.2/32 primary
user@PE1# set interfaces lo0 unit 1 family inet address 10.1.255.22/32</pre></div> <!----></div></li> <li class="li"><p class="p">配置 路由器 ID 和自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set routing-options router-id 10.1.255.2
user@PE1# set routing-options autonomous-system 65000</pre></div> <!----></div></li> <li class="li"><p class="p">配置 OSPF 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set protocols ospf traffic-engineering
user@PE1# set protocols ospf area 0.0.0.0 interface ge-0/0/2.0
user@PE1# set protocols ospf area 0.0.0.0 interface lo0.0 passive</pre></div> <!----></div></li> <li class="li"><p class="p">配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set protocols rsvp interface ge-0/0/2.0
user@PE1# set protocols rsvp interface lo0.0</pre></div> <!----></div></li> <li class="li"><p class="p">配置 MPLS 协议和面向 ABR 的 LSP。<code class="ph codeph">entropy-label</code>包括将熵标签添加到 MPLS 标签堆栈的选项。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@PE1# set protocols mpls icmp-tunneling
user@PE1# set protocols mpls label-switched-path pe1-abr to 10.1.255.4
user@PE1# set protocols mpls label-switched-path pe1-abr entropy-label
user@PE1# set protocols mpls interface ge-0/0/2.0
user@PE1# set protocols mpls interface lo0.0</pre></div> <!----></div></li> <li class="li"><p class="p">使用 <code class="ph codeph">family inet labeled-unicast</code> ABR 对等<code class="ph codeph">family                                 inet-vpn</code>和 PE2 对等配置 IBGP。为 BGP 标记的单播启用熵标签功能。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set protocols bgp group ibgp type internal
user@PE1# set protocols bgp group ibgp local-address 10.1.255.2
user@PE1# set protocols bgp group ibgp family inet labeled-unicast entropy-label
user@PE1# set protocols bgp group ibgp neighbor 10.1.255.4 family inet labeled-unicast rib inet.3
user@PE1# set protocols bgp group ibgp neighbor 10.1.255.6 family inet-vpn unicast</pre></div> <!----></div></li> <li class="li"><p class="p">定义用于将 BGP VPN 路由导出到 OSPF 的策略。 该策略在路由实例中的 OSPF 下应用。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set policy-options policy-statement bgp-to-ospf from protocol bgp
user@PE1# set policy-options policy-statement bgp-to-ospf then accept</pre></div> <!----></div></li> <li class="li"><p class="p">定义 负载平衡 策略 并将其应用到 <code class="ph codeph">routing-options                                     forwarding-table</code>. PE1 在示例中只有一条路径，因此不需要此步骤，但对于此示例，我们将在所有设备上应用相同的负载平衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set policy-options policy-statement pplb then load-balance per-packet
user@PE1# set routing-options forwarding-table export pplb</pre></div> <!----></div></li> <li class="li"><p class="p">配置第 3 层 VPN 路由实例。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set routing-instances VPN-l3vpn instance-type vrf</pre></div> <!----></div></li> <li class="li"><p class="p">将接口分配给路由实例。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set routing-instances VPN-l3vpn interface ge-0/0/0.0
user@PE1# set routing-instances VPN-l3vpn interface lo0.1</pre></div> <!----></div></li> <li class="li"><p class="p">为 路由实例配置路由识别符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set routing-instances VPN-l3vpn route-distinguisher 10.1.255.2:1</pre></div> <!----></div></li> <li class="li"><p class="p">为 路由实例配置 VPN 路由和转发 （VRF） 目标。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set routing-instances VPN-l3vpn vrf-target target:65000:1</pre></div> <!----></div></li> <li class="li"><p class="p">在路由实例下配置协议 OSPF，并应用之前配置 <code class="ph codeph">bgp-to-ospf</code> 的策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# set routing-instances VPN-l3vpn protocols ospf area 0.0.0.0 interface ge-0/0/0.0
user@PE1# set routing-instances VPN-l3vpn protocols ospf area 0.0.0.0 interface lo0.1 passive
user@PE1# set routing-instances VPN-l3vpn protocols ospf export bgp-to-ospf</pre></div> <!----></div></li></ol></div></div> <div id="d42e179__d77004e8931" class="section"><h4 class="title sectiontitle">配置路由器 P1</h4> <div id="d42e179__d77004e8936" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 P1：</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">修改相应的接口名称、地址和其他参数后，对路由器 P2 重复此过程。</p></div></div></div><ol class="ol"><li class="li"><p class="p">配置物理接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set interfaces ge-0/0/0 unit 0 family inet address 10.1.23.2/30
user@P1# set interfaces ge-0/0/0 unit 0 family mpls
user@P1# set interfaces ge-0/0/2 unit 0 family inet address 10.1.34.1/30
user@P1# set interfaces ge-0/0/2 unit 0 family mpls</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set interfaces lo0 unit 0 family inet address 10.1.255.3/32 primary</pre></div> <!----></div></li> <li class="li"><p class="p">配置 路由器 ID。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set routing-options router-id 10.1.255.3</pre></div> <!----></div></li> <li class="li"><p class="p">配置 OSPF 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set protocols ospf traffic-engineering
user@P1# set protocols ospf area 0.0.0.0 interface lo0.0 passive
user@P1# set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
user@P1# set protocols ospf area 0.0.0.0 interface ge-0/0/2.0</pre></div> <!----></div></li> <li class="li"><p class="p">配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set protocols rsvp interface ge-0/0/0.0
user@P1# set protocols rsvp interface lo0.0
user@P1# set protocols rsvp interface ge-0/0/2.0</pre></div> <!----></div></li> <li class="li"><p class="p">配置 MPLS 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set protocols mpls icmp-tunneling
user@P1# set protocols mpls interface ge-0/0/0.0
user@P1# set protocols mpls interface lo0.0
user@P1# set protocols mpls interface ge-0/0/2.0</pre></div> <!----></div></li></ol></div></div> <div id="d42e179__d77004e9064" class="section"><h4 class="title sectiontitle">配置路由器 ABR</h4> <div id="d42e179__d77004e9069" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 ABR：</p> <ol class="ol"><li class="li"><p class="p">配置物理接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set interfaces ge-0/0/0 unit 0 family inet address 10.1.34.2/30
user@ABR# set interfaces ge-0/0/0 unit 0 family mpls
user@ABR# set interfaces ge-0/0/2 unit 0 family inet address 10.1.45.1/30
user@ABR# set interfaces ge-0/0/2 unit 0 family mpls
user@ABR# set interfaces ge-0/0/3 unit 0 family inet address 10.1.45.5/30
user@ABR# set interfaces ge-0/0/3 unit 0 family mpls</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set interfaces lo0 unit 0 family inet address 10.1.255.4/32 primary</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由器用于将数据包散列到其目标以进行负载平衡的 MPLS 标签。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set forwarding-options hash-key family mpls label-1
user@ABR# set forwarding-options hash-key family mpls label-2
user@ABR# set forwarding-options hash-key family mpls label-3
user@ABR# set forwarding-options enhanced-hash-key family mpls no-payload</pre></div> <!----></div></li> <li class="li"><p class="p">配置 路由器 ID 和自治系统编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set routing-options router-id 10.1.255.4
user@ABR# set routing-options autonomous-system 65000</pre></div> <!----></div></li> <li class="li"><p class="p">配置 OSPF 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set protocols ospf traffic-engineering
user@ABR# set protocols ospf area 0.0.0.0 interface lo0.0 passive
user@ABR# set protocols ospf area 0.0.0.0 interface ge-0/0/0.0
user@ABR# set protocols ospf area 0.0.0.1 interface ge-0/0/2.0
user@ABR# set protocols ospf area 0.0.0.1 interface ge-0/0/3.0</pre></div> <!----></div></li> <li class="li"><p class="p">配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set protocols rsvp interface lo0.0
user@ABR# set protocols rsvp interface ge-0/0/0.0
user@ABR# set protocols rsvp interface ge-0/0/2.0
user@ABR# set protocols rsvp interface ge-0/0/3.0</pre></div> <!----></div></li> <li class="li"><p class="p">配置 MPLS 协议并指定面向 PE1 和 PE2 的 LSP。 针对 PE2 创建了两个 LSP，以便对流量进行负载均衡，以显示使用了不同的 LSP 和接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit]
user@ABR# set protocols mpls icmp-tunneling
user@ABR# set protocols mpls label-switched-path abr-pe1 to 10.1.255.2
user@ABR# set protocols mpls label-switched-path abr-pe1 entropy-label
user@ABR# set protocols mpls label-switched-path abr-pe2 to 10.1.255.6
user@ABR# set protocols mpls label-switched-path abr-pe2 entropy-label
user@ABR# set protocols mpls label-switched-path abr-pe2 primary to-r6-1
user@ABR# set protocols mpls label-switched-path abr-pe2-2 to 10.1.255.6
user@ABR# set protocols mpls label-switched-path abr-pe2-2 entropy-label
user@ABR# set protocols mpls label-switched-path abr-pe2-2 primary to-r6-2
user@ABR# set protocols mpls path to-r6-1 10.1.45.2 strict
user@ABR# set protocols mpls path to-r6-1 10.1.56.2 strict
user@ABR# set protocols mpls path to-r6-2 10.1.45.6 strict
user@ABR# set protocols mpls path to-r6-2 10.1.56.6 strict
user@ABR# set protocols mpls interface lo0.0
user@ABR# set protocols mpls interface ge-0/0/0.0
user@ABR# set protocols mpls interface ge-0/0/2.0
user@ABR# set protocols mpls interface ge-0/0/3.0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">使用 将 <code class="ph codeph">family inet                                 labeled-unicast</code>IBGP 同时配置为 PE1 和 PE2。 应用策略以通告来自 PE1 和 PE2 的 inet.3 环路路由。我们将在下一步中显示策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set protocols bgp group ibgp type internal
user@ABR# set protocols bgp group ibgp local-address 10.1.255.4
user@ABR# set protocols bgp group ibgp family inet labeled-unicast rib inet.3
user@ABR# set protocols bgp group ibgp neighbor 10.1.255.2 export send-inet3-pe2
user@ABR# set protocols bgp group ibgp neighbor 10.1.255.6 export send-inet3-pe1</pre></div> <!----></div></li> <li class="li"><p class="p">在 PE1 和 PE2 的环路地址上定义要匹配的策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set policy-options policy-statement send-inet3-pe1 from route-filter 10.1.255.2/32 exact
user@ABR# set policy-options policy-statement send-inet3-pe1 then accept
user@ABR# set policy-options policy-statement send-inet3-pe2 from route-filter 10.1.255.6/32 exact
user@ABR# set policy-options policy-statement send-inet3-pe2 then accept</pre></div> <!----></div></li> <li class="li"><p class="p">定义负载平衡策略，并在 .<code class="ph codeph">routing-options forwarding-table</code></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@ABR# set policy-options policy-statement pplb then load-balance per-packet
user@ABR# set routing-options forwarding-table export pplb</pre></div> <!----></div></li></ol></div></div> <div id="d42e179__d42e956" class="section"><h4 class="title sectiontitle">（可选）端口镜像配置</h4> <p class="p">要查看应用的熵标签，您可以捕获流量。在此示例中，在 P1 上面向 PE1 的接口上应用过滤器，以捕获 CE1 到 CE2 流量。流量将发送到主机 1 进行查看。捕获流量的方法与我们在此示例中使用的方法不同。有关详细信息，请参见 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/qfx3000-g-deployment/topics/topic-map/port-mirroring-qfx-series-understanding.html" class="xref">了解端口镜像和分析器</a>。</p> <div id="d42e179__d42e966" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅 <a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">CLI 用户指南</a>中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置路由器 P1：</p> <ol id="d42e179__d42e979" class="ol"><li class="li"><p class="p">配置接口。在此示例中，我们将连接到 Host1 的接口放在桥接域中，并创建一个 IRB 接口来验证与 Host1 的连接。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set interfaces ge-0/0/4 unit 0 family bridge interface-mode access
user@P1# set interfaces ge-0/0/4 unit 0 family bridge vlan-id 100
user@P1# set interfaces irb unit 0 family inet address 10.1.31.1/30</pre></div> <!----></div></li> <li class="li"><p class="p">配置桥接域。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set bridge-domains v100 vlan-id 100
user@P1# set bridge-domains v100 routing-interface irb.0</pre></div> <!----></div></li> <li class="li"><p class="p">配置过滤器以捕获流量。在本例中，我们将捕获所有流量。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set firewall family any filter test term 1 then count test
user@P1# set firewall family any filter test term 1 then port-mirror
user@P1# set firewall family any filter test term 1 then accept</pre></div> <!----></div></li> <li class="li"><p class="p">将过滤器应用于面向 PE1 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set interfaces ge-0/0/0 unit 0 filter input test</pre></div> <!----></div></li> <li class="li"><p class="p">配置端口镜像选项。在本例中，我们将镜像所有流量并将其发送到连接到接口 ge-0/0/4 的 Host1。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@P1# set forwarding-options port-mirroring input rate 1
user@P1# set forwarding-options port-mirroring family any output interface ge-0/0/4.0</pre></div> <!----></div></li></ol></div></div></div></div> <div aria-labelledby="ariaid-title56" id="d42e1023" class="topic concept nested2"><h3 id="ariaid-title56" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1029" class="xref">验证是否正在播发熵标签功能</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1106" class="xref">验证路由器 PE1 是否接收熵标签通告</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1190" class="xref">在 ABR 到 PE2 上验证 ECMP</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1282" class="xref">在 PE1 上显示通往 CE2 的路线</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1319" class="xref">从 CE1 执行 Ping CE2</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1356" class="xref">验证负载平衡</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1399" class="xref">验证熵标签</a></li></ul> <div id="d42e1023__d42e1029" class="section"><h4 class="title sectiontitle">验证是否正在播发熵标签功能</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9350" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9364" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9406" class="xref">意义</a></li></ul> <div id="d42e1023__d77004e9350" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证熵标注功能路径属性是否正在从 ABR 播 发到 PE1 ，以便路由到 PE2。</p></div> <div id="d42e1023__d77004e9364" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下， <kbd class="ph userinput">show                             route advertising-protocol bgp 10.1.255.2                             detail</kbd> 在路由器 ABR 上运行命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@ABR&gt; <kbd class="ph userinput">show route advertising-protocol bgp 10.1.255.2 detail</kbd>

inet.3: 2 destinations, 2 routes (2 active, 0 holddown, 0 hidden)
* 10.1.255.6/32 (1 entry, 1 announced)
 BGP group ibgp type Internal
     Route Label: <kbd class="ph userinput">299952</kbd>
     Nexthop: Self
     Flags: Nexthop Change
     MED: 2
     Localpref: 4294967294
     AS path: [65000] I
     <kbd class="ph userinput">Entropy label capable</kbd>

</pre></div> <!----></div></div> <div id="d42e1023__d77004e9406" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示 IP 地址 为 10.1.255.6 的主机 PE2 具有熵标签功能和 使用的路由标签。主机正在向其 BGP 邻居播发熵标签功能。</p></div></div> <div id="d42e1023__d42e1106" class="section"><h4 class="title sectiontitle">验证路由器 PE1 是否接收熵标签通告</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9431" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9449" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9492" class="xref">意义</a></li></ul> <div id="d42e1023__d77004e9431" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证路由器 PE1 是否收到路由器 PE2 的熵标签播发 。</p></div> <div id="d42e1023__d77004e9449" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下， <kbd class="ph userinput">show                             route protocol bgp 10.1.255.6                             extensive</kbd> 在路由器 PE1 上运行命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <kbd class="ph userinput">show route protocol bgp 10.1.255.6 extensive</kbd>

inet.0: 19 destinations, 19 routes (19 active, 0 holddown, 0 hidden)

inet.3: 2 destinations, 2 routes (2 active, 0 holddown, 0 hidden)
10.1.255.6/32 (1 entry, 1 announced)
        *BGP    Preference: 170/1
                Next hop type: Indirect, Next hop index: 0
                Address: 0x7b3ffd4
                Next-hop reference count: 2, key opaque handle: 0x0, non-key opaque handle: 0x0
                Source: 10.1.255.4
                Next hop type: Router, Next hop index: 0
                Next hop: 10.1.23.2 via ge-0/0/2.0, selected
                Label-switched-path pe1-abr
                Label operation: Push 299952, Push 299808(top)
                Label TTL action: prop-ttl, prop-ttl(top)
                Load balance label: Label 299952: <kbd class="ph userinput">Entropy label</kbd>; Label 299808: None; 
                Label element ptr: 0x93d6bf8
                Label parent element ptr: 0x93d6c20
                Label element references: 3
                Label element child references: 2
                Label element lsp id: 0
                Session Id: 0
                Protocol next hop: 10.1.255.4
                Label operation: Push 299952
                Label TTL action: prop-ttl
                Load balance label: Label 299952: <kbd class="ph userinput">Entropy label</kbd>; 
                Indirect next hop: 0x758c05c - INH Session ID: 0
                State: &lt;Active Int Ext&gt;
                Local AS: 65000 Peer AS: 65000
                Age: 1:33:11    Metric: 2       Metric2: 2 
                Validation State: unverified 
                Task: BGP_65000.10.1.255.4
                Announcement bits (2): 3-Resolve tree 1 4-Resolve_IGP_FRR task 
                AS path: I 
                Accepted
                Route Label: 299952
                Localpref: 4294967294
                Router ID: 10.1.255.4
                Session-IDs associated:
                Session-id: 324 Version: 3
                Thread: junos-main 
                Indirect next hops: 1
                        Protocol next hop: 10.1.255.4 Metric: 2 ResolvState: Resolved
                        Label operation: Push 299952
                        Label TTL action: prop-ttl
                        Load balance label: Label 299952: <kbd class="ph userinput">Entropy label</kbd>; 
                        Indirect next hop: 0x758c05c - INH Session ID: 0
                        Indirect path forwarding next hops: 1
                                Next hop type: Router
                                Next hop: 10.1.23.2 via ge-0/0/2.0
                                Session Id: 0
                                10.1.255.4/32 Originating RIB: inet.3
                                  Metric: 2 Node path count: 1
                                  Forwarding nexthops: 1
                                        Next hop type: Router
                                        Next hop: 10.1.23.2 via ge-0/0/2.0
                                        Session Id: 0</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d42e1023__d77004e9492" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">路由器 PE1 从其 BGP 邻居接收熵标签功能通告。</p></div></div> <div id="d42e1023__d42e1190" class="section"><h4 class="title sectiontitle">在 ABR 到 PE2 上验证 ECMP</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9514" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9525" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d77004e9579" class="xref">意义</a></li></ul> <div id="d42e1023__d77004e9514" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证 到 PE2 的等价多路径 （ECMP）。</p></div> <div id="d42e1023__d77004e9525" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，<kbd class="ph userinput">show                             route table mpls.0</kbd> 在路由器 ABR 上运行和<kbd class="ph userinput">show route forwarding-table label                         &lt;label&gt;</kbd>命令s。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@ABR&gt; <kbd class="ph userinput">show route table mpls.0</kbd>

mpls.0: 6 destinations, 6 routes (6 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

0                  *[MPLS/0] 2w1d 23:02:11, metric 1
                       Receive
1                  *[MPLS/0] 2w1d 23:02:11, metric 1
                       Receive
2                  *[MPLS/0] 2w1d 23:02:11, metric 1
                       Receive
13                 *[MPLS/0] 2w1d 23:02:11, metric 1
                       Receive
299936             *[VPN/170] 2d 21:47:02
                    &gt;  to 10.1.34.1 via ge-0/0/0.0, label-switched-path abr-pe1
<kbd class="ph userinput">299952</kbd>             *[VPN/170] 2d 21:47:02
                    &gt;  to 10.1.45.2 via ge-0/0/2.0, label-switched-path abr-pe2
                       to 10.1.45.6 via ge-0/0/3.0, label-switched-path abr-pe2-2

ruser@ABR&gt; <kbd class="ph userinput">show route forwarding-table label 299952</kbd> 
Routing table: default.mpls
MPLS:
Destination        Type RtRef Next hop           Type Index    NhRef Netif
<kbd class="ph userinput">299952</kbd>             user     0                    ulst  1048575     2
                              10.1.45.2         Swap 299824      516     2 ge-0/0/2.0
                              10.1.45.6         Swap 299840      572     2 ge-0/0/3.0
...</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d42e1023__d77004e9579" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示 用于 BGP 标记的 单播 路由的标签的 ECMP。</p></div></div> <div id="d42e1023__d42e1282" class="section"><h4 class="title sectiontitle">在 PE1 上显示通往 CE2 的路线</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1287" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1293" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1313" class="xref">意义</a></li></ul> <div id="d42e1023__d42e1287" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证到 CE2 的路由。</p></div> <div id="d42e1023__d42e1293" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，在路由器 PE1 上运行 <kbd class="ph userinput">show route table VPN-l3vpn.inet.0                             172.16.255.7 extensive</kbd> 和 <kbd class="ph userinput">show route table                             VPN-l3vpn.inet.0 192.168.255.7 extensive</kbd>命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <kbd class="ph userinput">show route table VPN-l3vpn.inet.0 172.16.255.7 extensive</kbd>

VPN-l3vpn.inet.0: 10 destinations, 10 routes (10 active, 0 holddown, 0 hidden)
172.16.255.7/32 (1 entry, 1 announced)
TSI:
OSPF area : 0.0.0.0, LSA ID : 172.16.255.7, LSA type : Summary
KRT in-kernel 172.16.255.7/32 -&gt; {indirect(1048574)}
        *BGP    Preference: 170/-101
                Route Distinguisher: 10.1.255.6:1
                Next hop type: Indirect, Next hop index: 0
                Address: 0x7b40434
                Next-hop reference count: 9, key opaque handle: 0x0, non-key opaque handle: 0x0
                Source: 10.1.255.6
                Next hop type: Router, Next hop index: 515
                Next hop: 10.1.23.2 via ge-0/0/2.0, selected
                Label-switched-path pe1-abr
                Label operation: Push 299824, Push 299952, Push 299808(top)
                Label TTL action: prop-ttl, prop-ttl, prop-ttl(top)
                Load balance label: Label 299824: None; Label 299952: Entropy label; Label 299808: None; 
                Label element ptr: 0x93d6c98
                Label parent element ptr: 0x93d6bf8
                Label element references: 1
                Label element child references: 0
                Label element lsp id: 0
                Session Id: 140
                Protocol next hop: 10.1.255.6
                Label operation: Push 299824
                Label TTL action: prop-ttl
                Load balance label: Label 299824: None;
...

user@PE1&gt; <kbd class="ph userinput">show route table VPN-l3vpn.inet.0 192.168.255.7 extensive</kbd> 
VPN-l3vpn.inet.0: 10 destinations, 10 routes (10 active, 0 holddown, 0 hidden)
192.168.255.7/32 (1 entry, 1 announced)
TSI:
OSPF area : 0.0.0.0, LSA ID : 192.168.255.7, LSA type : Summary
KRT in-kernel 192.168.255.7/32 -&gt; {indirect(1048574)}
        *BGP    Preference: 170/-101
                Route Distinguisher: 10.1.255.6:1
                Next hop type: Indirect, Next hop index: 0
                Address: 0x7b40434
                Next-hop reference count: 9, key opaque handle: 0x0, non-key opaque handle: 0x0
                Source: 10.1.255.6
                Next hop type: Router, Next hop index: 515
                Next hop: 10.1.23.2 via ge-0/0/2.0, selected
                Label-switched-path pe1-abr
                Label operation: Push 299824, Push 299952, Push 299808(top)
                Label TTL action: prop-ttl, prop-ttl, prop-ttl(top)
                Load balance label: Label 299824: None; Label 299952: Entropy label; Label 299808: None; 
                Label element ptr: 0x93d6c98
                Label parent element ptr: 0x93d6bf8
                Label element references: 1
                Label element child references: 0
                Label element lsp id: 0
                Session Id: 140
                Protocol next hop: 10.1.255.6
                Label operation: Push 299824
                Label TTL action: prop-ttl
                Load balance label: Label 299824: None;
...</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d42e1023__d42e1313" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示两个路由使用相同的标注。</p></div></div> <div id="d42e1023__d42e1319" class="section"><h4 class="title sectiontitle">从 CE1 执行 Ping CE2</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1324" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1330" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1350" class="xref">意义</a></li></ul> <div id="d42e1023__d42e1324" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证连接并用于验证负载平衡。</p></div> <div id="d42e1023__d42e1330" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，在路由器 PE1 上运行 <kbd class="ph userinput">ping 172.16.255.7 source                             172.16.12.1 rapid count 100</kbd> 和 <kbd class="ph userinput">ping                             192.168.255.7 source 192.168.255.1 rapid count 200</kbd>命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@CE1&gt; <kbd class="ph userinput">ping 172.16.255.7 source 172.16.12.1 rapid count 100</kbd>
PING 172.16.255.7 (172.16.255.7): 56 data bytes
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
--- 172.16.255.7 ping statistics ---
100 packets transmitted, 100 packets received, 0% packet loss
round-trip min/avg/max/stddev = 5.369/6.070/8.828/0.612 ms

user@CE1&gt; <kbd class="ph userinput">ping 192.168.255.7 source 192.168.255.1 rapid count 200</kbd> 
PING 192.168.255.7 (192.168.255.7): 56 data bytes
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
--- 192.168.255.7 ping statistics ---
200 packets transmitted, 200 packets received, 0% packet loss
round-trip min/avg/max/stddev = 5.086/5.994/10.665/0.649 ms

</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d42e1023__d42e1350" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示 ping 成功。</p></div></div> <div id="d42e1023__d42e1356" class="section"><h4 class="title sectiontitle">验证负载平衡</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1361" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1367" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1387" class="xref">意义</a></li></ul> <div id="d42e1023__d42e1361" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证负载平衡。</p></div> <div id="d42e1023__d42e1367" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，在 ABR 上运行 <kbd class="ph userinput">show mpls lsp ingress                             statistics</kbd> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@ABR&gt; <kbd class="ph userinput">show mpls lsp ingress statistics</kbd>
Ingress LSP: 3 sessions
To              From            State     Packets            Bytes LSPname
10.1.255.2      10.1.255.4      Up            300            30000 abr-pe1
10.1.255.6      10.1.255.4      Up            <kbd class="ph userinput">200</kbd>            20000 abr-pe2
10.1.255.6      10.1.255.4      Up            <kbd class="ph userinput">100</kbd>            10000 abr-pe2-2
Total 3 displayed, Up 3, Down 0

</pre></div> <!----></div></div> <div id="d42e1023__d42e1387" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示上一个命令中使用 LSP <kbd class="ph userinput">abr-pe2-2</kbd> 的第一个 ping 和第二个使用 LSP <kbd class="ph userinput">abr-pe2</kbd>的 ping 。</p></div></div> <div id="d42e1023__d42e1399" class="section"><h4 class="title sectiontitle">验证熵标签</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1404" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1410" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d42e1023__d42e1430" class="xref">意义</a></li></ul> <div id="d42e1023__d42e1404" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证所使用的 ping 之间的熵标签是否不同。</p></div> <div id="d42e1023__d42e1410" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在主机 1 上，运行 <kbd class="ph userinput">tcpdump -i eth1 -n</kbd>.</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@Host1# <kbd class="ph userinput">tcpdump -i eth1 -n</kbd>
...
13:42:31.993274 MPLS (label 299808, exp 0, ttl 63) (label 299952, exp 0, ttl 63) (label 7, exp 0, ttl 63) (label <kbd class="ph userinput">1012776</kbd>, exp 0, ttl 0) 
(label 299824, exp 0, [S], ttl 63) IP 172.16.12.1 &gt; 172.16.255.7: ICMP echo request, id 32813, seq 9, length 64
...
13:43:19.570260 MPLS (label 299808, exp 0, ttl 63) (label 299952, exp 0, ttl 63) (label 7, exp 0, ttl 63) (label <kbd class="ph userinput">691092</kbd>, exp 0, ttl 0) 
(label 299824, exp 0, [S], ttl 63) IP 192.168.255.1 &gt; 192.168.255.7: ICMP echo request, id 46381, seq 9, length 64
</pre></div> <!----></div></div> <div id="d42e1023__d42e1430" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示两个不同 ping 命令的熵标签的不同值。</p></div></div></div></div></div> <div aria-labelledby="ariaid-title57" xml:lang="zh-CN" lang="zh-CN" id="id-use-case-for-bgp-prefix-independent-convergence-for-inet-inet6-or-labeled-unicast" class="topic concept nested1"><h2 id="ariaid-title57" class="title topictitle2">适用于 inet、inet6 或带标签的单播的 BGP 前缀无关融合用例<a class="bookmarktitle" aria-label="Copy link to this section: 适用于 inet、inet6 或带标签的单播的 BGP 前缀无关融合用例" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><div class="abstract"><p class="p">在路由器发生故障的情况下，BGP 网络可能需要几秒钟到几分钟的时间才能恢复，具体取决于网络大小或路由器性能等参数。在路由器上启用 BGP 前缀独立收敛 （PIC） 功能后，除了计算出的到达目标的最佳路径之外，BGP 还会向数据包转发引擎安装第二最佳路径。当出口路由器在网络中发生故障时，路由器将使用此备份路径，从而大大减少中断时间。您可以启用此功能以减少出口路由器发生故障时的网络停机时间。</p> <p class="p">当网络中出口路由器的可访问性失败时，IGP 会检测到此中断，链路状态会在整个网络中传播此信息，并将该前缀的 BGP 下一跃点播发为无法访问。BGP 会重新评估备用路径，如果有备用路径可用，则会将此备用下一跃点重新安装到数据包转发引擎中。这种出口故障通常会同时影响多个前缀，BGP 必须一次更新所有这些前缀。在入口路由器上，IGP 首先完成最短路径 （SPF） 并更新下一跃点。然后，Junos OS 确定无法访问的前缀，并向协议发出需要更新的信号。BGP 收到通知并更新现在无效的每个前缀的下一跃点。此过程可能会影响连接，并且可能需要几分钟才能从中断中恢复。BGP PIC 可以减少此停机时间，因为数据包转发引擎中已安装备份路径。</p></div> <p class="p">从 Junos OS 15.1 版开始，最初由第 3 层 VPN 路由器支持的 BGP PIC 功能扩展到具有全局表中多个路由的 BGP，例如 inet 和 inet6 单播，以及标记为单播的 inet 和 inet6。在启用了 BGP PIC 的路由器上，Junos OS 会在路由 引擎上安装间接下一跃点的备份路径，并将此路由提供给数据包转发引擎和 IGP。当 IGP 失去对具有一个或多个路由的前缀的可访问性时，它会在更新路由表之前通过一条消息向路由引擎发出信号。路由引擎向数据包转发引擎发出信号，表明间接下一跃点出现故障，必须使用备份路径重新路由流量。即使在 BGP 开始重新计算 BGP 前缀的新下一跃点之前，到受影响目标前缀的路由也会继续使用备份路径。路由器使用此备份路径来减少流量丢失，直到解决通过 BGP 的全局融合问题。</p> <p class="p">发生中断的时间到发出可访问性丧失信号的时间实际上取决于最近路由器的故障检测时间和 IGP 收敛时间。本地路由器检测到中断后，未启用 BGP PIC 功能的路由收敛在很大程度上取决于受影响的前缀数以及由于重新计算每个受影响的前缀而导致的路由器性能。但是，启用 BGP PIC 功能后，即使在 BGP 重新计算受影响前缀的最佳路径之前，路由引擎也会向数据平面发出信号，使其切换到备用下一个最佳路径。因此，流量损失是最小的。即使在转发流量时，也会计算新路由，并将这些新路由向下推送到数据平面。因此，受影响的 BGP 前缀数不会影响从流量中断发生到 BGP 发出可访问性丧失信号所花费的时间点。</p></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/vpn-l3/topics/topic-map/l3-vpns-bgp-pic.html" class="link">为 MPLS 第 3 层 VPN 配置 BGP PIC 边缘</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-bgp-prefix-independent-convergence-for-inet" class="link">示例：为 Inet 配置 BGP 前缀独立收敛</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/vpn-l3/topics/topic-map/l3-vpns-bgp-pic.html" class="link">示例：为 MPLS 第 3 层 VPN 配置 BGP PIC 边缘</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title58" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-bgp-prefix-independent-convergence-for-inet" class="topic task nested1"><h2 id="ariaid-title58" class="title topictitle2">为 Inet 配置 BGP 前缀独立收敛<a class="bookmarktitle" aria-label="Copy link to this section: 为 Inet 配置 BGP 前缀独立收敛" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">在启用了 BGP 前缀独立融合 （PIC） 的路由器上，Junos OS 会在路由引擎上安装间接下一跃点的备份路径，并将此路由提供给数据包转发引擎和 IGP。当 IGP 失去对具有一个或多个路由的前缀的可访问性时，它会在更新路由表之前通过一条消息向路由引擎发出信号。路由引擎向数据包转发引擎发出信号，表明间接下一跃点出现故障，必须使用备份路径重新路由流量。即使在 BGP 开始重新计算 BGP 前缀的新下一跃点之前，到受影响目标前缀的路由也会继续使用备份路径。路由器使用此备份路径来减少流量丢失，直到解决通过 BGP 的全局融合问题。BGP PIC 功能最初在第 3 层 VPN 路由器上受支持，现已扩展到在全局表中具有多个路由的 BGP，例如 inet 和 inet6 单播，以及标记为单播的 inet 和 inet6。 </p></div> <div id="id-configuring-bgp-prefix-independent-convergence-for-inet__d77004e9806" class="section prereq p"><p class="p">准备工作：</p> <ol class="ol"><li class="li"><p class="p">配置设备接口。</p></li> <li class="li"><p class="p">配置 OSPF 或任何其他 IGP 协议。</p></li> <li class="li"><p class="p">配置 MPLS 和 LDP。</p></li> <li class="li"><p class="p">配置 BGP。</p></li></ol></div> <div id="id-configuring-bgp-prefix-independent-convergence-for-inet__d77004e9822" class="section context"><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">BGP PIC 功能仅在具有 MPC 接口的路由器上受支持。</p></div></div></div><div class="admonition 最佳实践"><div class="adicon"><!----></div> <div class="adcontent"><div class="note"><span class="notetitle">最佳实践：</span> <p class="p">在配备模块化端口集中器 （MPC） 的路由器上，启用增强型 IP 网络服务，如下所示：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit chassis network-services]
user@host# <kbd class="ph userinput">set enhanced-ip</kbd>
</pre></div> <!----></div></div></div></div><p class="p">要为 inet 配置 BGP PIC，请执行以下操作：</p></div> <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">为 inet 启用 BGP PIC。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance-name</var> routing-options]
user@host# <kbd class="ph userinput">set protect core</kbd>
</pre></div> <!----></div><div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">BGP PIC 边缘功能仅在具有 MPC 接口的路由器上受支持。</p></div></div></div></div></li> <li class="li step stepexpand"><span class="ph cmd">配置按数据包的负载均衡。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@host# <kbd class="ph userinput">set policy-statement <var class="keyword varname">policy-name</var> then load-balance per-packet</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">将按数据包负载均衡策略应用于从路由表导出到转发表的路由。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options forwarding-table]
user@host# <kbd class="ph userinput">set export <var class="keyword varname">policy-name</var></kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">验证 BGP PIC 是否正常工作。</span><div class="itemgroup info"><p class="p">在操作模式下，输入 <code class="ph codeph">show route extensive</code> 命令：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@host&gt; <kbd class="ph userinput">show route 20.1.1.1 extensive</kbd>
inet.0: 236941 destinations, 630411 routes (236940 active, 0 holddown, 1 hidden)
20.1.1.1/32 (3 entries, 2 announced)
        State: &lt;CalcForwarding&gt; 
TSI: 
KRT in-kernel 20.1.1.1/32 -&gt; {indirect(1048574), indirect(1048575)}         
        @BGP    Preference: 170/-101                 
                Next hop type: Indirect, Next hop index: 0                 
                Address: 0xafd09d0                 
                Next-hop reference count: 236886                 
                Source: 10.255.183.55                 
                Next hop type: Router, Next hop index: 623                 
                Next hop: 100.0.1.2 via ge-2/1/2.0, selected                 
                Session Id: 0x140                 
                Protocol next hop: 10.255.183.55                 
                Indirect next hop: 0xab3b980 1048574 INH Session ID: 0x144                 
                State: &lt;Active Int Ext ProtectionPath ProtectionCand&gt;                 
                Local AS:   100 Peer AS:   100                 
                Age: 1:11       Metric2: 2                  
                Validation State: unverified                  
                Task: BGP_100.10.255.183.55                 
                Announcement bits (1): 6-Resolve tree 2                  
                AS path: 200 400 I                 
                Accepted MultipathUnequal                 
                Localpref: 100                 
                Router ID: 10.255.183.55                 
                Indirect next hops: 1                         
												 Protocol next hop: 10.255.183.55 Metric: 2                         
						 						 Indirect next hop: 0xab3b980 1048574 INH Session ID: 0x144                         
												 Indirect path forwarding next hops: 1                                 
																 Next hop type: Router                                 
																 Next hop: 100.0.1.2 via ge-2/1/2.0                                 
																 Session Id: 0x140                         
												 10.255.183.55/32 Originating RIB: inet.0                           
													 Metric: 2                       Node path count: 1                           
													 Forwarding nexthops: 1                                 
																 Nexthop: 100.0.1.2 via ge-2/1/2.0          
      BGP    Preference: 170/-101                 
						  Next hop type: Indirect, Next hop index: 0                 
						  Address: 0xafd0970                 
						  Next-hop reference count: 196735                 
						  Source: 10.255.183.56                 
						  Next hop type: Router, Next hop index: 624                 
						  Next hop: 100.0.2.2 via ge-2/0/9.0, selected                 
						  Session Id: 0x141                 
							Protocol next hop: 10.255.183.56                 
							Indirect next hop: 0xab3c240 1048575 INH Session ID: 0x145                 
							State: &lt;NotBest Int Ext ProtectionCand&gt;                 
							Inactive reason: Not Best in its group - IGP metric                 
							Local AS:   100 Peer AS:   100                 
							Age: 1:05       Metric2: 1001                  
							Validation State: unverified                  
							Task: BGP_100.10.255.183.56                 
							AS path: 200 400 I                 
							Accepted                                 
							Localpref: 100                 
							Router ID: 10.255.183.56                 
							Indirect next hops: 1                         
											Protocol next hop: 10.255.183.56 Metric: 1001                         
											Indirect next hop: 0xab3c240 1048575 INH Session ID: 0x145                         
											Indirect path forwarding next hops: 1                                 
															Next hop type: Router                                 
															Next hop: 100.0.2.2 via ge-2/0/9.0                                 
															Session Id: 0x141                         
											10.255.183.56/32 Originating RIB: inet.0                           
												Metric: 1001                    Node path count: 1                           
												Forwarding nexthops: 1                                 
															Nexthop: 100.0.2.2 via ge-2/0/9.0         
#<kbd class="ph userinput">Multipath Preference: 255</kbd>                        
									Next hop type: Indirect, Next hop index: 0                 
									Address: 0xd330f90                 
									Next-hop reference count: 304062                 
									Next hop type: Router, Next hop index: 623                 
									Next hop: 100.0.1.2 via ge-2/1/2.0, selected                 
									Session Id: 0x140                 
									Next hop type: Router, Next hop index: 624                 
									Next hop: 100.0.2.2 via ge-2/0/9.0                 
									Session Id: 0x141                 
									Protocol next hop: 10.255.183.55                 
									<kbd class="ph userinput">Indirect next hop: 0xab3b980 1048574 INH Session ID: 0x144 Weight 0x1</kbd>                       
									Protocol next hop: 10.255.183.56                 
									<kbd class="ph userinput">Indirect next hop: 0xab3c240 1048575 INH Session ID: 0x145 Weight 0x4000</kbd>                    
									State:   &lt;ForwardinOnly Int Ext&gt;               
									Inactive reason: Forwarding use only                 
									Local AS:   100                  
									Age: 1:05       Metric2: 2                  
									Validation State: unverified                  
									Task: RT                 
									Announcement bits (1): 0-KRT                  
									AS path: 200 400 I  
 
user@host&gt; <kbd class="ph userinput">show route forwarding-table destination 20.1.1.1 extensive</kbd>
  Routing table: default.inet [Index 0]  
Internet:      

Destination:  20.1.1.1/32   
	 Route type: user                     
	 Route reference: 0                   Route interface-index: 0      
	 Multicast RPF nh index: 0                
	 Flags: sent to PFE    
	 Next-hop type: unilist               Index: 1048576  Reference: 7401    
	 Next-hop type: indirect              Index: 1048574  Reference: 2                                         Weight: 0x1     
	 Nexthop: 100.0.1.2   
	 Next-hop type: unicast               Index: 623      Reference: 8       
	 Next-hop interface: ge-2/1/2.0    <kbd class="ph userinput">Weight: 0x1</kbd>    
	 Next-hop type: indirect              Index: 1048575  Reference: 2                                         Weight: 0x4000   
	 Nexthop: 100.0.2.2   
	 Next-hop type: unicast               Index: 624      Reference: 8       
	 Next-hop interface: ge-2/0/9.0    <kbd class="ph userinput">Weight: 0x4000</kbd> </pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p">包含的 <code class="ph codeph">Indirect next hop: weight</code> 输出行遵循软件可用于修复发生链路故障的路径的下一跃点。下一跃点权重具有以下值之一：</p> <ul class="ul"><li class="li"><p class="p">0x1 表示活动的下一跃点。</p></li> <li class="li"><p class="p">0x4000 表示被动下一跃点。</p></li></ul></div></li></ol></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-use-case-for-bgp-prefix-independent-convergence-for-inet-inet6-or-labeled-unicast" class="link">适用于 inet、inet6 或带标签的单播的 BGP 前缀无关融合用例</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title59" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-bgp-prefix-independent-convergence-for-inet" class="topic concept nested1"><h2 id="ariaid-title59" class="title topictitle2">示例：为 Inet 配置 BGP 前缀独立收敛<a class="bookmarktitle" aria-label="Copy link to this section: 示例：为 Inet 配置 BGP 前缀独立收敛" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何为 inet 配置 BGP PIC。在路由器发生故障的情况下，BGP 网络可能需要几秒钟到几分钟的时间才能恢复，具体取决于网络大小或路由器性能等参数。在路由器上启用 BGP 前缀独立收敛 （PIC） 功能后，全局表中具有多个路由（例如 inet 和 inet6 单播以及标记为单播的 inet 和 inet6）的 BGP 除了计算出的到达目标的最佳路径外，还会将第二最佳路径安装到数据包转发引擎。当出口路由器在网络中发生故障时，路由器将使用此备份路径，从而大大减少中断时间。 </p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e30" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e49" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e69" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title60" id="d45e30" class="topic concept nested2"><h3 id="ariaid-title60" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">配置此示例之前，不需要除设备初始化之外的特殊配置。</p> <p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">一台带有 MPC 的 MX 系列路由器，用于配置 BGP PIC 功能</p></li> <li class="li"><p class="p">七款路由器，可以是 M 系列、MX 系列、T 系列或 PTX 系列路由器的组合</p></li> <li class="li"><p class="p">配置了 BGP PIC 的设备上的 Junos OS 15.1 或更高版本</p></li></ul></div></div> <div aria-labelledby="ariaid-title61" id="d45e49" class="topic concept nested2"><h3 id="ariaid-title61" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">从 Junos OS 15.1 版开始，最初支持 3 层 VPN 路由器的 BGP PIC 扩展到具有全局表中多个路由的 BGP，例如 inet 和 inet6 单播，以及标记为单播的 inet 和 inet6。除了计算出的到目标的最佳路径之外，BGP 还会向数据包转发引擎安装第二最佳路径。当 IGP 失去对前缀的可访问性时，路由器将使用此备份路径来减少流量损失，直到解决通过 BGP 的全局收敛问题，从而缩短中断持续时间。</p> <div class="admonition note"><div class="adicon"><svg width="18" height="18" class="icon"><use href="/documentation/webstatic/icons.svg#icon_note" xlink:href="/documentation/webstatic/icons.svg#icon_note"></use></svg></div> <div class="adcontent"><div class="note"><span class="notetitle">注：</span> <p class="p">BGP PIC 功能仅在具有 MPC 的路由器上受支持。</p></div></div></div><div id="d45e49__d77004e9977" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p">此示例显示了三个客户边缘 （CE） 路由器：设备 CE0、CE1 和 CE2。路由器 PE0、PE1 和 PE2 是提供商边缘 （PE） 路由器。路由器 P0 和 P1 是提供商核心路由器。BGP PIC 在路由器 PE0 上配置。为了进行测试，地址 192.168.1.5 将添加为设备 CE1 上的第二个环路接口地址。该地址通告给路由器 PE1 和 PE2，并由内部 BGP （IBGP） 中继到路由器 PE0。在路由器 PE0 上，有两条路径可以连接到 192.168.1.5 网络。这些是主路径和备份路径。 <a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e49__d45e65" class="xref">图 13</a> 显示了示例网络。</p> <div id="d45e49__d45e65" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 13： </span>为 Inet 配置 BGP PIC</span><span><img data-width="774px" data-height="462px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043144.gif" alt="为 Inet 配置 BGP PIC" class="image"></span></div></div></div></div> <div aria-labelledby="ariaid-title62" id="d45e69" class="topic concept nested2"><h3 id="ariaid-title62" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e69__d77004e9992" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e69__d77004e10710" class="xref">配置设备 PE0</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e69__d77004e10941" class="xref">结果</a></li></ul> <div id="d45e69__d77004e9992" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改与您的网络配置匹配所需的任何详细信息，将命令复制并粘贴到层次结构级别的 CLI <code class="ph codeph">[edit]</code> 中，然后从配置模式进入提交。</p> <p class="p"><strong class="ph b">路由器 PE0</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description PE0-&gt;P0</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.0.5/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet6 address 2001:db8::1/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description PE0-&gt;P1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 10.0.0.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet6 address 2001:db8::2/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.1/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 description PE0-&gt;CE0</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 172.16.0.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet6 address 2001:db8::10/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls </kbd>
<kbd class="ph userinput">set protocols mpls ipv6-tunneling</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface fxp0.0 disable </kbd>
<kbd class="ph userinput">set protocols bgp group ibgp type internal</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp local-address 192.168.0.1</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp family inet labeled-unicast per-prefix-label</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp family inet6 labeled-unicast explicit-null</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp export nhself</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.4 description PE1</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.5 description PE2 </kbd>
<kbd class="ph userinput">set protocols bgp group ebgp type external</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp local address 192.168.0.1</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet6 labeled-unicast </kbd>
<kbd class="ph userinput">set protocols bgp group ebgp peer-as 64497</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp neighbor 172.16.0.2 description CE0 </kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0 metric 1000 </kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface ge-0/0/1.0 metric 1000 </kbd>
<kbd class="ph userinput">set protocols ldp track-igp-metric</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface fxp0.0 disable </kbd>
<kbd class="ph userinput">set policy-options policy-statement lb then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhself then next-hop self </kbd>
<kbd class="ph userinput">set routing-options protect core</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export lb  </kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.0.1</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64496</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 P0</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description P0-&gt;PE0</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.0.6/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet6 address 2001:db8::3/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description P0-&gt;PE1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 10.0.0.9/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet6 address 2001:db8::4/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.2/32 </kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive </kbd>
<kbd class="ph userinput">set protocols bgp group ibgp type internal</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp local address 192.168.0.1</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.4 description PE1</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.5 description PE2 </kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.0.2</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64496</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 P1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description P1-&gt;PE0</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 10.0.0.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet6 address 2001:db8::5/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description P1-&gt;PE2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.0.13/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet6 address 2001:db8::6/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.3/32 </kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive </kbd>
<kbd class="ph userinput">set protocols bgp group ibgp type internal</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp local address 192.168.0.3</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.1 description PE0</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.5 description PE2  </kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.0.3</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64496</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 PE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description PE1-&gt;P0</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.0.10/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet6 address 2001:db8::7/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family iso </kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description PE1-&gt;CE1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 172.16.1.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet6 address 2001:db8::12/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls  </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.4/32 </kbd>
<kbd class="ph userinput">set protocols bgp group ibgp type internal</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp local address 192.168.0.4</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp family inet labeled-unicast per-prefix-label</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp family inet6 labeled-unicast explicit-null</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp export nhself</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.1 description PE0</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.5 description PE2 </kbd>
<kbd class="ph userinput">set protocols bgp group ebgp type external</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp local address 192.168.0.4</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp peer-as 64497</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp neighbor 172.16.1.2 description CE1  </kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0 metric 1000 </kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface ge-0/0/0.0 metric 1000 </kbd>
<kbd class="ph userinput">set protocols ldp track-igp-metric</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface fxp0.0 disable </kbd>
<kbd class="ph userinput">set policy-options policy-statement PE1-v6-nh_CE1 from family inet6</kbd>
<kbd class="ph userinput">set policy-options policy-statement PE1-v6-nh_CE1 then next-hop 2001:DB8::13</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhself then next-hop self </kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.0.4</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64496</kbd>
<kbd class="ph userinput">set routing-options static route 192.168.1.2 next-hop 172.16.1.2</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">路由器 PE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 description PE2-&gt;P1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 10.0.0.14/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet6 address 2001:db8::8/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family iso  </kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 description PE2-&gt;CE2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 172.16.2.1/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet6 address 2001:db8::14/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.0.5/32 </kbd>
<kbd class="ph userinput">set protocols mpls ipv6-tunneling</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface fxp0.0 disable </kbd>
<kbd class="ph userinput">set protocols bgp group ibgp type internal</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp local address 192.168.0.5</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp family inet labeled-unicast per-prefix-label</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp family inet6 labeled-unicast explicit-null</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp export nhself</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.4 description PE1</kbd>
<kbd class="ph userinput">set protocols bgp group ibgp neighbor 192.168.0.1 description PE0 </kbd>
<kbd class="ph userinput">set protocols bgp group ebgp type external</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp local address 192.168.0.5</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp peer-as 64497</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet6 labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp neighbor 172.16.2.2 description CE2 </kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0 metric 1000 </kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface all</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface fxp0.0 disable</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf3 area 0.0.0.0 interface ge-0/0/0.0 metric 1000 </kbd>
<kbd class="ph userinput">set protocols ldp track-igp-metric</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface fxp0.0 disable </kbd>
<kbd class="ph userinput">set policy-options policy-statement nhself then next-hop self </kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.0.5</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64496</kbd>
<kbd class="ph userinput">set routing-options static route 192.168.1.3 next-hop 172.16.2.2</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">设备 CE0</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 description CE0-&gt;PE0</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 172.16.0.2/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet6 address 2001:db8::11/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.1.1/32 </kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp type external</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp peer-as 64496</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet6 labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp neighbor 172.16.0.1 description PE0 </kbd>
<kbd class="ph userinput">set protocols bgp group ebgp local-address 192.168.1.1 </kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64497</kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.1.1</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">设备 CE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 description CE1-&gt;PE1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 172.16.1.2/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet6 address 2001:db8::13/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.1.2/32 </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.1.5/24</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp type external</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp peer-as 64496</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet6 labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp export send-direct</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp neighbor 172.16.1.1 description PE1 </kbd>
<kbd class="ph userinput">set policy-options policy statement send-direct from protocol direct then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64497</kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.1.2</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">设备 CE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set chassis network-services enhanced-ip</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 description CE2-&gt;PE2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 172.16.2.2/30</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet6 address 2001:db8::15/32</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 192.168.1.3/32 </kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp type external</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp peer-as 64496</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp family inet6 labeled-unicast</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp export send-direct</kbd>
<kbd class="ph userinput">set protocols bgp group ebgp neighbor 172.16.2.1 description PE2 </kbd>
<kbd class="ph userinput">set policy-options policy statement send-direct from protocol direct then accept</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 64497</kbd>
<kbd class="ph userinput">set routing-options router-id 192.168.1.3</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d45e69__d77004e10710" class="section"><h4 class="title sectiontitle">配置设备 PE0</h4><div id="d45e69__d77004e10713" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 PE0：</p> <ol class="ol"><li class="li"><p class="p">在配备模块化端口集中器 （MPC） 的路由器上，启用增强型 IP 网络服务。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit chassis]
usr@PE0# <kbd class="ph userinput">set network-services enhanced-ip</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置设备接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit interfaces]
user@PE0# <kbd class="ph userinput">set ge-0/0/0 unit 0 description PE0-&gt;P0</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/0 unit 0 family inet address 10.0.0.5/24</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/0 unit 0 family iso</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/0 unit 0 family inet6 address 2001:db8::1/32</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/0 unit 0 family mpls </kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/1 unit 0 description PE0-&gt;P1</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 10.0.0.1/24</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/1 unit 0 family iso</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/1 unit 0 family inet6 address 2001:db8::2/32</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls </kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/2 unit 0 description PE0-&gt;CE0</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 172.16.0.1/30</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/2 unit 0 family inet6 address 2001:db8::10/32</kbd>
user@PE0# <kbd class="ph userinput">set ge-0/0/2 unit 0 family mpls </kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">配置环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@PE0# <kbd class="ph userinput">set lo0 unit 0 family inet address 192.168.0.1/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在所有接口（管理接口除外）上配置 MPLS 和 LDP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@PE0# <kbd class="ph userinput">set mpls ipv6-tunneling</kbd>
user@PE0# <kbd class="ph userinput">set mpls interface all</kbd>
user@PE0# <kbd class="ph userinput">set mpls interface fxp0.0 disable </kbd>
user@PE0# <kbd class="ph userinput">set ldp track-igp-metric</kbd>
user@PE0# <kbd class="ph userinput">set ldp interface all</kbd>
user@PE0# <kbd class="ph userinput">set ldp interface fxp0.0 disable </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在面向核心的接口上配置 IGP。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@PE0# <kbd class="ph userinput">set ospf area 0.0.0.0 interface all</kbd>
user@PE0# <kbd class="ph userinput">set ospf area 0.0.0.0 interface fxp0.0 disable</kbd>
user@PE0# <kbd class="ph userinput">set ospf area 0.0.0.0 interface lo0.0 passive</kbd>
user@PE0# <kbd class="ph userinput">set ospf area 0.0.0.0 interface ge-0/0/1.0 metric 1000 </kbd>
user@PE0# <kbd class="ph userinput">set ospf3 area 0.0.0.0 interface all</kbd>
user@PE0# <kbd class="ph userinput">set ospf3 area 0.0.0.0 interface fxp0.0 disable</kbd>
user@PE0# <kbd class="ph userinput">set ospf3 area 0.0.0.0 interface lo0.0 passive</kbd>
user@PE0# <kbd class="ph userinput">set ospf3 area 0.0.0.0 interface ge-0/0/1.0 metric 1000 </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置与其他 PE 设备的 IBGP 连接。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@PE0# <kbd class="ph userinput">set bgp group ibgp type internal</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ibgp local-address 192.168.0.1</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ibgp family inet labeled-unicast per-prefix-label</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ibgp family inet6 labeled-unicast explicit-null</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ibgp export nhself</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ibgp neighbor 192.168.0.4 description PE1</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ibgp neighbor 192.168.0.5 description PE2 </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置与客户设备的 EBGP 连接。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@PE0# <kbd class="ph userinput">set bgp group ebgp type external</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ebgp local address 192.168.0.1</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ebgp family inet labeled-unicast</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ebgp family inet6 labeled-unicast </kbd>
user@PE0# <kbd class="ph userinput">set bgp group ebgp peer-as 64497</kbd>
user@PE0# <kbd class="ph userinput">set bgp group ebgp neighbor 172.16.0.2 description CE0 </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置负载均衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@PE0# <kbd class="ph userinput">set policy-statement lb then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置下一跃点自我策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@PE0# <kbd class="ph userinput">set policy-statement nhself then next-hop self </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">启用 BGP PIC 边缘功能。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE0# <kbd class="ph userinput">set protect core</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用负载平衡策略。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE0# <kbd class="ph userinput">set forwarding-table export lb  </kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">分配路由器 ID 和自治系统 (AS) 编号。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE0# <kbd class="ph userinput">set router-id 192.168.0.2</kbd>
user@PE0# <kbd class="ph userinput">set autonomous-system 64496</kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d45e69__d77004e10941" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <code class="ph codeph">show chassis</code>、 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code><code class="ph codeph">show protocols</code>和<code class="ph codeph">show routing-options</code>命令来确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE0# <kbd class="ph userinput">show chassis</kbd>
network-services enhanced-ip;
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit]
user@PE0# <kbd class="ph userinput">show interfaces</kbd>
ge-0/0/0 {
    unit 0 {
        description PE0-&gt;P0;
        family inet {
            address 10.0.0.5/24;
        }
        family iso;
        family inet6 {
            address 2001:db8::1/32;
        }
        family mpls;
    }
}
ge-0/0/1 {
    unit 0 {
        description PE0-&gt;P1;
        family inet {
            address 10.0.0.1/24;
        }
        family iso;
        family inet6 {
            address 2001:db8::2/32;
        }
        family mpls;
    }
}
ge-0/0/2 {
    unit 0 {
        description PE0-&gt;CE0;
        family inet {
            address 172.16.0.1/30;
        }
        family inet6 {
            address 2001:db8::10/32;
        }
        family mpls;
    }
}
lo0 {
    unit 0 {
        family inet {
            address 192.168.0.1/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit]
user@PE0# <kbd class="ph userinput">show protocols</kbd>
mpls {
    ipv6-tunneling;
    interface all;
    interface fxp0.0 {
        disable;
    }
}
bgp {
    group ibgp {
        type internal;
        local-address 192.168.0.1;
        family inet {
            labeled-unicast {
                per-prefix-label;
            }
        }
        family inet6 {
            labeled-unicast {
                explicit-null;
            }
        }
        export nhself;
        neighbor 192.168.0.4 {
            description PE1;
        }
        neighbor 192.168.0.5 {
            description PE2;
        }
    }
    group ebgp {
        type external;
        local-address 192.168.0.1;
        family inet {
            labeled-unicast;
        }
        family inet6 {
            labeled-unicast;
        }
        peer-as 64497;
        neighbor 172.16.0.2 {
            description CE0;
        }
    }
}
ospf {
    area 0.0.0.0 {
        interface all;
        interface lo0.0 {
            passive;
        }
        interface ge-0/0/1.0 {
            metric 1000;
        }
        interface fxp0.0 {
            disable;
        }
    }
}
ospf3 {
    area 0.0.0.0 {
        interface all;
        interface lo0.0 {
            passive;
        }
        interface ge-0/0/1.0 {
            metric 1000;
        }
        interface fxp0.0 {
            disable;
        }
    }
}
ldp {
    track-igp-metric;
    interface all;
    interface fxp0.0 {
        disable;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE1# <kbd class="ph userinput">show policy-options</kbd>
policy-statement lb {
    then {
        load-balance per-packet;
    }
}
policy-statement nhself {
    then {
        next-hop self;
    }
}
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit]
user@PE0# <kbd class="ph userinput">show routing-options</kbd>
protect core;
router-id 192.168.0.1;
autonomous system 64496
forwarding-table {
    export lb;
}
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title63" id="d45e1066" class="topic concept nested2"><h3 id="ariaid-title63" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d45e1072" class="xref">显示广泛的路线信息</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d45e1118" class="xref">显示转发表</a></li></ul> <div id="d45e1066__d45e1072" class="section"><h4 class="title sectiontitle">显示广泛的路线信息</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d77004e10994" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d77004e10999" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d77004e11022" class="xref">意义</a></li></ul> <div id="d45e1066__d77004e10994" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">确认 BGP PIC 边缘工作正常。</p></div><div id="d45e1066__d77004e10999" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">从设备 PE0 运行 <code class="ph codeph">show route extensive</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE0&gt; <code class="ph codeph"><kbd class="ph userinput">show route 192.168.1.5 extensive</kbd></code>
inet.0: 236941 destinations, 630411 routes (236940 active, 0 holddown, 1 hidden)
20.1.1.1/32 (3 entries, 2 announced)
        State: &lt;CalcForwarding&gt; 
TSI: 
KRT in-kernel 192.168.1.5/24 -&gt; {indirect(1048574), indirect(1048575)}         
        @BGP    Preference: 170/-101                 
                Next hop type: Indirect, Next hop index: 0                 
                Address: 0xafd09d0                 
                Next-hop reference count: 236886                 
                Source: 192.168.0.4                 
                Next hop type: Router, Next hop index: 623                 
                Next hop: 10.0.0.2 via ge-0/0/1.0, selected                 
                Session Id: 0x140                 
                Protocol next hop: 192.168.0.4                 
                Indirect next hop: 0xab3b980 1048574 INH Session ID: 0x144                 
                State: &lt;Active Int Ext ProtectionPath ProtectionCand&gt;                 
                Local AS:   64496 Peer AS:   64496                 
                Age: 1:11       Metric2: 2                  
                Validation State: unverified                  
                Task: BGP_100.192.168.0.5                 
                Announcement bits (1): 6-Resolve tree 2                  
                AS path: 64497 I                 
                Accepted MultipathUnequal                 
                Localpref: 100                 
                Router ID: 192.168.0.5                 
                Indirect next hops: 1                         
												 Protocol next hop: 192.168.0.5 Metric: 2                         
						 						 Indirect next hop: 0xab3b980 1048574 INH Session ID: 0x144                         
												 Indirect path forwarding next hops: 1                                 
																 Next hop type: Router                                 
																 Next hop: 10.0.0.2 via ge-0/0/1.0                                 
																 Session Id: 0x140                         
												 192.168.0.5/32 Originating RIB: inet.0                           
													 Metric: 2                       Node path count: 1                           
													 Forwarding nexthops: 1                                 
																 Nexthop: 10.0.0.2 via ge-0/0/1.0          
      BGP    Preference: 170/-101                 
						  Next hop type: Indirect, Next hop index: 0                 
						  Address: 0xafd0970                 
						  Next-hop reference count: 196735                 
						  Source: 192.168.0.4                 
						  Next hop type: Router, Next hop index: 624                 
						  Next hop: 10.0.0.6 via ge-0/0/0.0, selected                 
						  Session Id: 0x141                 
							Protocol next hop: 192.168.0.4                 
							Indirect next hop: 0xab3c240 1048575 INH Session ID: 0x145                 
							State: &lt;NotBest Int Ext ProtectionCand&gt;                 
							Inactive reason: Not Best in its group - IGP metric                 
							Local AS:   100 Peer AS:   100                 
							Age: 1:05       Metric2: 1001                  
							Validation State: unverified                  
							Task: BGP_100.192.168.0.4                 
							AS path: 200 400 I                 
							Accepted                                 
							Localpref: 100                 
							Router ID: 192.168.0.4                 
							Indirect next hops: 1                         
											Protocol next hop:  192.168.0.4 Metric: 1001                         
											Indirect next hop: 0xab3c240 1048575 INH Session ID: 0x145                         
											Indirect path forwarding next hops: 1                                 
															Next hop type: Router                                 
															Next hop: 10.0.0.6 via ge-0/0/0.0                                 
															Session Id: 0x141                         
											192.168.0.4/32 Originating RIB: inet.0                           
												Metric: 1001                    Node path count: 1                           
												Forwarding nexthops: 1                                 
															Nexthop: 10.0.0.6 via ge-0/0/0.0         
#<kbd class="ph userinput">Multipath Preference: 255</kbd>                        
									Next hop type: Indirect, Next hop index: 0                 
									Address: 0xd330f90                 
									Next-hop reference count: 304062                 
									Next hop type: Router, Next hop index: 623                 
									Next hop: 10.0.0.6 via ge-0/0/0.0, selected                 
									Session Id: 0x140                 
									Next hop type: Router, Next hop index: 624                 
									Next hop: 10.0.0.2 via ge-0/0/1.0                 
									Session Id: 0x141                 
									Protocol next hop: 192.168.0.4                 
									Indirect next hop: 0xab3b980 1048574 INH Session ID: 0x144 <kbd class="ph userinput">Weight 0x1</kbd>                     
									Protocol next hop: 192.168.0.5                 
									Indirect next hop: 0xab3c240 1048575 INH Session ID: 0x145 <kbd class="ph userinput">Weight 0x4000</kbd>                  
									State:   &lt;ForwardinOnly Int Ext&gt;               
									Inactive reason: Forwarding use only                 
									Local AS:   64496                  
									Age: 1:05       Metric2: 2                  
									Validation State: unverified                  
									Task: RT                 
									Announcement bits (1): 0-KRT                  
									AS path: 64497 I  
 </pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d45e1066__d77004e11022" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">发生链路故障时，Junos OS 使用下一跃点和 <code class="ph codeph">weight</code> 值来选择备份路径。下一跃点权重具有以下值之一：</p> <ul class="ul"><li class="li"><p class="p">0x1 表示具有活动下一跃点的主路径。</p></li> <li class="li"><p class="p">0x4000指示具有被动下一跃点的备份路径。</p></li></ul></div></div> <div id="d45e1066__d45e1118" class="section"><h4 class="title sectiontitle">显示转发表</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d77004e11040" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d77004e11048" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d45e1066__d77004e11068" class="xref">意义</a></li></ul> <div id="d45e1066__d77004e11040" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">使用 <code class="ph codeph">show route forwarding-table</code> 命令检查转发和内核路由表状态。</p></div><div id="d45e1066__d77004e11048" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">从设备 PE0 运行 <code class="ph codeph">show route forwarding-table destination 192.168.1.5 extensive</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE0&gt; <code class="ph codeph"><kbd class="ph userinput">show route forwarding-table destination 192.168.1.5 extensive</kbd></code>
  Routing table: default.inet [Index 0]  
Internet:      

Destination:  192.168.1.5/24   
	 Route type: user                     
	 Route reference: 0                   Route interface-index: 0      
	 Multicast RPF nh index: 0                
	 Flags: sent to PFE    
	 Next-hop type: unilist               Index: 1048576  Reference: 7401    
	 Next-hop type: indirect              Index: 1048574  Reference: 2                                         Weight: 0x1     
	 Nexthop: 10.0.0.6   
	 Next-hop type: unicast               Index: 623      Reference: 8       
	 <kbd class="ph userinput">Next-hop interface: ge-0/0/0.0    Weight: 0x1 </kbd>   
	 Next-hop type: indirect              Index: 1048575  Reference: 2                                         Weight: 0x4000   
	 Nexthop: 10.0.0.2   
	 Next-hop type: unicast               Index: 624      Reference: 8       
	 <kbd class="ph userinput">Next-hop interface: ge-0/0/1.0    Weight: 0x4000</kbd> </pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d45e1066__d77004e11068" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">发生链路故障时，Junos OS 使用下一跃点和 <code class="ph codeph">weight</code> 值来选择备份路径。下一跃点权重具有以下值之一：</p> <ul class="ul"><li class="li"><p class="p">0x1 表示具有活动下一跃点的主路径。</p></li> <li class="li"><p class="p">0x4000指示具有被动下一跃点的备份路径。</p></li></ul></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-bgp-prefix-independent-convergence-for-inet" class="link">为 Inet 配置 BGP 前缀独立收敛</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-use-case-for-bgp-prefix-independent-convergence-for-inet-inet6-or-labeled-unicast" class="link">适用于 inet、inet6 或带标签的单播的 BGP 前缀无关融合用例</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title64" xml:lang="zh-CN" lang="zh-CN" id="id-bgp-pic-edge-using-bgp-labeled-unicast-overview" class="topic concept nested1"><h2 id="ariaid-title64" class="title topictitle2">使用 BGP 标记单播的 BGP PIC 边缘概述<a class="bookmarktitle" aria-label="Copy link to this section: 使用 BGP 标记单播的 BGP PIC 边缘概述" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">本节介绍使用 BGP 标记的单播作为传输协议的 BGP PIC Edge 的优势和概述。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-bgp-pic-edge-using-bgp-labeled-unicast-overview__d77004e11105" class="xref">使用 BGP 标记单播的 BGP PIC 边缘的优势</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-bgp-pic-edge-using-bgp-labeled-unicast-overview__d77004e11117" class="xref">BGP 前缀独立收敛的工作原理是什么？</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-bgp-pic-edge-using-bgp-labeled-unicast-overview__d77004e11124" class="xref">使用 BGP 标记的单播作为传输协议的 BGP PIC Edge</a></li></ul> <div id="id-bgp-pic-edge-using-bgp-labeled-unicast-overview__d77004e11105" class="section"><h3 class="title sectiontitle">使用 BGP 标记单播的 BGP PIC 边缘的优势</h3><p class="p">此功能具有以下优点：</p> <ul class="ul"><li class="li"><p class="p">在多域网络中发生边界（ABR 和 ASBR）节点故障时提供流量保护。</p></li> <li class="li"><p class="p">提供更快的网络连接恢复，并在主路径不可用时减少流量损失。</p></li></ul></div> <div id="id-bgp-pic-edge-using-bgp-labeled-unicast-overview__d77004e11117" class="section"><h3 class="title sectiontitle">BGP 前缀独立收敛的工作原理是什么？</h3><p class="p">BGP 前缀独立收敛 （PIC） 改进了网络节点故障时的 BGP 收敛。BGP PIC 为路由引擎上的间接下一跃点创建并存储主路径和备份路径，并向数据包转发引擎提供间接下一跃点路由信息。发生网络节点故障时，路由引擎会向数据包转发引擎发出信号，表明间接下一跃点出现故障，并且流量将重新路由到预先计算的等价路径或备份路径，而无需修改 BGP 前缀。通过使用备份路径继续将流量路由到目标前缀以减少流量丢失，直到解决通过 BGP 的全局融合问题。</p> <p class="p">BGP 融合适用于核心和边缘网络节点故障。对于 BGP PIC 核心，转发链的调整是由于节点或核心链路故障。对于 BGP PIC 边缘，转发链的调整是由于边缘节点或边缘链路故障。</p></div> <div id="id-bgp-pic-edge-using-bgp-labeled-unicast-overview__d77004e11124" class="section"><h3 class="title sectiontitle">使用 BGP 标记的单播作为传输协议的 BGP PIC Edge</h3><p class="p">当多域网络中发生边界节点（ABR 和 ASBR）故障时，使用 BGP 标记的单播传输协议的 BGP PIC Edge 有助于保护和重新路由流量。多域网络通常用于城域以太网聚合和移动回传网络设计。</p> <p class="p">在瞻博网络 MX 系列、EX 系列和 PTX 系列设备上，BGP PIC Edge 支持将 BGP 标记为单播作为传输协议的第 3 层服务。此外，在瞻博网络 MX 系列、EX9204、EX9208、EX9214、EX9251 和 EX9253 设备上，BGP PIC Edge 支持第 2 层电路、第 2 层 VPN 和 VPLS（BGP VPLS、LDP VPLS 和 FEC 129 VPLS）服务，并将 BGP 标记为单播作为传输协议。这些 BGP 服务是多路径的（从多个 PE 学习），并通过 BGP 标记的单播路由解析，这可能是从其他 ABR 学习的多路径。通过 BGP PIC Edge 支持的传输协议包括 RSVP、LDP、OSPF 和 ISIS。从 Junos OS 20.2R1 版开始，MX 系列、EX9204、EX9208、EX9214、EX9251 和 EX9253 设备支持用于第 2 层电路、第 2 层 VPN 和 VPLS（BGP VPLS、LDP VPLS 和 FEC 129 VPLS）服务的 BGP PIC 边缘保护，其中 BGP 标记为单播作为传输协议。</p> <p class="p">在瞻博网络 MX 系列、EX 系列和 PTX 系列设备上，以下服务支持 BGP PIC 边缘保护，并将 BGP 标记为单播作为传输：</p> <ul class="ul"><li class="li"><p class="p">标记为单播的 IPv4 BGP 上的 IPv4 服务</p></li> <li class="li"><p class="p">IPv6 BGP 标记为单播服务的 IPv4 BGP 标记为单播</p></li> <li class="li"><p class="p">通过标记为单播的 IPv4 BGP 上的 IPv4 第 3 层 VPN 服务</p></li> <li class="li"><p class="p">通过标记为单播的 IPv4 BGP 上的 IPv6 第 3 层 VPN 服务</p></li></ul> <p class="p">在瞻博网络 MX 系列和 EX 系列设备上，以下服务支持 BGP PIC 边缘保护，并将 BGP 标记为单播作为传输：</p> <ul class="ul"><li class="li"><p class="p">通过 IPv4 BGP 标记的单播的第 2 层电路服务</p></li> <li class="li"><p class="p">标记为单播的 IPv4 BGP 上的第 2 层 VPN 服务</p></li> <li class="li"><p class="p">基于 IPv4 的 VPLS（BGP VPLS、LDP VPLS 和 FEC 129 VPLS）服务 BGP 标记为单播</p></li></ul></div></div></div> <div aria-labelledby="ariaid-title65" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-bgp-pic-edge-using-bgp-labeled-unicast-for-layer-2-services" class="topic task nested1"><h2 id="ariaid-title65" class="title topictitle2">使用带有 BGP 标记的单播为第 2 层服务配置 BGP PIC Edge<a class="bookmarktitle" aria-label="Copy link to this section: 使用带有 BGP 标记的单播为第 2 层服务配置 BGP PIC Edge" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">MX 系列、EX9204、EX9208、EX9214、EX9251 和 EX9253 设备支持用于第 2 层电路、第 2 层 VPN 和 VPLS（BGP VPLS、LDP VPLS 和 FEC 129 VPLS）服务的 BGP PIC 边缘保护，其中 BGP 标记为单播作为传输协议。BGP PIC Edge 使用 BGP 标记的单播传输协议有助于保护多域网络中边界节点（ABR 和 ASBR）上的流量故障。多域网络通常用于城域聚合和移动回传网络设计。</p></div> <div id="id-configuring-bgp-pic-edge-using-bgp-labeled-unicast-for-layer-2-services__d77004e11175" class="section context"><p class="p">BGP PIC 边缘保护的先决条件是使用扩展的下一跃点层次结构对数据包转发引擎 （PFE） 进行编程。</p> <p class="p">要为 BGP 标记为单播家族启用扩展的下一跃点层次结构，您需要在 [<code class="ph codeph">edit protocols</code>] 层次结构级别配置以下 CLI 配置语句：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@host#<kbd class="ph userinput">set bgp group <var class="keyword varname">group-name</var> family inet labeled-unicast nexthop-resolution preserve-nexthop-hierarchy;</kbd>
</pre></div> <!----></div><p class="p">要为 MPLS 负载平衡下一跃点启用 BGP PIC，您需要在 [<code class="ph codeph">edit routing-options</code>] 层次结构级别配置以下 CLI 配置语句：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@host#<kbd class="ph userinput">set rib <var class="keyword varname">routing-table-name</var> protect core;</kbd>
</pre></div> <!----></div><p class="p">要启用第 2 层服务的快速收敛，您需要在 [<code class="ph codeph">edit protocols</code>] 层次结构级别配置以下 CLI 配置语句：</p> <p class="p">对于第 2 层电路和 LDP VPLS：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@host#<kbd class="ph userinput">set l2circuit resolution preserve-nexthop-heirarchy;</kbd>
</pre></div> <!----></div><p class="p">对于第 2 层 VPN、BGP VPLS 和 FEC129：</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@host#<kbd class="ph userinput">set l2vpn resolution preserve-nexthop-heirarchy;</kbd>
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title66" xml:lang="zh-CN" lang="zh-CN" id="id-example-protecting-ipv4-traffic-over-layer-3-vpn-running-bgp-labeled-unicast" class="topic concept nested1"><h2 id="ariaid-title66" class="title topictitle2">示例：通过运行标记为单播的 BGP 的第 3 层 VPN 保护 IPv4 流量<a class="bookmarktitle" aria-label="Copy link to this section: 示例：通过运行标记为单播的 BGP 的第 3 层 VPN 保护 IPv4 流量" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何配置 BGP 前缀无关融合 （PIC） 边缘标记为单播，以及如何保护第 3 层 VPN 上的 IPv4 流量。当来自客户边缘路由器的 IPv4 流量发送到 PE 路由器时，IPv4 流量将通过第 3 层 VPN 进行路由，其中标记为单播的 BGP 配置为传输协议。 </p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e26" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e43" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title67" id="d48e26" class="topic concept nested2"><h3 id="ariaid-title67" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">MX 系列路由器。</p></li> <li class="li"><p class="p">在所有设备上运行的 Junos OS 19.4R1 或更高版本。</p></li></ul></div></div> <div aria-labelledby="ariaid-title68" id="d48e43" class="topic concept nested2"><h3 id="ariaid-title68" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">以下拓扑通过在主路径不可用时将流量切换到备份路径来提供 ABR 和 ASBR 保护。</p> <div id="d48e43__d77004e11265" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e43__d48e55" class="xref">图 14</a> 说明了运行标记为单播作为域间传输协议的 BGP 的第 3 层 VPN。</p> <div id="d48e43__d48e55" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 14： </span>使用 LDP 传输协议的 BGP 标记单播第 3 层 VPN</span></div> <span><div class="imgwrap"><img data-width="2101px" data-height="1617px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g300804.png" alt="拓扑学" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span><p class="p">下表描述了拓扑中使用的组件：</p> <div class="table-wrap"><!----> <div class="tbody"><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table table-alt"><colgroup><col><col><col></colgroup><thead class="thead" style=""><tr class="row"><th id="d9706e11080" class="entry cellrowborder" style=""><p class="p">主要组件</p></th> <th id="d9706e11085" class="entry cellrowborder" style=""><p class="p">设备类型</p></th> <th id="d9706e11090" class="entry cellrowborder" style=""><p class="p">位置</p></th></tr></thead> <tbody class="tbody"><tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">CE1</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">已连接到客户网络。</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">PE1</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">配置了主路由路径和备份路由路径，以保护和重新路由从 CE1 到 CE2 的流量。</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">P1-P3</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">用于传输流量的核心路由器。</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">ABR1-ABR2</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">区域边界路由器</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">ABSR1-ABSR4</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">自治系统边界路由器</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">RR1-RR3</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">路由反射器</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">PE2-PE3</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">PE 路由器连接到客户边缘路由器 （CE2）。</p></td></tr> <tr class="row"><td headers="d9706e11080 " class="entry cellrowborder" style=""><p class="p">CE2</p></td> <td headers="d9706e11085 " class="entry cellrowborder" style=""><p class="p">MX 系列</p></td> <td headers="d9706e11090 " class="entry cellrowborder" style=""><p class="p">已连接到客户网络。</p></td></tr></tbody></table></div></div></div><p class="p">PE2 和 PE3 设备地址 作为标记为单播路由从 ABR1 和 ABR2 获知 。这些路由通过 IGP/LDP 协议解析。PE1 从 PE2 和 PE3 设备学习 CE2 路由。</p></div></div></div> <div aria-labelledby="ariaid-title69" id="d48e219" class="topic concept nested2"><h3 id="ariaid-title69" class="title topictitle3">配置</h3> <div class="body conbody"><p class="p">要使用以 LDP 作为传输协议的 BGP 标签单播配置 BGP PIC 边缘，请执行以下操作：</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e11441" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e14935" class="xref">配置 CE1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15110" class="xref">配置 PE1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15704" class="xref">配置 P1 设备</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15917" class="xref">配置 RR1 设备</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16236" class="xref">配置 ABR1 设备</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16571" class="xref">配置 ABR2 设备</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16802" class="xref">配置 P2 设备</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e17016" class="xref">配置 RR2 设备</a></li></ul> <div id="d48e219__d77004e11441" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4> <p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改详细信息，以便与网络配置匹配，将命令复制并粘贴到 <code class="ph codeph">[edit]</code> 层级的 CLI 中，然后从配置模式进入 <code class="ph codeph">commit</code> 。</p> <p class="p"><strong class="ph b">设备 CE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description CE1-to-PE1-Link1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.0/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description CE1-to-PE1-Link2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.2/31</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.4.4.4/32</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set routing-options router-id 10.4.4.4</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65004</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2 export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2 peer-as 65002</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2 neighbor 192.168.0.1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2 neighbor 192.168.0.3</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 PE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description PE1-to-CE1-Link1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.1/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description PE1-to-CE1-Link2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.3/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description PE1-to-P1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.4/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family inet address 10.2.2.5/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family iso address 49.0000.0000.aaaa.0005.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement add-noexport term 1 then community add noexport</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 from rib inet.3</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term 1 from route-filter 10.1.1.0/24 orlonger</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term 1 then multipath-resolve</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term 2 from route-filter 10.2.2.0/24 orlonger</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term 2 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term 2 then multipath-resolve</kbd>
<kbd class="ph userinput">set policy-options policy-statement mp-resolv term def then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then local-preference 65200</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-export-red term 1 then community add leak2red</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-export-red term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-import-red term 1 from community leak2red</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-import-red term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options community leak2red members target:100:100</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-export</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-advertise</kbd>
<kbd class="ph userinput">set routing-instances red routing-options multipath preserve-nexthop-hierarchy</kbd>
<kbd class="ph userinput">set routing-instances red routing-options protect core</kbd>
<kbd class="ph userinput">set routing-instances red protocols bgp group toCE1 peer-as 4</kbd>
<kbd class="ph userinput">set routing-instances red protocols bgp group toCE1 neighbor 192.168.0.2</kbd>
<kbd class="ph userinput">set routing-instances red instance-type vrf</kbd>
<kbd class="ph userinput">set routing-instances red interface ge-0/0/2.0</kbd>
<kbd class="ph userinput">set routing-instances red vrf-import vrf-import-red</kbd>
<kbd class="ph userinput">set routing-instances red vrf-export vrf-export-red</kbd>
<kbd class="ph userinput">set routing-options rib inet.3 protect core</kbd>
<kbd class="ph userinput">set routing-options route-distinguisher-id 10.2.2.5</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options resolution preserve-nexthop-hierarchy</kbd>
<kbd class="ph userinput">set routing-options resolution rib inet.0 import mp-resolv</kbd>
<kbd class="ph userinput">set routing-options interface-routes rib-group inet inet0to3</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.5</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 2</kbd>
<kbd class="ph userinput">set routing-options protect core</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-policy allow-lo0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-policy add-noexport</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toABR1-gold to 10.2.2.3</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toABR1-bronze to 10.2.2.3</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toABR2-gold to 10.2.2.4</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR local-address 10.2.2.5</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast rib-group inet3to0</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast nexthop-resolution preserve-nexthop-hierarchy</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR export export-inet3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.6</kbd>
<kbd class="ph userinput">set protocols bgp group toAs4 peer-as 65004</kbd>
<kbd class="ph userinput">set protocols bgp group toAs4 neighbor 192.168.0.0</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs multihop no-nexthop-change</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs local-address 10.2.2.5</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs family inet unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs family inet-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs family inet6 unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs family inet6-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs peer-as 65001</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs neighbor 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1PEs neighbor 10.1.1.2</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
<kbd class="ph userinput">set protocols bgp multipath</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 P1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description P1-to-RR1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.6/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description P1-to-ABR1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.8/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description P1-to-PE1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.5/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description P1-to-ABR2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.10/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.2.2.8/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0008.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.8</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 RR1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description RR1-to-P1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.7/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family inet address 10.2.2.6/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family iso address 49.0000.0000.aaaa.0006.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement add-noexport term 1 then community add noexport</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 from rib inet.3</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-export</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-advertise</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options interface-routes rib-group inet inet0to3</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.6</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 2</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-policy allow-lo0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet6.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-policy add-noexport</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs family inet labeled-unicast rib-group inet3to0</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs export export-inet3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs neighbor 10.2.2.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs neighbor 10.2.2.4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg2BNs neighbor 10.2.2.5</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
<kbd class="ph userinput">set protocols bgp local-address 10.2.2.6</kbd>
<kbd class="ph userinput">set protocols bgp cluster 10.2.2.6</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 ABR1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description ABR1-to-P2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.12/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description ABR1-to-P1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.9/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.2.2.3/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0003.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.3</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65002</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toASBR2-gold to 10.2.2.2</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toASBR1-bronze to 10.2.2.1</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toASBR2-bronze to 10.2.2.2</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR local-address 10.2.2.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR advertise-inactive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR cluster 10.2.2.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.6</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.7</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 ABR2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/2 description ABR2-to-P2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.14/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description ABR2-to-P1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.11/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.2.2.4/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0004.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.4</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65002</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toASBR1-bronze to 10.2.2.1</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR local-address 10.2.2.4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR advertise-inactive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR cluster 10.2.2.4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.6</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.7</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 P2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description P2-to-ABR1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.13/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description P2-to-ABR2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.15/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description P2-to-RR2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.16/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description P2-to-ASBR1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.18/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 description P2-to-ASBR2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family inet address 192.168.0.20/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.2.2.9/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0009.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.9</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 RR2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/3 description RR2-to-P2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.17/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family inet address 10.2.2.7/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family iso address 49.0000.0000.aaaa.0007.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 from rib inet.3</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options interface-routes rib-group inet inet0to3</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.7</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65002</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-policy allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs neighbor 10.2.2.1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs neighbor 10.2.2.2</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs neighbor 10.2.2.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2Reg1BNs neighbor 10.2.2.4</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
<kbd class="ph userinput">set protocols bgp local-address 10.2.2.7</kbd>
<kbd class="ph userinput">set protocols bgp cluster 10.2.2.7</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 ASBR1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/2 description ASBR1-to-ASBR3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.22/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description ASBR1-to-ASBR4</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.24/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description ASBR1-to-P2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.19/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.2.2.1/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0001.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.1</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65002</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T peer-as 1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T neighbor 192.168.0.23</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T neighbor 192.168.0.27</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR local-address 10.2.2.1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR advertise-external</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.7</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 ASBR2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description ASBR2-to-ASBR3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.28/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description ASBR2-to-ASBR4</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.26/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 description ASBR2-to-P2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family inet address 192.168.0.21/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.2.2.2/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0002.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options router-id 10.2.2.2</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65002</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T peer-as 1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T neighbor 192.168.0.29</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1-T neighbor 192.168.0.25</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR local-address 10.2.2.2</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR advertise-external</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2RR neighbor 10.2.2.7</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 ASBR3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description ASBR3-to-ASBR2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.29/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description ASBR3-to-ASBR1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.23/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description ASBR3-to-P3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.30/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.1.1.3/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0003.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options router-id 10.1.1.3</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65001</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toPE2-gold to 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T peer-as 65002</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T neighbor 192.168.0.22</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T neighbor 192.168.0.28</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR local-address 10.1.1.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR advertise-external</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR neighbor 10.1.1.6</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 ASBR4</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description ASBR4-to-P3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.32/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description ASBR4-to-ASBR2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.27/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description ASBR4-to-ASBR1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.25/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.1.1.4/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0004.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options router-id 10.1.1.4</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65001</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toPE2-bronze to 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path toPE3-bronze to 10.1.1.2</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T peer-as 2</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T neighbor 192.168.0.26</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2-T neighbor 192.168.0.24</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR local-address 10.1.1.4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR advertise-external</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR neighbor 10.1.1.6</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 RR3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/2 description RR3-to-P3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.35/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family inet address 10.1.1.6/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family iso address 49.0000.0000.aaaa.0006.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement add-noexport term 1 then community add noexport</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 from rib inet.3</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-export</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-advertise</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options interface-routes rib-group inet inet0to3</kbd>
<kbd class="ph userinput">set routing-options router-id 10.1.1.6</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-policy allow-lo0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-policy add-noexport</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs family inet labeled-unicast rib-group inet3to0</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs export export-inet3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs neighbor 10.1.1.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs neighbor 10.1.1.4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs neighbor 10.1.1.2</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1BNs neighbor 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
<kbd class="ph userinput">set protocols bgp local-address 10.1.1.6</kbd>
<kbd class="ph userinput">set protocols bgp cluster 10.1.1.6</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 P3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description P3-to-ASBR4</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.33/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description P3-to-RR3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.34/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description P3-to-PE2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.36/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description P3-to-ASBR3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.31/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 description P3-to-PE3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family inet address 192.168.0.38/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.1.1.5/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family iso address 49.0000.0000.aaaa.0005.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set routing-options router-id 10.1.1.5</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface all</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols ldp interface all</kbd>
<kbd class="ph userinput">set protocols mpls interface all</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 PE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description PE2-to-CE2-Link1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.40/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description PE2-to-CE2-Link2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.42/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description PE2-to-P3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.37/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family inet address 10.1.1.1/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family iso address 49.0000.0000.aaaa.0001.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement add-noexport term 1 then community add noexport</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 from rib inet.3</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then metric add 0</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then local-preference 200</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-export-red term 1 then community add leak2red</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-export-red term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-import-red term 1 from community leak2red</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-import-red term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options community leak2red members target:100:100</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-export</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-advertise</kbd>
<kbd class="ph userinput">set routing-instances red protocols bgp group toCE2 peer-as 65003</kbd>
<kbd class="ph userinput">set routing-instances red protocols bgp group toCE2 neighbor 192.168.0.43</kbd>
<kbd class="ph userinput">set routing-instances red instance-type vrf</kbd>
<kbd class="ph userinput">set routing-instances red interface ge-0/0/2.0</kbd>
<kbd class="ph userinput">set routing-instances red vrf-import vrf-import-red</kbd>
<kbd class="ph userinput">set routing-instances red vrf-export vrf-export-red</kbd>
<kbd class="ph userinput">set routing-options route-distinguisher-id 10.1.1.1</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options interface-routes rib-group inet inet0to3</kbd>
<kbd class="ph userinput">set routing-options router-id 10.1.1.1</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-policy allow-lo0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-policy add-noexport</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/3.0</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs3-1 peer-as 65003</kbd>
<kbd class="ph userinput">set protocols bgp group toAs3-1 neighbor 192.168.0.41</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR local-address 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR advertise-external</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast rib-group inet3to0</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast add-path receive</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast add-path send path-count 4</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet6-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR export export-inet3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR neighbor 10.1.1.6</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs multihop no-nexthop-change</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs local-address 10.1.1.1</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet6 unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet6-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs peer-as 65002</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs neighbor 10.2.2.5</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs vpn-apply-export</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 PE3</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/3 description PE3-to-CE2-Link1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.44/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description PE3-to-CE2-Link2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.46/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 description PE3-to-P3</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family inet address 192.168.0.39/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family iso</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/5 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family inet address 10.1.1.2/32</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 1 family iso address 49.0000.0000.aaaa.0002.00</kbd>
<kbd class="ph userinput">set policy-options policy-statement add-noexport term 1 then community add noexport</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement allow-lo0 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 from rib inet.3</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement export-inet3 term 2 then reject</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from protocol bgp</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then metric add 0</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then local-preference 200</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement pplb then load-balance per-packet</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-export-red term 1 then community add leak2red</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-export-red term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-import-red term 1 from community leak2red</kbd>
<kbd class="ph userinput">set policy-options policy-statement vrf-import-red term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options community leak2red members target:100:100</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-export</kbd>
<kbd class="ph userinput">set policy-options community noexport members no-advertise</kbd>
<kbd class="ph userinput">set routing-instances red protocols bgp group toCE2 peer-as 65003</kbd>
<kbd class="ph userinput">set routing-instances red protocols bgp group toCE2 neighbor 192.168.0.47</kbd>
<kbd class="ph userinput">set routing-instances red instance-type vrf</kbd>
<kbd class="ph userinput">set routing-instances red interface ge-0/0/4.0</kbd>
<kbd class="ph userinput">set routing-instances red vrf-import vrf-import-red</kbd>
<kbd class="ph userinput">set routing-instances red vrf-export vrf-export-red</kbd>
<kbd class="ph userinput">set routing-options route-distinguisher-id 10.1.1.2</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export pplb</kbd>
<kbd class="ph userinput">set routing-options interface-routes rib-group inet inet0to3</kbd>
<kbd class="ph userinput">set routing-options router-id 10.1.1.2</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 1</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet0to3 import-policy allow-lo0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.3</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-rib inet.0</kbd>
<kbd class="ph userinput">set routing-options rib-groups inet3to0 import-policy add-noexport</kbd>
<kbd class="ph userinput">set protocols isis level 1 disable</kbd>
<kbd class="ph userinput">set protocols isis interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols isis export allow-lo0</kbd>
<kbd class="ph userinput">set protocols isis topologies ipv6-unicast</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols ldp interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/5.0</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs3 peer-as 65003</kbd>
<kbd class="ph userinput">set protocols bgp group toAs3 neighbor 192.168.0.45</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR type internal</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR local-address 10.1.1.2</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR advertise-external</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast rib-group inet3to0</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR family inet labeled-unicast rib inet.3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR export export-inet3</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1RR neighbor 10.1.1.6</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs multihop no-nexthop-change</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs local-address 10.1.1.2</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet6 unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs family inet6-vpn unicast</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs peer-as 65002</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs neighbor 10.2.2.5</kbd>
<kbd class="ph userinput">set protocols bgp group toAs2PEs vpn-apply-export</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file bgp.log</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions file size 100m</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag state detail</kbd>
<kbd class="ph userinput">set protocols bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div> <p class="p"><strong class="ph b">设备 CE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/1 description CE2-to-PE2-Link1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 192.168.0.41/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 description CE2-to-PE2-Link2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/2 unit 0 family inet address 192.168.0.43/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 description CE2-to-PE3-Link1</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/3 unit 0 family inet address 192.168.0.45/31</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 description CE2-to-PE3-Link2</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 vlan-id 100</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/4 unit 0 family inet address 192.168.0.47/31</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.3.3.3/32</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then metric 50</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhs term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhsMED100 term 1 from interface lo0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhsMED100 term 1 then metric 100</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhsMED100 term 1 then next-hop self</kbd>
<kbd class="ph userinput">set policy-options policy-statement nhsMED100 term 1 then accept</kbd>
<kbd class="ph userinput">set policy-options community map2bronze members 100:200</kbd>
<kbd class="ph userinput">set policy-options community map2gold members 100:100</kbd>
<kbd class="ph userinput">set policy-options community map2gold_bronze_plain members 300:400</kbd>
<kbd class="ph userinput">set routing-options router-id 10.3.3.3</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 65003</kbd>
<kbd class="ph userinput">set protocols bgp path-selection external-router-id</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1Internet export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1Internet peer-as 65001</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1Internet neighbor 192.168.0.40</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1Internet neighbor 192.168.0.44 export nhsMED100</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1L3VPN export nhs</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1L3VPN peer-as 65001</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1L3VPN neighbor 192.168.0.46</kbd>
<kbd class="ph userinput">set protocols bgp group toAs1L3VPN neighbor 192.168.0.42 export nhsMED100</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d48e219__d77004e14935" class="section"><h4 class="title sectiontitle">配置 CE1</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e14940" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15071" class="xref">结果</a></li></ul> <div id="d48e219__d77004e14940" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 CE1：</p> <ol class="ol"><li class="li"><p class="p">配置接口以启用 IP 和 MPLS 传输。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@CE1#<kbd class="ph userinput">set ge-0/0/1 description CE1-to-PE1-Link1</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/1 unit 0 vlan-id 100</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 192.168.0.0/31</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/2 description CE1-to-PE1-Link2</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/2 vlan-tagging</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/2 unit 0 vlan-id 100</kbd>
user@CE1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 192.168.0.2/31</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置要用作 LDP 和 BGP 会话的路由器 ID 和终止接口的环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@CE1#<kbd class="ph userinput">set lo0 unit 0 family inet address 10.4.4.4/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@CE1#<kbd class="ph userinput">set policy-statement nhs term 1 from interface lo0.0</kbd>
user@CE1#<kbd class="ph userinput">set policy-statement nhs term 1 then next-hop self</kbd>
user@CE1#<kbd class="ph userinput">set policy-statement nhs term 1 then accept</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由选项。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@CE1#<kbd class="ph userinput">set router-id 10.4.4.4</kbd>
user@CE1#<kbd class="ph userinput">set autonomous-system 65004</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将标记为单播的 BGP 配置为 ABR，以将环路 IP 地址交换为 BGP 标记的单播前缀。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp]
user@CE1#<kbd class="ph userinput">set path-selection external-router-id</kbd>
user@CE1#<kbd class="ph userinput">set group toAs2 export nhs</kbd>
user@CE1#<kbd class="ph userinput">set group toAs2 peer-as 65002</kbd>
user@CE1#<kbd class="ph userinput">set group toAs2 neighbor 192.168.0.1</kbd>
user@CE1#<kbd class="ph userinput">set group toAs2 neighbor 192.168.0.3</kbd>
</pre></div> <!----></div></li></ol></div> <div id="d48e219__d77004e15071" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code> 、<code class="ph codeph">show policy-options</code>、<code class="ph codeph">show routing-options</code> 和 <code class="ph codeph">show                             protocols</code> 命令，以确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/1 {
        description CE1-to-PE1-Link1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.0/31;
            }
        }
    }
    ge-0/0/2 {
        description CE1-to-PE1-Link2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.2/31;
            }
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 10.4.4.4/32;
            }
        }
    }
}
policy-options {
    policy-statement nhs {
        term 1 {
            from interface lo0.0;
            then {
                next-hop self;
                accept;
            }
        }
    }
}
routing-options {
    router-id 10.4.4.4;
    autonomous-system 65004;
}
protocols {
    bgp {
        path-selection external-router-id;
        group toAs2 {
            export nhs;
            peer-as 65002;
            neighbor 192.168.0.1;
            neighbor 192.168.0.3;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e15110" class="section"><h4 class="title sectiontitle">配置 PE1</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15115" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15601" class="xref">结果</a></li></ul> <div id="d48e219__d77004e15115" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 PE1：</p> <ol class="ol"><li class="li"><p class="p">配置接口以启用 IP 和 MPLS 传输。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit interfaces]
user@PE1#<kbd class="ph userinput">set ge-0/0/1 description PE1-to-CE1-Link1</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/1 unit 0 vlan-id 100</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 192.168.0.1/31</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/2 description PE1-to-CE1-Link2</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/2 vlan-tagging</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/2 unit 0 vlan-id 100</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 192.168.0.3/31</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/3 description PE1-to-P1</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/3 vlan-tagging</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/3 unit 0 vlan-id 100</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/3 unit 0 family inet address 192.168.0.4/31</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/3 unit 0 family iso</kbd>
user@PE1#<kbd class="ph userinput">set ge-0/0/3 unit 0 family mpls</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">配置要用作 LDP 和 BGP 会话的路由器 ID 和终止接口的环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@PE1#<kbd class="ph userinput">set lo0 unit 1 family inet address 10.2.2.5/32</kbd>
user@PE1#<kbd class="ph userinput">set lo0 unit 1 family iso address 49.0000.0000.aaaa.0005.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit policy-options]
user@PE1#<kbd class="ph userinput">set policy-statement add-noexport term 1 then community add noexport</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement export-inet3 term 1 from rib inet.3</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement export-inet3 term 1 then accept</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement export-inet3 term 2 then reject</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term 1 from route-filter 10.1.1.0/24 orlonger</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term 1 then accept</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term 1 then multipath-resolve</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term 2 from route-filter 10.2.2.0/24 orlonger</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term 2 then accept</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term 2 then multipath-resolve</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement mp-resolv term def then reject</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement nhs term 1 from protocol bgp</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement nhs term 1 then local-preference 200</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement nhs term 1 then next-hop self</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement nhs term 1 then accept</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement pplb then load-balance per-packet</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement vrf-export-red term 1 then community add leak2red</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement vrf-export-red term 1 then accept</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement vrf-import-red term 1 from community leak2red</kbd>
user@PE1#<kbd class="ph userinput">set policy-statement vrf-import-red term 1 then accept</kbd>
user@PE1#<kbd class="ph userinput">set community leak2red members target:100:100</kbd>
user@PE1#<kbd class="ph userinput">set community noexport members no-export</kbd>
user@PE1#<kbd class="ph userinput">set community noexport members no-advertise</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">配置第 3 层 VPN 路由实例以提供客户服务。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances]
user@PE1#<kbd class="ph userinput">set red routing-options multipath preserve-nexthop-hierarchy</kbd>
user@PE1#<kbd class="ph userinput">set red routing-options protect core</kbd>
user@PE1#<kbd class="ph userinput">set red protocols bgp group toCE1 peer-as 65004</kbd>
user@PE1#<kbd class="ph userinput">set red protocols bgp group toCE1 neighbor 192.168.0.2</kbd>
user@PE1#<kbd class="ph userinput">set red instance-type vrf</kbd>
user@PE1#<kbd class="ph userinput">set red interface ge-0/0/2.0</kbd>
user@PE1#<kbd class="ph userinput">set red vrf-import vrf-import-red</kbd>
user@PE1#<kbd class="ph userinput">set red vrf-export vrf-export-red</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置解析器 RIB 导入策略和解析 RIB，以便为策略中指定的选定第 3 层 VPN 前缀启用扩展的分层下一跃点结构。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit routing-options]
user@PE1#<kbd class="ph userinput">set rib inet.3 protect core</kbd>
user@PE1#<kbd class="ph userinput">set route-distinguisher-id 10.2.2.5</kbd>
user@PE1#<kbd class="ph userinput">set forwarding-table export pplb</kbd>
user@PE1#<kbd class="ph userinput">set resolution preserve-nexthop-hierarchy</kbd>
user@PE1#<kbd class="ph userinput">set resolution rib inet.0 import mp-resolv</kbd>
user@PE1#<kbd class="ph userinput">set interface-routes rib-group inet inet0to3</kbd>
user@PE1#<kbd class="ph userinput">set router-id 10.2.2.5</kbd>
user@PE1#<kbd class="ph userinput">set autonomous-system 65002</kbd>
user@PE1#<kbd class="ph userinput">set protect core</kbd>
user@PE1#<kbd class="ph userinput">set rib-groups inet0to3 import-rib inet.0</kbd>
user@PE1#<kbd class="ph userinput">set rib-groups inet0to3 import-rib inet.3</kbd>
user@PE1#<kbd class="ph userinput">set rib-groups inet0to3 import-policy allow-lo0</kbd>
user@PE1#<kbd class="ph userinput">set rib-groups inet3to0 import-rib inet.3</kbd>
user@PE1#<kbd class="ph userinput">set rib-groups inet3to0 import-rib inet.0</kbd>
user@PE1#<kbd class="ph userinput">set rib-groups inet3to0 import-policy add-noexport</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">配置 OSPF 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf]
user@PE1#<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface all link-protection;</kbd>
user@PE1#<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface fxp0.0 disable;</kbd>
user@PE1#<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive;</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由协议以在整个域中建立 IP 和 MPLS 连接。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@PE1#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@PE1#<kbd class="ph userinput">set isis interface ge-0/0/3.0</kbd>
user@PE1#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@PE1#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@PE1#<kbd class="ph userinput">set rsvp interface ge-0/0/3.0</kbd>
user@PE1#<kbd class="ph userinput">set ldp interface ge-0/0/3.0</kbd>
user@PE1#<kbd class="ph userinput">set mpls label-switched-path toABR1-gold to 10.2.2.3</kbd>
user@PE1#<kbd class="ph userinput">set mpls label-switched-path toABR1-bronze to 10.2.2.3</kbd>
user@PE1#<kbd class="ph userinput">set mpls label-switched-path toABR2-gold to 10.2.2.4</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将标记为单播的 BGP 配置为 ABR，以将环路 IP 地址交换为 BGP 标记的单播前缀。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit protocols bgp]
user@PE1#<kbd class="ph userinput">set path-selection external-router-id</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR type internal</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR local-address 10.2.2.5</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR family inet labeled-unicast rib-group inet3to0</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR family inet labeled-unicast add-path receive</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR family inet labeled-unicast add-path send path-count 4</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR family inet labeled-unicast nexthop-resolution preserve-nexthop-hierarchy</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR family inet labeled-unicast rib inet.3</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR export nhs</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR export export-inet3</kbd>
user@PE1#<kbd class="ph userinput">set group toAs2RR neighbor 10.2.2.6</kbd>
user@PE1#<kbd class="ph userinput">set group toAs4 peer-as 65004</kbd>
user@PE1#<kbd class="ph userinput">set group toAs4 neighbor 192.168.0.0</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs multihop no-nexthop-change</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs local-address 10.2.2.5</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs family inet unicast</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs family inet-vpn unicast</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs family inet6 unicast</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs family inet6-vpn unicast</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs export nhs</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs peer-as 65001</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs neighbor 10.1.1.1</kbd>
user@PE1#<kbd class="ph userinput">set group toAs1PEs neighbor 10 .1.1.2</kbd>
user@PE1#<kbd class="ph userinput">set traceoptions file bgp.log</kbd>
user@PE1#<kbd class="ph userinput">set traceoptions file size 100m</kbd>
user@PE1#<kbd class="ph userinput">set traceoptions flag state detail</kbd>
user@PE1#<kbd class="ph userinput">set traceoptions flag policy</kbd>
user@PE1#<kbd class="ph userinput">set multipath</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li></ol></div> <div id="d48e219__d77004e15601" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show chassis</code>、 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code>、 <code class="ph codeph">show                             routing-instances</code>和<code class="ph codeph">show routing-options</code><code class="ph codeph">show protocols</code>命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/1 {
        description PE1-to-CE1-Link1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.1/31;
            }
        }
    }
    ge-0/0/2 {
        description PE1-to-CE1-Link2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.3/31;
            }
        }
    }
    ge-0/0/3 {
        description PE1-to-P1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.4/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 1 {
            family inet {
                address 10.2.2.5/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0005.00;
            }
        }
    }
}
policy-options {
    policy-statement add-noexport {
        term 1 {
            then {
                community add noexport;
            }
        }
    }
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.1;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement export-inet3 {
        term 1 {
            from rib inet.3;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement mp-resolv {
        term 1 {
            from {
                route-filter 10.1.1.0/24 orlonger;
            }
            then {
                accept;
                multipath-resolve;
            }
        }
        term 2 {
            from {
                route-filter 10.2.2.0/24 orlonger;
            }
            then {
                accept;
                multipath-resolve;
            }
        }
        term def {
            then reject;
        }
    }
    policy-statement nhs {
        term 1 {
            from protocol bgp;
            then {
                local-preference 200;
                next-hop self;
                accept;
            }
        }
    }
    policy-statement pplb {
        then {
            load-balance per-packet;
        }
    }
    policy-statement vrf-export-red {
        term 1 {
            then {
                community add leak2red;
                accept;
            }
        }
    }
    policy-statement vrf-import-red {
        term 1 {
            from community leak2red;
            then accept;
        }
    }
    community leak2red members target:100:100;
    community noexport members [ no-export no-advertise ];
}
routing-instances {
    red {
        routing-options {
            multipath preserve-nexthop-hierarchy;
            protect core;
        }
        protocols {
            bgp {
                group toCE1 {
                    peer-as 65004;
                    neighbor 192.168.0.2;
                }
            }
        }
        instance-type vrf;
        interface ge-0/0/2.0;
        vrf-import vrf-import-red;
        vrf-export vrf-export-red;
    }
}
routing-options {
    rib inet.3 {
        protect core;
    }
    route-distinguisher-id 10.2.2.5;
    forwarding-table {
        export pplb;
    }
    resolution {
        preserve-nexthop-hierarchy;
        rib inet.0 {
            import mp-resolv;
        }
    }
    interface-routes {
        rib-group inet inet0to3;
    }
    router-id 10.2.2.5;
    autonomous-system 65002;
    protect core;
    rib-groups {
        inet0to3 {
            import-rib [ inet.0 inet.3 ];
            import-policy allow-lo0;
        }
        inet3to0 {
            import-rib [ inet.3 inet.0 ];
            import-policy add-noexport;
        }
    }
}
protocols {
    isis {
        level 1 disable;
        interface ge-0/0/3.0;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface ge-0/0/3.0;
    }
    bgp {
        path-selection external-router-id;
        group toAs2RR {
            type internal;
            local-address 10.2.2.5;
            family inet {
                labeled-unicast {
                    rib-group inet3to0;
                    add-path {
                        receive;
                        send {
                            path-count 4;
                        }
                    }
                    nexthop-resolution {
                        preserve-nexthop-hierarchy;
                    }
                    rib {
                        inet.3;
                    }
                }
            }
            export [ nhs export-inet3 ];
            neighbor 10.2.2.6;
        }
        group toAs4 {
            peer-as 65004;
            neighbor 192.168.0.0;
        }
        group toAs1PEs {
            multihop {
                no-nexthop-change;
            }
            local-address 10.2.2.5;
            family inet {
                unicast;
            }
            family inet-vpn {
                unicast;
            }
            family inet6 {
                unicast;
            }
            family inet6-vpn {
                unicast;
            }
            export nhs;
            peer-as 65001;
            neighbor 10.1.1.1;
            neighbor 10.1.1.2;
        }
        traceoptions {
            file bgp.log size 100m;
            flag state detail;
            flag policy;
        }
        multipath;
    }
    ldp {
        interface ge-0/0/3.0;
    }
    mpls {
        label-switched-path toABR1-gold {
            to 10.2.2.3;
        }
        label-switched-path toABR1-bronze {
            to 10.2.2.3;
        }
        label-switched-path toABR2-gold {
            to 10.2.2.4;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e15704" class="section"><h4 class="title sectiontitle">配置 P1 设备</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15709" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15890" class="xref">结果</a></li></ul> <div id="d48e219__d77004e15709" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 P1：</p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit interfaces]
user@P1#<kbd class="ph userinput">set ge-0/0/1 description P1-to-RR1</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/1 unit 0 vlan-id 100</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 192.168.0.6/31</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family iso</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/2 description P1-to-ABR1</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/2 vlan-tagging</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/2 unit 0 vlan-id 100</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 192.168.0.8/31</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family iso</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family mpls</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/3 description P1-to-PE1</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/3 vlan-tagging</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/3 unit 0 vlan-id 100</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/3 unit 0 family inet address 192.168.0.5/31</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/3 unit 0 family iso</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/3 unit 0 family mpls</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/4 description P1-to-ABR2</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/4 vlan-tagging</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/4 unit 0 vlan-id 100</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/4 unit 0 family inet address 192.168.0.10/31</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/4 unit 0 family iso</kbd>
user@P1#<kbd class="ph userinput">set ge-0/0/4 unit 0 family mpls</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">配置环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@P1#<kbd class="ph userinput">set lo0 unit 0 family inet address 10.2.2.8/32</kbd>
user@P1#<kbd class="ph userinput">set lo0 unit 0 family iso address 49.0000.0000.aaaa.0008.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@P1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
user@P1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@P1#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由选项。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@P1#<kbd class="ph userinput">set router-id 10.2.2.8</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 ISIS、RSVP、LDP 和 MPLS 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@P1#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@P1#<kbd class="ph userinput">set isis interface all</kbd>
user@P1#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@P1#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@P1#<kbd class="ph userinput">set rsvp interface all</kbd>
user@P1#<kbd class="ph userinput">set ldp interface all</kbd>
user@P1#<kbd class="ph userinput">set mpls interface all</kbd>
</pre></div> <!----></div></li></ol></div> <div id="d48e219__d77004e15890" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code>和 <code class="ph codeph">show protocols</code> 命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/1 {
        description P1-to-RR1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.6/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/2 {
        description P1-to-ABR1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.8/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/3 {
        description P1-to-PE1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.5/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/4 {
        description P1-to-ABR2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.10/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 10.2.2.8/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0008.00;
            }
        }
    }
}
policy-options {
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.0;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
}
routing-options {
    router-id 10.2.2.8;
}
protocols {
    isis {
        level 1 disable;
        interface all;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface all;
    }
    ldp {
        interface all;
    }
    mpls {
        interface all;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e15917" class="section"><h4 class="title sectiontitle">配置 RR1 设备</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e15922" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16182" class="xref">结果</a></li></ul> <div id="d48e219__d77004e15922" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 RR1：</p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR1#<kbd class="ph userinput">set ge-0/0/1 description RR1-to-P1</kbd>
user@RR1#<kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@RR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 vlan-id 100</kbd>
user@RR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 192.168.0.7/31</kbd>
user@RR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family iso</kbd>
user@RR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR1#<kbd class="ph userinput">set lo0 unit 1 family inet address 10.2.2.6/32</kbd>
user@RR1#<kbd class="ph userinput">set lo0 unit 1 family iso address 49.0000.0000.aaaa.0006.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@RR1#<kbd class="ph userinput">set policy-statement add-noexport term 1 then community add noexport</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement export-inet3 term 1 from rib inet.3</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement export-inet3 term 1 then accept</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement export-inet3 term 2 then reject</kbd>
user@RR1#<kbd class="ph userinput">set policy-statement pplb then load-balance per-packet</kbd>
user@RR1#<kbd class="ph userinput">set community noexport members no-export</kbd>
user@RR1#<kbd class="ph userinput">set community noexport members no-advertise</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由选项。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@RR1#<kbd class="ph userinput">set forwarding-table export pplb</kbd>
user@RR1#<kbd class="ph userinput">set interface-routes rib-group inet inet0to3</kbd>
user@RR1#<kbd class="ph userinput">set router-id 10.2.2.6</kbd>
user@RR1#<kbd class="ph userinput">set autonomous-system 2</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet0to3 import-rib inet.0</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet0to3 import-rib inet.3</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet0to3 import-policy allow-lo0</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet3to0 import-rib inet.3</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet3to0 import-rib inet.0</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet3to0 import-rib inet6.3</kbd>
user@RR1#<kbd class="ph userinput">set rib-groups inet3to0 import-policy add-noexport</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 ISIS、RSVP、LDP 和 MPLS 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR1#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@RR1#<kbd class="ph userinput">set isis interface all</kbd>
user@RR1#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@RR1#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@RR1#<kbd class="ph userinput">set rsvp interface all</kbd>
user@RR1#<kbd class="ph userinput">set ldp interface all</kbd>
user@RR1#<kbd class="ph userinput">set mpls interface all</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 标记的单播，以将环路 IP 地址交换为 BGP 标记的单播前缀。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit protocols bgp]
user@RR1#<kbd class="ph userinput">set path-selection external-router-id</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs type internal</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs family inet labeled-unicast rib-group inet3to0</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs family inet labeled-unicast add-path receive</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs family inet labeled-unicast add-path send path-count 4</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs family inet labeled-unicast rib inet.3</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs export export-inet3</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs neighbor 10.2.2.3</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs neighbor 10.2.2.4</kbd>
user@RR1#<kbd class="ph userinput">set group toAs2Reg2BNs neighbor 10.2.2.5</kbd>
user@RR1#<kbd class="ph userinput">set traceoptions file bgp.log</kbd>
user@RR1#<kbd class="ph userinput">set traceoptions file size 100m</kbd>
user@RR1#<kbd class="ph userinput">set traceoptions flag state detail</kbd>
user@RR1#<kbd class="ph userinput">set traceoptions flag policy</kbd>
user@RR1#<kbd class="ph userinput">set local-address 10.2.2.6</kbd>
user@RR1#<kbd class="ph userinput">set cluster 10.2.2.6</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li></ol></div> <div id="d48e219__d77004e16182" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code><code class="ph codeph">show routing-options</code>和<code class="ph codeph">show protocols</code>命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/1 {
        description RR1-to-P1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.7/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 1 {
            family inet {
                address 10.2.2.6/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0006.00;
            }
        }
    }
}
policy-options {
    policy-statement add-noexport {
        term 1 {
            then {
                community add noexport;
            }
        }
    }
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.1;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement export-inet3 {
        term 1 {
            from rib inet.3;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement pplb {
        then {
            load-balance per-packet;
        }
    }
    community noexport members [ no-export no-advertise ];
}
routing-options {
    forwarding-table {
        export pplb;
    }
    interface-routes {
        rib-group inet inet0to3;
    }
    router-id 10.2.2.6;
    autonomous-system 2;
    rib-groups {
        inet0to3 {
            import-rib [ inet.0 inet.3 ];
            import-policy allow-lo0;
        }
        inet3to0 {
            import-rib [ inet.3 inet.0 inet6.3 ];
            import-policy add-noexport;
        }
    }
}
protocols {
    isis {
        level 1 disable;
        interface all;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface all;
    }
    bgp {
        path-selection external-router-id;
        group toAs2Reg2BNs {
            type internal;
            family inet {
                labeled-unicast {
                    rib-group inet3to0;
                    add-path {
                        receive;
                        send {
                            path-count 4;
                        }
                    }
                    rib {
                        inet.3;
                    }
                }
            }
            export export-inet3;
            neighbor 10.2.2.3;
            neighbor 10.2.2.4;
            neighbor 10.2.2.5;
        }
        traceoptions {
            file bgp.log size 100m;
            flag state detail;
            flag policy;
        }
        local-address 10.2.2.6;
        cluster 10.2.2.6;
    }
    ldp {
        interface all;
    }
    mpls {
        interface all;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e16236" class="section"><h4 class="title sectiontitle">配置 ABR1 设备</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16241" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16503" class="xref">结果</a></li></ul> <div id="d48e219__d77004e16241" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 ABR1：</p> <ol class="ol"><li class="li"><p class="p">配置接口以启用 IP 和 MPLS 传输。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@ABR1#<kbd class="ph userinput">set ge-0/0/1 description ABR1-to-P2</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 vlan-id 100</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 192.168.0.12/31</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family iso</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/2 description ABR1-to-P1</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/2 vlan-tagging</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/2 unit 0 vlan-id 100</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 192.168.0.9/31</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family iso</kbd>
user@ABR1#<kbd class="ph userinput">set ge-0/0/2 unit 0 family mpls</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置要用作 LDP 和 BGP 会话的路由器 ID 和终止接口的环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@ABR1#<kbd class="ph userinput">set lo0 unit 0 family inet address 10.2.2.3/32</kbd>
user@ABR1#<kbd class="ph userinput">set lo0 unit 0 family iso address 49.0000.0000.aaaa.0003.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@ABR1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
user@ABR1#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@ABR1#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
user@ABR1#<kbd class="ph userinput">set policy-statement nhs term 1 from protocol bgp</kbd>
user@ABR1#<kbd class="ph userinput">set policy-statement nhs term 1 then next-hop self</kbd>
user@ABR1#<kbd class="ph userinput">set policy-statement nhs term 1 then accept</kbd>
user@ABR1#<kbd class="ph userinput">set policy-statement pplb then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用按流负载均衡策略以启用流量保护。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@ABR1#<kbd class="ph userinput">set forwarding-table export pplb</kbd>
user@ABR1#<kbd class="ph userinput">set router-id 10.2.2.3</kbd>
user@ABR1#<kbd class="ph userinput">set autonomous-system 65002</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 ISIS、RSVP、MPLS 和 LDP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@ABR1#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@ABR1#<kbd class="ph userinput">set isis interface all</kbd>
user@ABR1#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@ABR1#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@ABR1#<kbd class="ph userinput">set rsvp interface all</kbd>
user@ABR1#<kbd class="ph userinput">set ldp interface all</kbd>
user@ABR1#<kbd class="ph userinput">set mpls label-switched-path toASBR2-gold to 10.2.2.2</kbd>
user@ABR1#<kbd class="ph userinput">set mpls label-switched-path toASBR1-bronze to 10.2.2.1</kbd>
user@ABR1#<kbd class="ph userinput">set mpls label-switched-path toASBR2-bronze to 10.2.2.2</kbd>
user@ABR1#<kbd class="ph userinput">set mpls interface all</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 标记的单播，以将环路 IP 地址交换为 BGP 标记的单播前缀。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit protocols]
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR type internal</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR local-address 10.2.2.3</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR advertise-inactive</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR family inet labeled-unicast add-path receive</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR family inet labeled-unicast add-path send path-count 4</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR export nhs</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR cluster 10.2.2.3</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR neighbor 10.2.2.6</kbd>
user@ABR1#<kbd class="ph userinput">set bgp group toAs2RR neighbor 10.2.2.7</kbd>
user@ABR1#<kbd class="ph userinput">set bgp traceoptions file bgp.log</kbd>
user@ABR1#<kbd class="ph userinput">set bgp traceoptions file size 100m</kbd>
user@ABR1#<kbd class="ph userinput">set bgp traceoptions flag state detail</kbd>
user@ABR1#<kbd class="ph userinput">set bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li></ol></div> <div id="d48e219__d77004e16503" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code><code class="ph codeph">show routing-options</code>和<code class="ph codeph">show protocols</code>命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/1 {
        description ABR1-to-P2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.12/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/2 {
        description ABR1-to-P1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.9/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 10.2.2.3/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0003.00;
            }
        }
    }
}
policy-options {
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.0;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement nhs {
        term 1 {
            from protocol bgp;
            then {
                next-hop self;
                accept;
            }
        }
    }
    policy-statement pplb {
        then {
            load-balance per-packet;
        }
    }
}
routing-options {
    forwarding-table {
        export pplb;
    }
    router-id 10.2.2.3;
    autonomous-system 65002;
}
protocols {
    isis {
        level 1 disable;
        interface all;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface all;
    }
    bgp {
        group toAs2RR {
            type internal;
            local-address 10.2.2.3;
            advertise-inactive;
            family inet {
                labeled-unicast {
                    add-path {
                        receive;
                        send {
                            path-count 4;
                        }
                    }
                    rib {
                        inet.3;
                    }
                }
            }
            export nhs;
            cluster 10.2.2.3;
            neighbor 10.2.2.6;
            neighbor 10.2.2.7;
        }
        traceoptions {
            file bgp.log size 100m;
            flag state detail;
            flag policy;
        }
    }
    ldp {
        interface all;
    }
    mpls {
        label-switched-path toASBR2-gold {
            to 10.2.2.2;
        }
        label-switched-path toASBR1-bronze {
            to 10.2.2.1;
        }
        label-switched-path toASBR2-bronze {
            to 10.2.2.2;
        }
        interface all;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e16571" class="section"><h4 class="title sectiontitle">配置 ABR2 设备</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16576" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16783" class="xref">结果</a></li></ul> <div id="d48e219__d77004e16576" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 ABR2：</p> <ol class="ol"><li class="li"><p class="p">配置接口以启用 IP 和 MPLS 传输。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@ABR2#<kbd class="ph userinput">set ge-0/0/2 description ABR2-to-P2</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/2 vlan-tagging</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/2 unit 0 vlan-id 100</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 192.168.0.14/31</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/2 unit 0 family iso</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/2 unit 0 family mpls</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/4 description ABR2-to-P1</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/4 vlan-tagging</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/4 unit 0 vlan-id 100</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/4 unit 0 family inet address 192.168.0.11/31</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/4 unit 0 family iso</kbd>
user@ABR2#<kbd class="ph userinput">set ge-0/0/4 unit 0 family mpls</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置要用作 LDP 和 BGP 会话的路由器 ID 和终止接口的环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@ABR2#<kbd class="ph userinput">set lo0 unit 0 family inet address 2.2.2.4/32</kbd>
user@ABR2#<kbd class="ph userinput">set lo0 unit 0 family iso address 49.0000.0000.aaaa.0004.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@ABR2#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
user@ABR2#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@ABR2#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
user@ABR2#<kbd class="ph userinput">set policy-statement nhs term 1 from protocol bgp</kbd>
user@ABR2#<kbd class="ph userinput">set policy-statement nhs term 1 then next-hop self</kbd>
user@ABR2#<kbd class="ph userinput">set policy-statement nhs term 1 then accept</kbd>
user@ABR2#<kbd class="ph userinput">set policy-statement pplb then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用按流负载均衡策略以启用流量保护。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@ABR2#<kbd class="ph userinput">set forwarding-table export pplb</kbd>
user@ABR2#<kbd class="ph userinput">set router-id 2.2.2.4</kbd>
user@ABR2#<kbd class="ph userinput">set autonomous-system 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 ISIS、RSVP、MPLS 和 LDP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@ABR2#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@ABR2#<kbd class="ph userinput">set isis interface all</kbd>
user@ABR2#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@ABR2#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@ABR2#<kbd class="ph userinput">set rsvp interface all</kbd>
user@ABR2#<kbd class="ph userinput">set ldp interface all</kbd>
user@ABR2#<kbd class="ph userinput">set mpls label-switched-path toASBR1-bronze to 2.2.2.1</kbd>
user@ABR2#<kbd class="ph userinput">set mpls interface all</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 标记的单播，以将环路 IP 地址交换为 BGP 标记的单播前缀。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit protocols]
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR type internal</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR local-address 2.2.2.4</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR advertise-inactive</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR family inet labeled-unicast add-path receive</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR family inet labeled-unicast add-path send path-count 4</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR family inet labeled-unicast rib inet.3</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR export nhs</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR cluster 2.2.2.4</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR neighbor 2.2.2.6</kbd>
user@ABR2#<kbd class="ph userinput">set bgp group toAs2RR neighbor 2.2.2.7</kbd>
user@ABR2#<kbd class="ph userinput">set bgp traceoptions file bgp.log</kbd>
user@ABR2#<kbd class="ph userinput">set bgp traceoptions file size 100m</kbd>
user@ABR2#<kbd class="ph userinput">set bgp traceoptions flag state detail</kbd>
user@ABR2#<kbd class="ph userinput">set bgp traceoptions flag policy</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li></ol></div> <div id="d48e219__d77004e16783" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code><code class="ph codeph">show routing-options</code>和<code class="ph codeph">show protocols</code>命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/2 {
        description ABR2-to-P2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.14/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/4 {
        description ABR2-to-P1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.11/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 2.2.2.4/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0004.00;
            }
        }
    }
}
policy-options {
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.0;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement nhs {
        term 1 {
            from protocol bgp;
            then {
                next-hop self;
                accept;
            }
        }
    }
    policy-statement pplb {
        then {
            load-balance per-packet;
        }
    }
}
routing-options {
    forwarding-table {
        export pplb;
    }
    router-id 2.2.2.4;
    autonomous-system 2;
}
protocols {
    isis {
        level 1 disable;
        interface all;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface all;
    }
    bgp {
        group toAs2RR {
            type internal;
            local-address 2.2.2.4;
            advertise-inactive;
            family inet {
                labeled-unicast {
                    add-path {
                        receive;
                        send {
                            path-count 4;
                        }
                    }
                    rib {
                        inet.3;
                    }
                }
            }
            export nhs;
            cluster 2.2.2.4;
            neighbor 2.2.2.6;
            neighbor 2.2.2.7;
        }
        traceoptions {
            file bgp.log size 100m;
            flag state detail;
            flag policy;
        }
    }
    ldp {
        interface all;
    }
    mpls {
        label-switched-path toASBR1-bronze {
            to 2.2.2.1;
        }
        interface all;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e16802" class="section"><h4 class="title sectiontitle">配置 P2 设备</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16807" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e16997" class="xref">结果</a></li></ul> <div id="d48e219__d77004e16807" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 P2：</p> <ol class="ol"><li class="li"><p class="p">配置接口以启用 IP 和 MPLS 传输。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit interfaces]
user@P2#<kbd class="ph userinput">set ge-0/0/1 description P2-to-ABR1</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/1 unit 0 vlan-id 100</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 192.168.0.13/31</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/1 unit 0 family iso</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/2 description P2-to-ABR2</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/2 vlan-tagging</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/2 unit 0 vlan-id 100</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/2 unit 0 family inet address 192.168.0.15/31</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/2 unit 0 family iso</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/2 unit 0 family mpls</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/3 description P2-to-RR2</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/3 vlan-tagging</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/3 unit 0 vlan-id 100</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/3 unit 0 family inet address 192.168.0.16/31</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/3 unit 0 family iso</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/3 unit 0 family mpls</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/4 description P2-to-ASBR1</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/4 vlan-tagging</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/4 unit 0 vlan-id 100</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/4 unit 0 family inet address 192.168.0.18/31</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/4 unit 0 family iso</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/4 unit 0 family mpls</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/5 description P2-to-ASBR2</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/5 vlan-tagging</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/5 unit 0 vlan-id 100</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/5 unit 0 family inet address 192.168.0.20/31</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/5 unit 0 family iso</kbd>
user@P2#<kbd class="ph userinput">set ge-0/0/5 unit 0 family mpls</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li> <li class="li"><p class="p">配置要用作 LDP 和 BGP 会话的路由器 ID 和终止接口的环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@P2#<kbd class="ph userinput">set lo0 unit 0 family inet address 2.2.2.9/32</kbd>
user@P2#<kbd class="ph userinput">set lo0 unit 0 family iso address 49.0000.0000.aaaa.0009.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@P2#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.0</kbd>
user@P2#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@P2#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由选项。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@P2#<kbd class="ph userinput">set router-id 2.2.2.9</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 ISIS、RSVP、MPLS 和 LDP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@P2#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@P2#<kbd class="ph userinput">set isis interface all</kbd>
user@P2#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@P2#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@P2#<kbd class="ph userinput">set rsvp interface all</kbd>
user@P2#<kbd class="ph userinput">set ldp interface all</kbd>
user@P2#<kbd class="ph userinput">set mpls interface all</kbd>
</pre></div> <!----></div></li></ol></div> <div id="d48e219__d77004e16997" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code><code class="ph codeph">show routing-options</code>和<code class="ph codeph">show protocols</code>命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/1 {
        description P2-to-ABR1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.13/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/2 {
        description P2-to-ABR2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.15/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/3 {
        description P2-to-RR2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.16/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/4 {
        description P2-to-ASBR1;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.18/31;
            }
            family iso;
            family mpls;
        }
    }
    ge-0/0/5 {
        description P2-to-ASBR2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.20/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 0 {
            family inet {
                address 2.2.2.9/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0009.00;
            }
        }
    }
}
policy-options {
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.0;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
}
routing-options {
    router-id 2.2.2.9;
}
protocols {
    isis {
        level 1 disable;
        interface all;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface all;
    }
    ldp {
        interface all;
    }
    mpls {
        interface all;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div> <div id="d48e219__d77004e17016" class="section"><h4 class="title sectiontitle">配置 RR2 设备</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e17021" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e219__d77004e17222" class="xref">结果</a></li></ul> <div id="d48e219__d77004e17021" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">下面的示例要求您在各个配置层级中进行导航。有关导航 CLI 的信息，请参阅 <cite class="cite">CLI 用户指南</cite>中的在<cite class="cite">配置模式下使用 CLI 编辑器</cite>。</p> <p class="p">要配置设备 RR2：</p> <ol class="ol"><li class="li"><p class="p">配置接口以启用 IP 和 MPLS 传输。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR2#<kbd class="ph userinput">set ge-0/0/3 description RR2-to-P2</kbd>
user@RR2#<kbd class="ph userinput">set ge-0/0/3 vlan-tagging</kbd>
user@RR2#<kbd class="ph userinput">set ge-0/0/3 unit 0 vlan-id 100</kbd>
user@RR2#<kbd class="ph userinput">set ge-0/0/3 unit 0 family inet address 192.168.0.17/31</kbd>
user@RR2#<kbd class="ph userinput">set ge-0/0/3 unit 0 family iso</kbd>
user@RR2#<kbd class="ph userinput">set ge-0/0/3 unit 0 family mpls</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置要用作 LDP 和 BGP 会话的路由器 ID 和终止接口的环路接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@RR2#<kbd class="ph userinput">set lo0 unit 1 family inet address 2.2.2.7/32</kbd>
user@RR2#<kbd class="ph userinput">set lo0 unit 1 family iso address 49.0000.0000.aaaa.0007.00</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置多路径解析策略以将分层多路径安装到 PFE 中。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@RR2#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 from interface lo0.1</kbd>
user@RR2#<kbd class="ph userinput">set policy-statement allow-lo0 term 1 then accept</kbd>
user@RR2#<kbd class="ph userinput">set policy-statement allow-lo0 term 2 then reject</kbd>
user@RR2#<kbd class="ph userinput">set policy-statement export-inet3 term 1 from rib inet.3</kbd>
user@RR2#<kbd class="ph userinput">set policy-statement export-inet3 term 1 then accept</kbd>
user@RR2#<kbd class="ph userinput">set policy-statement export-inet3 term 2 then reject</kbd>
user@RR2#<kbd class="ph userinput">set policy-statement pplb then load-balance per-packet</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">应用按流负载均衡策略以启用流量保护。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@RR2#<kbd class="ph userinput">set forwarding-table export pplb</kbd>
user@RR2#<kbd class="ph userinput">set interface-routes rib-group inet inet0to3</kbd>
user@RR2#<kbd class="ph userinput">set router-id 2.2.2.7</kbd>
user@RR2#<kbd class="ph userinput">set autonomous-system 2</kbd>
user@RR2#<kbd class="ph userinput">set rib-groups inet0to3 import-rib inet.0</kbd>
user@RR2#<kbd class="ph userinput">set rib-groups inet0to3 import-rib inet.3</kbd>
user@RR2#<kbd class="ph userinput">set rib-groups inet0to3 import-policy allow-lo0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 ISIS、RSVP、MPLS 和 LDP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols]
user@RR2#<kbd class="ph userinput">set isis level 1 disable</kbd>
user@RR2#<kbd class="ph userinput">set isis interface all</kbd>
user@RR2#<kbd class="ph userinput">set isis export allow-lo0</kbd>
user@RR2#<kbd class="ph userinput">set isis topologies ipv6-unicast</kbd>
user@RR2#<kbd class="ph userinput">set rsvp interface all</kbd>
user@RR2#<kbd class="ph userinput">set ldp interface all</kbd>
user@RR2#<kbd class="ph userinput">set mpls interface all</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 BGP 标记的单播，以将环路 IP 地址交换为 BGP 标记的单播前缀。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>[edit protocols]
user@RR2#<kbd class="ph userinput">set bgp path-selection external-router-id</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs type internal</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs family inet labeled-unicast add-path receive</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs family inet labeled-unicast add-path send path-count 4</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs family inet labeled-unicast rib inet.3</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs neighbor 2.2.2.1</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs neighbor 2.2.2.2</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs neighbor 2.2.2.3</kbd>
user@RR2#<kbd class="ph userinput">set bgp group toAs2Reg1BNs neighbor 2.2.2.4</kbd>
user@RR2#<kbd class="ph userinput">set bgp traceoptions file bgp.log</kbd>
user@RR2#<kbd class="ph userinput">set bgp traceoptions file size 100m</kbd>
user@RR2#<kbd class="ph userinput">set bgp traceoptions flag state detail</kbd>
user@RR2#<kbd class="ph userinput">set bgp traceoptions flag policy</kbd>
user@RR2#<kbd class="ph userinput">set bgp local-address 2.2.2.7</kbd>
user@RR2#<kbd class="ph userinput">set bgp cluster 2.2.2.7</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></li></ol></div> <div id="d48e219__d77004e17222" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <code class="ph codeph">show interfaces</code>、 <code class="ph codeph">show policy-options</code><code class="ph codeph">show routing-options</code>和<code class="ph codeph">show protocols</code>命令确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>interfaces {
    ge-0/0/3 {
        description RR2-to-P2;
        vlan-tagging;
        unit 0 {
            vlan-id 100;
            family inet {
                address 192.168.0.17/31;
            }
            family iso;
            family mpls;
        }
    }
    lo0 {
        unit 1 {
            family inet {
                address 2.2.2.7/32;
            }
            family iso {
                address 49.0000.0000.aaaa.0007.00;
            }
        }
    }
}
policy-options {
    policy-statement allow-lo0 {
        term 1 {
            from interface lo0.1;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement export-inet3 {
        term 1 {
            from rib inet.3;
            then accept;
        }
        term 2 {
            then reject;
        }
    }
    policy-statement pplb {
        then {
            load-balance per-packet;
        }
    }
}
routing-options {
    forwarding-table {
        export pplb;
    }
    interface-routes {
        rib-group inet inet0to3;
    }
    router-id 2.2.2.7;
    autonomous-system 2;
    rib-groups {
        inet0to3 {
            import-rib [ inet.0 inet.3 ];
            import-policy allow-lo0;
        }
    }
}
protocols {
    isis {
        level 1 disable;
        interface all;
        export allow-lo0;
        topologies ipv6-unicast;
    }
    rsvp {
        interface all;
    }
    bgp {
        path-selection external-router-id;
        group toAs2Reg1BNs {
            type internal;
            family inet {
                labeled-unicast {
                    add-path {
                        receive;
                        send {
                            path-count 4;
                        }
                    }
                    rib {
                        inet.3;
                    }
                }
            }
            neighbor 2.2.2.1;
            neighbor 2.2.2.2;
            neighbor 2.2.2.3;
            neighbor 2.2.2.4;
        }
        traceoptions {
            file bgp.log size 100m;
            flag state detail;
            flag policy;
        }
        local-address 2.2.2.7;
        cluster 2.2.2.7;
    }
    ldp {
        interface all;
    }
    mpls {
        interface all;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div></div></div></div> <div aria-labelledby="ariaid-title70" id="d48e6028" class="topic concept nested2"><h3 id="ariaid-title70" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d48e6034" class="xref">验证下一跃点是否已解析</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d48e6086" class="xref">验证路由表中的下一跃点条目</a></li></ul> <div id="d48e6028__d48e6034" class="section"><h4 class="title sectiontitle">验证下一跃点是否已解析</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d77004e17255" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d77004e17261" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d77004e17290" class="xref">意义</a></li></ul> <div id="d48e6028__d77004e17255" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证 PE2 和 PE3 下一跃点是否已在 PE1 解析。 </p></div> <div id="d48e6028__d77004e17261" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route forwarding-table                             destination</code> 命令。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <kbd class="ph userinput">show route forwarding-table destination 10.3.3.3 extensive table default | match Weight</kbd>

                                    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x4000
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1

</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE1&gt; <kbd class="ph userinput">show route forwarding-table destination 10.3.3.3 extensive table red | match Weight</kbd>

                                    Weight: 0x1
                                    Weight: 0x1
  Next-hop interface: ge-0/0/3.0    Weight: 0x1
                                    Weight: 0x4000
                                    Weight: 0x4000
  Next-hop interface: ge-0/0/3.0    Weight: 0x4000

</pre></div> <!----></div></div> <div id="d48e6028__d77004e17290" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">您可以查看权重 <code class="ph codeph">0x1</code> 以及 <code class="ph codeph">0x4000</code> 主跃点和备份下一跃点。</p></div></div> <div id="d48e6028__d48e6086" class="section"><h4 class="title sectiontitle">验证路由表中的下一跃点条目</h4> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d77004e17307" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d77004e17313" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d48e6028__d77004e17369" class="xref">意义</a></li></ul> <div id="d48e6028__d77004e17307" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证 PE1 上的活动下一跃点路由条目。 </p></div> <div id="d48e6028__d77004e17313" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route extensive                             expanded-nh</code> 命令。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <kbd class="ph userinput">show route 10.3.3.3 extensive expanded-nh</kbd>

inet.0: 36 destinations, 65 routes (36 active, 0 holddown, 0 hidden)
10.3.3.3/32 (2 entries, 1 announced)
Installed-nexthop:
List (0xd6ba4b8) Index:1048626
  Indr (0xc593cac) 10.1.1.1
    Krt_inh (0xcc14684) Index:1048614
      List (0xc4cf7b4) Index:1048613
        Frr_inh (0xc592730) Index:1048608
          Chain (0xc59334c) Index:651 Push 300368
            Router (0xc58ea40) Index:628 192.168.0.5 Push 299808
        Frr_inh (0xc592604) Index:1048609
          Chain (0xc5924d8) Index:649 Push 300384
            Router (0xc58ea40) Index:628 192.168.0.5 Push 299808
        Frr_inh (0xc592154) Index:1048611
          Chain (0xc591bdc) Index:654 Push 300368
            Router (0xc58ebd0) Index:629 192.168.0.5 Push 299824
        Frr_inh (0xc5921b8) Index:1048612
          Chain (0xc591a4c) Index:655 Push 300384
            Router (0xc58ebd0) Index:629 192.168.0.5 Push 299824
  Indr (0xc593ab8) 10.1.1.2
    Krt_inh (0xcc14f84) Index:1048624
      List (0xc4d0074) Index:1048623
        Frr_inh (0xc5939f0) Index:1048619
          Chain (0xc592ab4) Index:638 Push 300144
            Router (0xc58ea40) Index:628 192.168.0.5 Push 299808
        Frr_inh (0xc593a54) Index:1048620
          Chain (0xc591efc) Index:637 Push 300160
            Router (0xc58ea40) Index:628 192.168.0.5 Push 299808
        Frr_inh (0xc59172c) Index:1048589
          Chain (0xc5903a4) Index:640 Push 300144
            Router (0xc58ebd0) Index:629 192.168.0.5 Push 299824
        Frr_inh (0xc59159c) Index:1048590
          Chain (0xc58fa44) Index:639 Push 300160
            Router (0xc58ebd0) Index:629 192.168.0.5 Push 299824
TSI:
&lt;SNIP&gt;
               Protocol next hop: 10.1.1.1
                Indirect next hop: 0xcc14684 1048614 INH Session ID: 0x146 Weight 0x1
                Protocol next hop: 10.1.1.2
                Indirect next hop: 0xcc14f84 1048624 INH Session ID: 0x145 Weight 0x4000
                State: &gt;Active Ext&gt;
                Local AS:     65002 Peer AS:     65001
&lt;SNIP&gt;
                Indirect next hops: 2
                        Protocol next hop: 10.1.1.1 Metric: 1
                        Indirect next hop: 0xcc14684 1048614 INH Session ID: 0x146 Weight 0x1
                        Indirect path forwarding next hops (Merged): 4
&lt;SNIP&gt;
                        Protocol next hop: 10.1.1.2 Metric: 1
                        Indirect next hop: 0xcc14f84 1048624 INH Session ID: 0x145 Weight 0x4000
                        Indirect path forwarding next hops (Merged): 4</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div> <div id="d48e6028__d77004e17369" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">您可以查看权重 <code class="ph codeph">0x1</code> 以及 <code class="ph codeph">0x4000</code> 主跃点和备份下一跃点。</p></div></div></div></div></div> <div aria-labelledby="ariaid-title71" xml:lang="zh-CN" lang="zh-CN" id="id-fat-pseudowire-support-for-bgp-l2vpn-and-vpls-overview" class="topic concept nested1"><h2 id="ariaid-title71" class="title topictitle2">面向 BGP L2VPN 和 VPLS 的 FAT 伪线支持概述<a class="bookmarktitle" aria-label="Copy link to this section: 面向 BGP L2VPN 和 VPLS 的 FAT 伪线支持概述" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><div class="abstract"><p class="p">伪线是通过 MPLS 分组交换网络 （PSN） 模拟电信服务（如 T1 线路）基本属性的第 2 层电路或服务。伪线旨在仅提供具有给定服务定义所需弹性要求的线线所需的最少必要功能。 </p> <p class="p">在 MPLS 网络中，如 <cite class="cite">draft-keyupdate-l2vpn-fat-pw-bgp</cite> 中所述，伪线流标签的流感知传输 （FAT） 用于跨第 2 层虚拟专用网络 （L2VPN） 和虚拟专用 LAN 服务 （VPLS） 的 BGP 信号伪线对流量进行负载平衡。</p> <p class="p">FAT 流标签仅在标签边缘路由器 （LER） 上配置。这会导致中转路由器或标签交换路由器 （LSR） 跨等价多路径 （ECMP） 路径或链路聚合组 （LAG） 对 MPLS 数据包执行负载平衡，而无需对有效负载进行深度数据包检测。 </p></div> <p class="p">FAT 流标签可用于 VPWS 和 VPLS 伪线的 LDP 信号转发等效类（FEC 128 和 FEC 129）伪线。接口参数 （Sub-TLV） 用于 FEC 128 和 FEC 129 伪线。为 LDP 定义的子 TLV 包含发送 （T） 和接收 （R） 位。T 位通告推送流标签的功能。R 位通告了弹出流标签的功能。默认情况下，提供商边缘 （PE） 路由器对于任何这些伪线的信令行为是通告设置为 0 的标签中的 T 位和 R 位。 </p> <p class="p"><code class="ph codeph">flow-label-transmit</code>和<code class="ph codeph">flow-label-receive</code>配置语句提供了在子 TLV 字段中将 T 位和 R 位通告设置为 1 的功能，这是 LDP 标签映射消息的 FEC 接口参数的一部分。您可以使用这些语句来控制负载均衡标签的推送，以及将标签播发到 BGP 信号伪线（如 L2VPN 和 VPLS）的控制平面中的路由对等方。</p></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="link">为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="link">示例：为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="link">示例：为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-receive-edit-routing-instances.html" class="link">流标签接收</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-transmit-edit-routing-instances.html" class="link">流标签传输</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title72" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="topic task nested1"><h2 id="ariaid-title72" class="title topictitle2">为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">仅在标签边缘路由器 （LER） 上配置的 BGP 信号伪线（如 L2VPN）支持流感知传输 （FAT） 或流标签。这使得中转路由器或标签交换路由器 （LSR） 能够跨等价多路径路径 （ECMP） 或链路聚合组 （LAG） 执行 MPLS 数据包的负载平衡，而无需对有效负载进行深度数据包检测。FAT 伪线或流标签可用于具有转发等效类（FEC128 和 FEC129）的 LDP 信号 L2VPN，并且对流标签的支持已扩展到用于点对点或点对多点第 2 层服务的 BGP 信号伪线。</p></div> <div id="id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic__d77004e17451" class="section prereq p"><p class="p">在为 BGP L2VPN 配置 FAT 伪线支持以对 MPLS 流量进行负载平衡之前：</p> <ul class="ul"><li class="li"><p class="p">配置设备接口并在所有接口上启用 MPLS。 </p></li> <li class="li"><p class="p">配置 RSVP。</p></li> <li class="li"><p class="p">为远程 PE 路由器配置 MPLS 和 LSP。</p></li> <li class="li"><p class="p">配置 BGP 和 OSPF。</p></li></ul></div> <div id="id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic__d77004e17467" class="section context"><p class="p">要为 BGP L2VPN 配置 FAT 伪线支持以对 MPLS 流量进行负载平衡，必须执行以下操作：</p></div> <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">为 L2VPN 协议的给定路由实例配置连接到提供商设备的站点。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols l2vpn]
user@host#  <kbd class="ph userinput">set site <var class="keyword varname">site-name</var> site-identifier <var class="keyword varname">site-identifier</var></kbd>
user@host#  <kbd class="ph userinput">set site <var class="keyword varname">site-name</var> interface <var class="keyword varname">interface-name</var> remote-site-id <var class="keyword varname">remote-site-id</var></kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">为路由实例配置 L2VPN 协议，以提供播发功能，以便在接收方向上将流标签弹出到远程 PE。 </span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols l2vpn]
user@host#  <kbd class="ph userinput">set flow-label-receive</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">配置 L2VPN 协议以提供播发功能，将流标签沿传输方向推送到远程 PE。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols l2vpn]
user@host#  <kbd class="ph userinput">set flow-label-transmit</kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">为 VPLS 协议的给定路由实例配置连接到提供商设备的站点。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols vpls]
user@host#  <kbd class="ph userinput">set site <var class="keyword varname">site-name</var> site-identifier <var class="keyword varname">site-identifier</var></kbd>
user@host#  <kbd class="ph userinput">set site-range <var class="keyword varname">site-range</var></kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">为路由实例配置 VPLS 协议，以提供播发功能，以便在接收方向上将流标签弹出到远程 PE。 </span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols vpls]
user@host#  <kbd class="ph userinput">set flow-label-receive </kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">配置 VPLS 协议以提供播发功能，以将流标签沿传输方向推送到远程 PE。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols vpls]
user@host#  <kbd class="ph userinput">set flow-label-transmit</kbd>
</pre></div> <!----></div></div></li></ol></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-fat-pseudowire-support-for-bgp-l2vpn-and-vpls-overview" class="link">面向 BGP L2VPN 和 VPLS 的 FAT 伪线支持概述</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="link">为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="link">示例：为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-receive-edit-routing-instances.html" class="link">流标签接收</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-transmit-edit-routing-instances.html" class="link">流标签传输</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title73" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="topic concept nested1"><h2 id="ariaid-title73" class="title topictitle2">示例：为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 示例：为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何为 BGP L2VPN 实现 FAT 伪线支持，以帮助均衡 MPLS 流量的负载。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e39" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e55" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e72" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e932" class="xref">配置 PE2</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title74" id="d51e39" class="topic concept nested2"><h3 id="ariaid-title74" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">五个 MX 系列路由器 </p></li> <li class="li"><p class="p">在所有设备上运行的 Junos OS 16.1 或更高版本</p></li></ul> <p class="p">在为 BGP L2VPN 配置 FAT 伪线支持之前，请确保配置路由和信令协议。</p></div></div> <div aria-labelledby="ariaid-title75" id="d51e55" class="topic concept nested2"><h3 id="ariaid-title75" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">Junos OS 允许仅在标签边缘路由器 （LER） 上配置 BGP 信号伪线（如 L2VPN）支持的流感知传输 （FAT） 流标签。这会导致中转路由器或标签交换路由器 （LSR） 跨等价多路径 （ECMP） 路径或链路聚合组 （LAG） 对 MPLS 数据包执行负载平衡，而无需对有效负载进行深度数据包检测。FAT 流标签可用于 VPWS 和 VPLS 伪线的 LDP 信号转发等效类（FEC 128 和 FEC 129）伪线。</p> <div id="d51e55__d77004e17641" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e55__d51e68" class="xref">图 15</a>，显示了对设备 PE1 和设备 PE2 上配置的 BGP L2VPN 的 FAT 伪线支持。</p> <div id="d51e55__d51e68" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 15： </span>BGP L2VPN 的 FAT 伪线支持示例</span><span><div class="imgwrap"><img data-width="2100px" data-height="549px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043327.png" alt="BGP L2VPN 的 FAT 伪线支持示例" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div></div> <div aria-labelledby="ariaid-title76" id="d51e72" class="topic concept nested2"><h3 id="ariaid-title76" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e72__d77004e17656" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e72__d77004e18100" class="xref">配置 PE1</a></li></ul> <div id="d51e72__d77004e17656" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改详细信息，以便与网络配置匹配，将命令复制并粘贴到 <kbd class="ph userinput">[edit]</kbd> 层级的 CLI 中，然后从配置模式进入 <code class="ph codeph">commit</code> 。</p> <p class="p"><strong class="ph b">CE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 family inet address 10.1.1.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.8/32</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">PE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 mtu 1600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 encapsulation vlan-ccc</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 300 encapsulation vlan-ccc</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 300 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 encapsulation vlan-vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 family vpls </kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 1.0.0.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.1/32</kbd>
<kbd class="ph userinput">set routing-options nonstop-routing</kbd>
<kbd class="ph userinput">set routing-options router-id 10.255.255.1</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 100</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export exp-to-frwd</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface lo0.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path to-pe2 to 10.255.255.4</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe type internal</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe local-address 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn auto-discovery-only</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn signaling</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.4</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.2</kbd>
<kbd class="ph userinput">set protocols ospf traffic-engineering</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe2</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then accept</kbd>
<kbd class="ph userinput">set policy-options community vpls-com members target:100:100</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst instance-type l2vpn</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst interface ge-0/0/0.300</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst route-distinguisher 10.255.255.1:200</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst vrf-target target:100:100</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn encapsulation-type ethernet-vlan</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn site pe1 site-identifier 1</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn site pe1 interface ge-0/0/0.300 remote-site-id 2</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn flow-label-transmit</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn flow-label-receive</kbd>
<kbd class="ph userinput">set routing-instances vpl1 instance-type vpls</kbd>
<kbd class="ph userinput">set routing-instances vpl1 interface ge-0/0/0.600</kbd>
<kbd class="ph userinput">set routing-instances vpl1 route-distinguisher 10.255.255.1:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 vrf-target target:100:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site-range 10</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls no-tunnel-services</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site vpl1PE1 site-identifier 1</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-transmit</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-receive </kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">P</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 1.0.0.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 2.0.0.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.2/32</kbd>
<kbd class="ph userinput">set routing-options router-id 10.255.255.2</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 100</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface lo0.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe type internal</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe local-address 10.255.255.2</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn signaling</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.4 deactivate protocols bgp</kbd>
<kbd class="ph userinput">set protocols ospf traffic-engineering</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">PE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 2.0.0.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 mtu 1600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 encapsulation vlan-ccc</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 300 encapsulation vlan-ccc</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 300 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 600 encapsulation vlan-vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 600 family vpls </kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.4/32</kbd>
<kbd class="ph userinput">set routing-options router-id 10.255.255.4</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 100</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export exp-to-frwd</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface lo0.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path to-pe1 to 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe type internal</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe local-address 10.255.255.4</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn auto-discovery-only</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn signaling</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.2</kbd>
<kbd class="ph userinput">set protocols ospf traffic-engineering</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe1</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then accept</kbd>
<kbd class="ph userinput">set policy-options community vpls-com members target:100:100</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst instance-type l2vpn</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst interface ge-0/0/1.300</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst route-distinguisher 10.255.255.4:200</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst vrf-target target:100:100</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn encapsulation-type ethernet-vlan</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn site pe2 site-identifier 2</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn site pe2 interface ge-0/0/1.300 remote-site-id 1</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn flow-label-transmit</kbd>
<kbd class="ph userinput">set routing-instances l2vpn-inst protocols l2vpn flow-label-receive</kbd>
<kbd class="ph userinput">set routing-instances vpl1 instance-type vpls</kbd>
<kbd class="ph userinput">set routing-instances vpl1 interface ge-0/0/1.600</kbd>
<kbd class="ph userinput">set routing-instances vpl1 route-distinguisher 10.255.255.4:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 vrf-target target:100:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site-range 10</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls no-tunnel-services</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site vpl1PE2 site-identifier 2</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-transmit</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-receive</kbd>
<kbd class="ph userinput">deactivate routing-instances vpl1</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">CE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 family inet address 10.1.1.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.9/32</kbd>
</pre></div> <!----></div></div> <div id="d51e72__d77004e18100" class="section"><h4 class="title sectiontitle">配置 PE1</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e72__d77004e18103" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e72__d77004e18384" class="xref">结果</a></li></ul> <div id="d51e72__d77004e18103" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 PE1：</p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@PE1# <kbd class="ph userinput">set ge-0/0/0 vlan-tagging</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 mtu 1600</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 encapsulation vlan-ccc</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 300 encapsulation vlan-ccc</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 300 vlan-id 600</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 600 encapsulation vlan-vpls</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 600 vlan-id 600</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 600 family vpls deactivate interfaces ge-0/0/0 unit 600</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 1.0.0.1/24</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls</kbd>
user@PE1# <kbd class="ph userinput">set lo0 unit 0 family inet address 10.255.255.1/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置不间断路由，并配置路由器 ID。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE1# <kbd class="ph userinput">set nonstop-routing</kbd>
user@PE1# <kbd class="ph userinput">set router-id 10.255.255.1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号，并使用导出语句将策略应用到本地路由器的转发表。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE1# <kbd class="ph userinput">set autonomous-system 100</kbd>
user@PE1# <kbd class="ph userinput">set forwarding-table export exp-to-frwd</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols rsvp]
user@PE1# <kbd class="ph userinput">set interface all</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/1.0</kbd>
user@PE1# <kbd class="ph userinput">set interface lo0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将标签交换路径属性应用于 MPLS 协议，并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols mpls]
user@PE1# <kbd class="ph userinput">set label-switched-path to-pe2 to 10.255.255.4</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/1.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义对等组，并为对等组 <code class="ph codeph">vpls-pe</code>配置 BGP 会话的本地端地址地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE1# <kbd class="ph userinput">set type internal</kbd>
user@PE1# <kbd class="ph userinput">set local-address 10.255.255.1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在更新中为 NLRI 配置协议家族的属性。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE1# <kbd class="ph userinput">set family l2vpn auto-discovery-only</kbd>
user@PE1# <kbd class="ph userinput">set family l2vpn signaling</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为对等组 <code class="ph codeph">vpls-pe</code>配置邻居。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE1# <kbd class="ph userinput">set neighbor 10.255.255.4</kbd>
user@PE1# <kbd class="ph userinput">set neighbor 10.255.255.2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置流量工程，并配置 OSPF 区域 0.0.0.0 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf]
user@PE1# <kbd class="ph userinput">set traffic-engineering</kbd>
user@PE1# <kbd class="ph userinput">set area 0.0.0.0 interface lo0.0 passive</kbd>
user@PE1# <kbd class="ph userinput">set area 0.0.0.0 interface ge-0/0/1.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由策略和 BGP 社区信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@PE1# <kbd class="ph userinput">set policy-statement exp-to-fwd term 0 from community vpls-com</kbd>
user@PE1# <kbd class="ph userinput">set policy-statement exp-to-fwd term 0 then install-nexthop lsp to-pe2</kbd>
user@PE1# <kbd class="ph userinput">set policy-statement exp-to-fwd term 0 then accept</kbd>
user@PE1# <kbd class="ph userinput">set community vpls-com members target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由实例的类型并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst]
user@PE1# <kbd class="ph userinput">set instance-type l2vpn</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/0.300</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">例如 <code class="ph codeph">l2vpn-inst</code>，配置路由识别符，并配置 VRF 目标社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst]
user@PE1# <kbd class="ph userinput">set route-distinguisher 10.255.255.1:200</kbd>
user@PE1# <kbd class="ph userinput">set vrf-target target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 L2VPN 协议所需的封装类型。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst protocols l2vpn]
user@PE1# <kbd class="ph userinput">set encapsulation-type ethernet-vlan</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置连接到提供商设备的站点。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst protocols l2vpn]
user@PE1# <kbd class="ph userinput">set site pe1 site-identifier 1</kbd>
user@PE1# <kbd class="ph userinput">set site pe1 interface ge-0/0/0.300 remote-site-id 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由实例配置 L2VPN 协议，以提供播发功能以在接收方向上将流标签弹出到远程 PE，并提供播发功能以将流标签沿传输方向推送到远程 PE。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst protocols l2vpn]
user@PE1# <kbd class="ph userinput">set flow-label-transmit</kbd>
user@PE1# <kbd class="ph userinput">set flow-label-receive</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由实例的类型并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE1# <kbd class="ph userinput">set instance-type vpls</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/0.600</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">例如 <code class="ph codeph">vp1</code>，配置路由识别符，并配置 VRF 目标社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE1# <kbd class="ph userinput">set route-distinguisher 10.255.255.1:100</kbd>
user@PE1# <kbd class="ph userinput">set vrf-target target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 VPLS 域分配最大站点标识符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE1# <kbd class="ph userinput">set site-range 10</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置为不使用 VPLS 实例的隧道服务，并为连接到提供商设备的站点分配站点标识符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE1# <kbd class="ph userinput">set no-tunnel-services</kbd>
user@PE1# <kbd class="ph userinput">set site vpl1PE1 site-identifier 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由实例配置 VPLS 协议，以提供播发功能以在接收方向上将流标签弹出到远程 PE，并提供播发功能以在传输方向上将流标签推送到远程 PE。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE1# <kbd class="ph userinput">set flow-label-transmit</kbd>
user@PE1# <kbd class="ph userinput">set flow-label-receive </kbd>
</pre></div> <!----></div></li></ol></div><div id="d51e72__d77004e18384" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd>、 <kbd class="ph userinput">show protocols</kbd>、 <kbd class="ph userinput">show routing-instances</kbd><kbd class="ph userinput">show policy-options</kbd>和<kbd class="ph userinput">show routing-options</kbd>命令来确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1#<kbd class="ph userinput"> show interfaces</kbd>
ge-0/0/0 {
    vlan-tagging;
    mtu 1600;
    encapsulation vlan-ccc;
    unit 300 {
        encapsulation vlan-ccc;
        vlan-id 600;
    }
     unit 600 {
        encapsulation vlan-vpls;
        vlan-id 600;
        family vpls;
    }
}
ge-0/0/1 {
    unit 0 {
        family inet {
            address 1.0.0.1/24;
        }
        family mpls;
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.255.1/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1#<kbd class="ph userinput"> show protocols</kbd>
rsvp {
    interface all;
    interface ge-0/0/1.0;
    interface lo0.0;
}
mpls {
    label-switched-path to-pe2 {
        to 10.255.255.4;
    }
    interface ge-0/0/1.0;
}
bgp {
    group vpls-pe {
        type internal;
        local-address 10.255.255.1;
        family l2vpn {
            auto-discovery-only;
            signaling;
        }
        neighbor 10.255.255.4;
        neighbor 10.255.255.2;
    }
}
ospf {
    traffic-engineering;
    area 0.0.0.0 {
        interface lo0.0 {
            passive;
        }
        interface ge-0/0/1.0;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE1#<kbd class="ph userinput"> show policy-options</kbd>
policy-statement exp-to-frwd {
    term 0 {
        from community vpls-com;
        then {
            install-nexthop lsp to-pe2;
            accept;
        }
    }
}
community vpls-com members target:100:100;
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1#<kbd class="ph userinput"> show routing-instances</kbd>
l2vpn-inst {
    instance-type l2vpn;
    interface ge-0/0/0.300;
    route-distinguisher 10.255.255.1:200;
    vrf-target target:100:100;
    protocols {
        l2vpn {
            encapsulation-type ethernet-vlan;
            site pe1 {
                site-identifier 1;
                interface ge-0/0/0.300 {
                    remote-site-id 2;
                }
            }
            flow-label-transmit;
            flow-label-receive;
        }
    }
}
 vpl1 {
    instance-type vpls;
    interface ge-0/0/0.600;
    route-distinguisher 10.255.255.1:100;
    vrf-target target:100:100;
    protocols {
        vpls {
            site-range 10;
            no-tunnel-services;
            site vpl1PE1 {
                site-identifier 1;
            }
            flow-label-transmit;
            flow-label-receive;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE1#<kbd class="ph userinput"> show routing-options</kbd>
nonstop-routing;
router-id 10.255.255.1;
autonomous-system 100;
forwarding-table {
    export exp-to-frwd;
}
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title77" id="d51e848" class="topic concept nested3"><h4 id="ariaid-title77" class="title topictitle4">验证</h4> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d51e854" class="xref">验证 BGP 摘要信息</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d51e880" class="xref">验证 L2VPN 连接信息</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d51e906" class="xref">验证路由</a></li></ul> <div id="d51e848__d51e854" class="section"><h5 class="title sectiontitle">验证 BGP 摘要信息</h5><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18437" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18442" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18455" class="xref">意义</a></li></ul> <div id="d51e848__d77004e18437" class="subsection"><h6 class="sectiontitle">目的</h6><p class="p">验证 BGP 摘要信息。</p></div><div id="d51e848__d77004e18442" class="subsection"><h6 class="sectiontitle">操作</h6><p class="p">在操作模式下，输入 <code class="ph codeph">show bgp summary</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE1&gt; <code class="ph codeph">show bgp summary</code>

Groups: 1 Peers: 2 Down peers: 1
Table          Tot Paths  Act Paths Suppressed    History Damp State    Pending
bgp.l2vpn.0          
                       1          1          0          0          0          0
Peer                     AS      InPkt     OutPkt    OutQ   Flaps Last Up/Dwn State|#Active/Received/Accepted/Damped...
10.255.255.2            100          0          0       0       0 2d 12:54:28 Active
10.255.255.4            100       8121       8093       0       0 2d 12:53:56 Establ
  bgp.l2vpn.0: 1/1/1/0
  l2vpn-inst.l2vpn.0: 1/1/1/0
</pre></div> <!----></div></div><div id="d51e848__d77004e18455" class="subsection"><h6 class="sectiontitle">意义</h6><p class="p">输出显示 BGP 摘要信息。</p></div></div> <div id="d51e848__d51e880" class="section"><h5 class="title sectiontitle">验证 L2VPN 连接信息</h5><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18463" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18468" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18481" class="xref">意义</a></li></ul> <div id="d51e848__d77004e18463" class="subsection"><h6 class="sectiontitle">目的</h6><p class="p">验证第 2 层 VPN 连接信息。</p></div><div id="d51e848__d77004e18468" class="subsection"><h6 class="sectiontitle">操作</h6><p class="p">在操作模式下，运行 <code class="ph codeph">show l2vpn connections</code> 命令以显示第 2 层 VPN 连接信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <code class="ph codeph">show l2vpn connections</code>

Layer-2 VPN connections:

Legend for connection status (St)   
EI -- encapsulation invalid      NC -- interface encapsulation not CCC/TCC/VPLS
EM -- encapsulation mismatch     WE -- interface and instance encaps not same
VC-Dn -- Virtual circuit down    NP -- interface hardware not present 
CM -- control-word mismatch      -&gt; -- only outbound connection is up
CN -- circuit not provisioned    &lt;- -- only inbound connection is up
OR -- out of range               Up -- operational
OL -- no outgoing label          Dn -- down                      
LD -- local site signaled down   CF -- call admission control failure      
RD -- remote site signaled down  SC -- local and remote site ID collision
LN -- local site not designated  LM -- local site ID not minimum designated
RN -- remote site not designated RM -- remote site ID not minimum designated
XX -- unknown connection status  IL -- no incoming label
MM -- MTU mismatch               MI -- Mesh-Group ID not available
BK -- Backup connection          ST -- Standby connection
PF -- Profile parse failure      PB -- Profile busy
RS -- remote site standby        SN -- Static Neighbor
LB -- Local site not best-site   RB -- Remote site not best-site
VM -- VLAN ID mismatch

Legend for interface status 
Up -- operational           
Dn -- down

Instance: l2vpn-inst
Edge protection: Not-Primary
  Local site: pe1 (1)
    connection-site           Type  St     Time last up          # Up trans
    2                         rmt   Up     Jun 22 14:46:50 2015           1
      Remote PE: 10.255.255.4, Negotiated control-word: Yes (Null)
      Incoming label: 800003, Outgoing label: 800002
      Local interface: ge-0/0/0.300, Status: Up, Encapsulation: VLAN
      Flow Label Transmit: Yes, Flow Label Receive: Yes
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d51e848__d77004e18481" class="subsection"><h6 class="sectiontitle">意义</h6><p class="p">输出显示第 2 层 VPN 连接信息以及流标签传输和流标签接收信息。</p></div></div> <div id="d51e848__d51e906" class="section"><h5 class="title sectiontitle">验证路由</h5><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18489" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18494" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e848__d77004e18507" class="xref">意义</a></li></ul> <div id="d51e848__d77004e18489" class="subsection"><h6 class="sectiontitle">目的</h6><p class="p">验证是否学习了预期的路由。</p></div><div id="d51e848__d77004e18494" class="subsection"><h6 class="sectiontitle">操作</h6><p class="p">在操作模式下，运行 <code class="ph codeph">show route</code> 命令以在路由表中显示路由。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <code class="ph codeph">show route</code>
inet.0: 51 destinations, 51 routes (51 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

1.0.0.0/24         *[Direct/0] 2d 12:48:34
                    &gt; via ge-0/0/1.0
1.0.0.1/32         *[Local/0] 2d 12:48:34
                      Local via ge-0/0/1.0
2.0.0.0/24         *[OSPF/10] 2d 12:48:24, metric 2
                    &gt; to 1.0.0.2 via ge-0/0/1.0
10.4.0.0/16        *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.5.0.0/16        *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.6.128.0/17      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.9.0.0/16        *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.10.0.0/16       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.13.4.0/23       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.13.10.0/23      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.82.0.0/15       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.84.0.0/16       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.85.12.0/22      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.92.0.0/16       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.94.0.0/16       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.99.0.0/16       *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.102.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.102.160.0/19    *[Direct/0] 2d 12:48:34
                    &gt; via fxp0.0
10.102.169.99/32   *[Local/0] 2d 12:48:34
                      Local via fxp0.0
10.150.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.155.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.157.64.0/19     *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.160.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.204.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.205.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.206.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.207.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.209.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.212.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.213.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.214.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.215.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.216.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.218.13.0/24     *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.218.14.0/24     *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.218.16.0/20     *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.218.32.0/20     *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.227.0.0/16      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
10.255.255.1/32    *[Direct/0] 2d 12:48:34
                    &gt; via lo0.0         
10.255.255.2/32    *[OSPF/10] 2d 12:48:24, metric 1
                    &gt; to 1.0.0.2 via ge-0/0/1.0
10.255.255.4/32    *[OSPF/10] 2d 12:48:24, metric 2
                    &gt; to 1.0.0.2 via ge-0/0/1.0
128.102.161.191/32 *[OSPF/10] 2d 12:48:24, metric 1
                    &gt; to 1.0.0.2 via ge-0/0/1.0
128.102.169.99/32  *[Direct/0] 2d 12:48:34
                    &gt; via lo0.0         
128.102.171.41/32  *[OSPF/10] 2d 12:48:24, metric 2
                    &gt; to 1.0.0.2 via ge-0/0/1.0
172.16.0.0/12      *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
192.168.0.0/16     *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
192.168.102.0/23   *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
207.17.136.0/24    *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
207.17.136.192/32  *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
207.17.137.0/24    *[Static/5] 2d 12:48:34
                    &gt; to 10.102.191.254 via fxp0.0
224.0.0.5/32       *[OSPF/10] 2d 12:48:34, metric 1
                      MultiRecv         
                                        
inet.3: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
10.255.255.4/32    *[RSVP/7/1] 2d 12:48:04, metric 2
                    &gt; to 1.0.0.2 via ge-0/0/1.0, label-switched-path to-pe2
                                        
iso.0: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
47.0005.80ff.f800.0000.0108.0001.1281.0216.9099/152               
                   *[Direct/0] 2d 12:48:34
                    &gt; via lo0.0         
                                        
mpls.0: 6 destinations, 6 routes (6 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
0                  *[MPLS/0] 2d 12:48:34, metric 1
                      Receive           
1                  *[MPLS/0] 2d 12:48:34, metric 1
                      Receive           
2                  *[MPLS/0] 2d 12:48:34, metric 1
                      Receive           
13                 *[MPLS/0] 2d 12:48:34, metric 1
                      Receive           
800003             *[L2VPN/7] 2d 12:41:29
                    &gt; via ge-0/0/0.300, Pop       Offset: 4
ge-0/0/0.300       *[L2VPN/7] 2d 12:41:29, metric2 2
                    &gt; to 1.0.0.2 via ge-0/0/1.0, label-switched-path to-pe2
                                        
inet6.0: 2 destinations, 2 routes (2 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
abcd::128:102:169:99/128                
                   *[Direct/0] 2d 12:48:34
                    &gt; via lo0.0         
fe80::5668:a60f:fc6b:eb97/128           
                   *[Direct/0] 2d 12:48:34
                    &gt; via lo0.0         
                                        
bgp.l2vpn.0: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
10.255.255.4:200:2:1/96                 
                   *[BGP/170] 2d 12:41:35, localpref 100, from 10.255.255.4
                      AS path: I, validation-state: unverified
                    &gt; to 1.0.0.2 via ge-0/0/1.0, label-switched-path to-pe2
                                        
l2vpn-inst.l2vpn.0: 2 destinations, 2 routes (2 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
10.255.255.1:200:1:1/96                 
                   *[L2VPN/170/-101] 2d 12:41:29, metric2 1
                      Indirect          
10.255.255.4:200:2:1/96                 
                   *[BGP/170] 2d 12:41:35, localpref 100, from 10.255.255.4
                      AS path: I, validation-state: unverified
                    &gt; to 1.0.0.2 via ge-0/0/1.0, label-switched-path to-pe2
                                        
l2vpn-inst.l2id.0: 2 destinations, 3 routes (2 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
1                  *[L2VPN/170/-101] 2d 12:41:29, metric2 1
                      Indirect          
                    [L2VPN/175] 2d 12:41:29
                    &gt; via ge-0/0/0.300, Pop       Offset: 4
2                  *[BGP/170] 2d 12:41:35, localpref 100, from 10.255.255.4
                      AS path: I, validation-state: unverified
                    &gt; to 1.0.0.2 via ge-0/0/1.0, label-switched-path to-pe2
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d51e848__d77004e18507" class="subsection"><h6 class="sectiontitle">意义</h6><p class="p">输出显示路由表中的所有路由。</p></div></div></div></div></div> <div aria-labelledby="ariaid-title78" id="d51e932" class="topic concept nested2"><h3 id="ariaid-title78" class="title topictitle3">配置 PE2</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e932__d77004e18516" class="xref">程序</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e932__d77004e18797" class="xref">结果</a></li></ul> <div id="d51e932__d77004e18516" class="section"><h4 class="title sectiontitle">程序</h4><div id="d51e932__d77004e18519" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 PE2：</p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@PE2# <kbd class="ph userinput">set ge-0/0/0 unit 0 family inet address 2.0.0.2/24</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/0 unit 0 family mpls</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 mtu 1600</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 encapsulation vlan-ccc</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 300 encapsulation vlan-ccc</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 300 vlan-id 600</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 600 encapsulation vlan-vpls</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 600 vlan-id 600</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 600 family vpls deactivate interfaces ge-0/0/1 unit 600</kbd>
user@PE2# <kbd class="ph userinput">set lo0 unit 0 family inet address 10.255.255.4/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由器 ID。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE2# <kbd class="ph userinput">set router-id 10.255.255.4</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号，并使用导出语句将策略应用到本地路由器的转发表。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE2# <kbd class="ph userinput">set autonomous-system 100</kbd>
user@PE2# <kbd class="ph userinput">set forwarding-table export exp-to-frwd</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols rsvp]
user@PE2# <kbd class="ph userinput">set interface all</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/1.0</kbd>
user@PE2# <kbd class="ph userinput">set interface lo0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将标签交换路径属性应用于 MPLS 协议，并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols mpls]
user@PE2# <kbd class="ph userinput">set label-switched-path to-pe1 to 10.255.255.1</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义对等组，并为对等组 <code class="ph codeph">vpls-pe</code>配置 BGP 会话的本地端地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE2# <kbd class="ph userinput">set type internal</kbd>
user@PE2# <kbd class="ph userinput">set local-address 10.255.255.4</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在更新中为 NLRI 配置协议家族的属性。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE2# <kbd class="ph userinput">set family l2vpn auto-discovery-only</kbd>
user@PE2# <kbd class="ph userinput">set family l2vpn signaling</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为对等组 <code class="ph codeph">vpls-pe</code>配置邻接方。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE2# <kbd class="ph userinput">set neighbor 10.255.255.1</kbd>
user@PE2# <kbd class="ph userinput">set neighbor 10.255.255.2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置流量工程，并配置 OSPF 区域 0.0.0.0 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf]
user@PE2# <kbd class="ph userinput">set traffic-engineering</kbd>
user@PE2# <kbd class="ph userinput">set area 0.0.0.0 interface lo0.0 passive</kbd>
user@PE2# <kbd class="ph userinput">set area 0.0.0.0 interface ge-0/0/0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由策略和 BGP 社区信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options]
user@PE2# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
user@PE2# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe1</kbd>
user@PE2# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 then accept</kbd>
user@PE2# <kbd class="ph userinput">set community vpls-com members target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由实例的类型并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst]
user@PE2# <kbd class="ph userinput">set instance-type l2vpn</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/1.300</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">例如 <code class="ph codeph">l2vpn-inst</code>，配置路由识别符，并配置 VRF 目标社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst]
user@PE2# <kbd class="ph userinput">set route-distinguisher 10.255.255.4:200</kbd>
user@PE2# <kbd class="ph userinput">set vrf-target target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置 L2VPN 协议所需的封装类型。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst protocols l2vpn]
user@PE2# <kbd class="ph userinput">set encapsulation-type ethernet-vlan</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置连接到提供商设备的站点。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst protocols l2vpn]
user@PE2# <kbd class="ph userinput">set site pe2 site-identifier 2</kbd>
user@PE2# <kbd class="ph userinput">set site pe2 interface ge-0/0/1.300 remote-site-id 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由实例配置 L2VPN 协议，以提供播发功能以在接收方向上将流标签弹出到远程 PE，并提供播发功能以将流标签沿传输方向推送到远程 PE。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances l2vpn-inst protocols l2vpn]
user@PE2# <kbd class="ph userinput">set flow-label-transmit</kbd>
user@PE2# <kbd class="ph userinput">set flow-label-receive</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由实例的类型并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE2# <kbd class="ph userinput">set instance-type vpls</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/1.600</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">例如 <code class="ph codeph">vpl1</code>，配置路由识别符，并配置 VRF 目标社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE2# <kbd class="ph userinput">set route-distinguisher 10.255.255.4:100</kbd>
user@PE2# <kbd class="ph userinput">set vrf-target target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 VPLS 域分配最大站点标识符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE2# <kbd class="ph userinput">set site-range 10</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置为不使用 VPLS 实例的隧道服务，并为连接到提供商设备的站点分配站点标识符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE2# <kbd class="ph userinput">set no-tunnel-services</kbd>
user@PE2# <kbd class="ph userinput">set site vpl1PE2 site-identifier 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由实例配置 VPLS 协议，以提供播发功能以在接收方向向远程 PE 弹出流标签，并在传输到远程 PE 的方向上向推送流标签提供播发功能。 </p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE2# <kbd class="ph userinput">set flow-label-transmit</kbd>
user@PE2# <kbd class="ph userinput">set flow-label-receive </kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d51e932__d77004e18797" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd>、 <kbd class="ph userinput">show protocols</kbd>、 <kbd class="ph userinput">show routing-instances</kbd><kbd class="ph userinput">show policy-options</kbd>和<kbd class="ph userinput">show routing-options</kbd>命令来确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2# <kbd class="ph userinput">show interfaces</kbd>
ge-0/0/0 {
    unit 0 {
        family inet {
            address 2.0.0.2/24;
        }
        family mpls;
    }
}
ge-0/0/1 {
    vlan-tagging;
    mtu 1600;
    encapsulation vlan-ccc;
    unit 300 {
        encapsulation vlan-ccc;
        vlan-id 600;
    }
    unit 600 {
        encapsulation vlan-vpls;
        vlan-id 600;
        family vpls;
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.255.4/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2# <kbd class="ph userinput">show protocols</kbd>
rsvp {
    interface all;
    interface ge-0/0/1.0;
    interface lo0.0;
}
mpls {
    label-switched-path to-pe1 {
        to 10.255.255.1;
    }
    interface ge-0/0/0.0;
}
bgp {
    group vpls-pe {
        type internal;
        local-address 10.255.255.4;
        family l2vpn {
            auto-discovery-only;
            signaling;
        }
        neighbor 10.255.255.1;
        neighbor 10.255.255.2;
    }
}
ospf {
    traffic-engineering;
    area 0.0.0.0 {
        interface lo0.0 {
            passive;
        }
        interface ge-0/0/0.0;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE2# <kbd class="ph userinput">show policy-options</kbd>
policy-statement exp-to-frwd {
    term 0 {
        from community vpls-com;
        then {
            install-nexthop lsp to-pe1;
            accept;
        }
    }
}
community vpls-com members target:100:100;
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2# <kbd class="ph userinput">show routing-instances</kbd>
l2vpn-inst {
    instance-type l2vpn;
    interface ge-0/0/1.300;
    route-distinguisher 10.255.255.4:200;
    vrf-target target:100:100;
    protocols {
        l2vpn {
            encapsulation-type ethernet-vlan;
            site pe2 {
                site-identifier 2;
                interface ge-0/0/1.300 {
                    remote-site-id 1;
                }
            }
            flow-label-transmit;
            flow-label-receive;
        }
    }
}
 vpl1 {
    instance-type vpls;
    interface ge-0/0/1.600;
    route-distinguisher 10.255.255.4:100;
    vrf-target target:100:100;
    protocols {
        vpls {
            site-range 10;
            no-tunnel-services;
            site vpl1PE2 {
                site-identifier 2;
            }
            flow-label-transmit;
            flow-label-receive;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE2# <kbd class="ph userinput">show routing-options</kbd>
router-id 10.255.255.4;
autonomous-system 100;
forwarding-table {
    export exp-to-frwd;
}
</pre></div> <!----></div></div></div></div> <div aria-labelledby="ariaid-title79" id="d51e1262" class="topic concept nested2"><h3 id="ariaid-title79" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d51e1268" class="xref">验证 BGP 摘要信息</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d51e1294" class="xref">验证 L2VPN 连接信息</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d51e1320" class="xref">验证路由</a></li></ul> <div id="d51e1262__d51e1268" class="section"><h4 class="title sectiontitle">验证 BGP 摘要信息</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18851" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18856" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18869" class="xref">意义</a></li></ul> <div id="d51e1262__d77004e18851" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证 BGP 摘要信息。</p></div><div id="d51e1262__d77004e18856" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，输入 <code class="ph codeph">show bgp summary</code> 命令。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE2&gt; <code class="ph codeph">show bgp summary</code>

Groups: 1 Peers: 2 Down peers: 1
Table          Tot Paths  Act Paths Suppressed    History Damp State    Pending
bgp.l2vpn.0          
                       1          1          0          0          0          0
Peer                     AS      InPkt     OutPkt    OutQ   Flaps Last Up/Dwn State|#Active/Received/Accepted/Damped...
10.255.255.1            100       8090       8119       0       1 2d 12:53:15 Establ
  bgp.l2vpn.0: 1/1/1/0
  l2vpn-inst.l2vpn.0: 1/1/1/0
10.255.255.2            100          0          0       0       0 2d 14:14:49 Active
</pre></div> <!----></div></div><div id="d51e1262__d77004e18869" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示 BGP 摘要信息。</p></div></div> <div id="d51e1262__d51e1294" class="section"><h4 class="title sectiontitle">验证 L2VPN 连接信息</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18877" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18882" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18895" class="xref">意义</a></li></ul> <div id="d51e1262__d77004e18877" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证第 2 层 VPN 连接信息。</p></div><div id="d51e1262__d77004e18882" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show l2vpn connections</code> 命令以显示第 2 层 VPN 连接信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2&gt; <code class="ph codeph">show l2vpn connections</code>

Layer-2 VPN connections:

Legend for connection status (St)   
EI -- encapsulation invalid      NC -- interface encapsulation not CCC/TCC/VPLS
EM -- encapsulation mismatch     WE -- interface and instance encaps not same
VC-Dn -- Virtual circuit down    NP -- interface hardware not present 
CM -- control-word mismatch      -&gt; -- only outbound connection is up
CN -- circuit not provisioned    &lt;- -- only inbound connection is up
OR -- out of range               Up -- operational
OL -- no outgoing label          Dn -- down                      
LD -- local site signaled down   CF -- call admission control failure      
RD -- remote site signaled down  SC -- local and remote site ID collision
LN -- local site not designated  LM -- local site ID not minimum designated
RN -- remote site not designated RM -- remote site ID not minimum designated
XX -- unknown connection status  IL -- no incoming label
MM -- MTU mismatch               MI -- Mesh-Group ID not available
BK -- Backup connection          ST -- Standby connection
PF -- Profile parse failure      PB -- Profile busy
RS -- remote site standby        SN -- Static Neighbor
LB -- Local site not best-site   RB -- Remote site not best-site
VM -- VLAN ID mismatch

Legend for interface status 
Up -- operational           
Dn -- down

Instance: l2vpn-inst
Edge protection: Not-Primary
  Local site: pe2 (2)
    connection-site           Type  St     Time last up          # Up trans
    1                         rmt   Up     Jun 22 14:46:50 2015           1
      Remote PE: 10.255.255.1, Negotiated control-word: Yes (Null)
      Incoming label: 800002, Outgoing label: 800003
      Local interface: ge-0/0/1.300, Status: Up, Encapsulation: VLAN
      Flow Label Transmit: Yes, Flow Label Receive: Yes
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d51e1262__d77004e18895" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示第 2 层 VPN 连接信息以及流标签传输和流标签接收信息。</p></div></div> <div id="d51e1262__d51e1320" class="section"><h4 class="title sectiontitle">验证路由</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18903" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18908" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d51e1262__d77004e18921" class="xref">意义</a></li></ul> <div id="d51e1262__d77004e18903" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证是否学习了预期的路由。</p></div><div id="d51e1262__d77004e18908" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show route</code> 命令以在路由表中显示路由。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2&gt; <code class="ph codeph">show route</code>

inet.0: 51 destinations, 51 routes (51 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both

1.0.0.0/24         *[OSPF/10] 2d 14:09:33, metric 2
                    &gt; to 2.0.0.1 via ge-0/0/0.0
2.0.0.0/24         *[Direct/0] 2d 14:10:18
                    &gt; via ge-0/0/0.0
2.0.0.2/32         *[Local/0] 2d 14:10:20
                      Local via ge-0/0/0.0
10.4.0.0/16        *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.5.0.0/16        *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.6.128.0/17      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.9.0.0/16        *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.10.0.0/16       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.13.4.0/23       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.13.10.0/23      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.82.0.0/15       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.84.0.0/16       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.85.12.0/22      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.92.0.0/16       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.94.0.0/16       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.99.0.0/16       *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.102.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.102.160.0/19    *[Direct/0] 2d 14:12:18
                    &gt; via fxp0.0
10.102.171.41/32   *[Local/0] 2d 14:12:18
                      Local via fxp0.0
10.150.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.155.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.157.64.0/19     *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.160.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.204.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.205.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.206.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.207.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.209.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.212.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.213.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.214.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.215.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.216.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.218.13.0/24     *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.218.14.0/24     *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.218.16.0/20     *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.218.32.0/20     *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.227.0.0/16      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
10.255.255.1/32    *[OSPF/10] 2d 12:50:36, metric 2
                    &gt; to 2.0.0.1 via ge-0/0/0.0
10.255.255.2/32    *[OSPF/10] 2d 14:09:33, metric 1
                    &gt; to 2.0.0.1 via ge-0/0/0.0
10.255.255.4/32    *[Direct/0] 2d 14:11:51
                    &gt; via lo0.0         
128.102.161.191/32 *[OSPF/10] 2d 14:09:33, metric 1
                    &gt; to 2.0.0.1 via ge-0/0/0.0
128.102.169.99/32  *[OSPF/10] 2d 12:50:36, metric 2
                    &gt; to 2.0.0.1 via ge-0/0/0.0
128.102.171.41/32  *[Direct/0] 2d 14:12:18
                    &gt; via lo0.0         
172.16.0.0/12      *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
192.168.0.0/16     *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
192.168.102.0/23   *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
207.17.136.0/24    *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
207.17.136.192/32  *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
207.17.137.0/24    *[Static/5] 2d 14:12:18
                    &gt; to 10.102.191.254 via fxp0.0
224.0.0.5/32       *[OSPF/10] 2d 14:11:51, metric 1
                      MultiRecv         
                                        
inet.3: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
10.255.255.1/32    *[RSVP/7/1] 2d 12:50:24, metric 2
                    &gt; to 2.0.0.1 via ge-0/0/0.0, label-switched-path to-pe1
                                        
iso.0: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
47.0005.80ff.f800.0000.0108.0001.1281.0217.1041/152               
                   *[Direct/0] 2d 14:12:18
                    &gt; via lo0.0         
                                        
mpls.0: 6 destinations, 6 routes (6 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
0                  *[MPLS/0] 2d 14:11:51, metric 1
                      Receive           
1                  *[MPLS/0] 2d 14:11:51, metric 1
                      Receive           
2                  *[MPLS/0] 2d 14:11:51, metric 1
                      Receive           
13                 *[MPLS/0] 2d 14:11:51, metric 1
                      Receive           
800002             *[L2VPN/7] 2d 12:43:43
                    &gt; via ge-0/0/1.300, Pop       Offset: 4
ge-0/0/1.300       *[L2VPN/7] 2d 12:43:43, metric2 2
                    &gt; to 2.0.0.1 via ge-0/0/0.0, label-switched-path to-pe1
                                        
inet6.0: 2 destinations, 2 routes (2 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
abcd::128:102:171:41/128                
                   *[Direct/0] 2d 14:12:18
                    &gt; via lo0.0         
fe80::5668:a60f:fc6b:ee28/128           
                   *[Direct/0] 2d 14:12:18
                    &gt; via lo0.0         
                                        
bgp.l2vpn.0: 1 destinations, 1 routes (1 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
10.255.255.1:200:1:1/96                 
                   *[BGP/170] 2d 12:43:43, localpref 100, from 10.255.255.1
                      AS path: I, validation-state: unverified
                    &gt; to 2.0.0.1 via ge-0/0/0.0, label-switched-path to-pe1
                                        
l2vpn-inst.l2vpn.0: 2 destinations, 2 routes (2 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
10.255.255.1:200:1:1/96                 
                   *[BGP/170] 2d 12:43:43, localpref 100, from 10.255.255.1
                      AS path: I, validation-state: unverified
                    &gt; to 2.0.0.1 via ge-0/0/0.0, label-switched-path to-pe1
10.255.255.4:200:2:1/96                 
                   *[L2VPN/170/-101] 2d 12:43:50, metric2 1
                      Indirect          
                                        
l2vpn-inst.l2id.0: 2 destinations, 3 routes (2 active, 0 holddown, 0 hidden)
+ = Active Route, - = Last Active, * = Both
                                        
1                  *[BGP/170] 2d 12:43:43, localpref 100, from 10.255.255.1
                      AS path: I, validation-state: unverified
                    &gt; to 2.0.0.1 via ge-0/0/0.0, label-switched-path to-pe1
2                  *[L2VPN/170/-101] 2d 12:43:50, metric2 1
                      Indirect          
                    [L2VPN/175] 2d 12:43:43
                    &gt; via ge-0/0/1.300, Pop       Offset: 4

</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d51e1262__d77004e18921" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示路由表中的所有路由。</p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="link">为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="link">示例：为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-fat-pseudowire-support-for-bgp-l2vpn-and-vpls-overview" class="link">面向 BGP L2VPN 和 VPLS 的 FAT 伪线支持概述</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-receive-edit-routing-instances.html" class="link">流标签接收</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-transmit-edit-routing-instances.html" class="link">流标签传输</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title80" xml:lang="zh-CN" lang="zh-CN" id="id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="topic task nested1"><h2 id="ariaid-title80" class="title topictitle2">为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body taskbody"><div class="abstract"><p class="p">VPLS 等 BGP 信号伪线支持流感知传输 （FAT） 或流标签，并且只能在标签边缘路由器 （LER） 上配置。这使得中转路由器或标签交换路由器 （LSR） 能够跨等价多路径 （ECMP） 或链路聚合组 （LAG） 对 MPLS 数据包执行负载平衡，而无需对有效负载进行深度数据包检测。FAT 伪线或流标签可与具有转发等效类（FEC128 和 FEC129）的 LDP 信号 VPLS 一起使用，并且对流标签的支持已扩展到用于点对点或点对多点第 2 层服务的 BGP 信号伪线。</p></div> <div id="id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic__d77004e18946" class="section prereq p"><p class="p">在为 BGP VPLS 配置 FAT 伪线支持以对 MPLS 流量进行负载平衡之前：</p> <ul class="ul"><li class="li"><p class="p">配置设备接口并在所有接口上启用 MPLS。 </p></li> <li class="li"><p class="p">配置 RSVP。</p></li> <li class="li"><p class="p">为远程 PE 路由器配置 MPLS 和 LSP。</p></li> <li class="li"><p class="p">配置 BGP 和 OSPF。</p></li></ul></div> <div id="id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic__d77004e18962" class="section context"><p class="p">要为 BGP VPLS 配置 FAT 伪线支持以对 MPLS 流量进行负载均衡，您必须执行以下操作：</p></div> <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">为 VPLS 协议的给定路由实例配置连接到提供商设备的站点。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols vpls]
user@host#  <kbd class="ph userinput">set site <var class="keyword varname">site-name</var> site-identifier <var class="keyword varname">site-identifier</var></kbd>
user@host#  <kbd class="ph userinput">set site-range <var class="keyword varname">site-range</var></kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">为路由实例配置 VPLS 协议，以提供播发功能，以便在接收方向上将流标签弹出到远程 PE。 </span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols vpls]
user@host#  <kbd class="ph userinput">set flow-label-receive </kbd>
</pre></div> <!----></div></div></li> <li class="li step stepexpand"><span class="ph cmd">配置 VPLS 协议以提供播发功能，以将流标签沿传输方向推送到远程 PE。</span><div class="itemgroup info"><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances <var class="keyword varname">routing-instance name</var> protocols vpls]
user@host#  <kbd class="ph userinput">set flow-label-transmit</kbd>
</pre></div> <!----></div></div></li></ol></div> <div class="l-aside-box see-also"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-fat-pseudowire-support-for-bgp-l2vpn-and-vpls-overview" class="link">面向 BGP L2VPN 和 VPLS 的 FAT 伪线支持概述</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="link">为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="link">示例：为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-receive-edit-routing-instances.html" class="link">流标签接收</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-transmit-edit-routing-instances.html" class="link">流标签传输</a></div></li></ul></div></div></div> <div aria-labelledby="ariaid-title81" xml:lang="zh-CN" lang="zh-CN" id="id-example-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="topic concept nested1"><h2 id="ariaid-title81" class="title topictitle2">示例：为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡<a class="bookmarktitle" aria-label="Copy link to this section: 示例：为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2> <div class="body conbody"><p class="p">此示例说明如何为 BGP VPLS 实现 FAT 伪线支持，以帮助均衡 MPLS 流量的负载。</p></div> <ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e39" class="xref">要求</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e55" class="xref">概述</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72" class="xref">配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e1012" class="xref">验证</a></li></ul> <div aria-labelledby="ariaid-title82" id="d53e39" class="topic concept nested2"><h3 id="ariaid-title82" class="title topictitle3">要求</h3> <div class="body conbody"><p class="p">此示例使用以下硬件和软件组件：</p> <ul class="ul"><li class="li"><p class="p">五个 MX 系列路由器 </p></li> <li class="li"><p class="p">在所有设备上运行的 Junos OS 16.1 或更高版本</p></li></ul> <p class="p">在为 BGP VPLS 配置 FAT 伪线支持之前，请确保配置路由和信令协议。</p></div></div> <div aria-labelledby="ariaid-title83" id="d53e55" class="topic concept nested2"><h3 id="ariaid-title83" class="title topictitle3">概述</h3> <div class="body conbody"><p class="p">Junos OS 允许仅在标签边缘路由器 （LER） 上配置 VPLS 等 BGP 信号伪线支持的流感知传输 （FAT） 流标签。这会导致中转路由器或标签交换路由器 （LSR） 跨等价多路径 （ECMP） 路径或链路聚合组 （LAG） 对 MPLS 数据包执行负载平衡，而无需对有效负载进行深度数据包检测。FAT 流标签可用于 VPWS 和 VPLS 伪线的 LDP 信号转发等效类（FEC 128 和 FEC 129）伪线。</p> <div id="d53e55__d77004e19084" class="section"><h4 class="title sectiontitle">拓扑学</h4><p class="p"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e55__d53e68" class="xref">图 16</a> 显示了对设备 PE1 和设备 PE2 上配置的 BGP VPLS 的 FAT 伪线支持。</p> <div id="d53e55__d53e68" class="fig fignone"><span class="figcap"><span class="fig--title-label">图 16： </span>BGP VPLS 的 FAT 伪线支持示例</span><span><div class="imgwrap"><img data-width="2100px" data-height="549px" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/g043326.png" alt="BGP VPLS 的 FAT 伪线支持示例" class="image"><i class="expand-image swmaterialicon" title="expand the image">zoom_out_map</i></div></span></div></div></div></div> <div aria-labelledby="ariaid-title84" id="d53e72" class="topic concept nested2"><h3 id="ariaid-title84" class="title topictitle3">配置</h3> <div class="body conbody"><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72__d77004e19099" class="xref">CLI 快速配置</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72__d77004e19470" class="xref">配置 PE1</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72__d77004e19738" class="xref">配置 PE2</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72__d77004e19958" class="xref">结果</a></li></ul> <div id="d53e72__d77004e19099" class="section"><h4 class="title sectiontitle">CLI 快速配置</h4><p class="p">要快速配置此示例，请复制以下命令，将其粘贴到文本文件中，删除所有换行符，更改详细信息，以便与网络配置匹配，将命令复制并粘贴到 <kbd class="ph userinput">[edit]</kbd> 层级的 CLI 中，然后从配置模式进入 <code class="ph codeph">commit</code> 。</p> <p class="p"><strong class="ph b">CE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 family inet address 10.1.1.1/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.8/32</kbd>
</pre></div> <!----></div><p class="p"><strong class="ph b">PE1</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 mtu 1600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 encapsulation vlan-vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 encapsulation vlan-vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 family vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 1.0.0.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.1/32</kbd>
<kbd class="ph userinput">set routing-options nonstop-routing</kbd>
<kbd class="ph userinput">set routing-options router-id 10.255.255.1</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 100</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export exp-to-frwd</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface lo0.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path to-pe2 to 10.255.255.4</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe type internal</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe local-address 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn auto-discovery-only</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn signaling</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.4</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.2</kbd>
<kbd class="ph userinput">set protocols ospf traffic-engineering</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe2</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then accept</kbd>
<kbd class="ph userinput">set policy-options community vpls-com members target:100:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 instance-type vpls</kbd>
<kbd class="ph userinput">set routing-instances vpl1 interface ge-0/0/0.600</kbd>
<kbd class="ph userinput">set routing-instances vpl1 route-distinguisher 10.255.255.1:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 vrf-target target:100:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site-range 10</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls no-tunnel-services</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site vpl1PE1 site-identifier 1</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-transmit</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-receive</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">P</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 1.0.0.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family inet address 2.0.0.1/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.2/32</kbd>
<kbd class="ph userinput">set routing-options router-id 10.255.255.2</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 100</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface lo0.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe type internal</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe local-address 10.255.255.2</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn signaling</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.4 deactivate protocols bgp</kbd>
<kbd class="ph userinput">set protocols ospf traffic-engineering</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/1.0</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">PE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family inet address 2.0.0.2/24</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 0 family mpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 mtu 1600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 encapsulation vlan-vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 600 encapsulation vlan-vpls</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/1 unit 600 family vpls</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.4/32</kbd>
<kbd class="ph userinput">set routing-options router-id 10.255.255.4</kbd>
<kbd class="ph userinput">set routing-options autonomous-system 100</kbd>
<kbd class="ph userinput">set routing-options forwarding-table export exp-to-frwd</kbd>
<kbd class="ph userinput">set protocols rsvp interface all</kbd>
<kbd class="ph userinput">set protocols rsvp interface ge-0/0/1.0</kbd>
<kbd class="ph userinput">set protocols rsvp interface lo0.0</kbd>
<kbd class="ph userinput">set protocols mpls label-switched-path to-pe1 to 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols mpls interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe type internal</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe local-address 10.255.255.4</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn auto-discovery-only</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe family l2vpn signaling</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.1</kbd>
<kbd class="ph userinput">set protocols bgp group vpls-pe neighbor 10.255.255.2</kbd>
<kbd class="ph userinput">set protocols ospf traffic-engineering</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface lo0.0 passive</kbd>
<kbd class="ph userinput">set protocols ospf area 0.0.0.0 interface ge-0/0/0.0</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe1</kbd>
<kbd class="ph userinput">set policy-options policy-statement exp-to-frwd term 0 then accept</kbd>
<kbd class="ph userinput">set policy-options community vpls-com members target:100:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 instance-type vpls</kbd>
<kbd class="ph userinput">set routing-instances vpl1 interface ge-0/0/1.600</kbd>
<kbd class="ph userinput">set routing-instances vpl1 route-distinguisher 10.255.255.4:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 vrf-target target:100:100</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site-range 10</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls no-tunnel-services</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls site vpl1PE2 site-identifier 2</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-transmit</kbd>
<kbd class="ph userinput">set routing-instances vpl1 protocols vpls flow-label-receive</kbd>
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><p class="p"><strong class="ph b">CE2</strong></p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre><kbd class="ph userinput">set interfaces ge-0/0/0 vlan-tagging</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 vlan-id 600</kbd>
<kbd class="ph userinput">set interfaces ge-0/0/0 unit 600 family inet address 10.1.1.2/24</kbd>
<kbd class="ph userinput">set interfaces lo0 unit 0 family inet address 10.255.255.9/32</kbd>
</pre></div> <!----></div></div> <div id="d53e72__d77004e19470" class="section"><h4 class="title sectiontitle">配置 PE1</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72__d77004e19473" class="xref">分步过程</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e72__d77004e19693" class="xref">结果</a></li></ul> <div id="d53e72__d77004e19473" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 PE1：</p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@PE1# <kbd class="ph userinput">set ge-0/0/0 vlan-tagging</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 mtu 1600</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 encapsulation vlan-vpls</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 600 encapsulation vlan-vpls</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 600 vlan-id 600</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/0 unit 600 family vpls</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/1 unit 0 family inet address 1.0.0.1/24</kbd>
user@PE1# <kbd class="ph userinput">set ge-0/0/1 unit 0 family mpls</kbd>
user@PE1# <kbd class="ph userinput">set lo0 unit 0 family inet address 10.255.255.1/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置不间断路由，并配置路由器 ID。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE1# <kbd class="ph userinput">set nonstop-routing</kbd>
user@PE1# <kbd class="ph userinput">set router-id 10.255.255.1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号，并使用导出语句将策略应用到本地路由器的转发表。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE1# <kbd class="ph userinput">set autonomous-system 100</kbd>
user@PE1# <kbd class="ph userinput">set forwarding-table export exp-to-frwd</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols rsvp]
user@PE1# <kbd class="ph userinput">set interface all</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/1.0</kbd>
user@PE1# <kbd class="ph userinput">set interface lo0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将标签交换路径属性应用于 MPLS 协议，并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols mpls]
user@PE1# <kbd class="ph userinput">set label-switched-path to-pe2 to 10.255.255.4</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/1.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义对等组，并为对等组 <code class="ph codeph">vpls-pe</code>配置 BGP 会话的本地端地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE1# <kbd class="ph userinput">set type internal</kbd>
user@PE1# <kbd class="ph userinput">set local-address 10.255.255.1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在更新中为 NLRI 配置协议家族的属性。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe family l2vpn]
user@PE1# <kbd class="ph userinput">set auto-discovery-only</kbd>
user@PE1# <kbd class="ph userinput">set signaling</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为对等组 <code class="ph codeph">vpls-pe</code>配置邻居。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE1# <kbd class="ph userinput">set neighbor 10.255.255.4</kbd>
user@PE1# <kbd class="ph userinput">set neighbor 10.255.255.2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置流量工程，并配置 OSPF 区域 0.0.0.0 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf]
user@PE1# <kbd class="ph userinput">set traffic-engineering</kbd>
user@PE1# <kbd class="ph userinput">set area 0.0.0.0 interface lo0.0 passive</kbd>
user@PE1# <kbd class="ph userinput">set area 0.0.0.0 interface ge-0/0/1.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由策略和 BGP 社区信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options ]
user@PE1# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
user@PE1# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe2</kbd>
user@PE1# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 then accept</kbd>
user@PE1# <kbd class="ph userinput">set community vpls-com members target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由实例的类型并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vp1]
user@PE1# <kbd class="ph userinput">set instance-type vpls</kbd>
user@PE1# <kbd class="ph userinput">set interface ge-0/0/0.600</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">例如 <code class="ph codeph">vpl1</code>，配置路由识别符，并配置 VRF 目标社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE1# <kbd class="ph userinput">set route-distinguisher 10.255.255.1:100</kbd>
user@PE1# <kbd class="ph userinput">set vrf-target target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 VPLS 域分配最大站点标识符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vp1 protocols vpls]
user@PE1# <kbd class="ph userinput">set site-range 10</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将 VPLS 协议配置为不使用 VPLS 实例的隧道服务，并将站点标识符分配给连接到提供商设备的站点。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vp1 protocols vpls]
user@PE1# <kbd class="ph userinput">set no-tunnel-services</kbd>
user@PE1# <kbd class="ph userinput">set site vpl1PE1 site-identifier 1</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由实例配置 VPLS 协议，以提供播发功能以在接收方向上将流标签弹出到远程 PE，并提供播发功能以在传输方向上将流标签推送到远程 PE。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vp1 protocols vpls]
user@PE1# <kbd class="ph userinput">set flow-label-receive</kbd>
user@PE1# <kbd class="ph userinput">set flow-label-transmit</kbd>
</pre></div> <!----></div></li></ol></div><div id="d53e72__d77004e19693" class="subsection"><h5 class="sectiontitle">结果</h5><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd>、 <kbd class="ph userinput">show protocols</kbd>、 <kbd class="ph userinput">show routing-instances</kbd><kbd class="ph userinput">show policy-options</kbd>和<kbd class="ph userinput">show routing-options</kbd>命令来确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1#<kbd class="ph userinput"> show interfaces</kbd>
ge-0/0/0 {
    vlan-tagging;
    mtu 1600;
    encapsulation vlan-vpls;
    unit 600 {
        encapsulation vlan-vpls;
        vlan-id 600;
        family vpls;
    }
}
ge-0/0/1 {
    unit 0 {
        family inet {
            address 1.0.0.1/24;
        }
        family mpls;
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.255.1/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1# <kbd class="ph userinput">show protocols</kbd>
rsvp {
    interface all;
    interface ge-0/0/1.0;
    interface lo0.0;
}
mpls {
    label-switched-path to-pe2 {
        to 10.255.255.4;
    }
    interface ge-0/0/1.0;
}
bgp {
    group vpls-pe {
        type internal;
        local-address 10.255.255.1;
        family l2vpn {
            auto-discovery-only;
            signaling;
        }
        neighbor 10.255.255.4;
        neighbor 10.255.255.2;
    }
}
ospf {
    traffic-engineering;
    area 0.0.0.0 {
        interface lo0.0 {
            passive;
        }
        interface ge-0/0/1.0;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE1# <kbd class="ph userinput">show policy-options</kbd>
policy-statement exp-to-frwd {
    term 0 {
        from community vpls-com;
        then {
            install-nexthop lsp to-pe2;
            accept;
        }
    }
}
community vpls-com members target:100:100;
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1# <kbd class="ph userinput">show routing-instances</kbd>
vpl1 {
    instance-type vpls;
    interface ge-0/0/0.600;
    route-distinguisher 10.255.255.1:100;
    vrf-target target:100:100;
    protocols {
        vpls {
            site-range 10;
            no-tunnel-services;
            site vpl1PE1 {
                site-identifier 1;
            }
            flow-label-transmit;
            flow-label-receive;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE1# <kbd class="ph userinput">show routing-options</kbd>
nonstop-routing;
router-id 10.255.255.1;
autonomous-system 100;
forwarding-table {
    export exp-to-frwd;
}
</pre></div> <!----></div></div></div> <div id="d53e72__d77004e19738" class="section"><h4 class="title sectiontitle">配置 PE2</h4><div id="d53e72__d77004e19741" class="subsection"><h5 class="sectiontitle">分步过程</h5><p class="p">以下示例要求您在配置层次结构中导航各个级别。有关导航 CLI 的信息，请参阅《<a href="https://www.juniper.net/documentation/en_US/junos/information-products/pathway-pages/junos-cli/junos-cli.html" target="_blank" class="xref">Junos OS CLI 用户指南</a>》中的在<a href="https://www.juniper.net/documentation/cn/zh/software/junos/cli/topics/topic-map/getting-started.html#id-using-the-cli-editor-in-configuration-mode" class="xref">配置模式下使用 CLI 编辑器</a>。</p> <p class="p">要配置设备 PE2：</p> <ol class="ol"><li class="li"><p class="p">配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit interfaces]
user@PE2# <kbd class="ph userinput">set ge-0/0/0 unit 0 family inet address 2.0.0.2/24</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/0 unit 0 family mpls</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 vlan-tagging</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 mtu 1600</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 encapsulation vlan-vpls</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 600 encapsulation vlan-vpls</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 600 vlan-id 600</kbd>
user@PE2# <kbd class="ph userinput">set ge-0/0/1 unit 600 family vpls</kbd>
user@PE2# <kbd class="ph userinput">set lo0 unit 0 family inet address 10.255.255.4/32</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由器 ID。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE2# <kbd class="ph userinput">set router-id 10.255.255.4</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置自治系统 (AS) 编号，并使用导出语句将策略应用到本地路由器的转发表。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-options]
user@PE2# <kbd class="ph userinput">set autonomous-system 100</kbd>
user@PE2# <kbd class="ph userinput">set forwarding-table export exp-to-frwd</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在接口上配置 RSVP 协议。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols rsvp]
user@PE2# <kbd class="ph userinput">set interface all</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/1.0</kbd>
user@PE2# <kbd class="ph userinput">set interface lo0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将标签交换路径属性应用于 MPLS 协议，并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols mpls]
user@PE2# <kbd class="ph userinput">set label-switched-path to-pe1 to 10.255.255.1</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">定义对等组，并为对等组 <code class="ph codeph">vpls-pe</code>配置 BGP 会话的本地端地址。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE2# <kbd class="ph userinput">set type internal</kbd>
user@PE2# <kbd class="ph userinput">set local-address 10.255.255.4</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">在更新中为 NLRI 配置协议家族的属性。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE2# <kbd class="ph userinput">set family l2vpn auto-discovery-only</kbd>
user@PE2# <kbd class="ph userinput">set family l2vpn signaling</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为对等组 <code class="ph codeph">vpls-pe</code>配置邻居。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols bgp group vpls-pe]
user@PE2# <kbd class="ph userinput">set neighbor 10.255.255.1</kbd>
user@PE2# <kbd class="ph userinput">set neighbor 10.255.255.2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置流量工程，并配置 OSPF 区域 0.0.0.0 的接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit protocols ospf]
user@PE2# <kbd class="ph userinput">set traffic-engineering</kbd>
user@PE2# <kbd class="ph userinput">set area 0.0.0.0 interface lo0.0 passive</kbd>
user@PE2# <kbd class="ph userinput">set area 0.0.0.0 interface ge-0/0/0.0</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由策略和 BGP 社区信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit policy-options ]
user@PE2# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 from community vpls-com</kbd>
user@PE2# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 then install-nexthop lsp to-pe1</kbd>
user@PE2# <kbd class="ph userinput">set policy-statement exp-to-frwd term 0 then accept</kbd>
user@PE2# <kbd class="ph userinput">set community vpls-com members target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">配置路由实例的类型并配置接口。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE2# <kbd class="ph userinput">set instance-type vpls</kbd>
user@PE2# <kbd class="ph userinput">set interface ge-0/0/1.600</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">例如 <code class="ph codeph">vp11</code>，配置路由识别符，并配置 VRF 目标社区。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1]
user@PE2# <kbd class="ph userinput">set route-distinguisher 10.255.255.4:100</kbd>
user@PE2# <kbd class="ph userinput">set vrf-target target:100:100</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为 VPLS 域分配最大站点标识符。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE2# <kbd class="ph userinput">set site-range 10</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">将 VPLS 协议配置为不使用 VPLS 实例的隧道服务，并将站点标识符分配给连接到提供商设备的站点。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE2# <kbd class="ph userinput">set no-tunnel-services</kbd>
user@PE2# <kbd class="ph userinput">set site vpl1PE2 site-identifier 2</kbd>
</pre></div> <!----></div></li> <li class="li"><p class="p">为路由实例配置 VPLS 协议，以提供播发功能以在接收方向上将流标签弹出到远程 PE，并提供播发功能以在传输方向上将流标签推送到远程 PE。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>[edit routing-instances vpl1 protocols vpls]
user@PE2# <kbd class="ph userinput">set flow-label-transmit</kbd>
user@PE2# <kbd class="ph userinput">set flow-label-receive</kbd>
</pre></div> <!----></div></li></ol></div></div> <div id="d53e72__d77004e19958" class="section"><h4 class="title sectiontitle">结果</h4><p class="p">在配置模式下，输入 <kbd class="ph userinput">show interfaces</kbd>、 <kbd class="ph userinput">show protocols</kbd>、 <kbd class="ph userinput">show routing-instances</kbd><kbd class="ph userinput">show policy-options</kbd>和<kbd class="ph userinput">show routing-options</kbd>命令来确认您的配置。如果输出未显示预期的配置，请重复此示例中的说明，以便进行更正。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2#<kbd class="ph userinput"> show interfaces</kbd>
ge-0/0/0 {
    unit 0 {
        family inet {
            address 2.0.0.2/24;
        }
        family mpls;
    }
}
ge-0/0/1 {
    vlan-tagging;
    mtu 1600;
    encapsulation vlan-vpls;
    unit 600 {
        encapsulation vlan-vpls;
        vlan-id 600;
        family vpls;
    }
}
lo0 {
    unit 0 {
        family inet {
            address 10.255.255.4/32;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2#<kbd class="ph userinput"> show protocols</kbd>
rsvp {
    interface all;
    interface ge-0/0/1.0;
    interface lo0.0;
}
mpls {
    label-switched-path to-pe1 {
        to 10.255.255.1;
    }
    interface ge-0/0/0.0;
}
bgp {
    group vpls-pe {
        type internal;
        local-address 10.255.255.4;
        family l2vpn {
            auto-discovery-only;
            signaling;
        }
        neighbor 10.255.255.1;
        neighbor 10.255.255.2;
    }
}
ospf {
    traffic-engineering;
    area 0.0.0.0 {
        interface lo0.0 {
            passive;
        }
        interface ge-0/0/0.0;
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE2#<kbd class="ph userinput"> show policy-options</kbd>
policy-statement exp-to-frwd {
    term 0 {
        from community vpls-com;
        then {
            install-nexthop lsp to-pe1;
            accept;
        }
    }
}
community vpls-com members target:100:100;
</pre></div> <!----></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2#<kbd class="ph userinput"> show routing-instances</kbd>
vpl1 {
    instance-type vpls;
    interface ge-0/0/1.600;
    route-distinguisher 10.255.255.4:100;
    vrf-target target:100:100;
    protocols {
        vpls {
            site-range 10;
            no-tunnel-services;
            site vpl1PE2 {
                site-identifier 2;
            }
            flow-label-transmit;
            flow-label-receive;
        }
    }
}
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div><div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body"><pre>user@PE2#<kbd class="ph userinput"> show routing-options</kbd>
router-id 10.255.255.4;
autonomous-system 100;
forwarding-table {
    export exp-to-frwd;
}
</pre></div> <!----></div></div></div> <div aria-labelledby="ariaid-title85" id="d53e980" class="topic concept nested3"><h4 id="ariaid-title85" class="title topictitle4">验证</h4> <div class="body conbody"><p class="p">确认配置工作正常。</p> <div id="d53e980__d53e986" class="section"><h5 class="title sectiontitle">验证 VPLS 连接信息</h5><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e980__d77004e20012" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e980__d77004e20017" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e980__d77004e20030" class="xref">意义</a></li></ul> <div id="d53e980__d77004e20012" class="subsection"><h6 class="sectiontitle">目的</h6><p class="p">验证 VPLS 连接信息。</p></div><div id="d53e980__d77004e20017" class="subsection"><h6 class="sectiontitle">操作</h6><p class="p">在操作模式下，运行 <code class="ph codeph">show vpls connections</code> 命令以显示 VPLS 连接信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE1&gt; <code class="ph codeph">show vpls connections</code>
Layer-2 VPN connections:

Legend for connection status (St)   
EI -- encapsulation invalid      NC -- interface encapsulation not CCC/TCC/VPLS
EM -- encapsulation mismatch     WE -- interface and instance encaps not same
VC-Dn -- Virtual circuit down    NP -- interface hardware not present 
CM -- control-word mismatch      -&gt; -- only outbound connection is up
CN -- circuit not provisioned    &lt;- -- only inbound connection is up
OR -- out of range               Up -- operational
OL -- no outgoing label          Dn -- down                      
LD -- local site signaled down   CF -- call admission control failure      
RD -- remote site signaled down  SC -- local and remote site ID collision
LN -- local site not designated  LM -- local site ID not minimum designated
RN -- remote site not designated RM -- remote site ID not minimum designated
XX -- unknown connection status  IL -- no incoming label
MM -- MTU mismatch               MI -- Mesh-Group ID not available
BK -- Backup connection          ST -- Standby connection
PF -- Profile parse failure      PB -- Profile busy
RS -- remote site standby        SN -- Static Neighbor
LB -- Local site not best-site   RB -- Remote site not best-site
VM -- VLAN ID mismatch

Legend for interface status 
Up -- operational           
Dn -- down

Instance: vpl1
Edge protection: Not-Primary
  Local site: vpl1PE1 (1)
    connection-site           Type  St     Time last up          # Up trans
    2                         rmt   Up     Jun 17 11:38:14 2015           1
      Remote PE: 10.255.255.4, Negotiated control-word: No
      Incoming label: 262146, Outgoing label: 262145
      Local interface: lsi.1048576, Status: Up, Encapsulation: VPLS
        Description: Intf - vpls vpl1 local site 1 remote site 2
      Flow Label Transmit: Yes, Flow Label Receive: Yes
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d53e980__d77004e20030" class="subsection"><h6 class="sectiontitle">意义</h6><p class="p">输出显示 VPLS 连接信息以及流标签接收和流标签传输信息。</p></div></div></div></div></div> <div aria-labelledby="ariaid-title86" id="d53e1012" class="topic concept nested2"><h3 id="ariaid-title86" class="title topictitle3">验证</h3> <div class="body conbody"><p class="p">确认配置工作正常。</p> <div id="d53e1012__d53e1018" class="section"><h4 class="title sectiontitle">验证 VPLS 连接信息</h4><ul class="ul mini-toc"><li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e1012__d77004e20044" class="xref">目的</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e1012__d77004e20049" class="xref">操作</a></li> <li class="li"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#d53e1012__d77004e20062" class="xref">意义</a></li></ul> <div id="d53e1012__d77004e20044" class="subsection"><h5 class="sectiontitle">目的</h5><p class="p">验证 VPLS 连接信息。</p></div><div id="d53e1012__d77004e20049" class="subsection"><h5 class="sectiontitle">操作</h5><p class="p">在操作模式下，运行 <code class="ph codeph">show vpls connections</code> 命令以显示 VPLS 连接信息。</p> <div class="code-block"><div class="code-action"><span aria-label="Copy Code" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon cpcode">content_copy</i></span> <span aria-label="Expanded View" data-microtip-position="bottom" role="tooltip"><i class="swmaterialicon close_zoom">zoom_out_map</i></span></div> <div class="code-body ftht"><pre>user@PE2&gt; <code class="ph codeph">show vpls connections</code>
Layer-2 VPN connections:

Legend for connection status (St)   
EI -- encapsulation invalid      NC -- interface encapsulation not CCC/TCC/VPLS
EM -- encapsulation mismatch     WE -- interface and instance encaps not same
VC-Dn -- Virtual circuit down    NP -- interface hardware not present 
CM -- control-word mismatch      -&gt; -- only outbound connection is up
CN -- circuit not provisioned    &lt;- -- only inbound connection is up
OR -- out of range               Up -- operational
OL -- no outgoing label          Dn -- down                      
LD -- local site signaled down   CF -- call admission control failure      
RD -- remote site signaled down  SC -- local and remote site ID collision
LN -- local site not designated  LM -- local site ID not minimum designated
RN -- remote site not designated RM -- remote site ID not minimum designated
XX -- unknown connection status  IL -- no incoming label
MM -- MTU mismatch               MI -- Mesh-Group ID not available
BK -- Backup connection          ST -- Standby connection
PF -- Profile parse failure      PB -- Profile busy
RS -- remote site standby        SN -- Static Neighbor
LB -- Local site not best-site   RB -- Remote site not best-site
VM -- VLAN ID mismatch

Legend for interface status 
Up -- operational           
Dn -- down

Instance: vpl1
Edge protection: Not-Primary
  Local site: vpl1PE2 (2)
    connection-site           Type  St     Time last up          # Up trans
    1                         rmt   Up     Jun 17 11:38:14 2015           1
      Remote PE: 10.255.255.1, Negotiated control-word: No
      Incoming label: 262145, Outgoing label: 262146
      Local interface: lsi.1048576, Status: Up, Encapsulation: VPLS
        Description: Intf - vpls vpl1 local site 2 remote site 1
      Flow Label Transmit: Yes, Flow Label Receive: Yes
</pre></div> <div class="code-fade">
    Show
    <span>more</span> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="16px" viewBox="0 0 24 24" width="16px" fill="#000000" class="dosvg"><g><rect fill="none" height="24" width="24"></rect></g> <g><g><polygon points="18,6.41 16.59,5 12,9.58 7.41,5 6,6.41 12,12.41"></polygon> <polygon points="18,13 16.59,11.59 12,16.17 7.41,11.59 6,13 12,19"></polygon></g></g></svg></div></div></div><div id="d53e1012__d77004e20062" class="subsection"><h5 class="sectiontitle">意义</h5><p class="p">输出显示 VPLS 连接信息以及流标签接收和流标签传输信息。</p></div></div></div></div> <div class="l-aside-box related-links"><h3 class="related-links-title">另请参阅</h3><div class="related-links-body"><ul><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="link">为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-configuring-fat-pseudowire-support-for-bgp-vpls-to-load-balance-mpls-traffic" class="link">为 BGP VPLS 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/load-balancing-bgp-session.html#id-example-configuring-fat-pseudowire-support-for-bgp-l2vpn-to-load-balance-mpls-traffic" class="link">示例：为 BGP L2VPN 配置 FAT 伪线支持，以对 MPLS 流量进行负载平衡</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-receive-edit-routing-instances.html" class="link">流标签接收</a></div></li><li><div><a href="https://www.juniper.net/documentation/us/en/software/junos/cli-reference/topics/ref/statement/flow-label-transmit-edit-routing-instances.html" class="link">流标签传输</a></div></li></ul></div></div></div> <div id="change-history-table" class="change-history-table"><h2 class="caption">变更历史表<a class="bookmarktitle" aria-label="Copy link to this section: 变更历史表" data-microtip-position="bottom" data-microtip-size="large" role="tooltip"><svg width="16" height="16" class="icon"><use href="/documentation/webstatic/icons.svg#icon-link" xlink:href="/documentation/webstatic/icons.svg#icon-link"></use></svg></a></h2><p class="feature-explorer-support">是否支持某项功能取决于您使用的平台和版本。  使用 <a href="https://apps.juniper.net/feature-explorer/">Feature Explorer</a> 查看您使用的平台是否支持某项功能。</p><div class="table-row table-head"><div class="table-cell">版本</div><div class="table-cell">说明</div></div><div class="table-row"><div class="table-cell">20.2R1</div><div class="table-cell">从 Junos OS 20.2R1 版开始，MX 系列、EX9204、EX9208、EX9214、EX9251 和 EX9253 设备支持用于第 2 层电路、第 2 层 VPN 和 VPLS（BGP VPLS、LDP VPLS 和 FEC 129 VPLS）服务的 BGP PIC 边缘保护，其中 BGP 标记为单播作为传输协议。</div></div><div class="table-row"><div class="table-cell">19.2R1</div><div class="table-cell">从 Junos OS 19.2R1 版开始，您可以在QFX10000交换机上指定最多 512 条等价路径。</div></div><div class="table-row"><div class="table-cell">19.1R1</div><div class="table-cell">从 Junos OS 19.1R1 版开始，您可以在 QFX10000 交换机上指定最多 128 条等价路径。 </div></div><div class="table-row"><div class="table-cell">18.4R1</div><div class="table-cell">从 Junos OS 18.4R1 版开始，除了多个 ECMP 路径外，BGP 最多可以通告 2 个添加路径路由 。 </div></div><div class="table-row"><div class="table-cell">18.1R1</div><div class="table-cell">从 Junos OS 18.1R1 版开始，BGP 多路径在层次结构级别全局受支持 <code class="ph codeph">[edit protocols bgp]</code> 。您可以有选择地在某些 BGP 组和邻居上禁用多路径。在<code class="ph codeph">[edit protocols bgp group <var class="keyword varname">group-name</var> multipath]</code>层次结构级别包含<code class="ph codeph">disable</code>以禁用组或特定 BGP 邻接方的多路径选项。</div></div><div class="table-row"><div class="table-cell">18.1R1</div><div class="table-cell">从 Junos OS 18.1R1 版开始，您可以推迟多路径计算，直到收到所有 BGP 路由。启用多路径后，BGP 会在每次添加新路由或现有路由更改时将路由插入多路径队列。当通过 BGP 添加路径功能接收到多个路径时，BGP 可能会多次计算一个多路径路由。多路径计算会减慢 RIB（也称为路由表）学习速率。为了加快 RIB 学习速度，可以将多路径计算推迟到收到 BGP 路由，也可以根据需要降低多路径构建作业的优先级，直到解析 BGP 路由。若要推迟多路径计算，请在层次结构级别进行<code class="ph codeph">[edit protocols bgp]</code>配置<code class="ph codeph">defer-initial-multipath-build</code>。或者，您可以使用层次结构级别的配置语句<code class="ph codeph">[edit protocols bgp]</code>降低 <code class="ph codeph">multipath-build-priority</code> BGP 多路径构建作业优先级，以加快 RIB 学习。</div></div></div></div><section class="pn-fixed ignoreindex"><section class="pn-wrap"><div class="pn-wrap-btn"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/routing-policies-communities.html" title="" class="pn-prev"><span class="pn-text"><i class="swmaterialicon">arrow_backward</i> <span>PREVIOUS</span></span> <span class="pn-title">BGP 社区的路由策略</span></a></div> <div class="pn-wrap-btn"><a href="https://www.juniper.net/documentation/cn/zh/software/junos/bgp/topics/topic-map/bgp-egress-traffic-engineering.html" title="" class="pn-next"><span class="pn-text"><span>NEXT</span> <i class="swmaterialicon">arrow_forward</i></span> <span class="pn-title">BGP 出口流量工程</span></a></div></section></section></div><!----></div></div><div class="popover" style="display: none;"><div class="po-wrapper"><div class="po-head"><h3></h3> <span class="swmaterialicon po-close">
        close
      </span></div> <div class="po-body"><!----> </div></div></div><div><div id="foot_holder"><div class="be-ix-link-block"></div>


    <!--****************************************************************************
  * ADOBE CONFIDENTIAL
  * __________________
  *
  * Copyright 2016 Adobe Systems Incorporated
  * All Rights Reserved.
  *
  * NOTICE:  All information contained herein is, and remains
  * the property of Adobe Systems Incorporated and its suppliers,
  * if any.  The intellectual and technical concepts contained
  * herein are proprietary to Adobe Systems Incorporated and its
  * suppliers and are protected by trade secret or copyright law.
  * Dissemination of this information or reproduction of this material
  * is strictly forbidden unless prior written permission is obtained
  * from Adobe Systems Incorporated.
  ***************************************************************************-->

<meta name="viewport" content="width=device-width, initial-scale=1">      
<title>footer-navigation</title>


<script defer="defer" type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/rum-standalone.js.下载"></script>
<script>
    window.jnprData = window.jnprData || {};
</script>




    
    <!-- <script src="https://www.juniper.net/etc.clientlibs/clientlibs/granite/jquery.min.js"></script> -->
    <link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-font.css" type="text/css"> 
    <link rel="stylesheet" href="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-global-navigation.css" type="text/css"> 







<!--<sly data-sly-call=""/>-->




<div class="breakpoint-check d-none">
    <span class="xs d-block d-sm-inline"></span>
    <span class="sm d-sm-block d-md-inline"></span>
    <span class="md d-md-block d-lg-inline"></span>
    <span class="lg d-lg-block d-xl-inline"></span>
    <span class="xl d-xl-block"></span>
</div>

    


<div class="analytics__container">

    
    
    
    <div id="container-f1add88795" class="cmp-container">
        
        <div class="footer-navigation"><!-- SDI include (path: /content/experience-fragments/juniper-fragments/language-masters/en_us/navigation/us-new-navigation-design/footer-navigation/master/_jcr_content/root/footer_navigation.hide-footer-language-selector.cacheit.html, resourceType: juniper/components/global-navigation/footer-navigation) -->
<footer class="footer">
  <div class="nav-container">
    <div class="sub-container logo-social">
      

<div class="nav-logo">
    
    <a href="https://www.juniper.net/us/en.html" target="_self" rel="noopener" data-navid="Juniper Networks">
        <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="lazyload responsive-image" data-src="https://juniper-prod.scene7.com/is/image/junipernetworks/juniper_white-rgb-footer-1?fmt=png8-alpha&amp;network=on" alt="Juniper Networks" title="Juniper Networks Logo png" data-breakpoints="305,501,712,1000,1400">
    </a>
  </div>

      <div class="nav-social-desktop__wrapper">
        
<div class="nav-social">
  
    <a href="https://www.facebook.com/JuniperNetworks/" target="_self" rel="noopener" footer-navid="icon-facebook-footer" aria-label="Facebook">
      <div class="social-icon">
        <span class="juniper-icon icon-facebook-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://twitter.com/JuniperNetworks/" target="_self" rel="noopener" footer-navid="icon-twitter-footer" aria-label="X">
      <div class="social-icon">
        <span class="juniper-icon icon-twitter-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://www.instagram.com/junipernetworks/" target="_self" rel="noopener" footer-navid="icon-instagram-footer" aria-label="Instagram">
      <div class="social-icon">
        <span class="juniper-icon icon-instagram-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://www.linkedin.com/company/juniper-networks" target="_self" rel="noopener" footer-navid="icon-linkedin-footer" aria-label="Linkedin">
      <div class="social-icon">
        <span class="juniper-icon icon-linkedin-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://www.youtube.com/user/JuniperNetworks" target="_self" rel="noopener" footer-navid="icon-youtube-footer" aria-label="Youtube">
      <div class="social-icon">
        <span class="juniper-icon icon-youtube-footer c-silver"></span>
      </div>
    </a>
  
</div>

      </div>
    </div>
    <div class="sub-container links">
      
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" footer-navid="Company">

      
        Company
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up jn-icon-white"></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down jn-icon-white"></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/company.html" rel="noopener" footer-navid="Company &gt; About us">About us</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/company/culture-careers.html" rel="noopener" footer-navid="Company &gt; Careers">Careers</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/company/corporate-responsibility.html" rel="noopener" footer-navid="Company &gt; Corporate responsibility">Corporate responsibility</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_blank" href="https://newsroom.juniper.net/overview/default.aspx" rel="noopener" footer-navid="Company &gt; Newsroom">Newsroom</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_blank" href="https://investor.juniper.net/investor-relations/default.aspx" rel="noopener" footer-navid="Company &gt; Investor relations">Investor relations</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/company/contact-us.html" rel="noopener" footer-navid="Company &gt; Contact us">Contact us</a>

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>

      
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    <li class="links-header accordion-header" footer-navid="Popular resources">

      
        Popular resources
      
      <div class="accordion-arrow">
        <span class="juniper-svgicon jn-chevron jn-chevron-up jn-icon-white"></span>
        <span class="juniper-svgicon jn-chevron jn-chevron-down jn-icon-white"></span>
      </div>
    </li>
    <li>
      <ul class="accordion-content ">
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/events.html" rel="noopener" footer-navid="Popular resources &gt; Events">Events</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_blank" href="https://blogs.juniper.net/" rel="noopener" footer-navid="Popular resources &gt; Blogs">Blogs</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_blank" href="https://community.juniper.net/home" rel="noopener" footer-navid="Popular resources &gt; Community">Community</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/company/images.html" rel="noopener" footer-navid="Popular resources &gt; Image library">Image library</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/forms/subscription-management.html" rel="noopener" footer-navid="Popular resources &gt; Manage email preferences">Manage email preferences</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/site-map.html" rel="noopener" footer-navid="Popular resources &gt; Sitemap">Sitemap</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_blank" href="https://partners.juniper.net/partnercenter/index.page" rel="noopener" footer-navid="Popular resources &gt; Partner login">Partner login</a>

          </li>
        
        
      </ul>
    </li>
  </ul>
</div>


      <div class="nav-links-signup">
        <div>
    

    
    


    
    
    
    <div id="container-fd1509373f" class="cmp-container">
        
        <div class="analytics__formcontainer">
        
    
<div class="footer-form c-theme-black" form-text-color="fontColor_white" data-mod="footer-newsletter-signup">
    
    




    
    
    <div class="analytics__formfieldcontainer">


    
            
    <div class="footer-form-container">

        <div class="footer_form_wrapper">

            <form class="jnpr-footer-form" data-action="/server-side/form" target="_top" id="gartner-form" method="post" name="gartner-form" novalidate="">
                




    
    
    <div class="analytics__label">


<div class="label">

<div class="label rte-content" form-text-color="fontColor_white">
    <p>Stay in touch</p>

</div>

</div></div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" value="GLBL_XBU_ONGO_SUB_EmailOnlyWebSubscription" name="elqFormName" type="hidden" id="elqFormName"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" value="1229" name="elqSiteID" type="hidden" id="elqSiteID"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" value="701Dp000000Q0zUIAS" name="cid" type="hidden" id="cid"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" value="https://s1229.t.eloqua.com/e/f2" name="targetURL" type="hidden" id="targetURL"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" value="https://www.juniper.net/us/en.html" name="srcURL" type="hidden" id="srcURL"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="C_Return_URL1" type="hidden" id="C_Return_URL1"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_ConfidenceLevel" type="hidden" id="RF_ConfidenceLevel"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_ConfidenceDescription" type="hidden" id="RF_ConfidenceDescription"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_Company" type="hidden" id="RF_SITE_Company"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_Addr1" type="hidden" id="RF_SITE_Addr1"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_Addr2" type="hidden" id="RF_SITE_Addr2"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_Country" type="hidden" id="RF_SITE_Country"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_Phone" type="hidden" id="RF_SITE_Phone"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_City" type="hidden" id="RF_SITE_City"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_Zip" type="hidden" id="RF_SITE_Zip"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_StateCode" type="hidden" id="RF_SITE_StateCode"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_EmplyeesTotal" type="hidden" id="RF_SITE_EmplyeesTotal"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_AnnualRev" type="hidden" id="RF_SITE_AnnualRev"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="RF_SITE_NAICSName" type="hidden" id="RF_SITE_NAICSName"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_campaign" type="hidden" id="utm_campaign"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_medium" type="hidden" id="utm_medium"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_term" type="hidden" id="utm_term"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_content" type="hidden" id="utm_content"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" value="Juniper" name="utm_source" type="hidden" id="utm_source"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_contentid" type="hidden" id="utm_contentid"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_adgroup" type="hidden" id="utm_adgroup"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_keyword" type="hidden" id="utm_keyword"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="DataCardCreationDate" type="hidden" id="DataCardCreationDate" value="12/06/2025"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="gclid" type="hidden" id="gclid"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="msclkid" type="hidden" id="msclkid"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_VARID" type="hidden" id="utm_VARID"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_ReferringPartnerRep" type="hidden" id="utm_ReferringPartnerRep"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="utm_PartnerAccountManager" type="hidden" id="utm_PartnerAccountManager"> </div>
    
</div>


    
    
    <div class="analytics__formhidden">



<div class="hidden ">
<input class="" name="event_page_type" type="hidden" id="event_page_type"> </div>
    
</div>


    
    
    

    
    
    <div class="analytics__email">


<div class="email">

<div class="label">
    *
</div>
<input name="C_EmailAddress_Signup" type="text" id="C_EmailAddress_Signup" placeholder="Business email address" data-error-label="*Email is Required" data-urlprefix="https://www.juniper.net/" required="">

<div class="errorMessage">Invalid email format</div>
<div class="emailDomainErrorMessage"></div>
<div class="successMessage">Email Submitted Sucessfully</div>
</div></div>


    
    
    <div class="analytics__button">

<div class="button">

<div class="submitErrorMessage">There are required fields that need filling before you can submit.</div>

<button class="jnpr-signup-submit-button juniper-btn juniper-btn--green-button" target="_blank" type="submit" disabled="">Subscribe</button>
</div></div>


    
    
    <div class="analytics__privacytext">

<div class="privacytext">

    <div id="opt-in-out-footer" class="opt-in-out-footer rte-content">
        <p></p>
        
        <div class="checkbox">
            <input name="opt_in_out_footer" class="checkbox-input" id="opt_in_footer" type="checkbox"> <label for="opt_in_footer" class="checkLabel rte-content">✓</label><p>Send me email updates about Juniper Networks, Inc.’s news, events, and product details. You may withdraw your consent at any time via the opt-out link in our emails.&nbsp; For more information, see our&nbsp;<a href="https://www.juniper.net/us/en/privacy-policy.html">Privacy Notice</a>.</p>

        </div>
        
    </div>
</div></div>


    
    
    <div class="analytics__privacytext">

<div class="privacytext">

    <div id="privacytext-footer" class="privacytext-footer rte-content">
        <p></p><p>Read about Juniper's&nbsp;<a href="https://www.juniper.net/us/en/privacy-policy.html">privacy policy.</a></p>
<p></p>
        
    </div>
</div></div>


    
    
    <div class="analytics__captcha">




<div class="captcha-footer" id="captcha-footer" data-script-src="https://www.google.com/recaptcha/api.js"></div>

<input type="hidden" id="g-recaptcha-custom-footer" name="g-recaptcha-custom" value="">
<div id="invalid-cap-footer" class="paragraph paragraph-small">
    Invalid Captcha</div>

    <script type="text/javascript" id="captcha_script">
        if(typeof grecaptcha == 'undefined' || grecaptcha.ready !== 'function'){
            console.log("grecaptcha == 'undefined' || grecaptcha.ready !== 'function'");
                let scriptSrc = document.getElementById('captcha-footer').getAttribute('data-script-src');
                const rUrl = new URL(scriptSrc);
                const htmlLang = document.documentElement.lang;
        	    if (!rUrl.search) {        	        
        	        scriptSrc += "?onload=onRecaptchaLoad&explicit&hl=" + htmlLang;        	        
        	    } else {
        	    	scriptSrc = rUrl.origin + rUrl.pathname + "?onload=onRecaptchaLoad&explicit&hl=" + htmlLang; 
        	    }
                let a = document.createElement('script');
                a.setAttribute('src',scriptSrc);
                a.setAttribute('async','true');
                a.setAttribute('defer','true');
                document.body.appendChild(a);

        }
        function onRecaptchaLoad() {
            window.widgetIds = window.widgetIds || []; 
            console.log("recapcha script loaded");
              window.gRecaptchaInstance = grecaptcha;
              //let grecaptchaTemp = window.gRecaptchaInstance?window.gRecaptchaInstance:grecaptcha;
                widgetIds[0] = window.gRecaptchaInstance.render('captcha-footer', {
                    'sitekey': '6LdSLUcUAAAAAJjjfjpbivqpgKFHOFhVnbx_dMTE',
                    'callback': verifyCallback,
                });
        }

    //recaptcha
            //var widgetIds = [];

            var verifyCallback = function(response) {
                document.getElementById('g-recaptcha-custom-footer').value = response;
                $("#invalid-cap-footer").hide();

            };

           /* setTimeout(function() {
                let grecaptchaTemp = window.gRecaptchaInstance?window.gRecaptchaInstance:grecaptcha;
                widgetIds[0] = grecaptchaTemp.render('captcha-footer', {
                    'sitekey': '6LdSLUcUAAAAAJjjfjpbivqpgKFHOFhVnbx_dMTE',
                    'callback': verifyCallback,
                });
            }, 500);*/

    //recaptcha


    </script>


</div>


    
    
    <div class="htmlcode">
    
<div class="html-code">
    <style>

.left-top >  .analytics__label > .label > .rte-content > h2 > b{
       color: #437c0d !important;
}

.left-top >  .analytics__formtextfamily > .text-family-wrapper > .header > h1 {
       color: #437c0d !important;
}

.cmp-formcontainer .left-top h1, .cmp-formcontainer .left-top h2, .cmp-formcontainer .left-top h3, .cmp-formcontainer .left-top h4, .cmp-formcontainer .left-top h5, .cmp-formcontainer .left-top h6 {
   color: #437c0d !important;
}

.cmp-formcontainer .form-title h1, .cmp-formcontainer .form-title h2, .cmp-formcontainer .form-title h3, .cmp-formcontainer .form-title h4, .cmp-formcontainer .form-title h5, .cmp-formcontainer .form-title h6 {
   color: #437c0d !important;
}

.rte-content a {
    color: #437c0d!important;
}
.cmp-formfieldcontainer form .label, .cmp-formfieldcontainer form .select-items div, .cmp-formfieldcontainer form .select-selected, .cmp-formfieldcontainer form .button input[type=text], .cmp-formfieldcontainer form .email input[type=text], .cmp-formfieldcontainer form .hidden input[type=text], .cmp-formfieldcontainer form .label input[type=text], .cmp-formfieldcontainer form .select input[type=text], .cmp-formfieldcontainer form .text input[type=text], .cmp-formfieldcontainer form .textarea input[type=text]{
   color:#000;
}

.cmp-formfieldcontainer form .button input:focus, .cmp-formfieldcontainer form .button select:focus, .cmp-formfieldcontainer form .email input:focus, .cmp-formfieldcontainer form .email select:focus, .cmp-formfieldcontainer form .hidden input:focus, .cmp-formfieldcontainer form .hidden select:focus, .cmp-formfieldcontainer form .label input:focus, .cmp-formfieldcontainer form .label select:focus, .cmp-formfieldcontainer form .select input:focus, .cmp-formfieldcontainer form .select select:focus, .cmp-formfieldcontainer form .text input:focus, .cmp-formfieldcontainer form .text select:focus, .cmp-formfieldcontainer form .textarea input:focus, .cmp-formfieldcontainer form .textarea select:focus{
   color:#000000;
}

.cmp-formfieldcontainer form .same-as-selected, .cmp-formfieldcontainer form .select-items div:hover{
   background-color:#437c0d;
}

.cmp-formfieldcontainer form .select-items{
   /* background-color:#000000; */
}

.right   .rte-content   b{
       color: #437c0d !important;
}
</style>

<script>

// UTM param persistence
const utmParams = [
  'utm_campaign',
  'utm_content',
  'utm_medium',
  'utm_source',
  'utm_term',
  'utm_keyword',
  'utm_VARID',
  'utm_ReferringPartnerRep',
  'utm_PartnerAccountManager'
];

utmParams.forEach(param => {
  const input = document.querySelector(`input[name=${param}]`);
  const storedValue = sessionStorage.getItem(param);
  if (!input?.value && storedValue) {
    input.value = storedValue;
  }
});
</script></div></div>



            </form>
            <div id="error-form-submit">Something Went Wrong. Please try again.</div>
            
        </div>
        
    </div>
</div>



</div>



</div>

        
    </div>


</div>
      </div>
      <div class="nav-social-mobile__wrapper">
        
<div class="nav-social">
  
    <a href="https://www.facebook.com/JuniperNetworks/" target="_self" rel="noopener" footer-navid="icon-facebook-footer" aria-label="Facebook">
      <div class="social-icon">
        <span class="juniper-icon icon-facebook-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://twitter.com/JuniperNetworks/" target="_self" rel="noopener" footer-navid="icon-twitter-footer" aria-label="X">
      <div class="social-icon">
        <span class="juniper-icon icon-twitter-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://www.instagram.com/junipernetworks/" target="_self" rel="noopener" footer-navid="icon-instagram-footer" aria-label="Instagram">
      <div class="social-icon">
        <span class="juniper-icon icon-instagram-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://www.linkedin.com/company/juniper-networks" target="_self" rel="noopener" footer-navid="icon-linkedin-footer" aria-label="Linkedin">
      <div class="social-icon">
        <span class="juniper-icon icon-linkedin-footer c-silver"></span>
      </div>
    </a>
  
    <a href="https://www.youtube.com/user/JuniperNetworks" target="_self" rel="noopener" footer-navid="icon-youtube-footer" aria-label="Youtube">
      <div class="social-icon">
        <span class="juniper-icon icon-youtube-footer c-silver"></span>
      </div>
    </a>
  
</div>

      </div>
    </div>
    <div class="footer__col footer__utility">
      
<div class="nav-links-column" data-mod="nav-links">
  <ul class="accordion">

    
    

    
    <li>
      <ul class="accordion-content nolabel">
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/privacy-policy.html" rel="noopener" footer-navid=" &gt; Privacy">Privacy</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/legal-notices.html" rel="noopener" footer-navid=" &gt; Legal">Legal</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/legal-notices/dmca-policy.html" rel="noopener" footer-navid=" &gt; DMCA policy">DMCA policy</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_blank" href="https://privacyportal.onetrust.com/webform/5cbb04b9-7de5-4f1c-8087-2c178a5ef9f7/bd3af8c7-8e43-4efb-b041-8920cad4d824" rel="noopener" footer-navid=" &gt; Do not sell or share my personal information">Do not sell or share my personal information</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/feedback.html" rel="noopener" footer-navid=" &gt; Feedback">Feedback</a>

          </li>
        

          

          <li class="accordion-link-item  ">

            
            

            
            

            
            <a class="nav-link-item nav-link-animation" target="_self" href="https://www.juniper.net/us/en/report-a-security-vulnerability.html" rel="noopener" footer-navid=" &gt; Report a vulnerability">Report a vulnerability</a>

          </li>
        
        
          <li class="accordion-link-item">
              <!--/* Start Cookie Consent */ -->
               <div class="nav-link-item nav-link-animation truste_caIcon_display" id="teconsent" consent="0,1,2" aria-label="Open Cookie Preferences Modal" role="complementary"><a role="link" id="icon-id04942425545128655" tabindex="0" lang="zh" aria-haspopup="dialog" aria-label="Cookie Preferences, opens a dedicated popup modal window" class="truste_cursor_pointer">Cookie 喜好设置</a></div>
              <!--/* End Cookie Consent */ -->
          </li>
        
      </ul>
    </li>
  </ul>
</div>

    </div>
         
    <div class="footer__col footer__content-info">
      <div class="footer__copyright"><div id="core-text-88845a4cab" class="cmp-text rte-content">
    <p>© 1999 - 2025 Juniper Networks, Inc. All rights reserved.</p>

</div>

    

</div>
      <div class="nav-scroll">
        <div data-mod="scroll-top">
<div id="scroll-btn" class="scroll-button" tabindex="0" footer-navid="Scroll to top">
  <p>
    Scroll to top
    <span class="arrow-icon"><span class="juniper-icon icon-arrow-left-up"></span>
  </span></p>
</div></div>
        
          
      </div>
    </div>
</div></footer></div>

        
    </div>

</div>









<script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/responsive_image.js.下载"></script>


    
    <script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/clientlib-global-navigation.js.下载"></script>






<div id="consent_blackbar"></div></div> <div style="display: none;"><!----></div> <div class="gototop"><span class="desktop-only hover-underline">Back to Top</span> <svg width="12" height="16" class="icon uparrow"><use href="/documentation/webstatic/icons.svg#new-tab-arrow" xlink:href="/documentation/webstatic/icons.svg#new-tab-arrow"></use></svg></div> <div><pf-ai-bot initiator="Technical Documentation"><pf-aibot-wrap><div class="ai-modal-img-wrap"><img src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/pf-ai-bot.svg" class="ui-draggable ui-draggable-handle" style="position: relative;"></div><div class="ai-modal-wrap"></div></pf-aibot-wrap></pf-ai-bot></div></div><div><div class="alert-wrap" style="display: none;"><div class="alert-container"><p class="alert-text" style="width: 100%;">
      
    </p> <div class="alert-btn"><button class="btn">
        Ok
      </button></div></div></div> <div data-v-62619c2c="" class="loading" style="display: none;"><!----></div> <!----> <div id="modal-box" class="modal-box" style="display: none;"><div class="modal"><div class="modal-wrapper md"><div class="modal-content"><div class="modal-head bg-white"><!----> <span class="swmaterialicon modal-close">
            close
          </span></div> <div class="modal-body"><div></div></div></div></div></div> <div class="modal-backdrop"></div></div></div><div id="" class="modal-box" data-v-d4e6e290="" style="display: none;"><div class="modal"><div class="modal-wrapper md"><div class="modal-content"><div class="modal-head bg-white"><!----> <span class="swmaterialicon modal-close">
            close
          </span></div> <div class="modal-body"><p></p> <div class="confirm-box-foot"><label><input type="checkbox">
          Don't show this disclaimer again
        </label> <div class="align-rt-lt"><input type="button" value="Don&#39;t Translate" class="button button-grey"> <input type="button" value="Translate" class="button"></div></div></div></div></div></div> <div class="modal-backdrop"></div></div><div class="alert-wrap" data-v-d4e6e290="" style="display: none;"><div class="alert-container"><p class="alert-text" style="width: 100%;">
      
    </p> <div class="alert-btn"><button class="btn">
        Ok
      </button></div></div></div></div></div><script>_satellite["_runScript1"](function(event, target, Promise) {
window.demandbaseHasCompleted = false;
});</script><script>_satellite["_runScript2"](function(event, target, Promise) {

var _STATE = {};
function runOnce() {
    if (!_STATE.hasRunOnce && window.truste && truste.eu && truste.eu.prefclose) {
        console.log("doing run once again");
        _STATE.oldValue = truste.eu.bindMap.prefCookie && truste.eu.bindMap.prefCookie.split(':')[0].replace(/[^\d.]/g, '-');
        _STATE.oldMethod = truste.eu.prefclose;
        truste.eu.prefclose = function() {
                _STATE.oldMethod();
                if (truste.eu.bindMap.prefCookie && truste.eu.bindMap.prefCookie.split(':')[0].replace(/[^\d.]/g, '-') !== _STATE.oldValue)
                    setTimeout(function() { window.location.reload(); }, 20);
        };
        _STATE.hasRunOnce = true;
        _STATE.i && clearInterval(_STATE.i);
    }
}
_STATE.i = setInterval(runOnce, 10);
});</script><script type="text/javascript">
function setCookie(name, value, days){
    var date = new Date();
    date.setTime(date.getTime() + (days*24*60*60*1000)); 
    var expires = "; expires=" + date.toGMTString() + "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + expires;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var gclid = getParam('gclid');
if(gclid){
    setCookie('gclid', gclid, 90);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_source = getParam('utm_source');
if(utm_source){
   setCookie('utm_source', utm_source);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_campaign = getParam('utm_campaign');
if(utm_campaign){
   setCookie('utm_campaign', utm_campaign);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_content = getParam('utm_content');
if(utm_content){
   setCookie('utm_content', utm_content);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_term = getParam('utm_term');
if(utm_term){
   setCookie('utm_term', utm_term);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_medium = getParam('utm_medium');
if(utm_medium){
   setCookie('utm_medium', utm_medium);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_term = getParam('utm_term');
if(utm_term){
   setCookie('utm_term', utm_term);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var cid = getParam('cid');
if(cid){
   setCookie('cid', cid);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var utm_contentid = getParam('utm_contentid');
if(utm_contentid){
   setCookie('utm_contentid', utm_contentid);
}
</script><script type="text/javascript">
function setCookie(name, value, days){
    var path = "; domain = .juniper.net; path=/";
    document.cookie = name + "=" + value + path;
}
function getParam(p){
    var match = RegExp('[?&]' + p + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var metadata_cid = getParam('metadata_cid');
if(metadata_cid){
   setCookie('metadata_cid', metadata_cid);
}
</script><script>_satellite["_runScript3"](function(event, target, Promise) {
function getCookie(a) {
          return (match = document.cookie.match(new RegExp("(^| )" + a + "\x3d([^;]+)"))) ? match[2] : ""
      }
window.addEventListener("message",function(msg){
      var origin = msg.origin;
      var data = msg.data;
      //console.log(origin);
      //console.log(data);
      if ((origin === 'https://ai.mist.com')&&(data === "I'm listening for your message, https://go.juniper.net")){
        //console.log('I heard your message, https://ai.mist.com');
        try{
          var payload = {};
          if (getCookie('utm_campaign')){ var utm_campaign = getCookie('utm_campaign'); payload.utm_campaign = utm_campaign;}
          if (getCookie('utm_medium')){ var utm_medium = getCookie('utm_medium'); payload.utm_medium = utm_medium;}
          if (getCookie('utm_source')){ var utm_source = getCookie('utm_source'); payload.utm_source = utm_source;}
          if (getCookie('utm_content')){ var utm_content = getCookie('utm_content'); payload.utm_content = utm_content;}
          if (getCookie('jnpr_vID')){ var jnpr_vID = getCookie('jnpr_vID'); payload.jnpr_vID = jnpr_vID;}
          if (getCookie('utm_term')){ var utm_term = getCookie('utm_term'); payload.utm_term = utm_term;}
          if (getCookie('gclid')){ var gclid = getCookie('gclid'); payload.gclid = gclid;}
          if (getCookie('cid')){ var cid = getCookie('cid'); payload.cid = cid;}
          if (getCookie('metadata_cid')){ var metadata_cid = getCookie('metadata_cid');payload.metadata_cid = metadata_cid;}
          if (document.querySelector("#lb-app-container > iframe")){
              document.querySelector("#lb-app-container > iframe").contentWindow.postMessage(payload,'*');
          }
        } catch(e) {
          console.log(e);
        }
     }
}), {once: true};
//console.log("I'm listening for your message, https://ai.mist.com");
  
});</script><script>_satellite["_runScript4"](function(event, target, Promise) {
window.jnprData=window.jnprData||{};
window.jnprData.form=window.jnprData.form||{}
});</script><script>_satellite["_runScript5"](function(event, target, Promise) {


document.body.addEventListener("click", function(event) {
    if(event && event.target && event.target.id === 'truste-consent-button') {
       setTimeout(() => {  window.location.reload(); }, 1000);
    }
});

});</script><script>_satellite["_runScript6"](function(event, target, Promise) {
window.getAdobeVisitorIdGlobal = function (){
    // function to grab the current Adobe ID from AMCV cookie on the page
    // if an error occurs, the value will default to unknown
    try{
        var AMCV_cookie_val= '';
        var theCookies = document.cookie.split(';');
        var mcid = 'unknown';
        theCookies.forEach(el => {
            var cname = (el.split('=')[0]).trim()
            if (cname.includes('AMCV_')){
                console.log('Found AMCV Cookie')
                var cval = decodeURI(el.split('=')[1])
                mcid = cval.split('|')[4]
            }
 
        })
        return mcid
    }
    catch(error){
        return 'unknown'
    }
 
}
});</script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/notice" id="truste_0.5900013575645787"></script><iframe name="trustarc_notice" id="trustarcNoticeFrame" title="Trustarc Cross-Domain Consent Frame" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/get.html" style="display: none;"></iframe><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/v1.7-1576" async="async" crossorigin="" importance="high"></script>
<script>_satellite["_runScript7"](function(event, target, Promise) {
_satellite.jnprFloodlight=function(infoObj){
	//;u25=[details]
	var uList=''
	for(i=3;i<=25;i++){
		var uVar='u'+i;
		if(typeof infoObj[uVar] == 'string' && infoObj[uVar]){
			uList=uList+';'+uVar+'='+encodeURIComponent(infoObj[uVar]);
		}
	}
  
	var piiCheck = function(valToCheck){ //returns a blank value if valToCheck isn't legit
		var legitVal='';
		legitVal=valToCheck.indexOf('%40')>=0||valToCheck.indexOf('@')>=0?'':valToCheck;
		return legitVal;
	}

	var axel = Math.random() + "";
	var a = axel * 10000000000000;
	var baseURL=document.location.protocol+'//'+document.location.hostname+document.location.pathname;
	baseURL=piiCheck(baseURL);
	if(baseURL){
		var restOfURL=document.location.href.substr(baseURL.length+1, 20000)
		restOfURL=piiCheck(restOfURL);
	
		var ifrm = document.createElement("iframe");
		ifrm.setAttribute("src", 'https://'+infoObj['src']+'.fls.doubleclick.net/activityi;src='+infoObj['src']+';type='+infoObj['type']+';cat='+infoObj['cat']+';u1=' + encodeURIComponent(_satellite.getVar('jnpr_vID')) + ';u2=' + encodeURIComponent(baseURL)+';u5=' + encodeURIComponent(restOfURL) + uList + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + a + '?');
		ifrm.style.width = "1";
		ifrm.style.height = "1";
		ifrm.style.frameborder = "0";
		ifrm.style.display = "none";
		
		//document.body.appendChild(ifrm);
		
	}
	
	/*
	For secondary DWA Tags
	*/
var lookupVal=infoObj['src']+infoObj['type']+infoObj['cat'];
	var flLookup={
    '5922977convdownl0':{src:'3872718',type:'gojpnet',cat:'downl00',},
    '5922977convforms0':{src:'3872718',type:'gojpnet',cat:'forms0',},
    '5922977pageviewpagev0':{src:'3872718',type:'gojpnet',cat:'pagev0',},
    '5922977engagevideo0':{src:'3872718',type:'gojpnet',cat:'video0',},
    '5922977engagedownl0':{src:'3872718',type:'gojpnet',cat:'downl0',},
    '5922977engagehowto0':{src:'3872718',type:'gojpnet',cat:'howto0',},
    '5922977convhubfo0':{src:'3872718',type:'gojpnet',cat:'hubfo0',},
    '5922977convhubdo0':{src:'3872718',type:'gojpnet',cat:'hubdo0',}
	}
	
	if(typeof flLookup[lookupVal] == 'object'){
		var axel = Math.random() + "";
		var a = axel * 10000000000000;
		if(baseURL){
			var restOfURL=document.location.href.substr(baseURL.length+1, 20000)
			restOfURL=piiCheck(restOfURL);
		
			var ifrm = document.createElement("iframe");
			ifrm.setAttribute("src", 'https://'+flLookup[lookupVal]['src']+'.fls.doubleclick.net/activityi;src='+flLookup[lookupVal]['src']+';type='+flLookup[lookupVal]['type']+';cat='+flLookup[lookupVal]['cat']+';u1=' + encodeURIComponent(_satellite.getVar('jnpr_vID')) + ';u2=' + encodeURIComponent(baseURL)+';u5=' + encodeURIComponent(restOfURL) + uList + ';dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=' + a + '?');
			ifrm.style.width = "1";
			ifrm.style.height = "1";
			ifrm.style.frameborder = "0";
			ifrm.style.display = "none";
			
			document.body.appendChild(ifrm);
		}
	}
	
}
});</script><script type="text/javascript">
if(_satellite.getVar('isEloquaTaggedPage')=='false'){ 
  // _elqQ object DOES NOT exists
  var _elqQ = _elqQ || [];
  _elqQ.push(['elqSetSiteId', '1229']);
  _elqQ.push(['elqTrackPageView', window.location.href]);

  (function () {
    function async_load() {
      var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
      s.src = '//img.en25.com/i/elqCfg.min.js';
      var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
    }
    if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
    else if (window.attachEvent) window.attachEvent('onload', async_load);
  })();
}
</script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/notice(1)" id="truste_0.16213679129975167"></script><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/v1.7-1576" async="async" crossorigin="" importance="high"></script>
<script>_satellite["_runScript8"](function(event, target, Promise) {


	//from the end of the domain find characters between dots that is >3 and then take that and anything to the right as the root domain
	var rootDomain='';
	var domainParts=document.location.host.split('.');
	for(i=0;i<domainParts.length;i++){
		var slot=domainParts.length-i-1
		if(domainParts[slot].length>3){
			for(ii=slot;ii<domainParts.length;ii++){
				rootDomain=rootDomain+(rootDomain?'.':'')+domainParts[ii]
			}
			break;
		}		
	}
	_satellite.settings.rootDomain=rootDomain&&rootDomain.indexOf('.')>=0?rootDomain:document.location.host;
	
	_satellite.setCookieWithDomain = _satellite.cookie.set||function(t,n,i,d){var a;if(i){
		var r=new Date();
		r.setTime(r.getTime()+24*i*60*60*1e3),a="; expires="+r.toUTCString()}else a="";
		document.cookie=t+"="+n+a+";domain="+d+";path=/"}


//check with juniper.net
	if((typeof XMLHttpRequest != 'undefined' || typeof XDomainRequest != 'undefined') && !_satellite.cookie.get('jnpr_vID_check') && document.location.hostname.indexOf('.juniper.net')<=0)
    {
		function gatewayListener () 
      {
			
			var response = JSON.parse(this.responseText);
			var jvidHere = _satellite.cookie.get('jnpr_vID')
			var jvidThere = response.jnpr_vID;
			var jvidFinal = '';
			
			//if has J vID use J vID
			if(response.status=='existing'){
				jvidFinal=jvidThere;
			}
			
			//if no 3rd-party vID and new J vID use J vID
			else if(!jvidHere && jvidThere){
				jvidFinal=jvidThere;
			}
			
			//if has 3rd-party vID and new J vID use 3rd-party vID
			else if(jvidHere && response.status=='new'){
				jvidFinal=jvidHere;
			}
			
			//update cookie here
			_satellite.cookie.set("jnpr_vID", jvidFinal, 730, _satellite.settings.rootDomain);
			_satellite.cookie.set("jnpr_vID_check", "true", 1/24/6, document.location.hostname);
			
			
			window.jnpr_vID_sync = function(){		

				var srcURL = "https://dme.juniper.net/jnpriframe/default.html";
				srcURL +="?jnpr_vID=" + encodeURIComponent(_satellite.cookie.get('jnpr_vID'))
				var ifrm = document.createElement("iframe");
				ifrm.setAttribute("src", srcURL);
				ifrm.setAttribute("id", 'jnpr_vID_sync');
				ifrm.style.width = "1";
				ifrm.style.height = "1";
				ifrm.style.frameborder = "0";
				ifrm.style.display = "none";
				document.body.appendChild(ifrm);
			}
			
			//Sync cookie back to J
			if(typeof document.body != 'undefined' && document.body != null){
				jnpr_vID_sync();
			}else{
				document.addEventListener("DOMContentLoaded", jnpr_vID_sync);
			}

	
		}
		
		//see https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy
		var gatewayReq = new XMLHttpRequest();
		gatewayReq.addEventListener("load", gatewayListener);
		if ("withCredentials" in gatewayReq){
			gatewayReq.open("GET", "https://dme.juniper.net/gateway/");
			gatewayReq.withCredentials = true;
		} else if (typeof XDomainRequest != "undefined"){
			gatewayReq = new XDomainRequest();
			gatewayReq.open("GET", "https://dme.juniper.net/gateway/");
		} else {
			gatewayReq = null;
		}
		
		if(gatewayReq != null){
			gatewayReq.send();
		}
		
	}else if(document.location.hostname.indexOf('.juniper.net')>=0){
		_satellite.getVar('jnpr_vID');
	}
});</script><script type="text/javascript" class="be:body_script">   
</script><script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/manifest.a040d9173579fa4ebfed.js.下载"></script><script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/vendor.bb155d7fb4b6c28b5e8b.js.下载"></script><script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/dita.b2b38c730d788aeb9c91.js.下载"></script><div id="5x6G4zZR9" role="status" aria-live="polite" aria-atomic="false"></div><script src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/pf-usr-chk.js.下载"></script><script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/cookie-consent.js.下载"></script><script type="text/javascript">_satellite.pageBottom();</script><script>_satellite["_runScript9"](function(event, target, Promise) {
_satellite.jnprFloodlight({"src":"5922977","type":"pageview","cat":"pagev0"})

});</script><iframe src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/activityi.html" style="display: none;"></iframe><!-- Google Code for Remarketing Tag -->
<!--------------------------------------------------
Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. See more information and instructions on how to setup the tag on: http://google.com/ads/remarketingsetup
--------------------------------------------------->
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 956680084;
var google_custom_params = window.google_tag_params;
var google_remarketing_only = true;
/* ]]> */
</script>
<script type="text/javascript" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/f(1).txt">
</script>

        <div class="ke-feedback-wrap">
          <div class="ke-feedback collapsed">
           <form id="ke-feedback-form" name="ke-feedback-form">
            <div class="fhead">
              <span class="ke-feedback-icon"><img src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/feedback.svg"></span>
              <span class="ftext">Feedback</span>
              <span class="minimize"><img src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/horizontal_rule.svg"></span>
            </div>
            
            <div class="fbody" style="overflow-y: auto;">
        <div class="fb-askai-prompt-wrap">
          <span class="fb-info-icon"><img src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/info.svg"></span>
          <div class="fb-askai-prompt-text">
            <p>Have you tried using Ask AI? It's quick, easy, and designed to assist you with Juniper Networks' products and solutions.</p>
            <div class="fb-askai-prompt-buttons">
              <button class="fb-askai-prompt-yes">Try Ask AI</button>
            </div>
          </div>
        </div> 
        <div class="fform-body">
            <div class="finit">
              <div>
                <strong>Did this content help you? <span>*</span></strong>
              </div>
              <div class="article-help">
                
                  <label class="flabel">
                    <input type="radio" name="ftype" class="fradio" value="Yes">
                    Yes
                  </label>
                
                  <label class="flabel">
                    <input type="radio" name="ftype" class="fradio" value="Yes...But">
                    Yes...But
                  </label>
                
                  <label class="flabel">
                    <input type="radio" name="ftype" class="fradio" value="No">
                    No
                  </label>
                
              </div>
            </div>
            <div class="probs">
              
                <label>
                  <input type="checkbox" class="prblm-chkbx" value="Info is missing/wrong">
                  Info is missing/wrong
                </label>
              
                <label>
                  <input type="checkbox" class="prblm-chkbx" value="Needs example/video/graphic">
                  Needs example/video/graphic
                </label>
              
                <label>
                  <input type="checkbox" class="prblm-chkbx" value="Errors in grammar/spelling/links">
                  Errors in grammar/spelling/links
                </label>
              
            </div>
            <div class="f-divider">
              <div><strong>I am a:</strong></div>
              <div class="usertype">
                
                  <label>
                    <input type="radio" name="userType" value="Current Customer">
                    Current Customer
                  </label>
                
                  <label>
                    <input type="radio" name="userType" value="Prospective Customer">
                    Prospective Customer
                  </label>
                
                  <label>
                    <input type="radio" name="userType" value="Partner">
                    Partner
                  </label>
                
                  <label>
                    <input type="radio" name="userType" value="Employee">
                    Employee
                  </label>
                
              </div>

              <div class="cust-ask-rating-wrap curr-customer" style="display: none;">
                  <div style="margin-top: 8px;"><strong>This content:</strong></div>
                  <div class="ftrlegend">
                      <span class="legnal">Strongly Disagree</span>
                      <label class="ftlr"><span class="radio"></span> <span class="ftnum">1</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">2</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">3</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">4</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">5</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">6</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">7</span></label>
                      <span class="legvl">Strongly Agree</span>
                  </div>
                  <table class="f-table table-bordered">
                      <tbody><tr>
                          <td class="ftwid">Helped me install or use the product</td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="1" title="Strongly Disagree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="2" title="Disagree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="3" title="Somewhat Disagree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="4" title="Neutral">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="5" title="Somewhat Agree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="6" title="Agree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="install_use_feature" value="7" title="Strongly Agree">
                              </label>
                              </td>
                          
                      </tr>
                      <tr>
                          <td>Accelerated my deployment</td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="1" title="Strongly Disagree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="2" title="Disagree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="3" title="Somewhat Disagree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="4" title="Neutral">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="5" title="Somewhat Agree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="6" title="Agree">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="acc_deploy" value="7" title="Strongly Agree">
                              </label>
                              </td>
                          
                      </tr>
                  </tbody></table>
              </div>

              <div class="cust-ask-rating-wrap prspctv-customer" style="display: none;">
                  <div style="margin-top: 8px;"><strong>This content made me more likely to:</strong></div>
                  <div class="ftrlegend">
                      <span class="legnal">Not at all likely</span>
                      <label class="ftlr"><span class="radio"></span> <span class="ftnum">1</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">2</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">3</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">4</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">5</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">6</span></label><label class="ftlr"><span class="radio"></span> <span class="ftnum">7</span></label>
                      <span class="legvl">Very likely</span>
                  </div>
                  <table class="f-table table-bordered">
                      <tbody><tr>
                      <td class="ftwid">Discuss the product with a co-worker</td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="1" title="Not at all likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="2" title="Not likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="3" title="Less likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="4" title="Neutral">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="5" title="Somewhat likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="6" title="Likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="discuss_product" value="7" title="Very likely">
                              </label>
                              </td>
                          
                      </tr>
                      <tr>
                      <td>Make a purchase inquiry</td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="1" title="Not at all likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="2" title="Not likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="3" title="Less likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="4" title="Neutral">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="5" title="Somewhat likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="6" title="Likely">
                              </label>
                              </td>
                          
                              <td>
                              <label>
                                  <input type="radio" class="ask-rating" name="make_purchase" value="7" title="Very likely">
                              </label>
                              </td>
                          
                      </tr>
                  </tbody></table>
              </div>

            </div>
            <div class="feedback-widget">
              <div id="feedback-more">
                <p class="mrg0"><strong>Tell us more (optional)</strong></p>
                <textarea id="comment" maxlength="800"></textarea>
                <div id="comment-max" class="small-rt" style="display: none;">
                  Maximum of 800 characters allowed.
                </div>
                <p class="mrg0"><strong>What are you trying to do? (optional)</strong></p>
                <textarea id="addlComments" maxlength="800"></textarea>
                <div id="addlComments-max" class="small-rt" style="display: none;">
                  Maximum of 800 characters allowed.
                </div>
                <div style="font-size: 12px">
                  Please provide your email address so we can reach out to you regarding your feedback.
                </div>
                <input id="useremail" type="text" placeholder="Email (optional)">
                <div id="invalid-email" class="fb-invalid-email" style="display: none;">
                  Enter a valid email address
                </div>
                <div class="fbtn-group">
                  <div id="ke-fb-hcaptcha" style="display:none;"></div>
                  <div class="fb-user-actions">
                    <input id="submit-btn" type="button" class="button button-darkgreen button-disable" value="Submit" disabled="">
                    <input id="cancel-btn" type="button" class="button button-white" value="Cancel">
                  </div>
                  <div class="fb-submit-in-progress">Processing your feedback. Please wait a moment.</div>
                </div>
                <div id="recaptcha"></div>
                <p class="recap-privacy">
                  This site is protected by hCaptcha and its
                  <a href="https://hcaptcha.com/privacy" target="_blank">Privacy Policy</a> and
                  <a href="https://hcaptcha.com/terms" target="_blank">Terms of Service</a> apply.
                </p>
              </div>
            </div>
            </div>
            <p class="ke-fb-thanks">Feedback Received. Thank You!</p>
            <p class="ke-failed-fb-thanks">Feedback not received. Please try again.</p>
            <div class="fload" style="display: none;"></div>
          </div>
      </form>
      </div>
    </div>
    
<noscript></noscript>
<script>_satellite["_runScript10"](function(event, target, Promise) {
if(typeof jQuery!='undefined'){jQuery('.country-select').on('change',function(){s.tl({href:'-'},'o','Language Dropdown',{eVar22:'Language Dropdown',eVar23:'Change',eVar24:this.value,linkTrackVars:'eVar22,eVar23,eVar24'})})}
});</script><script>_satellite["_runScript11"](function(event, target, Promise) {
var doMediaMath = function(id){
  var elemDiv = document.createElement('script');
  elemDiv.src = "//pixel.mathtag.com/event/js?mt_id=" + id + "&mt_adid=251529&mt_exem=&mt_excl=&v1=&v2=&v3=&s1=&s2=&s3=";
  document.body.appendChild(elemDiv);
}
var urlCheck = function(href){
  if (href.indexOf('ent-ww-eguide-36309') >= 0){
    doMediaMath('1601667');
  } else if (href.indexOf('gap-case-study-en') >= 0 ){
    doMediaMath('1601668');
  } else if (href.indexOf('ent-ww-video2-36309') >= 0){
    doMediaMath('1601669');
  } else if (href.indexOf('ent-ww-eguide-36309-en') >= 0){
    doMediaMath('1601670');
  } else if (href.indexOf('ent--sdwan-video1-36309-en') >= 0){
    doMediaMath('1601671');
  } else if (href.indexOf('whitepapers-600072-en') >= 0){
    doMediaMath('1601672');
    } else if (href.indexOf('ent-dc-video1-36309') >= 0){
    doMediaMath('1601673');
  } 
}
var ref = document.referrer;
var loc = document.location.href;

if (loc.indexOf('/c/ent-assurance-36309-en?x=fK8SL2') > -1){
  doMediaMath('1601666');
}
if ((loc.indexOf('/c/ent-assurance-36309-en?x=fK8SL2') === -1) && (ref.indexOf('/c/ent-assurance-36309-en?x=fK8SL2') > -1)){
  urlCheck(loc);
}


});</script><script>_satellite["_runScript12"](function(event, target, Promise) {
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'utm_campaign') ? document.cookie = 'utm_campaign' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'utm_content') ? document.cookie = 'utm_content' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'utm_medium') ? document.cookie = 'utm_medium' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'utm_term') ? document.cookie = 'utm_term' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'utm_source') ? document.cookie = 'utm_source' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'cid') ? document.cookie = 'cid' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);
document.cookie.split(' ').reduce((prev, curr)=> { let current = curr.substr(0, curr.indexOf("=")); (acc.includes(current) && current === 'metadata_cid') ? document.cookie = 'metadata_cid' +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;' :''; acc.push(current); return acc}, acc = []);

});</script><script>_satellite["_runScript13"](function(event, target, Promise) {
//BEGIN DEMANDBASE CODE
try {

	if (window.localStorage) {

		var standardDimensions = localStorage.getItem('Demandbase.AdobeLaunch.demandbaseDataElement1') || '';
		var customDimensions = localStorage.getItem('Demandbase.AdobeLaunch.demandbaseDataElement2') || '';
		var customDimensions2 = localStorage.getItem('Demandbase.AdobeLaunch.demandbaseDataElement3')|| '';


		var standardDimensionsArr = standardDimensions.split(":");
		var customDimensionsArr = customDimensions.split(":");
		var customDimensions2Arr = customDimensions2.split(":");

		s.eVar30 = standardDimensionsArr[0];
		s.eVar31 = standardDimensionsArr[1];
		s.eVar32 = standardDimensionsArr[2];
		s.eVar33 = standardDimensionsArr[3];
		s.eVar34 = standardDimensionsArr[4];
		s.eVar35 = standardDimensionsArr[5];
		s.eVar36 = standardDimensionsArr[6];
		s.eVar37 = standardDimensionsArr[7];

		s.eVar38 = customDimensionsArr[0];
		s.eVar39 = customDimensionsArr[1];
		s.eVar40 = customDimensionsArr[2];
		s.eVar41 = customDimensionsArr[3];
		s.eVar42 = customDimensionsArr[4];
		s.eVar43 = customDimensionsArr[5];
		s.eVar44 = customDimensionsArr[6];
		s.eVar45 = customDimensionsArr[7];

		s.eVar46 = customDimensions2Arr[0];
		s.eVar25 = customDimensions2Arr[1];
		s.eVar26 = customDimensions2Arr[2];
		s.eVar27 = customDimensions2Arr[3];
		s.eVar28 = customDimensions2Arr[4];
		s.eVar29 = customDimensions2Arr[5];
		s.eVar19 = customDimensions2Arr[6];
		s.eVar20 = customDimensions2Arr[7];

	}
}
catch (e) {
    if(window.console){console.log("DB _ ERR " + e.message);}
}
//END DEMANDBASE CODE
});</script><script>_satellite["_runScript14"](function(event, target, Promise) {
!function(e,t,n,s,o){var a=t.createElement(n),c=t.getElementsByTagName(n)[0];a.async=!0,a.id=o,a.src=("https:"==document.location.protocol?"https://":"http://")+s,c.parentNode.insertBefore(a,c)}(window,document,"script","scripts.demandbase.com/wRPiG49f.min.js","demandbase_js_lib");
});</script><iframe alt="" aria-hidden="true" width="0" height="0" sandbox="" id="db-sync" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/sync.html" style="display: none; border: 0px;"></iframe><img alt="" aria-hidden="true" width="0" height="0" id="db_lr_pixel_ad" src="./BGP 会话的负载平衡 _ Junos OS _ Juniper Networks_files/464526.gif" style="display: none;"></body></html>